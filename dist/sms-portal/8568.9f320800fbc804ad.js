"use strict";(self.webpackChunksms_portal=self.webpackChunksms_portal||[]).push([[8568],{8568:(R,u,o)=>{o.d(u,{_:()=>Z});var g=o(553),_=o(2438),D=o(2181),C=o(3620),A=o(3997),S=o(9397),e=o(9212),m=o(9455),w=o(2787),c=o(7291),L=o(1343),f=o(3828),I=o(7235),h=o(6223),y=o(2857),p=o(6814),b=o(4807);const v=["inputer"];function T(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",5)(1,"ng-select",32),e.NdJ("change",function(s){e.CHM(t);const i=e.oxw();return e.KtG(i.onDropdownAssetStatusValueChange(s))})("ngModelChange",function(s){e.CHM(t);const i=e.oxw();return e.KtG(i.selectedDropDownAssetStatusIdValue=s)}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("items",t.arrayListDropDownAssetStatus)("clearable",!0)("ngModel",t.selectedDropDownAssetStatusIdValue)}}function x(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",33)(1,"input",34),e.NdJ("change",function(s){e.CHM(t);const i=e.oxw();return e.KtG(i.onCheckboxChange(s))}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("checked",t.checkUncheckAll())}}function N(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"th",36)(2,"div",33)(3,"input",37),e.NdJ("ngModelChange",function(s){const r=e.CHM(t).index,d=e.oxw(2);return e.KtG(d.assetList[r].checked=s)})("change",function(){const s=e.CHM(t),i=s.index,r=s.$implicit,d=e.oxw(2);return e.KtG(d.getAssetlistChecked(d.assetList[i].checked,r))}),e.qZA()()(),e.TgZ(4,"td")(5,"span")(6,"div",38)(7,"div",39)(8,"div",40),e._UZ(9,"img",41),e.qZA()(),e.TgZ(10,"div",42)(11,"h5",43)(12,"a",44),e._uU(13),e.qZA()(),e.TgZ(14,"p",45)(15,"a",46),e._uU(16),e.qZA()(),e.TgZ(17,"p",47)(18,"span",48),e._uU(19),e.qZA()()()()()()()}if(2&n){const t=l.$implicit,a=l.index,s=e.oxw(2);e.xp6(3),e.s9C("value",t.id),e.Q6J("ngModel",s.assetList[a].checked),e.xp6(6),e.Q6J("src",t.assetImagePath?s.imageUrl+t.assetImagePath:"../../../../../assets/images/placeholderimage.png",e.LSH),e.xp6(4),e.Oqu(t.assetName),e.xp6(3),e.hij("",t.assetTagId," "),e.xp6(2),e.Q6J("ngClass",s.returnStatusBadgeClassesStatus(t.assetStatusId)),e.xp6(1),e.Oqu(t.assetStatus)}}function M(n,l){if(1&n&&(e.ynx(0),e.YNc(1,N,20,7,"tr",35),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.assetList)}}function P(n,l){1&n&&(e.ynx(0),e.TgZ(1,"tr")(2,"td",49)(3,"p",50),e._uU(4,"No Data Found"),e.qZA()()(),e.BQk())}function O(n,l){1&n&&(e._UZ(0,"i",54),e._uU(1," Prev "))}function k(n,l){1&n&&(e._uU(0," Next "),e._UZ(1,"i",55))}function E(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"ngb-pagination",51),e.NdJ("pageChange",function(s){e.CHM(t);const i=e.oxw();return e.KtG(i.page=s)})("pageChange",function(s){e.CHM(t);const i=e.oxw();return e.KtG(i.OnChangesPage(s))}),e.YNc(1,O,2,0,"ng-template",52)(2,k,2,0,"ng-template",53),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("collectionSize",t.totalRecordsFromApi)("page",t.page)("pageSize",t.pageSize)("maxSize",1)("rotate",!0)}}function V(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",56)(1,"h4",57),e._uU(2,"Qr-Code"),e.qZA(),e.TgZ(3,"button",58),e.NdJ("click",function(){const i=e.CHM(t).$implicit;return e.KtG(i.dismiss("Cross click"))}),e.TgZ(4,"span",59),e._uU(5,"\xd7"),e.qZA()()(),e.TgZ(6,"div",60),e._UZ(7,"img",61),e.qZA()}if(2&n){const t=e.oxw();e.xp6(7),e.Q6J("src",t.imageUrl+(null==t.assetQrData?null:t.assetQrData.qrCodeImgPath),e.LSH)}}let Z=(()=>{class n{constructor(t,a,s,i,r,d,U,j,J,B){this.dropdownService=t,this.router=a,this.modalService=s,this.assetService=i,this.authService=r,this.menuService=d,this.formBuilder=U,this.commonFunctionService=j,this.dropdownServices=J,this.modal=B,this.isProject=!1,this.shownCol4=!0,this.label="Asset Management",this.breadCrumbItems=[{label:"Asset"},{label:"Asset List",active:!0}],this.payload={displayLength:10,displayStart:0,SearchCompanyId:null,SearchClientId:null,SearchDepartmentId:null,SearchLocationId:null,SearchAssetStatusId:null,SearchCategoryId:null,SearchSubCategoryId:null,SearchAssetName:null,SearchAssetTagId:null,SearchPoNumber:null},this.to=0,this.from=0,this.pageSize=10,this.totalRecordsFromApi=0,this.assetList=[],this.page=1,this.collectionSize=0,this.imageUrl=g.N.apiUrl,this.arrayListDropDownCompany=[],this.arrayListDropDownClientList=[],this.arrayListDropDownProjectOrDeparmentList=[],this.arrayListDropDownAssetStatus=[],this.arrayListDropDownLocationList=[],this.checkedAssetList=[],this.selectedAsset=[],this.isProject=this.authService.getisProject()}ngOnInit(){this.payload.SearchCompanyId=this.selectedDropDownCompanyIdValue,this.payload.SearchClientId=this.selectedDropDownClientIdValue,this.payload.SearchDepartmentId=this.selectedDropDownProjectOrDeparmentIdValue,this.checkedAssetList=this.selectedAsset?this.selectedAsset:[],this.payload.SearchAssetStatusId=this.SearchAssetStatusIdShown?this.SearchAssetStatusIdShown:null,this.loadData(),this.getLocationListDrobDown(),this.getDropdownCompanyList(),this.getDropdownAssetStatusList("AssetList")}ngOnChanges(t){this.payload.SearchCompanyId=this.selectedDropDownCompanyIdValue,this.payload.SearchClientId=this.selectedDropDownClientIdValue,this.payload.SearchDepartmentId=this.selectedDropDownProjectOrDeparmentIdValue,this.payload.SearchAssetStatusId=this.SearchAssetStatusIdShown?this.SearchAssetStatusIdShown:null,this.checkedAssetList=this.selectedAsset?this.selectedAsset:[],this.loadData(),this.getDropdownCompanyList(),this.getLocationListDrobDown(),this.getDropdownAssetStatusList("AssetList")}getLocationListDrobDown(){this.dropdownServices.GetLocationListDrobDown({SearchCompanyId:this.selectedDropDownCompanyIdValue,SearchClientId:this.selectedDropDownClientIdValue,SearchDepartmentId:this.selectedDropDownProjectOrDeparmentIdValue}).subscribe(a=>{this.arrayListDropDownLocationList=a.list})}onDropdownLocationValueChange(t){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchLocationId=this.selectedDropDownLocationIdValue,this.loadData()}navigateToAdd(){this.router.navigate(["/asset-management/asset/createasset"])}navigateToSpareList(){this.router.navigate(["/asset-management/spare/list-spare"])}navigateToQrList(){this.router.navigate(["/asset-management/asset/qr-detail"])}OnChangesPage(t){t&&(this.payload.displayStart=this.pageSize*(t-1),this.loadData())}loadData(){this.SearchAssetStatusIdShown?this.assetService.GetV2_DeliveryAssetOnly_ByPagination(this.commonFunctionService.clean(this.payload)).subscribe(t=>{this.assetList=t.list,this.checkedAssetList.length>0&&(this.assetList=this.assetList.filter(a=>((this.checkedAssetList?.filter(i=>i.id==a.id)).length>0&&(a.checked=!0),1))),this.assetList.length>0?(this.totalRecordsFromApi=t.list[0].totalCount,this.from=t.list.reduce((a,s)=>s.rowNum<a?s.rowNum:a,t.list[0].rowNum),this.to=t.list.reduce((a,s)=>s.rowNum>a?s.rowNum:a,t.list[0].rowNum),this.pageSize=this.payload.displayLength):(this.totalRecordsFromApi=0,this.from=0,this.to=0,this.pageSize=this.payload.displayLength)}):this.assetService.GetV2_CommanAssetList_ByPagination(this.commonFunctionService.clean(this.payload)).subscribe(t=>{this.assetList=t.list,this.checkedAssetList.length>0&&(this.assetList=this.assetList.filter(a=>((this.checkedAssetList?.filter(i=>i.id==a.id)).length>0&&(a.checked=!0),1))),this.assetList.length>0?(this.totalRecordsFromApi=t.list[0].totalCount,this.from=t.list.reduce((a,s)=>s.rowNum<a?s.rowNum:a,t.list[0].rowNum),this.to=t.list.reduce((a,s)=>s.rowNum>a?s.rowNum:a,t.list[0].rowNum),this.pageSize=this.payload.displayLength):(this.totalRecordsFromApi=0,this.from=0,this.to=0,this.pageSize=this.payload.displayLength)})}viewQrCodeImage(t,a){this.assetQrData=a,this.modalService.open(t,{ariaLabelledBy:"modal-basic-title",size:"lg",centered:!0,backdrop:"static",keyboard:!1})}viewHandler(t){this.assetService.sendAssetId=t,this.router.navigate(["/asset-management/asset/viewasset"])}editHandler(t){this.assetService.sendAssetId=t,this.router.navigate(["/asset-management/asset/editasset"])}onTypeAssetNameChange(){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchAssetName=this.typeAssetNameValue,this.loadData()}resetSerachVariable(){this.selectedDropDownAssetStatusIdValue=null,this.selectedDropDownLocationIdValue=null,this.typeAssetNameValue=null,this.payload={displayLength:10,displayStart:0,SearchCompanyId:this.selectedDropDownCompanyIdValue,SearchClientId:this.selectedDropDownClientIdValue,SearchDepartmentId:this.selectedDropDownProjectOrDeparmentIdValue,SearchLocationId:null,SearchAssetStatusId:this.SearchAssetStatusIdShown?this.SearchAssetStatusIdShown:null,SearchCategoryId:null,SearchSubCategoryId:null,SearchAssetName:null,SearchAssetTagId:null},this.page=1,this.loadData()}getDropdownCompanyList(){this.dropdownServices.GetCompanyListDrobDown({}).subscribe(t=>{this.arrayListDropDownCompany=t.list})}getDropdownClientlist(){this.dropdownServices.GetClientListDrobDown({SearchCompanyId:this.selectedDropDownCompanyIdValue}).subscribe(a=>{this.arrayListDropDownClientList=a.list})}getDropdownDepartmentList(){this.dropdownServices.GetDepartmentListDrobDown({SearchCompanyId:this.selectedDropDownCompanyIdValue,SearchClientId:this.selectedDropDownClientIdValue}).subscribe(a=>{this.arrayListDropDownProjectOrDeparmentList=a.list})}onDropdownCompanyValueChange(t){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchCompanyId=this.selectedDropDownCompanyIdValue,this.selectedDropDownClientIdValue=null,this.selectedDropDownProjectOrDeparmentIdValue=null,this.payload.SearchClientId=this.selectedDropDownClientIdValue,this.payload.SearchDepartmentId=this.selectedDropDownProjectOrDeparmentIdValue,this.arrayListDropDownProjectOrDeparmentList=[],this.getDropdownClientlist(),this.loadData()}onDropdownClientValueChange(t){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchClientId=this.selectedDropDownClientIdValue,this.selectedDropDownProjectOrDeparmentIdValue=null,this.payload.SearchDepartmentId=this.selectedDropDownProjectOrDeparmentIdValue,this.getDropdownDepartmentList(),this.loadData()}onDropdownDepartmentValueChange(t){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchDepartmentId=this.selectedDropDownProjectOrDeparmentIdValue,this.loadData()}getDropdownAssetStatusList(t){this.assetService.getAssetStatusList(t).subscribe(a=>{this.arrayListDropDownAssetStatus=a})}onDropdownAssetStatusValueChange(t){this.payload.SearchAssetStatusId=this.selectedDropDownAssetStatusIdValue,this.loadData()}uniqTheObject(t,a){return[...new Map(t.map(s=>[a(s),s])).values()]}onCheckboxChange(t){return this.assetList.length&&(this.assetList.forEach(a=>a.checked=t.target.checked),1==t.target.checked?this.assetList.forEach((a,s)=>{this.checkedAssetList.push(a)}):this.checkedAssetList=this.checkedAssetList.filter(a=>!(this.assetList.filter(i=>i.id==a.id).length>0)),this.checkedAssetList=this.uniqTheObject(this.checkedAssetList,a=>a.id)),!1}checkUncheckAll(){return 0!=this.assetList.length&&this.assetList.every(t=>t.checked)}getAssetlistChecked(t,a){1==t?this.checkedAssetList.push(a):this.checkedAssetList.forEach((s,i)=>{s.id==a.id&&this.checkedAssetList.splice(i,1)})}removeCheckedAssetList(t){this.assetList.forEach((a,s)=>{a.id==t.id&&(this.assetList[s].checked=!1)}),this.checkedAssetList.forEach((a,s)=>{a.id==t.id&&this.checkedAssetList.splice(s,1)})}ngAfterViewInit(){(0,_.R)(this.input.nativeElement,"input").pipe((0,D.h)(Boolean),(0,C.b)(1e3),(0,A.x)(),(0,S.b)(t=>{this.onTypeAssetNameChange()})).subscribe()}close(){this.modal.dismiss(this.checkedAssetList)}submit(){this.modal.dismiss(this.checkedAssetList)}returnStatusBadgeClassesStatus(t){return this.commonFunctionService.returnStatusBadgeClasses(t)}static{this.\u0275fac=function(a){return new(a||n)(e.Y36(m.V),e.Y36(w.F0),e.Y36(c.FF),e.Y36(L.d),e.Y36(f.u),e.Y36(I.l),e.Y36(h.qu),e.Y36(y.K),e.Y36(m.V),e.Y36(c._B))}}static{this.\u0275cmp=e.Xpm({type:n,selectors:[["app-new-asset-list-common"]],viewQuery:function(a,s){if(1&a&&e.Gf(v,7),2&a){let i;e.iGM(i=e.CRH())&&(s.input=i.first)}},inputs:{shownCol4:"shownCol4",selectedDropDownCompanyIdValue:"selectedDropDownCompanyIdValue",selectedDropDownClientIdValue:"selectedDropDownClientIdValue",selectedDropDownProjectOrDeparmentIdValue:"selectedDropDownProjectOrDeparmentIdValue",SearchAssetStatusIdShown:"SearchAssetStatusIdShown",selectedAsset:"selectedAsset"},features:[e.TTD],decls:45,vars:15,consts:[[1,"offcanvas-header","border-bottom"],[1,"offcanvas-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"offcanvas-body"],[1,"row","mb-3"],[1,"col-lg","mb-2"],["bindLabel","locationName","bindValue","locationId","id","locationName","placeholder","Select Location","for","locationName",1,"w-100","mr-2",3,"items","disabled","clearable","ngModel","change","ngModelChange"],["class","col-lg mb-2",4,"ngIf"],[1,"search-box"],["type","search","name","searchTerm","placeholder","Search for asset name",1,"form-control",3,"ngModel","ngModelChange"],["inputer",""],[1,"ri-search-line","search-icon"],[1,"col-lg","text-end","mb-2"],["type","button","ngbTooltip","Remove All Search",1,"btn","btn-danger","ms-1",3,"click"],[1,"ri-refresh-fill","me-1","align-bottom"],[1,"row","mt-2","border","border-dashed","border-top"],[1,"col-md-12","col-lg-12","mt-2","mb-2"],[1,"table-responsive","table-card","mb-0"],[1,"table"],[1,"bg-light","text-muted","text-uppercase"],["scope","col",2,"width","50px"],["class","form-check",4,"ngIf"],[4,"ngIf"],[1,"row","justify-content-md-between","align-items-md-center","gy-2"],[1,"col","col-sm-12","col","col-md-6"],["id","tickets-table_info","role","status","aria-live","polite",1,"dataTables_info","mb-2"],[1,"text-sm-right","float-end","listjs-pagination"],[3,"collectionSize","page","pageSize","maxSize","rotate","pageChange",4,"ngIf"],[1,"offcanvas-footer","text-end","mb-4","pb-2"],["type","button",1,"btn","btn","btn-outline-danger","me-2",3,"click"],["type","button","ngbAutofocus","",1,"btn","btn-success","me-2",3,"disabled","click"],["qrView",""],["bindLabel","assetStatus","bindValue","assetStatusId","id","assetStatus","placeholder","Select Asset Status","for","assetStatus",1,"mr-2",3,"items","clearable","ngModel","change","ngModelChange"],[1,"form-check"],["type","checkbox","id","checkAll","value","option",1,"form-check-input",3,"checked","change"],[4,"ngFor","ngForOf"],["scope","row"],["type","checkbox","name","checkAll",1,"form-check-input",3,"value","ngModel","ngModelChange","change"],[1,"d-flex","align-items-center"],[1,"flex-shrink-0","me-3"],[1,"avatar-sm","bg-light","rounded","p-1"],["alt","",1,"img-fluid-with-HW","d-block",3,"src"],[1,"flex-grow-1"],[1,"fs-14","mb-0"],["href","javascript:void(0)",1,"text-body"],[1,"text-muted","mb-0"],["href","javascript:void(0)",1,"fw-sm","link-primary"],[1,"text-muted","mb-0","status","aa"],[3,"ngClass"],["colspan","2"],[1,"text-center"],[3,"collectionSize","page","pageSize","maxSize","rotate","pageChange"],["ngbPaginationPrevious",""],["ngbPaginationNext",""],[1,"ci-arrow-left","me-2"],[1,"ci-arrow-right","ms-2"],[1,"modal-header"],["id","modal-title",1,"modal-title"],["type","button","aria-label","Close button","aria-describedby","modal-title",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","text-center"],["alt","qr",1,"qrCode-img",3,"src"]],template:function(a,s){1&a&&(e.TgZ(0,"div",0)(1,"h5",1),e._uU(2),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return s.close()}),e.qZA()(),e.TgZ(4,"div",3)(5,"div",4)(6,"div",5)(7,"ng-select",6),e.NdJ("change",function(r){return s.onDropdownLocationValueChange(r)})("ngModelChange",function(r){return s.selectedDropDownLocationIdValue=r}),e.qZA()(),e.YNc(8,T,2,3,"div",7),e.TgZ(9,"div",5)(10,"div",8)(11,"input",9,10),e.NdJ("ngModelChange",function(r){return s.typeAssetNameValue=r}),e.qZA(),e._UZ(13,"i",11),e.qZA()(),e.TgZ(14,"div",12)(15,"button",13),e.NdJ("click",function(){return s.resetSerachVariable()}),e._UZ(16,"i",14),e._uU(17," Clear "),e.qZA()()(),e.TgZ(18,"div",15)(19,"div",16)(20,"div",17)(21,"table",18)(22,"thead")(23,"tr",19)(24,"th",20),e.YNc(25,x,2,1,"div",21),e.qZA(),e.TgZ(26,"th"),e._uU(27,"Asset"),e.qZA()()(),e.TgZ(28,"tbody"),e.YNc(29,M,2,1,"ng-container",22)(30,P,5,0,"ng-container",22),e.qZA()()(),e.TgZ(31,"div",23)(32,"div",24)(33,"div",25),e._uU(34),e.qZA()(),e.TgZ(35,"div",24)(36,"div",26),e.YNc(37,E,3,5,"ngb-pagination",27),e.qZA()()()()()(),e.TgZ(38,"div",28)(39,"button",29),e.NdJ("click",function(){return s.close()}),e._uU(40," Close "),e.qZA(),e.TgZ(41,"button",30),e.NdJ("click",function(){return s.submit()}),e._uU(42," Submit "),e.qZA()(),e.YNc(43,V,8,1,"ng-template",null,31,e.W1O)),2&a&&(e.xp6(2),e.hij(" ",3==s.SearchAssetStatusIdShown?"In-Service ":"","Asset List "),e.xp6(5),e.Q6J("items",s.arrayListDropDownLocationList)("disabled",!s.selectedDropDownProjectOrDeparmentIdValue)("clearable",!0)("ngModel",s.selectedDropDownLocationIdValue),e.xp6(1),e.Q6J("ngIf",!s.SearchAssetStatusIdShown),e.xp6(3),e.Q6J("ngModel",s.typeAssetNameValue),e.xp6(14),e.Q6J("ngIf",0!=s.assetList.length),e.xp6(4),e.Q6J("ngIf",0!=s.assetList.length),e.xp6(1),e.Q6J("ngIf",0==s.assetList.length),e.xp6(4),e.lnq(" Showing ",s.from," to ",s.to," of ",s.totalRecordsFromApi," entries "),e.xp6(3),e.Q6J("ngIf",s.totalRecordsFromApi>s.pageSize),e.xp6(4),e.Q6J("disabled",0==s.selectedAsset.length))},dependencies:[p.mk,p.sg,p.O5,h.Fj,h.Wl,h.JJ,h.On,c.N9,c.GZ,c.ju,c._L,b.w9],styles:[".fw-sm[_ngcontent-%COMP%]{font-size:12px;font-weight:800}.transpart[_ngcontent-%COMP%]{background-color:transparent}.close[_ngcontent-%COMP%]{padding:8px;margin:2px}.w-75[_ngcontent-%COMP%]{width:400px!important}.col-w-30[_ngcontent-%COMP%]{width:32%}.img-fluid-with-HW[_ngcontent-%COMP%]{height:45px;width:45px}"]})}}return n})()}}]);