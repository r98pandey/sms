"use strict";(self.webpackChunksms_portal=self.webpackChunksms_portal||[]).push([[3187],{276:(ge,b,l)=>{l.d(b,{R:()=>k});var t=l(9862),g=l(553),v=l(9212);let k=(()=>{class D{constructor(S){this.http=S,this.sendServicOrderId=null,this.lastStoreRouterDashboardName="/maintenace-management/dashboard/help-desk-dashboard"}getWoList(S){return this.http.post(g.N.apiUrl+"api/Maintenance/GetV2_WOList_ByPagination",S,{headers:(new t.WM).set("Content-Type","application/json")})}getV2_ServiceOrderDetailOnly(S){return this.http.post(g.N.apiUrl+"api/Maintenance/GetV2_ServiceOrderDetailOnly",S,{headers:(new t.WM).set("Content-Type","application/json")})}updateExpStarWorkDateTime(S){return this.http.post(g.N.apiUrl+"api/Maintenance/UpdateExpStarWorkDateTime",S,{headers:(new t.WM).set("Content-Type","application/json")})}getTechnitionAttendanceListByTaskForSeerviceOrder(S){return this.http.post(g.N.apiUrl+"api/Maintenance/GetTechnitionAttendanceListByTaskForSeerviceOrder",S,{headers:(new t.WM).set("Content-Type","application/json")})}getV2_TotalCountServiceOrderOnly(){return this.http.post(g.N.apiUrl+"api/MaintentDash/GetV2_TotalCountServiceOrderOnly",{headers:(new t.WM).set("Content-Type","application/json")})}endServiceOrder(S){return this.http.post(g.N.apiUrl+"api/Maintenance/EndServiceOrder",S,{headers:(new t.WM).set("Content-Type","application/json")})}getMaintenanceStatus(S){return this.http.get(g.N.apiUrl+"api/Maintenance/GetMaintenanceStatus/"+S,{headers:(new t.WM).set("Content-Type","application/json")})}getStartServiceOrder(S){return this.http.post(g.N.apiUrl+"api/Maintenance/StartServiceOrder",S,{headers:(new t.WM).set("Content-Type","application/json")})}static{this.\u0275fac=function(y){return new(y||D)(v.LFG(t.eN))}}static{this.\u0275prov=v.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"})}}return D})()},9478:(ge,b,l)=>{l.d(b,{m:()=>he});var t=l(9212),g=l(6223),v=l(3519),k=l.n(v),D=l(553),I=l(7930),y=l(6676),A=l(1517),R=l(2787),Z=l(7291),J=l(5143),e=l(3828),E=l(9750),L=l(2857),p=l(6814),O=l(6762),W=l(9417),N=l(4647),F=l(4807),w=l(9275);const V=["successDataModal"];function B(d,_){1&d&&(t.TgZ(0,"small",37),t._uU(1," Category is Required "),t.qZA())}function j(d,_){if(1&d&&(t.TgZ(0,"div"),t.YNc(1,B,2,0,"small",36),t.qZA()),2&d){const i=t.oxw();t.xp6(1),t.Q6J("ngIf",null==i.category||null==i.category.errors?null:i.category.errors.required)}}function M(d,_){1&d&&(t.TgZ(0,"small",37),t._uU(1," Priority is Required "),t.qZA())}function U(d,_){if(1&d&&(t.TgZ(0,"div"),t.YNc(1,M,2,0,"small",36),t.qZA()),2&d){const i=t.oxw();t.xp6(1),t.Q6J("ngIf",null==i.priority||null==i.priority.errors?null:i.priority.errors.required)}}function q(d,_){1&d&&(t.TgZ(0,"small",37),t._uU(1," Support Type is Required "),t.qZA())}function Q(d,_){if(1&d&&(t.TgZ(0,"div"),t.YNc(1,q,2,0,"small",36),t.qZA()),2&d){const i=t.oxw();t.xp6(1),t.Q6J("ngIf",null==i.supportType||null==i.supportType.errors?null:i.supportType.errors.required)}}function P(d,_){if(1&d){const i=t.EpF();t.TgZ(0,"i",38),t.NdJ("click",function(){t.CHM(i);const n=t.oxw();return t.KtG(n.clearChangDate())}),t.qZA()}}function K(d,_){if(1&d){const i=t.EpF();t.TgZ(0,"i",38),t.NdJ("click",function(){t.CHM(i);const n=t.oxw(2);return t.KtG(n.clearChangTime())}),t.qZA()}}function G(d,_){if(1&d){const i=t.EpF();t.TgZ(0,"div",5)(1,"div",6)(2,"label",7),t._uU(3,"Visit/Attend Time "),t.YNc(4,K,1,0,"i",15),t.qZA(),t.TgZ(5,"input",39),t.NdJ("blur",function(){t.CHM(i);const n=t.oxw();return t.KtG(n.formatTime(n.time.value))}),t.qZA(),t._UZ(6,"ngx-mat-timepicker",40,41),t.qZA()()}if(2&d){const i=t.MAs(7),s=t.oxw();t.xp6(4),t.Q6J("ngIf",s.time.value),t.xp6(1),t.Q6J("ngxMatTimepicker",i)}}function z(d,_){if(1&d){const i=t.EpF();t.TgZ(0,"i",38),t.NdJ("click",function(){t.CHM(i);const n=t.oxw();return t.KtG(n.clearChangeExpectedComplitionDate())}),t.qZA()}}function Y(d,_){if(1&d){const i=t.EpF();t.TgZ(0,"div",42)(1,"button",43),t.NdJ("click",function(){t.CHM(i);const n=t.oxw(),u=t.MAs(71);return t.KtG(n.openModalTechnician(u))}),t._UZ(2,"i",44),t._uU(3," Add Members "),t.qZA()()}}function H(d,_){1&d&&(t.TgZ(0,"div",45)(1,"div",46)(2,"h5",47)(3,"a",48),t._uU(4," Full Name "),t.qZA()()(),t._UZ(5,"div",49),t.qZA())}function $(d,_){if(1&d){const i=t.EpF();t.TgZ(0,"div",45)(1,"div",50),t._UZ(2,"img",51),t.qZA(),t.TgZ(3,"div",46)(4,"h5",47)(5,"a",48),t._uU(6),t.qZA(),t.TgZ(7,"p",52)(8,"span"),t._UZ(9,"i",53),t._uU(10),t.qZA()()()(),t.TgZ(11,"div",42)(12,"div",54)(13,"div",55)(14,"button",56),t.NdJ("click",function(){const u=t.CHM(i).$implicit,C=t.oxw();return t.KtG(C.unCheckItem(u))}),t._UZ(15,"i",57),t.qZA()()()()()}if(2&d){const i=_.$implicit,s=t.oxw();t.xp6(2),t.s9C("src",i.profileImageUrl?s.apiUrl+i.profileImageUrl:"../../../../../assets/images/placeholderimage.png",t.LSH),t.xp6(4),t.hij(" ",i.fullName," "),t.xp6(4),t.Oqu(i.phoneNumber)}}function X(d,_){1&d&&(t.TgZ(0,"div",58)(1,"p"),t._uU(2,"No Member Selected"),t.qZA()())}function ee(d,_){1&d&&(t.TgZ(0,"span",63)(1,"span",64),t._uU(2,"Loading..."),t.qZA()())}function te(d,_){if(1&d){const i=t.EpF();t.ynx(0),t.TgZ(1,"div",59)(2,"button",60),t.NdJ("click",function(){t.CHM(i);const n=t.oxw();return t.KtG(n.goBack())}),t._uU(3," Back "),t.qZA(),t.TgZ(4,"button",61),t.NdJ("click",function(){t.CHM(i);const n=t.oxw();return t.KtG(n.confirmation())}),t.TgZ(5,"span",45),t.YNc(6,ee,3,0,"span",62),t.TgZ(7,"span",46),t._uU(8,"Submit"),t.qZA()()()(),t.BQk()}if(2&d){const i=t.oxw();t.xp6(4),t.Q6J("disabled",i.returnValueDisabled()||i.loadingForSubmitBtn),t.xp6(2),t.Q6J("ngIf",i.loadingForSubmitBtn)}}function re(d,_){1&d&&(t.TgZ(0,"span",63)(1,"span",64),t._uU(2,"Loading..."),t.qZA()())}function ie(d,_){if(1&d){const i=t.EpF();t.ynx(0),t.TgZ(1,"div",59)(2,"button",60),t.NdJ("click",function(){t.CHM(i);const n=t.oxw();return t.KtG(n.goBack())}),t._uU(3," Back "),t.qZA(),t.TgZ(4,"button",61),t.NdJ("click",function(){t.CHM(i);const n=t.oxw();return t.KtG(n.serviceOrderConfirmation())}),t.TgZ(5,"span",45),t.YNc(6,re,3,0,"span",62),t.TgZ(7,"span",46),t._uU(8,"Submit"),t.qZA()()()(),t.BQk()}if(2&d){const i=t.oxw();t.xp6(4),t.Q6J("disabled",i.returnValueDisabled2()||i.loadingForSubmitBtn)("disabled",i.serviceOrderFrom.invalid&&!i.date.value||!i.time.value||i.returnValueDisabled()||0==i.selectedTech.length&&i.loadingForSubmitBtn),t.xp6(2),t.Q6J("ngIf",i.loadingForSubmitBtn)}}function ne(d,_){if(1&d){const i=t.EpF();t.TgZ(0,"div")(1,"div",77),t.NdJ("click",function(){const n=t.CHM(i),u=n.index,C=n.$implicit,x=t.oxw(2);return t.KtG(x.selectTechnician(x.filteredTechnicianList,u,C))}),t.TgZ(2,"div",49)(3,"div",54)(4,"div",78)(5,"label",79)(6,"input",80),t.NdJ("ngModelChange",function(n){const C=t.CHM(i).index,x=t.oxw(2);return t.KtG(x.filteredTechnicianList[C].checked=n)}),t.qZA(),t._UZ(7,"i",81),t.qZA()()()(),t.TgZ(8,"div",50),t._UZ(9,"img",82),t.qZA(),t.TgZ(10,"div",46)(11,"h5",47)(12,"a",48),t._uU(13),t.qZA(),t.TgZ(14,"p",83),t._uU(15),t.qZA()()(),t.TgZ(16,"div",84)(17,"p",85)(18,"span"),t._UZ(19,"i",53),t._uU(20),t.qZA()()()()()}if(2&d){const i=_.$implicit,s=_.index,n=t.oxw(2);t.xp6(6),t.s9C("value",i),t.Q6J("ngModel",n.filteredTechnicianList[s].checked)("disabled",n.filteredTechnicianList[s].disabled),t.xp6(3),t.s9C("src",i.profileImageUrl?n.apiUrl+i.profileImageUrl:"../../../../../assets/images/placeholderimage.png",t.LSH),t.xp6(4),t.hij(" ",i.fullName," "),t.xp6(2),t.hij("Role:",i.roleName,""),t.xp6(5),t.Oqu(i.phoneNumber)}}function ae(d,_){1&d&&(t.TgZ(0,"div",58)(1,"p"),t._uU(2,"No Member Found"),t.qZA()())}function oe(d,_){if(1&d){const i=t.EpF();t.TgZ(0,"div",65)(1,"h5",66),t._uU(2,"Add Technicians"),t.qZA(),t.TgZ(3,"button",67),t.NdJ("click",function(){const u=t.CHM(i).$implicit;return t.KtG(u.dismiss("Cross click"))}),t.qZA()(),t.TgZ(4,"div",68)(5,"div",69)(6,"input",70),t.NdJ("keyup",function(n){t.CHM(i);const u=t.oxw();return t.KtG(u.filterTechnician(n))})("ngModelChange",function(n){t.CHM(i);const u=t.oxw();return t.KtG(u.technicianSearchText=n)}),t.qZA(),t._UZ(7,"i",71),t.TgZ(8,"button",72),t.NdJ("click",function(n){t.CHM(i);const u=t.oxw();return t.KtG(u.clearTeach(n))}),t._uU(9," Clear "),t.qZA()(),t.TgZ(10,"ngx-simplebar",73)(11,"div",28),t.YNc(12,ne,21,7,"div",74)(13,ae,3,0,"div",31),t.qZA()()(),t.TgZ(14,"div",75)(15,"button",76),t.NdJ("click",function(){const u=t.CHM(i).$implicit;return t.KtG(u.close("Close click"))}),t._uU(16," Close "),t.qZA()()}if(2&d){const i=t.oxw();t.xp6(6),t.Q6J("ngModel",i.technicianSearchText),t.xp6(6),t.Q6J("ngForOf",i.filteredTechnicianList),t.xp6(1),t.Q6J("ngIf",i.technicianList&&i.filteredTechnicianList&&i.technicianSearchText.length>0?!i.filteredTechnicianList.length:!i.technicianList.length)}}function se(d,_){1&d&&(t.TgZ(0,"h4",93),t._uU(1," Service Order Updated Successfully ! "),t.qZA())}function ce(d,_){1&d&&(t.TgZ(0,"h4",93),t._uU(1," Service Order Generated Successfully ! "),t.qZA())}function le(d,_){if(1&d){const i=t.EpF();t.TgZ(0,"div",86)(1,"div",87)(2,"div",88),t._UZ(3,"lord-icon",89),t.YNc(4,se,2,0,"h4",90)(5,ce,2,0,"h4",90),t.TgZ(6,"div",91)(7,"button",92),t.NdJ("click",function(n){const C=t.CHM(i).$implicit;return t.KtG(C.close("Ok",n))}),t._uU(8," Ok,Done It "),t.qZA()()()()()}if(2&d){const i=t.oxw();t.xp6(4),t.Q6J("ngIf",i.serviceOrderDetailOnlyObject),t.xp6(1),t.Q6J("ngIf",!i.serviceOrderDetailOnlyObject)}}const de=()=>["heading","|","bold","italic","|","NumberedList","BulletedList"],pe=d=>({toolbar:d});let he=(()=>{class d{constructor(i,s,n,u,C,x,ue,me){this.formBuilder=i,this.router=s,this.modalService=n,this.ticketService=u,this.authService=C,this.maintenanceService=x,this.commonFunctionService=ue,this.datePipe=me,this.serviceOrderDetailOnlyObject={},this.submitAfterGernateServiceOrder=new t.vpe,this.minDate=new Date,this.Editor=I,this.supportTypeAarry=["On-Site","Remote","Phone Call"],this.technicianList=[],this.selectedTech=[],this.submitted=!1,this.selectedTimes={F:null},this.apiUrl=D.N.apiUrl,this.supportTypeOnSite=!1,this.loadingForSubmitBtn=!1,this.cetagoryList=[],this.priorityList=[],this.filteredTechnicianList=[],this.technicianSearchText=""}ngOnInit(){this.buildForm(),this.loadTechnician(),this.getMX_MasterTicketType(this.ticketInfo.isDeviceRelated),this.getMX_MasterUrgentTypeList(),this.serviceOrderDetailOnlyObject&&this.patchFromServiceOrder(this.serviceOrderDetailOnlyObject)}buildForm(){this.serviceOrderFrom=this.formBuilder.group({taskType:[{value:"Corrective",disabled:!0}],priority:["",[g.kI.required]],category:[null,[g.kI.required]],date:[""],time:[""],note:[""],supportType:[null,[g.kI.required]],expectedComplitionDateTime:[""]})}patchFromServiceOrder(i){this.serviceOrderFrom.patchValue({name:i?.woName,taskType:i?.taskType?i?.taskType:"Corrective",priority:i?.urgencyTypeName,category:i?.ticketTypeId,date:i?.expWrkStartDate?i?.expWrkStartDate:"",time:i?.expWrkStartTime?i?.expWrkStartTime:"",note:i?.addtionalNote?i?.addtionalNote:"",supportType:i?.supportType?i?.supportType:null,expectedComplitionDateTime:i?.expectedComplitionDateTime?this.commonFunctionService.dateFormatter(i?.expectedComplitionDateTime):null}),this.serviceOrderFrom.disable(),this.serviceOrderFrom.get("date").enable(),this.serviceOrderFrom.get("note").enable(),this.serviceOrderFrom.get("time").enable(),this.serviceOrderFrom.get("expectedComplitionDateTime").enable()}get name(){return this.serviceOrderFrom.get("name")}get priority(){return this.serviceOrderFrom.get("priority")}get category(){return this.serviceOrderFrom.get("category")}get time(){return this.serviceOrderFrom.get("time")}get date(){return this.serviceOrderFrom.get("date")}get taskType(){return this.serviceOrderFrom.get("taskType")}get note(){return this.serviceOrderFrom.get("note")}get supportType(){return this.serviceOrderFrom.get("supportType")}get expectedComplitionDateTime(){return this.serviceOrderFrom.get("expectedComplitionDateTime")}getMX_MasterTicketType(i){this.ticketService.getMX_MasterTicketType(i).subscribe(s=>{s&&(this.cetagoryList=s?.list,this.ticketInfo.ticketTypeId&&this.cetagoryList.forEach(n=>{n.ticketTypeId===this.ticketInfo.ticketTypeId&&this.serviceOrderFrom.get("category").setValue(this.ticketInfo.ticketTypeId)}),this.serviceOrderDetailOnlyObject&&this.patchFromServiceOrder(this.serviceOrderDetailOnlyObject))})}getMX_MasterUrgentTypeList(){this.ticketService.getMX_MasterUrgentTypeList().subscribe(i=>{if(i&&(this.priorityList=i?.data),this.ticketInfo.urgencyTypeId){const s=this.priorityList.find(n=>n.urgencyTypeId==this.ticketInfo?.urgencyTypeId);this.serviceOrderFrom.get("priority").setValue(s?.urgencyTypeName)}this.serviceOrderDetailOnlyObject&&this.patchFromServiceOrder(this.serviceOrderDetailOnlyObject)})}ticketCategoryHandler(i){this.cetagory=i}loadTechnician(){this.maintenanceService.getTechnician(this.ticketInfo.projectId).subscribe(i=>{i&&(this.technicianList=i?.data,this.technicianList.forEach(s=>{s.checked=!1,s.disabled=!1}),this.selectedTech.length>0&&this.technicianList.forEach(s=>{this.selectedTech.forEach(n=>{n.userId===s.userId&&(s.checked=!0,s.disabled=!0)})}),this.filteredTechnicianList=this.technicianList)},i=>{})}isAllTechCheckBoxChecked(){return this.technicianList?.every(i=>i.checked)}checkAllTechCheckBox(i,s){this.technicianList.forEach(n=>n.checked=i.target.checked),1==i.target.checked?this.technicianList.forEach(n=>{n.checked=!0,this.selectedTech.push(n)}):this.selectedTech=this.selectedTech.filter(n=>!(this.technicianList.filter(C=>C.techId==n.techId).length>0))}uniqByKeepZLast(i,s){return[...new Map(i.map(n=>[s(n),n])).values()]}getTodoListChecked(i,s){1==i?(s.checked=!0,this.selectedTech.push(s)):this.selectedTech.forEach((n,u)=>{n.userId==s.userId&&this.selectedTech.splice(u,1)})}removeCheckedTech(i){this.technicianList.forEach((s,n)=>{s.userId==i.userId&&(this.technicianList[n].checked=!1)}),this.selectedTech.forEach((s,n)=>{s.userId==i.userId&&this.selectedTech.splice(n,1)})}getTicketTypeName(i){return this.cetagoryList.find(n=>n.ticketTypeId===i)}onSubmit(){if(this.loadingForSubmitBtn=!0,this.serviceOrderFrom.valid){let i=this.serviceOrderFrom.value;const s=this.priorityList.find(u=>u?.urgencyTypeName===i?.priority);let n=[];0!==this.selectedTech.length&&this.selectedTech.forEach(u=>{n.push({TechId:u?.userId,TechName:u?.fullName})}),this.payload={mX_WorkOder:{TicketId:this.ticketInfo?.ticketId,TicketTypeId:i?.category,UrgencyTypeId:s?.urgencyTypeId,UrgencyTypeName:i?.priority?i?.priority:"",IsBillingRequired:null!=this.ticketInfo?.isBillingRequired&&this.ticketInfo?.isBillingRequired,AddtionalNote:i?.note?i?.note:"",isDeviceRelated:this.ticketInfo.isDeviceRelated,SupportType:i?.supportType?i?.supportType:"",OperationType:this.ticketInfo?.operationType,TicketTypeName:this.getTicketTypeName(i?.category).ticketTypeName},mX_WOTechAssignment:n||[]},i?.date&&(this.payload.mX_WorkOder.ExpWrkStartDate=this.commonFunctionService.dateFormatter(i?.date)),i?.time&&(this.payload.mX_WorkOder.ExpWrkStartTime=this.formatTime(i?.time)),i?.expectedComplitionDateTime&&(this.payload.mX_WorkOder.ExpectedComplitionDateTime=this.expectedComplitionDateTime.value?this.commonFunctionService.dateFormatter(this.expectedComplitionDateTime.value):null),this.saveWorkOrder(this.payload)}else this.waring("Please fill required field")}saveWorkOrder(i){this.loadingForSubmitBtn=!0,this.maintenanceService.generateWorkOrder(this.payload).subscribe(s=>{this.loadingForSubmitBtn=!1,this.successModal()},s=>{this.loadingForSubmitBtn=!1})}success(i){k().fire({toast:!0,position:"top-end",icon:"success",title:i.message,showConfirmButton:!1,timer:3e3})}confirmation(){if(this.loadingForSubmitBtn=!0,!this.serviceOrderFrom.valid)return void this.waring("Please fill required field");let i=this.serviceOrderFrom.value;if(i?.date&&!i?.time)return void this.waring("Please Enter Expected Work Start Time ");const s=this.modalService.open(A.l,{ariaLabelledBy:"modal-basic-title",size:"md",centered:!0,backdrop:"static",keyboard:!1});s.componentInstance.title="Are you sure proceed? .",s.componentInstance.subTitle="you won't be able to revert this!",s.componentInstance.buttonName="Submit It",s.result.then(n=>{"success"==n?this.onSubmit():this.loadingForSubmitBtn=!1})}waring(i){k().fire({toast:!0,position:"top-end",icon:"warning",title:i,showConfirmButton:!1,timer:3e3})}formatTime(i){let s=y(i,"hh:mm:ss A");return y(s).subtract(0,"hour").format("hh:mm A")}openModalTechnician(i){this.submitted=!1,this.modalService.open(i,{size:"lg",centered:!0})}goBack(){this.router.navigate([this.ticketService.lastStoreRouterDashboardName])}getTechnicianIndex(i){return this.technicianList.findIndex(s=>s.userId===i)}getSelectedTechnicianIndex(i){return this.selectedTech.findIndex(s=>s.userId===i)}selectTechnician(i,s,n){if(this.filteredTechnicianList[s].disabled)return;const u=this.getTechnicianIndex(n.userId);this.technicianList[u].checked=!this.technicianList[u].checked,this.getTodoListChecked(i[s].checked,n)}unCheckItem(i){const s=this.getTechnicianIndex(i.userId);this.technicianList[s].checked=!1;const n=this.getSelectedTechnicianIndex(i.userId);this.selectedTech.splice(n,1)}filterTechnician(i){this.filteredTechnicianList=this.technicianList.filter(s=>s.fullName.toLowerCase().includes(i.target.value.toLowerCase()||""))}clearTeach(i){this.technicianSearchText="",this.filteredTechnicianList=this.technicianList.filter(s=>s.fullName.toLowerCase().includes(i.target.value.toLowerCase()||""))}successModal(){this.modalService.open(this.successDataModal,{backdrop:"static",keyboard:!1,centered:!0}).result.then(i=>{this.serviceOrderDetailOnlyObject?this.router.navigate(["/maintenace-management/dashboard/dashboard-servicet-order-list"]):this.submitAfterGernateServiceOrder.emit(!0)},i=>{})}updateExpStarWorkDateTime(i){if(this.time.value&&this.date.value){let s=[];this.selectedTech.forEach(C=>{s.push({TechId:C?.userId,TechName:C?.fullName,WOId:i.woId,TicketId:i.ticketId})});let n={WorkOrderId:i.woId,ExpWrkStartDate:this.commonFunctionService.dateFormatter(this.date.value),ExpectedComplitionDateTime:this.expectedComplitionDateTime.value?this.commonFunctionService.dateFormatter(this.expectedComplitionDateTime.value):null,TicketId:i.ticketId,ExpWrkStartTime:this.time.value},u={mX_WorkOder:this.commonFunctionService.clean(n),mX_WOTechAssignment:s||[]};console.log("request",u),this.maintenanceService.UpdateExpStarWorkDateTime(this.commonFunctionService.clean(u)).subscribe(C=>{this.successModal()})}}serviceOrderConfirmation(){if(this.loadingForSubmitBtn=!0,!this.serviceOrderFrom.valid)return void this.waring("Please fill required field");const i=this.modalService.open(A.l,{ariaLabelledBy:"modal-basic-title",size:"md",centered:!0,backdrop:"static",keyboard:!1});i.componentInstance.title="Are you confirming the submission?",i.componentInstance.subTitle="Will update the expected start date and time and send a notification to the technician/ support team to proceed with the site visit and address the issue.",i.componentInstance.buttonName="Update It",i.result.then(s=>{"success"==s?this.updateExpStarWorkDateTime(this.serviceOrderDetailOnlyObject):this.loadingForSubmitBtn=!1})}returnValueDisabled(){let i=!0;return this.serviceOrderFrom.valid?this.date.value?this.time.value&&(i=0==this.selectedTech.length):i=!1:i=!0,i}returnValueDisabled2(){let i=!0;return this.serviceOrderFrom.valid&&this.date.value?this.time.value&&(i=0==this.selectedTech.length):i=!0,i}changDate(){this.time.reset(),this.selectedTech=[]}clearChangDate(){this.time.reset(),this.date.reset(),this.selectedTech=[],this.filteredTechnicianList.forEach(i=>{i.checked=!1}),this.technicianList.forEach(i=>{i.checked=!1})}clearChangTime(){this.time.reset(),this.selectedTech=[],this.filteredTechnicianList.forEach(i=>{i.checked=!1}),this.technicianList.forEach(i=>{i.checked=!1})}clearChangeExpectedComplitionDate(){this.expectedComplitionDateTime.reset()}returnDate(i){const s=new Date(i);return this.datePipe.transform(s,"dd-MM-yyyy")}static{this.\u0275fac=function(s){return new(s||d)(t.Y36(g.QS),t.Y36(R.F0),t.Y36(Z.FF),t.Y36(J.w),t.Y36(e.u),t.Y36(E.N),t.Y36(L.K),t.Y36(p.uU))}}static{this.\u0275cmp=t.Xpm({type:d,selectors:[["app-add-service-order"]],viewQuery:function(s,n){if(1&s&&t.Gf(V,7),2&s){let u;t.iGM(u=t.CRH())&&(n.successDataModal=u.first)}},inputs:{ticketInfo:"ticketInfo",serviceOrderDetailOnlyObject:"serviceOrderDetailOnlyObject"},outputs:{submitAfterGernateServiceOrder:"submitAfterGernateServiceOrder"},decls:74,vars:34,consts:[[1,"row"],[1,"col-12","col-xl-8"],[1,"card","card-height-100"],[1,"card-body"],[3,"formGroup"],[1,"col-md-6","mt-3"],[1,"form-group"],[1,"form-label","mb-0"],["type","text","placeholder","Enter Title","formControlName","taskType",1,"form-control"],[1,"starRequried"],["bindLabel","ticketTypeName","bindValue","ticketTypeId","placeholder","Select Service Order Category","formControlName","category",1,"custom",3,"items","clearable","change"],[4,"ngIf"],["bindLabel","urgencyTypeName","bindValue","urgencyTypeName","placeholder","Select Priority","formControlName","priority",1,"custom",3,"items","clearable"],["for","supportType",1,"form-label","mb-0"],["placeholder","Support Type","formControlName","supportType","id","supportType",1,"custom",3,"items","clearable"],["class","ri-close-circle-line text-danger",3,"click",4,"ngIf"],["type","text","placeholder","Enter Visit/Attend Date","formControlName","date","mwlFlatpickr","",1,"form-control","flatpickr-input",3,"altInput","enableTime","convertModelValue","dateFormat","minDate","change"],["class","col-md-6 mt-3",4,"ngIf"],[1,"col-md-12","mt-3"],[1,"row","me-0","ms-0"],[1,"col-md-6","ps-0"],["type","text","placeholder","Enter Expected Completion Date","formControlName","expectedComplitionDateTime","mwlFlatpickr","",1,"form-control","flatpickr-input",3,"altInput","enableTime","convertModelValue","dateFormat","minDate"],["data","","formControlName","note",3,"editor","config"],[1,"col-12","col-xl-4"],[1,"card-header","align-items-center","d-flex","border-bottom-dashed"],[1,"card-title","mb-0","flex-grow-1"],["class","flex-shrink-0",4,"ngIf"],[1,"mx-n3","px-3",2,"height","400px"],[1,"vstack","gap-3"],["class","d-flex align-items-center",4,"ngIf"],["class","d-flex align-items-center",4,"ngFor","ngForOf"],["class","text-center mt-3 text-muted",4,"ngIf"],[1,"col-12","mb-3"],["role","document"],["TechnicianListModal",""],["successDataModal",""],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"ri-close-circle-line","text-danger",3,"click"],["placeholder","Enter Visit/Attend Time","formControlName","time",1,"form-control",3,"ngxMatTimepicker","blur"],["dottedMinutesInGap","","enableKeyboardInput",""],["picker",""],[1,"flex-shrink-0"],["type","button","data-bs-toggle","modal","data-bs-target","#inviteMembersModal",1,"btn","btn-soft-primary","btn-sm",3,"click"],[1,"ri-add-fill","me-1","align-bottom"],[1,"d-flex","align-items-center"],[1,"flex-grow-1"],[1,"fs-14","mb-0"],["href","javascript:void(0);",1,"text-body","d-block"],[1,"flex-shrink-0","me-3"],[1,"avatar-xs","flex-shrink-0","me-3"],[1,"img-fluid","rounded-circle",2,"width","40px","height","40px",3,"src"],[1,"mb-0","mt-0"],[1,"ri-phone-fill","me-1"],[1,"d-flex","align-items-center","gap-1"],[1,"dropdown"],["type","button","aria-expanded","false",1,"btn","btn-icon","btn-sm","fs-16","text-danger","dropdown","arrow-none",3,"click"],[1,"ri-close-line"],[1,"text-center","mt-3","text-muted"],[1,"d-flex","justify-content-end"],[1,"btn","btn-soft-primary","waves-effect","me-3","back-button",3,"click"],["type","button",1,"btn","btn-success","btn-load",3,"disabled","click"],["class","spinner-border flex-shrink-0 me-2","role","status",4,"ngIf"],["role","status",1,"spinner-border","flex-shrink-0","me-2"],[1,"visually-hidden"],[1,"modal-header","p-3","bg-primary-subtle"],["id","inviteMembersModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body","p-4"],[1,"search-box","mb-3","d-flex","justify-content-between","align-items-center"],["type","text","placeholder","Search member here...",1,"form-control","bg-light","border-light",3,"ngModel","keyup","ngModelChange"],[1,"ri-search-line","search-icon"],["type","button","ngbTooltip","Clear",1,"btn","btn-danger","ms-1",3,"click"],[1,"mx-n4","px-4",2,"height","400px"],[4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger","w-xs",3,"click"],[1,"d-flex","align-items-center",3,"click"],[1,"form-check","form-check-flat","form-check-primary"],[1,"form-check-label"],["type","checkbox",1,"form-check-input",3,"value","ngModel","disabled","ngModelChange"],[1,"input-frame"],["alt","",1,"img-fluid","rounded-circle",2,"width","40px","height","40px",3,"src"],[1,"mt-0","mb-0"],[1,"flex-shrink-0","me-3","mb-0"],[1,"mb-0"],[1,"modal-content"],[1,"modal-body","text-center","p-5"],[1,"mt-2"],["src","https://cdn.lordicon.com/tqywkdcz.json","trigger","hover",2,"width","150px","height","150px"],["class","mb-3 mt-4",4,"ngIf"],[1,"hstack","gap-2","justify-content-center"],[1,"btn","btn-primary",3,"click"],[1,"mb-3","mt-4"]],template:function(s,n){1&s&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"form",4)(5,"div",0)(6,"div",5)(7,"div",6)(8,"label",7),t._uU(9,"Maintenance Type"),t.qZA(),t._UZ(10,"input",8),t.qZA()(),t.TgZ(11,"div",5)(12,"div",6)(13,"label",7),t._uU(14,"Service Order Category"),t.TgZ(15,"span",9),t._uU(16,"*"),t.qZA()(),t.TgZ(17,"ng-select",10),t.NdJ("change",function(C){return n.ticketCategoryHandler(C)}),t.qZA(),t.YNc(18,j,2,1,"div",11),t.qZA()(),t.TgZ(19,"div",5)(20,"div",6)(21,"label",7),t._uU(22,"Priority"),t.TgZ(23,"span",9),t._uU(24,"*"),t.qZA()(),t._UZ(25,"ng-select",12),t.YNc(26,U,2,1,"div",11),t.qZA()(),t.TgZ(27,"div",5)(28,"div",6)(29,"label",13),t._uU(30,"Support Type"),t.TgZ(31,"span",9),t._uU(32,"*"),t.qZA()(),t._UZ(33,"ng-select",14),t.YNc(34,Q,2,1,"div",11),t.qZA()(),t.TgZ(35,"div",5)(36,"div",6)(37,"label",7),t._uU(38,"Visit/Attend Date "),t.YNc(39,P,1,0,"i",15),t.qZA(),t.TgZ(40,"input",16),t.NdJ("change",function(){return n.changDate()}),t.qZA()()(),t.YNc(41,G,8,2,"div",17),t.TgZ(42,"div",18)(43,"div",19)(44,"div",20)(45,"div",6)(46,"label",7),t._uU(47,"Expected Completion Date "),t.YNc(48,z,1,0,"i",15),t.qZA(),t._UZ(49,"input",21),t.qZA()()()(),t.TgZ(50,"div",18)(51,"div",6)(52,"label",7),t._uU(53,"Note For Member"),t.qZA(),t._UZ(54,"ckeditor",22),t.qZA()()()()()()(),t.TgZ(55,"div",23)(56,"div",2)(57,"div",24)(58,"h4",25),t._uU(59,"Members"),t.qZA(),t.YNc(60,Y,4,0,"div",26),t.qZA(),t.TgZ(61,"div",3)(62,"ngx-simplebar",27)(63,"div",28),t.YNc(64,H,6,0,"div",29)(65,$,16,3,"div",30)(66,X,3,0,"div",31),t.qZA()()()()(),t.TgZ(67,"div",32),t.YNc(68,te,9,2,"ng-container",11)(69,ie,9,3,"ng-container",11),t.qZA()(),t.YNc(70,oe,17,3,"ng-template",33,34,t.W1O)(72,le,9,2,"ng-template",null,35,t.W1O)),2&s&&(t.xp6(4),t.Q6J("formGroup",n.serviceOrderFrom),t.xp6(13),t.Q6J("items",n.cetagoryList)("clearable",!1),t.xp6(1),t.Q6J("ngIf",(null==n.category?null:n.category.invalid)&&(null==n.category?null:n.category.touched)),t.xp6(7),t.Q6J("items",n.priorityList)("clearable",!1),t.xp6(1),t.Q6J("ngIf",n.priority.invalid&&(null==n.priority?null:n.priority.touched)),t.xp6(7),t.Q6J("items",n.supportTypeAarry)("clearable",!1),t.xp6(1),t.Q6J("ngIf",n.supportType.invalid&&(null==n.supportType?null:n.supportType.touched)),t.xp6(5),t.Q6J("ngIf",n.date.value),t.xp6(1),t.Q6J("altInput",!1)("enableTime",!1)("convertModelValue",!0)("dateFormat","d-m-Y")("minDate",n.minDate),t.xp6(1),t.Q6J("ngIf",n.date.value),t.xp6(7),t.Q6J("ngIf",n.expectedComplitionDateTime.value),t.xp6(1),t.Q6J("altInput",!1)("enableTime",!1)("convertModelValue",!0)("dateFormat","d-m-Y")("minDate",n.minDate),t.xp6(5),t.Q6J("editor",n.Editor)("config",t.VKq(32,pe,t.DdM(31,de))),t.xp6(6),t.Q6J("ngIf",n.time.value),t.xp6(4),t.Q6J("ngIf",n.selectedTech&&n.selectedTech.length),t.xp6(1),t.Q6J("ngForOf",n.selectedTech),t.xp6(1),t.Q6J("ngIf",n.selectedTech&&!n.selectedTech.length),t.xp6(2),t.Q6J("ngIf",!n.serviceOrderDetailOnlyObject),t.xp6(1),t.Q6J("ngIf",n.serviceOrderDetailOnlyObject))},dependencies:[p.sg,p.O5,g._Y,g.Fj,g.Wl,g.JJ,g.JL,g.On,g.sg,g.u,Z._L,O.as,W.M,N.u,F.w9,w.ft,w.Bi]})}}return d})()},3187:(ge,b,l)=>{l.r(b),l.d(b,{ServiceOrderModule:()=>ke});var t=l(6814),g=l(6223),v=l(7291),k=l(2787),D=l(9478),I=l(2438),S=l(2181),y=l(3620),_e=l(3997),A=l(9397),R=l(3519),Z=l.n(R),J=l(553),e=l(9212),E=l(276),L=l(9862),p=l(4460);const O={headers:new L.WM({"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`})};let W=(()=>{class c{constructor(r){this.http=r}getData(){var r={Authorization:"Bearer "+localStorage.getItem("token")};return this.http.get(p.R.API_URL+p.R.product,{headers:r,responseType:"text"})}deleteData(r){return this.http.delete(p.R.API_URL+p.R.productDelete+r,{responseType:"text"})}getOrderData(){var r={Authorization:"Bearer "+localStorage.getItem("token")};return this.http.get(p.R.API_URL+p.R.order,{headers:r,responseType:"text"})}postOrderData(r){return this.http.post(p.R.API_URL+p.R.order,JSON.stringify(r),O)}getSingleOrderData(r){var o={Authorization:"Bearer "+localStorage.getItem("token")};return this.http.get(p.R.API_URL+p.R.orderId+r,{headers:o,responseType:"text"})}patchOrderData(r){return this.http.patch(p.R.API_URL+p.R.orderId+r.ids,JSON.stringify(r),O)}deleteOrder(r){var o={Authorization:"Bearer "+localStorage.getItem("token")};return this.http.delete(p.R.API_URL+p.R.orderId+r,{headers:o,responseType:"text"})}getCustomerData(){var r={Authorization:"Bearer "+localStorage.getItem("token")};return this.http.get(p.R.API_URL+p.R.customer,{headers:r,responseType:"text"})}postCustomerData(r){return this.http.post(p.R.API_URL+p.R.customer,JSON.stringify(r),O)}getSingleCustomerData(r){var o={Authorization:"Bearer "+localStorage.getItem("token")};return this.http.get(p.R.API_URL+"apps/customer/"+r,{headers:o,responseType:"text"})}patchCustomerData(r){return this.http.patch(p.R.API_URL+"apps/customer/"+r.ids,JSON.stringify(r),O)}deleteCustomer(r){var o={Authorization:"Bearer "+localStorage.getItem("token")};return this.http.delete(p.R.API_URL+"apps/customer/"+r,{headers:o,responseType:"text"})}getTaskData(){var r={Authorization:"Bearer "+localStorage.getItem("token")};return this.http.get(p.R.API_URL+"apps/task",{headers:r,responseType:"text"})}postTaskData(r){return this.http.post(p.R.API_URL+"apps/task",JSON.stringify(r),O)}getSingleTaskData(r){var o={Authorization:"Bearer "+localStorage.getItem("token")};return this.http.get(p.R.API_URL+"apps/task/"+r,{headers:o,responseType:"text"})}patchTaskData(r){return this.http.patch(p.R.API_URL+"apps/task/"+r.ids,JSON.stringify(r),O)}deleteTask(r){var o={Authorization:"Bearer "+localStorage.getItem("token")};return this.http.delete(p.R.API_URL+"apps/task/"+r,{headers:o,responseType:"text"})}getContactData(){var r={Authorization:"Bearer "+localStorage.getItem("token")};return this.http.get(p.R.API_URL+"apps/contact",{headers:r,responseType:"text"})}postContactData(r){return this.http.post(p.R.API_URL+"apps/contact",JSON.stringify(r),O)}getSingleContactData(r){var o={Authorization:"Bearer "+localStorage.getItem("token")};return this.http.get(p.R.API_URL+"apps/contact/"+r,{headers:o,responseType:"text"})}patchContactData(r){return this.http.patch(p.R.API_URL+"apps/contact/"+r.ids,JSON.stringify(r),O)}deleteContact(r){var o={Authorization:"Bearer "+localStorage.getItem("token")};return this.http.delete(p.R.API_URL+"apps/contact/"+r,{headers:o,responseType:"text"})}getCompanyData(){var r={Authorization:"Bearer "+localStorage.getItem("token")};return this.http.get(p.R.API_URL+"apps/company",{headers:r,responseType:"text"})}postCompanyData(r){return this.http.post(p.R.API_URL+"apps/company",JSON.stringify(r),O)}getSingleCompanyData(r){var o={Authorization:"Bearer "+localStorage.getItem("token")};return this.http.get(p.R.API_URL+"apps/company/"+r,{headers:o,responseType:"text"})}patchCompanyData(r){return this.http.patch(p.R.API_URL+"apps/company/"+r.ids,JSON.stringify(r),O)}deleteCompany(r){var o={Authorization:"Bearer "+localStorage.getItem("token")};return this.http.delete(p.R.API_URL+"apps/company/"+r,{headers:o,responseType:"text"})}getLeadData(){var r={Authorization:"Bearer "+localStorage.getItem("token")};return this.http.get(p.R.API_URL+"apps/lead",{headers:r,responseType:"text"})}postLeadData(r){return this.http.post(p.R.API_URL+"apps/lead",JSON.stringify(r),O)}getSingLeadData(r){var o={Authorization:"Bearer "+localStorage.getItem("token")};return this.http.get(p.R.API_URL+"apps/lead/"+r,{headers:o,responseType:"text"})}patchLeadData(r){return this.http.patch(p.R.API_URL+"apps/lead/"+r.ids,JSON.stringify(r),O)}deletelead(r){var o={Authorization:"Bearer "+localStorage.getItem("token")};return this.http.delete(p.R.API_URL+"apps/lead/"+r,{headers:o,responseType:"text"})}getTicketData(){var r={Authorization:"Bearer "+localStorage.getItem("token")};return this.http.get(p.R.API_URL+"apps/ticket",{headers:r,responseType:"text"})}postTicketData(r){return this.http.post(p.R.API_URL+"apps/ticket",JSON.stringify(r),O)}getSingTicketData(r){var o={Authorization:"Bearer "+localStorage.getItem("token")};return this.http.get(p.R.API_URL+"apps/ticket/"+r,{headers:o,responseType:"text"})}patchTicketData(r){return this.http.patch(p.R.API_URL+"apps/ticket/"+r.ids,JSON.stringify(r),O)}deleteTicket(r){var o={Authorization:"Bearer "+localStorage.getItem("token")};return this.http.delete(p.R.API_URL+"apps/ticket/"+r,{headers:o,responseType:"text"})}getInvoiceData(){var r={Authorization:"Bearer "+localStorage.getItem("token")};return this.http.get(p.R.API_URL+"apps/invoice",{headers:r,responseType:"text"})}deleteInvoice(r){var o={Authorization:"Bearer "+localStorage.getItem("token")};return this.http.delete(p.R.API_URL+"apps/invoice/"+r,{headers:o,responseType:"text"})}getTodoData(){var r={Authorization:"Bearer "+localStorage.getItem("token")};return this.http.get(p.R.API_URL+"apps/todo/",{headers:r,responseType:"text"})}postTodoData(r){return this.http.post(p.R.API_URL+"apps/todo/",JSON.stringify(r),O)}getSingleTodoData(r){var o={Authorization:"Bearer "+localStorage.getItem("token")};return this.http.get(p.R.API_URL+"apps/todo/"+r,{headers:o,responseType:"text"})}patchTodoData(r){return this.http.patch(p.R.API_URL+"apps/todo/"+r.ids,JSON.stringify(r),O)}getCalendarData(){var r={Authorization:"Bearer "+localStorage.getItem("token")};return this.http.get(p.R.API_URL+"apps/calendar/",{headers:r,responseType:"text"})}static{this.\u0275fac=function(o){return new(o||c)(e.LFG(L.eN))}}static{this.\u0275prov=e.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}}return c})();var N=l(2857),F=l(3828),w=l(9455),V=l(5143),B=l(471),j=l(7235),M=l(6592),U=l(6762),q=l(8617),Q=l(7932),P=l(4807);const K=["inputerServiceName"];function G(c,f){if(1&c&&(e.ynx(0),e.TgZ(1,"h4",47),e._UZ(2,"span",48),e.qZA(),e.BQk()),2&c){const r=e.oxw();e.xp6(2),e.Q6J("countUp",r.totalCountServiceOrderOnly.countTotalSO)("options",r.option)}}function z(c,f){1&c&&(e.ynx(0),e.TgZ(1,"h4",47),e._uU(2,"0"),e.qZA(),e.BQk())}function Y(c,f){if(1&c&&(e.ynx(0),e.TgZ(1,"h4",47),e._UZ(2,"span",48),e.qZA(),e.BQk()),2&c){const r=e.oxw();e.xp6(2),e.Q6J("countUp",r.totalCountServiceOrderOnly.countPendingSO)("options",r.option)}}function H(c,f){1&c&&(e.ynx(0),e.TgZ(1,"h4",47),e._uU(2,"0"),e.qZA(),e.BQk())}function $(c,f){if(1&c&&(e.ynx(0),e.TgZ(1,"h4",47),e._UZ(2,"span",48),e.qZA(),e.BQk()),2&c){const r=e.oxw();e.xp6(2),e.Q6J("countUp",r.totalCountServiceOrderOnly.countInProgressSO)("options",r.option)}}function X(c,f){1&c&&(e.ynx(0),e.TgZ(1,"h4",47),e._uU(2,"0"),e.qZA(),e.BQk())}function ee(c,f){if(1&c&&(e.ynx(0),e.TgZ(1,"h4",47),e._UZ(2,"span",48),e.qZA(),e.BQk()),2&c){const r=e.oxw();e.xp6(2),e.Q6J("countUp",r.totalCountServiceOrderOnly.countOnHoldSO)("options",r.option)}}function te(c,f){1&c&&(e.ynx(0),e.TgZ(1,"h4",47),e._uU(2,"0"),e.qZA(),e.BQk())}function re(c,f){if(1&c&&(e.ynx(0),e.TgZ(1,"h4",47),e._UZ(2,"span",48),e.qZA(),e.BQk()),2&c){const r=e.oxw();e.xp6(2),e.Q6J("countUp",r.totalCountServiceOrderOnly.countCompletedSO)("options",r.option)}}function ie(c,f){1&c&&(e.ynx(0),e.TgZ(1,"h4",47),e._uU(2,"0"),e.qZA(),e.BQk())}function ne(c,f){if(1&c&&(e.ynx(0),e.TgZ(1,"h4",47),e._UZ(2,"span",48),e.qZA(),e.BQk()),2&c){const r=e.oxw();e.xp6(2),e.Q6J("countUp",r.totalCountServiceOrderOnly.countCanceledSO)("options",r.option)}}function ae(c,f){1&c&&(e.ynx(0),e.TgZ(1,"h4",47),e._uU(2,"0"),e.qZA(),e.BQk())}function oe(c,f){1&c&&(e.ynx(0),e.TgZ(1,"tr")(2,"td",57),e._uU(3," No Service Order Data "),e.qZA()(),e.BQk())}const se=(c,f,r)=>({"bg-success ":c,"bg-danger":f,"bg-warning":r});function ce(c,f){if(1&c){const r=e.EpF();e.TgZ(0,"tr")(1,"td",59)(2,"a",60),e.NdJ("click",function(){const h=e.CHM(r).$implicit,m=e.oxw(3);return e.KtG(m.viewHandler(h.ticketId))}),e._uU(3),e.qZA(),e.TgZ(4,"i",61),e.NdJ("click",function(){const h=e.CHM(r).$implicit,m=e.oxw(3),T=e.MAs(118);return e.KtG(m.getV2_MaintenanceWorkflowAudit(h.ticketId,T,h.ticketStatusId))}),e.qZA()(),e.TgZ(5,"td",62),e.NdJ("click",function(){const h=e.CHM(r).$implicit,m=e.oxw(3);return e.KtG(m.expandTitle("woName_"+h.woNo))}),e._uU(6),e.qZA(),e.TgZ(7,"td",62),e.NdJ("click",function(){const h=e.CHM(r).$implicit,m=e.oxw(3);return e.KtG(m.expandTitle("clientName_"+h.woNo))}),e._uU(8),e.qZA(),e.TgZ(9,"td",62),e.NdJ("click",function(){const h=e.CHM(r).$implicit,m=e.oxw(3);return e.KtG(m.expandTitle("projectName_"+h.woNo))}),e._uU(10),e.qZA(),e.TgZ(11,"td",62),e.NdJ("click",function(){const h=e.CHM(r).$implicit,m=e.oxw(3);return e.KtG(m.expandTitle("createdDate_"+h.woNo))}),e._uU(12),e._UZ(13,"br"),e.qZA(),e.TgZ(14,"td",63)(15,"span",64),e._uU(16),e.qZA()(),e.TgZ(17,"td",65)(18,"span",66),e._uU(19),e.qZA()(),e.TgZ(20,"td",59)(21,"div",67)(22,"button",68),e._UZ(23,"i",69),e.qZA(),e.TgZ(24,"ul",70)(25,"li")(26,"a",71),e.NdJ("click",function(){const h=e.CHM(r).$implicit,m=e.oxw(3);return e.KtG(m.viewHandler(h.ticketId))}),e._UZ(27,"i",72),e._uU(28," View"),e.qZA()()()()()()}if(2&c){const r=f.$implicit,o=e.oxw(3);e.xp6(3),e.Oqu(r.woNo),e.xp6(2),e.Q6J("title",r.woName)("id","woName_"+r.woNo),e.xp6(1),e.hij(" ",r.woName," "),e.xp6(1),e.Q6J("title",r.clientName)("id","clientName_"+r.woNo),e.xp6(1),e.hij(" ",r.clientName," "),e.xp6(1),e.Q6J("title",r.projectName)("id","projectName_"+r.woNo),e.xp6(1),e.hij(" ",r.projectName," "),e.xp6(1),e.Q6J("title",r.createdDate)("id","createdDate_"+r.woNo),e.xp6(1),e.hij(" ",r.createdDate,""),e.xp6(3),e.Q6J("ngClass",o.getTicketStatus(r.woStatusId)),e.xp6(1),e.Oqu(r.woStatusName),e.xp6(2),e.Q6J("ngClass",e.kEZ(17,se,"Low"===r.urgencyTypeName,"High"===r.urgencyTypeName,"Medium"===r.urgencyTypeName)),e.xp6(1),e.Oqu(r.urgencyTypeName)}}function le(c,f){if(1&c&&(e.ynx(0),e.YNc(1,ce,29,21,"tr",58),e.BQk()),2&c){const r=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",r.serviceOrderList)}}function de(c,f){if(1&c){const r=e.EpF();e.TgZ(0,"ngb-pagination",73),e.NdJ("pageChange",function(a){e.CHM(r);const h=e.oxw(2);return e.KtG(h.page=a)})("pageChange",function(a){e.CHM(r);const h=e.oxw(2);return e.KtG(h.OnChangesPage(a))}),e.qZA()}if(2&c){const r=e.oxw(2);e.Q6J("collectionSize",r.totalRecordsFromApi)("pageSize",r.pageSize)("page",r.page)("maxSize",2)("rotate",!0)}}function pe(c,f){if(1&c&&(e.TgZ(0,"div",49)(1,"table",50)(2,"thead")(3,"tr",51)(4,"th"),e._uU(5,"SO No"),e.qZA(),e.TgZ(6,"th"),e._uU(7,"Title"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"Client"),e.qZA(),e.TgZ(10,"th"),e._uU(11),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Create Date"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Status"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"Priority"),e.qZA(),e.TgZ(18,"th"),e._uU(19,"Action"),e.qZA()()(),e.TgZ(20,"tbody"),e.YNc(21,oe,4,0,"ng-container",11)(22,le,2,1,"ng-container",11),e.qZA()()(),e.TgZ(23,"div",52)(24,"div",53)(25,"div",54),e._uU(26),e.qZA()(),e.TgZ(27,"div",53)(28,"div",55),e.YNc(29,de,1,5,"ngb-pagination",56),e.qZA()()()),2&c){const r=e.oxw();e.xp6(11),e.Oqu(r.isProject?"Project":"Department"),e.xp6(10),e.Q6J("ngIf",0==r.serviceOrderList.length),e.xp6(1),e.Q6J("ngIf",0!=r.serviceOrderList.length),e.xp6(4),e.lnq(" Showing ",r.from," to ",r.to," of ",r.totalRecordsFromApi," entries "),e.xp6(3),e.Q6J("ngIf",r.totalRecordsFromApi>r.pageSize)}}function he(c,f){if(1&c){const r=e.EpF();e.TgZ(0,"div",74)(1,"h5",75),e._uU(2,"Filters"),e.qZA(),e.TgZ(3,"button",76),e.NdJ("click",function(){const h=e.CHM(r).$implicit;return e.KtG(h.dismiss("Cross click"))}),e.qZA()(),e.TgZ(4,"div",77)(5,"div",1)(6,"div",78)(7,"label",79),e._uU(8,"Ticket No"),e.qZA(),e.TgZ(9,"input",80),e.NdJ("ngModelChange",function(a){e.CHM(r);const h=e.oxw();return e.KtG(h.selectedTicketNo=a)}),e.qZA()(),e.TgZ(10,"div",78)(11,"label",81),e._uU(12,"SO No."),e.qZA(),e.TgZ(13,"input",82),e.NdJ("ngModelChange",function(a){e.CHM(r);const h=e.oxw();return e.KtG(h.selectedWONo=a)}),e.qZA()(),e.TgZ(14,"div",78)(15,"label",83),e._uU(16,"Service Type"),e.qZA(),e.TgZ(17,"ng-select",84),e.NdJ("change",function(a){e.CHM(r);const h=e.oxw();return e.KtG(h.onDropdownOperationValueChange(a))})("ngModelChange",function(a){e.CHM(r);const h=e.oxw();return e.KtG(h.selectedDropDownOperationValue=a)}),e.qZA()(),e.TgZ(18,"div",78)(19,"label",85),e._uU(20,"Support Type"),e.qZA(),e.TgZ(21,"ng-select",86),e.NdJ("ngModelChange",function(a){e.CHM(r);const h=e.oxw();return e.KtG(h.selectedSupportType=a)}),e.qZA()(),e.TgZ(22,"div",78)(23,"label",85),e._uU(24,"Priority"),e.qZA(),e.TgZ(25,"ng-select",87),e.NdJ("ngModelChange",function(a){e.CHM(r);const h=e.oxw();return e.KtG(h.selectedPriority=a)}),e.qZA()(),e.TgZ(26,"div",78)(27,"label",85),e._uU(28," Expected Completion Date"),e.qZA(),e.TgZ(29,"input",88),e.NdJ("ngModelChange",function(a){e.CHM(r);const h=e.oxw();return e.KtG(h.selectedExpWrkStartDate=a)}),e.qZA()(),e.TgZ(30,"div",78)(31,"label",89),e._uU(32," Service Order Created Date"),e.qZA(),e.TgZ(33,"input",90),e.NdJ("ngModelChange",function(a){e.CHM(r);const h=e.oxw();return e.KtG(h.selectedCreatedDate=a)}),e.qZA()()()(),e.TgZ(34,"div",91)(35,"button",92),e.NdJ("click",function(){e.CHM(r);const a=e.oxw();return e.KtG(a.resetSerachVariableWithModal())}),e._uU(36," Clear "),e.qZA(),e.TgZ(37,"button",93),e.NdJ("click",function(a){const m=e.CHM(r).$implicit;return e.KtG(m.close("Ok",a))}),e._uU(38," Search "),e.qZA()()}if(2&c){const r=e.oxw();e.xp6(9),e.Q6J("ngModel",r.selectedTicketNo),e.xp6(4),e.Q6J("ngModel",r.selectedWONo),e.xp6(4),e.Q6J("items",r.operationList)("clearable",!1)("ngModel",r.selectedDropDownOperationValue),e.xp6(4),e.Q6J("items",r.supportTypeAarry)("clearable",!1)("ngModel",r.selectedSupportType),e.xp6(4),e.Q6J("items",r.priorityList)("clearable",!1)("ngModel",r.selectedPriority),e.xp6(4),e.Q6J("altInput",!0)("convertModelValue",!0)("dateFormat","d-m-Y")("ngModel",r.selectedExpWrkStartDate),e.xp6(4),e.Q6J("altInput",!0)("convertModelValue",!0)("dateFormat","d-m-Y")("ngModel",r.selectedCreatedDate)}}function d(c,f){1&c&&(e.TgZ(0,"div",101)(1,"p",102)(2,"b"),e._uU(3,"Ticket has been canceled"),e.qZA()()())}function _(c,f){if(1&c){const r=e.EpF();e.TgZ(0,"div",94)(1,"h4",95),e._uU(2,"WorkFlow Audit"),e.qZA(),e.TgZ(3,"button",76),e.NdJ("click",function(){const h=e.CHM(r).$implicit;return e.KtG(h.dismiss("Cross click"))}),e.qZA()(),e.YNc(4,d,4,0,"div",96),e.TgZ(5,"div",97),e._UZ(6,"app-audit-chart",98),e.TgZ(7,"div",99)(8,"button",100),e.NdJ("click",function(){const h=e.CHM(r).$implicit;return e.KtG(h.close("Close click"))}),e._uU(9," Close "),e.qZA()()()}if(2&c){const r=e.oxw();e.xp6(4),e.Q6J("ngIf",19==r.currentStatus),e.xp6(2),e.Q6J("Data",r.maintenanceWorkflowAuditList)}}const s=[{path:"add-service-order",component:D.m},{path:"list-service-order",component:(()=>{class c{constructor(r,o,a,h,m,T,xe,be,Ie,Ae,Ze,Le,Ne,we){this.modalService=r,this.serviceOrderService=o,this.formBuilder=a,this.ApiService=h,this.datePipe=m,this.commonService=T,this.authService=xe,this.dropdownServices=be,this.commonFunctionService=Ie,this.ticketService=Ae,this.router=Ze,this.helpDeskService=Le,this.offcanvasService=Ne,this.menuService=we,this.serviceOrderList=[],this.payload={displayLength:10,displayStart:0,SearchCompanyId:null,SearchClientId:null,SearchProjectId:null,SearchWOStatusId:null,SearchTicketNo:null,SearchWONo:null,SearchWOName:null,SearchOperationType:null,SearchSupportType:null,SearchUrgencyTypeId:null,SearchExpWrkStartDate:null,SearchCreatedDate:null},this.num=0,this.option={startVal:this.num,useEasing:!0,duration:2,decimalPlaces:0},this.totalCountServiceOrderOnly={countTotalSO:0,countPendingSO:0,countInProgressSO:0,countCompletedSO:0,countOnHoldSO:0},this.arrayListDropDownCompany=[],this.arrayListDropDownClientList=[],this.arrayListDropDownProjectOrDeparmentList=[],this.arrayListDropDownTicketStatus=[],this.to=0,this.from=0,this.pageSize=10,this.totalRecordsFromApi=0,this.ticketList=[],this.page=1,this.collectionSize=0,this.supportTypeAarry=["On-Site","Remote","Phone Call"],this.imageUrl=J.N.apiUrl,this.returnValueMenu={access:!0,add:!0,delete:!0,edit:!0,reportPrint:!0,reportView:!0},this.priorityList=[],this.selectedPriority=null,this.operationList=[{name:"Service",operationTypeId:1,disabled:!1},{name:"Incident Report",operationTypeId:2,disabled:!1},{name:"Bug",operationTypeId:3,disabled:!1},{name:"New Requirement",operationTypeId:4,disabled:!1}],this.disabledWithAceessGroup=!1,this.projectDepartmentFieldDisiabled=!1,this.selectedTicketNo=null,this.selectedWONo=null,this.selectedSupportType=null,this.selectedExpWrkStartDate=null,this.maintenanceWorkflowAuditList=[],this.currentStatus=0,this.activeCard="",this.returnValueMenu=this.menuService.getvalueObjectreturn(this.router.url),this.isProject=this.authService.getisProject()}ngOnInit(){this.breadCrumbItems=[{label:"Service Order"},{label:"Service Order List",active:!0}],this.getV2_TotalCountServiceOrderOnly(),this.getDropdownCompanyList(),this.getDropdownTicketStatusList("ServiceOrder"),this.getMX_MasterUrgentTypeList(),this.currentUserRole=JSON.parse(localStorage.getItem("currentUser")).role,"Client User"===this.currentUserRole&&(this.disabledWithAceessGroup=!0),localStorage.getItem("objectSerachForServiceOrder")?this.getObjectAfterRefresh():this.loadData()}onTypeServiceOrderNameChange(){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchWOName=this.typeServiceOrderValue,this.loadData()}ngAfterViewInit(){(0,I.R)(this.inputerServiceName.nativeElement,"input").pipe((0,S.h)(Boolean),(0,y.b)(1e3),(0,_e.x)(),(0,A.b)(r=>{this.onTypeServiceOrderNameChange()})).subscribe()}setObjectBeforeRefesh(){let r={};this.selectedDropDownCompanyIdValue&&(r.SearchCompanyId=this.selectedDropDownCompanyIdValue),this.selectedDropDownClientIdValue&&(r.SearchClientId=this.selectedDropDownClientIdValue),this.selectedDropDownProjectOrDeparmentIdValue&&(r.SearchProjectId=this.selectedDropDownProjectOrDeparmentIdValue),this.selectedDropDownOperationValue&&(r.SearchOperationType=this.selectedDropDownOperationValue),this.selectedDropDownWOStatusIdValue&&(r.SearchWOStatusId=this.selectedDropDownWOStatusIdValue),this.activeCard&&(r.activeCard=this.activeCard),this.arrayListDropDownClientList&&(r.arrayListDropDownClientList=this.arrayListDropDownClientList),this.arrayListDropDownTicketStatus&&(r.arrayListDropDownTicketStatus=this.arrayListDropDownTicketStatus),this.arrayListDropDownProjectOrDeparmentList&&(r.arrayListDropDownProjectOrDeparmentList=this.arrayListDropDownProjectOrDeparmentList),this.typeServiceOrderValue&&(r.SearchWOName=this.typeServiceOrderValue),this.selectedTicketNo&&(r.SearchTicketNo=this.selectedTicketNo),this.selectedWONo&&(r.SearchWONo=this.selectedWONo),this.selectedDropDownOperationValue&&(r.SearchOperationType=this.selectedDropDownOperationValue),this.selectedSupportType&&(r.SearchSupportType=this.selectedSupportType),this.selectedPriority&&(r.SearchUrgencyTypeId=this.selectedPriority),this.selectedExpWrkStartDate&&(r.SearchExpWrkStartDate=this.selectedExpWrkStartDate),this.selectedCreatedDate&&(r.SearchCreatedDate=this.selectedCreatedDate),this.page&&(r.displayStart=this.pageSize*(this.page-1),r.page=this.page),localStorage.setItem("objectSerachForServiceOrder",JSON.stringify(r))}getObjectAfterRefresh(){let r=JSON.parse(localStorage.getItem("objectSerachForServiceOrder"));this.arrayListDropDownClientList=r.arrayListDropDownClientList?r.arrayListDropDownClientList:[],this.activeCard=r.activeCard?r.activeCard:"",this.arrayListDropDownTicketStatus=r.arrayListDropDownTicketStatus?r.arrayListDropDownTicketStatus:[],this.arrayListDropDownProjectOrDeparmentList=r.arrayListDropDownProjectOrDeparmentList?r.arrayListDropDownProjectOrDeparmentList:[],this.selectedDropDownCompanyIdValue=r.SearchCompanyId?r.SearchCompanyId:null,this.selectedDropDownClientIdValue=r.SearchClientId?r.SearchClientId:null,this.selectedDropDownProjectOrDeparmentIdValue=r.SearchProjectId?r.SearchProjectId:null,this.selectedDropDownWOStatusIdValue=r.SearchWOStatusId?r.SearchWOStatusId:null,this.typeServiceOrderValue=r.SearchWOName?r.SearchWOName:null,this.selectedTicketNo=r.SearchTicketNo?r.SearchTicketNo:null,this.selectedWONo=r.SearchWONo?r.SearchWONo:null,this.selectedDropDownOperationValue=r.SearchOperationType?r.SearchOperationType:null,this.selectedSupportType=r.SearchSupportType?r.SearchSupportType:null,this.selectedPriority=r.SearchUrgencyTypeId?r.SearchUrgencyTypeId:null,this.selectedExpWrkStartDate=r.SearchExpWrkStartDate?r.SearchExpWrkStartDate:null,this.selectedCreatedDate=r.SearchCreatedDate?r.SearchCreatedDate:null,this.payload.SearchCompanyId=this.selectedDropDownCompanyIdValue,this.payload.SearchClientId=this.selectedDropDownClientIdValue,this.payload.SearchProjectId=this.selectedDropDownProjectOrDeparmentIdValue,this.payload.SearchWOStatusId=this.selectedDropDownWOStatusIdValue,this.payload.SearchWOName=this.typeServiceOrderValue,this.payload.SearchWONo=this.selectedWONo,this.payload.SearchOperationType=this.selectedDropDownOperationValue,this.payload.SearchUrgencyTypeId=this.selectedPriority,this.payload.SearchSupportType=this.selectedSupportType,this.payload.SearchTicketNo=this.selectedTicketNo,this.payload.SearchExpWrkStartDate=this.selectedExpWrkStartDate?this.datePipe.transform(this.selectedExpWrkStartDate,"dd-MM-yyyy"):null,this.payload.SearchCreatedDate=this.selectedCreatedDate?this.datePipe.transform(this.selectedCreatedDate,"dd-MM-yyyy"):null,r.displayStart&&(this.payload.displayStart=r.displayStart,this.page=r.page),this.loadData()}getDropdownTicketStatusList(r){this.ticketService.getMaintenanceStatus(r).subscribe(o=>{this.arrayListDropDownTicketStatus=o})}onDropdownTicketStatusValueChange(r){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchWOStatusId=this.selectedDropDownWOStatusIdValue,this.loadData(),this.activeCard=""}viewHandler(r){this.ticketService.sendTicketId=r,this.helpDeskService.pageAction="",this.ticketService.ticketPageAction="Basic Service Page",this.ticketService.lastStoreTicketRouterName="/maintenace-management/corrective/service-order/list-service-order",localStorage.setItem("lastStoreTicketRouterName",this.ticketService.lastStoreTicketRouterName),this.router.navigate(["/maintenace-management/corrective/ticket/ticket-view"])}loadData(){this.serviceOrderService.getWoList(this.commonFunctionService.clean(this.payload)).subscribe(r=>{this.serviceOrderList=r.list,console.log("res:::",this.serviceOrderList),this.setObjectBeforeRefesh(),this.serviceOrderList.length>0?(this.totalRecordsFromApi=r.list[0].totalCount,this.from=r.list.reduce((o,a)=>a.rowNum<o?a.rowNum:o,r.list[0].rowNum),this.to=r.list.reduce((o,a)=>a.rowNum>o?a.rowNum:o,r.list[0].rowNum),this.pageSize=this.payload.displayLength):(this.totalRecordsFromApi=0,this.from=0,this.to=0,this.pageSize=this.payload.displayLength)})}OnChangesPage(r){r&&(this.payload.displayStart=this.pageSize*(r-1),this.loadData())}getV2_TotalCountServiceOrderOnly(){this.serviceOrderService.getV2_TotalCountServiceOrderOnly().subscribe(r=>{this.totalCountServiceOrderOnly=r.data})}getTicketStatus(r){return this.commonService.returnStatusBadgeClasses(r)}confirm(r,o){this.deleteId=o,this.modalService.open(r,{centered:!0})}deleteData(r){}resetSerachVariable(){this.arrayListDropDownClientList=[],this.arrayListDropDownProjectOrDeparmentList=[],this.selectedDropDownCompanyIdValue=null,this.selectedDropDownClientIdValue=null,this.selectedDropDownProjectOrDeparmentIdValue=null,this.selectedDropDownOperationValue=null,this.selectedDropDownWOStatusIdValue=null,this.selectedTicketNo=null,this.selectedWONo=null,this.selectedDropDownOperationValue=null,this.selectedSupportType=null,this.typeServiceOrderValue=null,this.activeCard="",this.selectedExpWrkStartDate=null,this.selectedPriority=null,this.selectedCreatedDate=null,this.payload={displayLength:10,displayStart:0,SearchCompanyId:null,SearchClientId:null,SearchProjectId:null,SearchWOStatusId:null,SearchTicketNo:null,SearchWONo:null,SearchWOName:null,SearchOperationType:null,SearchSupportType:null,SearchUrgencyTypeId:null,SearchExpWrkStartDate:null,SearchCreatedDate:null},localStorage.removeItem("objectSerachForServiceOrder"),"Client User"===this.currentUserRole?this.resetAfterClientUser():(this.page=1,this.loadData())}resetAfterClientUser(){this.selectedDropDownCompanyIdValue=this.arrayListDropDownCompany[0].companyId,this.onDropdownCompanyValueChange(""),0!=this.arrayListDropDownClientList.length&&(this.selectedDropDownClientIdValue=this.arrayListDropDownClientList[0].clientId,this.onDropdownClientValueChange("")),0!=this.arrayListDropDownProjectOrDeparmentList.length&&"Client User"===this.currentUserRole&&(this.arrayListDropDownProjectOrDeparmentList.list.length>=2?this.projectDepartmentFieldDisiabled=!1:(this.projectDepartmentFieldDisiabled=!0,this.selectedDropDownProjectOrDeparmentIdValue=this.arrayListDropDownProjectOrDeparmentList[0].departmentId,this.onDropdownDepartmentValueChange("")))}getDropdownCompanyList(){this.dropdownServices.GetCompanyListDrobDown({}).subscribe(r=>{this.arrayListDropDownCompany=r.list,"Client User"===this.currentUserRole&&(this.selectedDropDownCompanyIdValue=this.arrayListDropDownCompany[0].companyId,this.onDropdownCompanyValueChange("")),this.setObjectBeforeRefesh()})}getDropdownClientlist(){this.dropdownServices.GetClientListDrobDown({SearchCompanyId:this.selectedDropDownCompanyIdValue}).subscribe(o=>{this.arrayListDropDownClientList=o.list,"Client User"===this.currentUserRole&&(this.selectedDropDownClientIdValue=this.arrayListDropDownClientList[0].clientId,this.onDropdownClientValueChange("")),this.setObjectBeforeRefesh()})}getDropdownDepartmentList(){this.dropdownServices.GetDepartmentListDrobDown({SearchCompanyId:this.selectedDropDownCompanyIdValue,SearchClientId:this.selectedDropDownClientIdValue,SearchProjectId:this.selectedDropDownProjectOrDeparmentIdValue}).subscribe(o=>{this.arrayListDropDownProjectOrDeparmentList=o.list,0!=o.list.length&&"Client User"===this.currentUserRole&&(o.list.length>=2?this.projectDepartmentFieldDisiabled=!1:(this.projectDepartmentFieldDisiabled=!0,this.selectedDropDownProjectOrDeparmentIdValue=this.arrayListDropDownProjectOrDeparmentList[0].departmentId,this.onDropdownDepartmentValueChange("")))})}onDropdownCompanyValueChange(r){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchCompanyId=this.selectedDropDownCompanyIdValue,this.selectedDropDownClientIdValue=null,this.selectedDropDownProjectOrDeparmentIdValue=null,this.payload.SearchClientId=this.selectedDropDownClientIdValue,this.payload.SearchProjectId=this.selectedDropDownProjectOrDeparmentIdValue,this.arrayListDropDownProjectOrDeparmentList=[],this.getDropdownClientlist(),this.loadData()}onDropdownClientValueChange(r){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchClientId=this.selectedDropDownClientIdValue,this.selectedDropDownProjectOrDeparmentIdValue=null,this.payload.SearchProjectId=this.selectedDropDownProjectOrDeparmentIdValue,this.getDropdownDepartmentList(),this.loadData()}onDropdownDepartmentValueChange(r){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchProjectId=this.selectedDropDownProjectOrDeparmentIdValue,this.loadData()}onDropdownOperationValueChange(r){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchOperationType=this.selectedDropDownOperationValue}resetSerachVariableWithModal(){this.selectedTicketNo=null,this.selectedWONo=null,this.selectedSupportType=null,this.selectedExpWrkStartDate=null,this.selectedCreatedDate=null,this.selectedPriority=null,this.selectedDropDownOperationValue=null,this.payload.SearchTicketNo=this.selectedTicketNo,this.payload.SearchWONo=this.selectedWONo,this.payload.SearchOperationType=this.selectedDropDownOperationValue,this.payload.SearchSupportType=this.selectedSupportType,this.payload.SearchUrgencyTypeId=this.selectedPriority,this.payload.SearchExpWrkStartDate=this.selectedExpWrkStartDate,this.payload.SearchCreatedDate=this.selectedCreatedDate,this.loadData()}submitFilterData(){this.payload.SearchTicketNo=this.selectedTicketNo,this.payload.SearchWONo=this.selectedWONo,this.payload.SearchOperationType=this.selectedDropDownOperationValue,this.payload.SearchSupportType=this.selectedSupportType,this.payload.SearchUrgencyTypeId=this.selectedPriority,this.payload.SearchExpWrkStartDate=this.selectedExpWrkStartDate?this.datePipe.transform(this.selectedExpWrkStartDate,"dd-MM-yyyy"):null,this.payload.SearchCreatedDate=this.selectedCreatedDate?this.datePipe.transform(this.selectedCreatedDate,"dd-MM-yyyy"):null,this.loadData()}openFilter(r){this.offcanvasService.open(r,{scroll:!0,position:"end",keyboard:!1,backdrop:"static",panelClass:"custom-offcanvas3"}).result.then(o=>{this.submitFilterData()},o=>{this.submitFilterData()})}getV2_MaintenanceWorkflowAudit(r,o,a){let h={TicketId:r};this.currentStatus=a,this.ticketService.getV2_MaintenanceWorkflowAudit(h).subscribe(m=>{this.maintenanceWorkflowAuditList=m.data,0!=this.maintenanceWorkflowAuditList.length?this.openAduit(o):(this.currentStatus=0,this.warning("No Workflow Audit Transaction "))})}warning(r){Z().fire({toast:!0,position:"top-end",icon:"warning",title:r,showConfirmButton:!1,timer:3e3})}openAduit(r){this.offcanvasService.open(r,{scroll:!0,position:"end",keyboard:!1,backdrop:"static",panelClass:"custom-offcanvas2"})}expandTitle(r){document.getElementById(r)}onCardClickActive(r,o){this.activeCard=r,this.arrayListDropDownClientList=[],this.arrayListDropDownProjectOrDeparmentList=[],this.selectedDropDownCompanyIdValue=null,this.selectedDropDownClientIdValue=null,this.selectedDropDownProjectOrDeparmentIdValue=null,this.selectedDropDownOperationValue=null,this.selectedDropDownWOStatusIdValue=o,this.selectedTicketNo=null,this.selectedWONo=null,this.selectedDropDownOperationValue=null,this.selectedSupportType=null,this.typeServiceOrderValue=null,this.payload={displayLength:10,displayStart:0,SearchCompanyId:null,SearchClientId:null,SearchProjectId:null,SearchWOStatusId:o,SearchTicketNo:null,SearchWONo:null,SearchWOName:null,SearchOperationType:null,SearchSupportType:null,SearchUrgencyTypeId:null},localStorage.removeItem("objectSerachForServiceOrder"),"Client User"===this.currentUserRole?this.resetAfterClientUser():(this.page=1,this.loadData())}getMX_MasterUrgentTypeList(){this.ticketService.getMX_MasterUrgentTypeList().subscribe(r=>{r&&(this.priorityList=r?.data)})}static{this.\u0275fac=function(o){return new(o||c)(e.Y36(v.FF),e.Y36(E.R),e.Y36(g.QS),e.Y36(W),e.Y36(t.uU),e.Y36(N.K),e.Y36(F.u),e.Y36(w.V),e.Y36(N.K),e.Y36(V.w),e.Y36(k.F0),e.Y36(B.S),e.Y36(v._B),e.Y36(j.l))}}static{this.\u0275cmp=e.Xpm({type:c,selectors:[["app-list-service-order"]],viewQuery:function(o,a){if(1&o&&e.Gf(K,7),2&o){let h;e.iGM(h=e.CRH())&&(a.inputerServiceName=h.first)}},features:[e._Bn([t.JJ])],decls:119,vars:49,consts:[[3,"title","breadcrumbItems"],[1,"row"],[1,"col-xxl-2","col-sm-6",3,"click"],[1,"card"],[1,"card-body"],[1,"d-flex","align-items-center"],[1,"avatar-sm","flex-shrink-0"],[1,"avatar-title","bg-light","text-primary","rounded-circle","fs-3"],[1,"ri-ticket-2-line","align-middle"],[1,"flex-grow-1","ms-3"],[1,"text-uppercase","fw-semibold","fs-12","mb-1"],[4,"ngIf"],[1,"ri-coupon-5-line","align-middle"],[1,"mdi","mdi-timer-sand","align-middle"],[1,"mdi","mdi-clock","align-middle"],[1,"mdi","mdi-ticket-confirmation-outline","align-middle"],[1,"mdi","mdi-cancel","align-middle"],[1,"col-lg-12"],[1,"card-header","border-0"],[1,"row","align-items-center","gy-3"],[1,"col-lg-auto"],[1,"card-title","mb-0"],[1,"col-lg"],[1,"search-box"],["type","search","name","searchTerm","placeholder","Service order name",1,"form-control",3,"ngModel","ngModelChange"],["inputerServiceName",""],[1,"ri-search-line","search-icon"],[1,"card-body","border","border-dashed","border-end-0","border-start-0"],[1,"row","g-3"],["bindLabel","companyName","bindValue","companyId","id","companyName","placeholder","Select Company","for","companyName",1,"w-100","mr-2",3,"items","clearable","ngModel","readonly","change","ngModelChange"],["bindLabel","clientName","bindValue","clientId","id","clientName","placeholder","Select Client","for","clientName",1,"w-100","mr-2",3,"items","disabled","clearable","ngModel","readonly","change","ngModelChange"],["bindLabel","departmentName","bindValue","departmentId","id","departmentName","placeholder","Select Project","for","departmentName",1,"w-100","mr-2",3,"readonly","items","disabled","clearable","ngModel","change","ngModelChange"],["bindLabel","assetStatus","bindValue","assetStatusId","id","ticketStatus","placeholder","Select Service order Status","for","ticketStatus",1,"w-100","mr-2",3,"items","clearable","ngModel","change","ngModelChange"],[1,"d-flex","justify-content-end"],["type","button",1,"btn",3,"click"],[1,"ri-equalizer-fill","align-bottom","me-1"],["type","button","ngbTooltip","Remove All Search",1,"btn","btn-danger","ms-1",3,"click"],[1,"ri-refresh-fill","me-1","align-bottom"],[1,"card-body","pt-0"],["ngbNav","",1,"nav","nav-tabs","nav-tabs-custom","nav-success","mb-3",3,"activeId"],["nav","ngbNav"],[3,"ngbNavItem"],["ngbNavContent",""],[1,"tab-content","text-muted"],[3,"ngbNavOutlet"],["filtetcontent",""],["openAduitOffSet",""],[1,"mb-0"],[1,"counter-value","cursor-pointer",3,"countUp","options"],[1,"table-responsive","table-card","mb-0"],[1,"table"],[1,"bg-light","text-muted","text-uppercase"],[1,"row","justify-content-md-between","align-items-md-center","gy-2"],[1,"col","col-sm-12","col","col-md-6"],["id","tickets-table_info","role","status","aria-live","polite",1,"dataTables_info","mb-2"],[1,"text-sm-right","float-end","listjs-pagination"],[3,"collectionSize","pageSize","page","maxSize","rotate","pageChange",4,"ngIf"],["colspan","8",1,"text-center"],[4,"ngFor","ngForOf"],[1,"align-top"],["href","javascript:void(0)",1,"fw-medium","link-primary",3,"click"],[1,"ri-eye-fill","align-bottom","ms-2","text-success","fs-15",3,"click"],[1,"title","align-top",3,"title","id","click"],[1,"status","align-top"],[3,"ngClass"],[1,"priority","align-top"],[1,"badge","text-uppercase",3,"ngClass"],["ngbDropdown","",1,"dropdown"],["type","button","data-bs-toggle","dropdown","aria-expanded","false","ngbDropdownToggle","",1,"btn","btn-soft-secondary","btn-sm","dropdown","arrow-none"],[1,"ri-more-fill","align-middle"],["ngbDropdownMenu","",1,"dropdown-menu","dropdown-menu-end"],["href","javascript:void(0)",1,"dropdown-item",3,"click"],[1,"ri-eye-fill","align-bottom","me-2","text-muted"],[3,"collectionSize","pageSize","page","maxSize","rotate","pageChange"],[1,"offcanvas-header","mb-0"],["id","exampleModalLabel",1,"modal-title","mb-0"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"offcanvas-body","mt-0"],[1,"col-lg-12","mb-3"],["for","selectedTicketNo",1,"form-label","fw-semibold"],["type","text","name","selectedTicketNo","id","selectedTicketNo","placeholder","Ticket No ",1,"form-control",3,"ngModel","ngModelChange"],["for","selectedWONo",1,"form-label","fw-semibold"],["type","text","name","selectedWONo","id","selectedWONo","placeholder","SO No.",1,"form-control",3,"ngModel","ngModelChange"],["for","selectedTicketTagId",1,"form-label","fw-semibold"],["bindLabel","name","bindValue","name","id","ticketStatus","placeholder","Select Service Type","for","ticketStatus",1,"w-100","mr-2",3,"items","clearable","ngModel","change","ngModelChange"],["for","selectedTicketTypeId",1,"form-label","fw-semibold"],["placeholder","Select Support Type","placeholder","Ticket Type",3,"items","clearable","ngModel","ngModelChange"],["bindLabel","urgencyTypeName","bindValue","urgencyTypeId","placeholder","Select Support Type","placeholder","Select Priority",3,"items","clearable","ngModel","ngModelChange"],["type","text","mwlFlatpickr","","placeholder","Select Expected Completion Date",1,"form-control","flatpickr-input",3,"altInput","convertModelValue","dateFormat","ngModel","ngModelChange"],["for","selectedCreatedDate",1,"form-label","fw-semibold"],["type","text","mwlFlatpickr","","placeholder","Select Service Order Created Date",1,"form-control","flatpickr-input",3,"altInput","convertModelValue","dateFormat","ngModel","ngModelChange"],[1,"offcanvas-footer","text-end","mb-3"],[1,"btn","btn-light","me-2",3,"click"],["type","submit",1,"btn","btn-primary","me-2",3,"click"],[1,"offcanvas-header"],[1,"offcanvas-title"],["class","text-danger m-auto",4,"ngIf"],[1,"offcanvas-body","pt-0"],[3,"Data"],[1,"text-end"],["type","button",1,"btn","btn-outline-danger",3,"click"],[1,"text-danger","m-auto"],[1,"fs-17","mb-0"]],template:function(o,a){if(1&o){const h=e.EpF();e._UZ(0,"app-breadcrumbs",0),e.TgZ(1,"div",1)(2,"div",2),e.NdJ("click",function(){return a.onCardClickActive("Total",null)}),e.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"span",7),e._UZ(8,"i",8),e.qZA()(),e.TgZ(9,"div",9)(10,"p",10),e._uU(11," Total "),e.qZA(),e.YNc(12,G,3,2,"ng-container",11)(13,z,3,0,"ng-container",11),e.qZA()()()()(),e.TgZ(14,"div",2),e.NdJ("click",function(){return a.onCardClickActive("Pending",2)}),e.TgZ(15,"div",3)(16,"div",4)(17,"div",5)(18,"div",6)(19,"span",7),e._UZ(20,"i",12),e.qZA()(),e.TgZ(21,"div",9)(22,"p",10),e._uU(23," Pending "),e.qZA(),e.YNc(24,Y,3,2,"ng-container",11)(25,H,3,0,"ng-container",11),e.qZA()()()()(),e.TgZ(26,"div",2),e.NdJ("click",function(){return a.onCardClickActive("In-Progress",30)}),e.TgZ(27,"div",3)(28,"div",4)(29,"div",5)(30,"div",6)(31,"span",7),e._UZ(32,"i",13),e.qZA()(),e.TgZ(33,"div",9)(34,"p",10),e._uU(35," In-Progress "),e.qZA(),e.YNc(36,$,3,2,"ng-container",11)(37,X,3,0,"ng-container",11),e.qZA()()()()(),e.TgZ(38,"div",2),e.NdJ("click",function(){return a.onCardClickActive("Partially",34)}),e.TgZ(39,"div",3)(40,"div",4)(41,"div",5)(42,"div",6)(43,"span",7),e._UZ(44,"i",14),e.qZA()(),e.TgZ(45,"div",9)(46,"p",10),e._uU(47," Partially "),e.qZA(),e.YNc(48,ee,3,2,"ng-container",11)(49,te,3,0,"ng-container",11),e.qZA()()()()(),e.TgZ(50,"div",2),e.NdJ("click",function(){return a.onCardClickActive("Completed",25)}),e.TgZ(51,"div",3)(52,"div",4)(53,"div",5)(54,"div",6)(55,"span",7),e._UZ(56,"i",15),e.qZA()(),e.TgZ(57,"div",9)(58,"p",10),e._uU(59," Completed "),e.qZA(),e.YNc(60,re,3,2,"ng-container",11)(61,ie,3,0,"ng-container",11),e.qZA()()()()(),e.TgZ(62,"div",2),e.NdJ("click",function(){return a.onCardClickActive("Canceled",19)}),e.TgZ(63,"div",3)(64,"div",4)(65,"div",5)(66,"div",6)(67,"span",7),e._UZ(68,"i",16),e.qZA()(),e.TgZ(69,"div",9)(70,"p",10),e._uU(71," Canceled "),e.qZA(),e.YNc(72,ne,3,2,"ng-container",11)(73,ae,3,0,"ng-container",11),e.qZA()()()()()(),e.TgZ(74,"div",1)(75,"div",17)(76,"div",3)(77,"div",18)(78,"div",19)(79,"div",20)(80,"h5",21),e._uU(81,"Service Order List"),e.qZA()(),e._UZ(82,"div",22)(83,"div",22),e.TgZ(84,"div",22)(85,"div",23)(86,"input",24,25),e.NdJ("ngModelChange",function(T){return a.typeServiceOrderValue=T}),e.qZA(),e._UZ(88,"i",26),e.qZA()()()(),e.TgZ(89,"div",27)(90,"div",28)(91,"div",22)(92,"ng-select",29),e.NdJ("change",function(T){return a.onDropdownCompanyValueChange(T)})("ngModelChange",function(T){return a.selectedDropDownCompanyIdValue=T}),e.qZA()(),e.TgZ(93,"div",22)(94,"ng-select",30),e.NdJ("change",function(T){return a.onDropdownClientValueChange(T)})("ngModelChange",function(T){return a.selectedDropDownClientIdValue=T}),e.qZA()(),e.TgZ(95,"div",22)(96,"ng-select",31),e.NdJ("change",function(T){return a.onDropdownDepartmentValueChange(T)})("ngModelChange",function(T){return a.selectedDropDownProjectOrDeparmentIdValue=T}),e.qZA()(),e.TgZ(97,"div",22)(98,"ng-select",32),e.NdJ("change",function(T){return a.onDropdownTicketStatusValueChange(T)})("ngModelChange",function(T){return a.selectedDropDownWOStatusIdValue=T}),e.qZA()(),e.TgZ(99,"div",22)(100,"div",33)(101,"button",34),e.NdJ("click",function(){e.CHM(h);const T=e.MAs(116);return e.KtG(a.openFilter(T))}),e._UZ(102,"i",35),e._uU(103," Filters "),e.qZA(),e.TgZ(104,"button",36),e.NdJ("click",function(){return a.resetSerachVariable()}),e._UZ(105,"i",37),e._uU(106," Clear "),e.qZA()()()()(),e.TgZ(107,"div",38)(108,"div")(109,"ul",39,40)(111,"li",41),e.YNc(112,pe,30,7,"ng-template",42),e.qZA()(),e.TgZ(113,"div",43),e._UZ(114,"div",44),e.qZA()()()()()(),e.YNc(115,he,39,19,"ng-template",null,45,e.W1O)(117,_,10,2,"ng-template",null,46,e.W1O)}if(2&o){const h=e.MAs(110);e.Q6J("title","Service")("breadcrumbItems",a.breadCrumbItems),e.xp6(4),e.Tol("Total"==a.activeCard?"activeCardClasss":""),e.xp6(8),e.Q6J("ngIf",0!=a.totalCountServiceOrderOnly.countTotalSO),e.xp6(1),e.Q6J("ngIf",0==a.totalCountServiceOrderOnly.countTotalSO),e.xp6(3),e.Tol("Pending"==a.activeCard?"activeCardClasss":""),e.xp6(8),e.Q6J("ngIf",0!=a.totalCountServiceOrderOnly.countPendingSO),e.xp6(1),e.Q6J("ngIf",0==a.totalCountServiceOrderOnly.countPendingSO),e.xp6(3),e.Tol("In-Progress"==a.activeCard?"activeCardClasss":""),e.xp6(8),e.Q6J("ngIf",0!=a.totalCountServiceOrderOnly.countInProgressSO),e.xp6(1),e.Q6J("ngIf",0==a.totalCountServiceOrderOnly.countInProgressSO),e.xp6(3),e.Tol("Partially"==a.activeCard?"activeCardClasss":""),e.xp6(8),e.Q6J("ngIf",0!=a.totalCountServiceOrderOnly.countOnHoldSO),e.xp6(1),e.Q6J("ngIf",0==a.totalCountServiceOrderOnly.countOnHoldSO),e.xp6(3),e.Tol("Completed"==a.activeCard?"activeCardClasss":""),e.xp6(8),e.Q6J("ngIf",0!=a.totalCountServiceOrderOnly.countCompletedSO),e.xp6(1),e.Q6J("ngIf",0==a.totalCountServiceOrderOnly.countCompletedSO),e.xp6(3),e.Tol("Canceled"==a.activeCard?"activeCardClasss":""),e.xp6(8),e.Q6J("ngIf",0!=a.totalCountServiceOrderOnly.countCanceledSO),e.xp6(1),e.Q6J("ngIf",0==a.totalCountServiceOrderOnly.countCanceledSO),e.xp6(13),e.Q6J("ngModel",a.typeServiceOrderValue),e.xp6(6),e.Q6J("items",a.arrayListDropDownCompany)("clearable",!0)("ngModel",a.selectedDropDownCompanyIdValue)("readonly",a.disabledWithAceessGroup),e.xp6(2),e.Q6J("items",a.arrayListDropDownClientList)("disabled",!a.selectedDropDownCompanyIdValue)("clearable",!0)("ngModel",a.selectedDropDownClientIdValue)("readonly",a.disabledWithAceessGroup),e.xp6(2),e.Q6J("readonly",a.projectDepartmentFieldDisiabled)("items",a.arrayListDropDownProjectOrDeparmentList)("disabled",!a.selectedDropDownCompanyIdValue||!a.selectedDropDownClientIdValue)("clearable",!0)("ngModel",a.selectedDropDownProjectOrDeparmentIdValue),e.xp6(2),e.Q6J("items",a.arrayListDropDownTicketStatus)("clearable",!0)("ngModel",a.selectedDropDownWOStatusIdValue),e.xp6(3),e.Tol(a.selectedExpWrkStartDate||a.selectedPriority||a.selectedTicketNo||a.selectedCreatedDate||a.selectedSupportType||a.selectedDropDownOperationValue||a.selectedDropDownOperationValue||a.selectedWONo?"btn-success":"btn-primary"),e.xp6(8),e.Q6J("activeId",1),e.xp6(2),e.Q6J("ngbNavItem",1),e.xp6(3),e.Q6J("ngbNavOutlet",h)}},dependencies:[t.mk,t.sg,t.O5,g.Fj,g.JJ,g.On,v.N9,v.jt,v.iD,v.Vi,v._L,M.P,U.as,q.n,Q.F,v.uN,v.Pz,v.nv,v.Is,v.Dy,P.w9],styles:[".activeCardClasss[_ngcontent-%COMP%]{background-color:#5ea3cb;color:#fff!important}.activeCardClasss[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff!important}"]})}}return c})()},{path:"",pathMatch:"full",redirectTo:"list-ticket"}];let n=(()=>{class c{static{this.\u0275fac=function(o){return new(o||c)}}static{this.\u0275mod=e.oAB({type:c})}static{this.\u0275inj=e.cJS({imports:[k.Bz.forChild(s),k.Bz]})}}return c})();var u=l(9417),C=l(662),x=l(5904),ue=l.n(x),me=l(4647),ve=l(9101),Te=l(6802),fe=l(5223),Se=l(6208),ye=l(7418),Ce=l(7625),Oe=l(9275),De=l(2032);let ke=(()=>{class c{constructor(){(0,C.N)(ue().loadAnimation)}static{this.\u0275fac=function(o){return new(o||c)}}static{this.\u0275mod=e.oAB({type:c})}static{this.\u0275inj=e.cJS({providers:[t.uU,v.Kz],imports:[t.ez,g.u5,n,g.UX,v.jF,v.ZS,v.XC,v.HK,M.m,U.JT.forRoot(),u.t,Se.m,v.ZQ,v.Oz,ve.p.pick(Te.kEt),me.d,fe.Ti,P.A0,v.IJ,ye.D,Ce.QM,Oe.Yy,De.c]})}}return c})()}}]);