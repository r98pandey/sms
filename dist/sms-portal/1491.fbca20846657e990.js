"use strict";(self.webpackChunksms_portal=self.webpackChunksms_portal||[]).push([[1491,9455],{1491:(I,L,l)=>{l.r(L),l.d(L,{LocationModule:()=>ct});var m=l(6814),u=l(2787),p=l(6223),C=l(2438),b=l(2181),f=l(3620),g=l(3997),Z=l(9397),r=l(3519),d=l.n(r),t=l(9212),x=l(4107),h=l(7291),v=l(2857),T=l(9455),N=l(3828),A=l(7235),y=l(4807),D=l(8617);const S=["inputer"];function M(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"button",34,35),t.NdJ("click",function(){t.CHM(e);const o=t.oxw(),a=t.MAs(37);return t.KtG(o.openLocationFormModal(a))}),t._UZ(3,"i",36),t._uU(4," Add Location "),t.qZA()()}}function U(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"a",53),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,a=t.oxw(2),s=t.MAs(37);return t.KtG(a.openLocationFormModal(s,!0,o))}),t._UZ(1,"i",58),t._uU(2," Edit"),t.qZA()}}function w(i,c){1&i&&t._UZ(0,"li",59)}function q(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"a",60),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,a=t.oxw(2),s=t.MAs(41);return t.KtG(a.confirmDelete(s,o.locationId))}),t._UZ(1,"i",61),t._uU(2," Delete"),t.qZA()}}function k(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td",48),t.NdJ("click",function(){const a=t.CHM(e).$implicit,s=t.oxw(2),_=t.MAs(39);return t.KtG(s.openLocationViewModal(_,a))}),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td")(12,"span")(13,"div",49)(14,"button",50),t._UZ(15,"i",51),t.qZA(),t.TgZ(16,"ul",52)(17,"li")(18,"a",53),t.NdJ("click",function(){const a=t.CHM(e).$implicit,s=t.oxw(2),_=t.MAs(39);return t.KtG(s.openLocationViewModal(_,a))}),t._UZ(19,"i",54),t._uU(20," View"),t.qZA()(),t.TgZ(21,"li"),t.YNc(22,U,3,0,"a",55),t.qZA(),t.YNc(23,w,1,0,"li",56),t.TgZ(24,"li"),t.YNc(25,q,3,0,"a",57),t.qZA()()()()()()}if(2&i){const e=c.$implicit,n=t.oxw(2);t.xp6(2),t.hij(" ",e.locationCode," "),t.xp6(2),t.hij(" ",e.locationName," "),t.xp6(2),t.hij(" ",e.companyName," "),t.xp6(2),t.hij(" ",e.clientName," "),t.xp6(2),t.hij(" ",e.departmentName," "),t.xp6(12),t.Q6J("ngIf",n.returnValueMenu.edit),t.xp6(1),t.Q6J("ngIf",n.returnValueMenu.delete),t.xp6(2),t.Q6J("ngIf",n.returnValueMenu.delete)}}function F(i,c){1&i&&(t.TgZ(0,"div",62),t._uU(1," No Location Found "),t.qZA())}function j(i,c){1&i&&(t._UZ(0,"i",66),t._uU(1," Prev "))}function J(i,c){1&i&&(t._uU(0," Next "),t._UZ(1,"i",67))}function G(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"ngb-pagination",63),t.NdJ("pageChange",function(o){t.CHM(e);const a=t.oxw(2);return t.KtG(a.page=o)})("pageChange",function(o){t.CHM(e);const a=t.oxw(2);return t.KtG(a.OnChangesPage(o))}),t.YNc(1,j,2,0,"ng-template",64)(2,J,2,0,"ng-template",65),t.qZA()}if(2&i){const e=t.oxw(2);t.Q6J("collectionSize",e.totalRecordsFromApi)("page",e.page)("pageSize",e.pageSize)("maxSize",2)("rotate",!0)}}function V(i,c){if(1&i&&(t.TgZ(0,"div",37)(1,"table",38)(2,"thead")(3,"tr",39)(4,"th",40),t._uU(5,"CODE"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Location NAME"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Company"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Client"),t.qZA(),t.TgZ(12,"th"),t._uU(13),t.qZA(),t.TgZ(14,"th"),t._uU(15,"Action"),t.qZA()()(),t.TgZ(16,"tbody"),t.YNc(17,k,26,8,"tr",41),t.qZA()(),t.YNc(18,F,2,0,"div",42),t.qZA(),t.TgZ(19,"div",43)(20,"div",44)(21,"div",45),t._uU(22),t.qZA()(),t.TgZ(23,"div",44)(24,"div",46),t.YNc(25,G,3,5,"ngb-pagination",47),t.qZA()()()),2&i){const e=t.oxw();t.xp6(13),t.Oqu(e.isProject?"Project":"Department"),t.xp6(4),t.Q6J("ngForOf",e.locationList),t.xp6(1),t.Q6J("ngIf",0===e.locationList.length),t.xp6(4),t.lnq(" Showing ",e.from," to ",e.to," of ",e.totalRecordsFromApi," entries "),t.xp6(3),t.Q6J("ngIf",e.totalRecordsFromApi>e.pageSize)}}function R(i,c){1&i&&(t.TgZ(0,"div")(1,"small",78),t._uU(2,"Company is Required"),t.qZA()())}function O(i,c){1&i&&(t.TgZ(0,"div")(1,"small",78),t._uU(2,"Client is Required"),t.qZA()())}function z(i,c){if(1&i&&(t.TgZ(0,"div")(1,"small",78),t._uU(2),t.qZA()()),2&i){const e=t.oxw(2);t.xp6(2),t.hij("",e.isProject?"Project":"Department"," is Required")}}function E(i,c){1&i&&(t.TgZ(0,"small",78),t._uU(1,"Location Code is required"),t.qZA())}function P(i,c){1&i&&(t.TgZ(0,"small",78),t._uU(1," Location code must be at least 2 characters Required"),t.qZA())}function Q(i,c){1&i&&(t.TgZ(0,"small",78),t._uU(1," Location code must be less than 5 characters Required"),t.qZA())}function Y(i,c){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,E,2,0,"small",95)(2,P,2,0,"small",95)(3,Q,2,0,"small",95),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.locationCode.errors.required),t.xp6(1),t.Q6J("ngIf",e.locationCode.errors.minlength),t.xp6(1),t.Q6J("ngIf",e.locationCode.errors.maxlength)}}function B(i,c){1&i&&(t.TgZ(0,"small",78),t._uU(1," Location Name is Required"),t.qZA())}function K(i,c){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,B,2,0,"small",95),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.locationName.errors.required)}}function H(i,c){1&i&&(t.TgZ(0,"small",78),t._uU(1," Remark is Required"),t.qZA())}function W(i,c){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,H,2,0,"small",95),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.remark.errors.required)}}function $(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"div",68)(1,"h4",69),t._uU(2),t.qZA(),t.TgZ(3,"button",70),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.dismiss("Cross click"))}),t.TgZ(4,"span",71),t._uU(5,"\xd7"),t.qZA()()(),t.TgZ(6,"div",72)(7,"form",73)(8,"div",74)(9,"div",75)(10,"div",1)(11,"div",76)(12,"label",77),t._uU(13,"Company "),t.TgZ(14,"span",78),t._uU(15,"*"),t.qZA()(),t.TgZ(16,"ng-select",79),t.NdJ("change",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.onTypeCompany(o))}),t.qZA(),t.YNc(17,R,3,0,"div",13),t.qZA(),t.TgZ(18,"div",80)(19,"label",81),t._uU(20,"Client "),t.TgZ(21,"span",78),t._uU(22,"*"),t.qZA()(),t.TgZ(23,"ng-select",82),t.NdJ("change",function(o){t.CHM(e);const a=t.oxw();return t.KtG(a.onTypeClient(o))}),t.qZA(),t.YNc(24,O,3,0,"div",13),t.qZA(),t.TgZ(25,"div",80)(26,"label",81),t._uU(27),t.TgZ(28,"span",78),t._uU(29,"*"),t.qZA()(),t._UZ(30,"ng-select",83),t.YNc(31,z,3,1,"div",13),t.qZA(),t.TgZ(32,"div",80)(33,"label",84),t._uU(34,"Location Code "),t.TgZ(35,"span",85),t._uU(36,"*"),t.qZA()(),t._UZ(37,"input",86),t.YNc(38,Y,4,3,"div",13),t.qZA(),t.TgZ(39,"div",87)(40,"label",88),t._uU(41,"Location Name "),t.TgZ(42,"span",85),t._uU(43,"*"),t.qZA()(),t._UZ(44,"input",89),t.YNc(45,K,2,1,"div",13),t.qZA(),t.TgZ(46,"div",87)(47,"label",88),t._uU(48,"Remark "),t.TgZ(49,"span",85),t._uU(50,"*"),t.qZA()(),t._UZ(51,"textarea",90),t.TgZ(52,"label",91),t._uU(53),t.qZA(),t.YNc(54,W,2,1,"div",13),t.qZA()()()()()(),t.TgZ(55,"div",92)(56,"button",93),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.dismiss("cancel"))}),t._uU(57," Close "),t.qZA(),t.TgZ(58,"button",94),t.NdJ("click",function(o){const s=t.CHM(e).$implicit,_=t.oxw();return t.KtG(_.save(s,o))}),t._uU(59," Submit "),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(2),t.hij(" ",e.editMode.isEdit?"Edit":"Add"," Location "),t.xp6(5),t.Q6J("formGroup",e.locationForm),t.xp6(9),t.Q6J("items",e.companyList)("clearable",!1),t.xp6(1),t.Q6J("ngIf",e.companyId.invalid&&e.companyId.touched),t.xp6(6),t.Q6J("items",e.clientList)("clearable",!1)("disabled",!e.companyId.value),t.xp6(1),t.Q6J("ngIf",e.clientId.invalid&&e.clientId.touched),t.xp6(3),t.hij("",e.isProject?"Project":"Department"," "),t.xp6(3),t.Q6J("items",e.departmentList)("clearable",!1)("disabled",!e.clientId.value)("placeholder",e.isProject?"Select Project":"Select Department"),t.xp6(1),t.Q6J("ngIf",e.clientId.invalid&&e.clientId.touched),t.xp6(6),t.ekj("is-invalid",e.locationCode.invalid&&e.locationCode.touched),t.xp6(1),t.Q6J("ngIf",e.locationCode.invalid&&e.locationCode.touched),t.xp6(6),t.ekj("is-invalid",e.locationName.invalid&&e.locationName.touched),t.xp6(1),t.Q6J("ngIf",e.locationName.invalid&&e.locationName.touched),t.xp6(6),t.ekj("is-invalid",e.remark.invalid&&e.remark.touched),t.Q6J("maxlength",e.maxCharsDecision),t.xp6(2),t.AsE(" Characters Remaining: ",null==e.remark||null==e.remark.value?null:e.remark.value.length,"/",e.maxCharsDecision,""),t.xp6(1),t.Q6J("ngIf",e.remark.invalid&&e.remark.touched),t.xp6(4),t.Q6J("disabled",e.locationForm.invalid)}}function X(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"div",96)(1,"h4",69),t._uU(2,"View Location"),t.qZA(),t.TgZ(3,"button",70),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.dismiss("Cross click"))}),t.TgZ(4,"span",71),t._uU(5,"\xd7"),t.qZA()()(),t.TgZ(6,"div",72)(7,"form",73)(8,"div",74)(9,"div",75)(10,"div",1)(11,"div",97)(12,"p",98),t._uU(13,"Company"),t.qZA(),t.TgZ(14,"p",99),t._uU(15),t.qZA()(),t.TgZ(16,"div",97)(17,"p",98),t._uU(18,"Client"),t.qZA(),t.TgZ(19,"p",99),t._uU(20),t.qZA()(),t.TgZ(21,"div",100)(22,"p",98),t._uU(23),t.qZA(),t.TgZ(24,"p",99),t._uU(25),t.qZA()(),t.TgZ(26,"div",100)(27,"p",98),t._uU(28,"Location"),t.qZA(),t.TgZ(29,"p",99),t._uU(30),t.qZA()(),t.TgZ(31,"div",100)(32,"p",98),t._uU(33,"Location Code"),t.qZA(),t.TgZ(34,"p",99),t._uU(35),t.qZA()(),t.TgZ(36,"div",100)(37,"p",98),t._uU(38,"Remark"),t.qZA(),t.TgZ(39,"p",99),t._uU(40),t.qZA()()()()()()(),t.TgZ(41,"div",92)(42,"button",101),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.dismiss("cancel"))}),t._uU(43," Close "),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(7),t.Q6J("formGroup",e.locationForm),t.xp6(8),t.hij(" ",e.locationDetail.companyName," "),t.xp6(5),t.hij(" ",e.locationDetail.clientName," "),t.xp6(3),t.hij(" ",e.isProject?"Project":"Department"," "),t.xp6(2),t.hij(" ",e.locationDetail.departmentName," "),t.xp6(5),t.hij(" ",e.locationDetail.locationName," "),t.xp6(5),t.hij(" ",e.locationDetail.locationCode," "),t.xp6(5),t.hij(" ",e.locationDetail.remark," ")}}function tt(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"div",102)(1,"div",103)(2,"button",104),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.dismiss("Cross click"))}),t.qZA()(),t.TgZ(3,"div",72)(4,"div",105),t._UZ(5,"lord-icon",106),t.TgZ(6,"div",107)(7,"h4"),t._uU(8,"You are about to delete a Location ?"),t.qZA(),t.TgZ(9,"p",108),t._uU(10," Deleting your location will remove all of your information from our database. "),t.qZA()()(),t.TgZ(11,"div",109)(12,"button",110),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.close("Close click"))}),t._UZ(13,"i",111),t._uU(14," Close "),t.qZA(),t.TgZ(15,"button",112),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.deleteLocation(o.deleteId))})("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.close("Close click"))}),t._uU(16," Yes, Delete It! "),t.qZA()()()()}}const et=[{path:"",component:(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=t.Xpm({type:i,selectors:[["app-location"]],decls:1,vars:0,template:function(n,o){1&n&&t._UZ(0,"router-outlet")},dependencies:[u.lC]})}}return i})(),children:[{path:"",pathMatch:"full",redirectTo:"location-list"},{path:"location-list",component:(()=>{class i{constructor(e,n,o,a,s,_,dt,pt,mt){this.locationService=e,this.router=n,this.formBuilder=o,this.modalService=a,this.commonFunctionService=s,this.dropdownServices=_,this.authService=dt,this.commonServiceFunction=pt,this.menuService=mt,this.locationList=[],this.maxCharsDecision=300,this.label="Location",this.breadCrumbItems=[{label:"Location"},{label:"Location List",active:!0}],this.editMode={isEdit:!1,data:{}},this.companyList=[],this.clientList=[],this.departmentList=[],this.selectedCompanyId=null,this.selectedClientId=null,this.selectedDepartmentId=null,this.to=0,this.from=0,this.pageSize=10,this.totalRecordsFromApi=0,this.assetList=[],this.page=1,this.collectionSize=0,this.payload={displayLength:10,displayStart:0,SearchCompanyId:null,SearchClientId:null,SearchDepartmentId:null,SearchLocationName:null},this.locationDetail={},this.returnValueMenu={access:!0,add:!0,delete:!0,edit:!0,reportPrint:!0,reportView:!0},this.searchLocation="",this.returnValueMenu=this.menuService.getvalueObjectreturn(this.router.url),this.buildForm()}ngOnInit(){this.isProject=this.authService.getisProject(),this.getLocationList(),this.getCompanyList(),localStorage.getItem("objectSerachForLocationList")&&this.getObjectAfterRefresh()}setObjectBeforeRefesh(){let e={};this.selectedCompanyId&&(e.SearchCompanyId=this.selectedCompanyId),this.companyList&&(e.companyList=this.companyList),this.clientList&&(e.clientList=this.clientList),this.departmentList&&(e.departmentList=this.departmentList),this.selectedClientId&&(e.SearchClientId=this.selectedClientId),this.selectedDepartmentId&&(e.SearchDepartmentId=this.selectedDepartmentId),this.searchLocation&&(e.SearchLocationName=this.searchLocation),this.page&&(e.displayStart=this.pageSize*(this.page-1),e.page=this.page),localStorage.setItem("objectSerachForLocationList",JSON.stringify(e))}getObjectAfterRefresh(){let e=JSON.parse(localStorage.getItem("objectSerachForLocationList"));this.companyList=e.companyList?e.companyList:[],this.clientList=e.clientList?e.clientList:[],this.departmentList=e.departmentList?e.departmentList:[],this.selectedCompanyId=e.SearchCompanyId?e.SearchCompanyId:null,this.selectedClientId=e.SearchClientId?e.SearchClientId:null,this.selectedDepartmentId=e.SearchDepartmentId?e.SearchDepartmentId:null,this.searchLocation=e.SearchLocationName?e.SearchLocationName:null,this.payload.SearchCompanyId=this.selectedCompanyId,this.payload.SearchClientId=this.selectedClientId,this.payload.SearchDepartmentId=this.selectedDepartmentId,this.payload.SearchLocationName=this.searchLocation,e.displayStart&&(this.payload.displayStart=e.displayStart,this.page=e.page),this.getCompanyList(),this.getLocationList()}getCompanyList(){this.dropdownServices.GetCompanyListDrobDown({}).subscribe(e=>{this.companyList=e.list,this.setObjectBeforeRefesh()})}getClientList(e){this.dropdownServices.getClientForApplicationSettingDrobDown({SearchCompanyId:e}).subscribe(n=>{this.clientList=n.list,this.setObjectBeforeRefesh()})}getDepartmentList(e,n){this.dropdownServices.GetDepartmentListDrobDown({SearchCompanyId:e,SearchClientId:n}).subscribe(o=>{this.departmentList=o.list,this.setObjectBeforeRefesh()})}getLocationList(){this.locationService.GetLocationTableList_ServerPagination(this.commonServiceFunction.clean(this.payload)).subscribe({next:e=>{this.locationList=e.list,this.setObjectBeforeRefesh(),this.locationList.length>0?(this.totalRecordsFromApi=e.list[0].totalCount,this.from=e.list.reduce((n,o)=>o.rowNum<n?o.rowNum:n,e.list[0].rowNum),this.to=e.list.reduce((n,o)=>o.rowNum>n?o.rowNum:n,e.list[0].rowNum),this.pageSize=this.payload.displayLength):(this.totalRecordsFromApi=0,this.from=0,this.to=0,this.pageSize=this.payload.displayLength)}})}OnChangesPage(e){e&&(this.payload.displayStart=this.pageSize*(e-1),this.getLocationList())}onTypeLocationNameChange(){this.searchLocation?this.payload.SearchLocationName=this.searchLocation:delete this.payload.SearchLocationName,this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchClientId=this.selectedClientId,this.payload.SearchCompanyId=this.selectedCompanyId,this.payload.SearchDepartmentId=this.selectedDepartmentId,this.getLocationList()}openLocationFormModal(e,n,o){this.editMode.isEdit=n,this.editMode.data=o,this.editMode.isEdit?(this.locationForm.patchValue({...o}),this.getClientList(o.companyId),this.getDepartmentList(o.companyId,o.clientId),this.locationForm.controls.companyId.disable(),this.locationForm.controls.departmentId.disable(),this.locationForm.controls.clientId.disable(),this.locationForm.controls.locationCode.disable()):(this.locationForm.reset(),this.locationForm.markAsUntouched(),this.locationForm.controls.companyId.enable(),this.locationForm.controls.departmentId.enable(),this.locationForm.controls.clientId.enable(),this.locationForm.controls.locationCode.enable()),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",centered:!0,backdrop:"static",keyboard:!1}).result.then(a=>{},a=>{})}getLocationDetail(e){this.locationService.getLocationDetail(e).subscribe({next:n=>{this.locationDetail=n.data,this.setObjectBeforeRefesh()}})}openLocationViewModal(e,n){this.getLocationDetail(n.locationId),this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",centered:!0,backdrop:"static",keyboard:!1}).result.then(o=>{},o=>{})}onTypeCompany(e){this.clientId.reset(),this.departmentId.reset(),this.getClientList(e.companyId)}onTypeClient(e){this.departmentId.reset(),this.getDepartmentList(this.companyId.value,e.clientId)}buildForm(){this.locationForm=this.formBuilder.group({departmentId:[null,p.kI.required],clientId:[null,p.kI.required],companyId:[null,p.kI.required],locationName:["",p.kI.required],locationCode:["",p.kI.required],remark:["",p.kI.required]})}get locationCode(){return this.locationForm.get("locationCode")}get locationName(){return this.locationForm.get("locationName")}get companyId(){return this.locationForm.get("companyId")}get clientId(){return this.locationForm.get("clientId")}get departmentId(){return this.locationForm.get("departmentId")}get remark(){return this.locationForm.get("remark")}findCompanyName(e){return this.companyList.find(n=>n.companyId===e)}findClientName(e){return this.clientList.find(n=>n.clientId===e)}findDepartmentName(e){return this.departmentList.find(n=>n.departmentId===e)}save(e,n){e.close("Ok",n," this.locationForm.getRawValue()",this.locationForm.getRawValue());const o=this.locationForm.getRawValue(),a={CompanyId:o.companyId,CompanyName:this.findCompanyName(o.companyId).companyName,DepartmentId:o.departmentId,DepartmentName:this.findDepartmentName(o.departmentId).departmentName,ClientId:o.clientId,ClientName:this.findClientName(o.clientId).clientName,LocationCode:o.locationCode,LocationName:o.locationName,Remark:o.remark};this.editMode.isEdit?(a.LocationId=this.editMode.data.locationId,this.locationService.postUpdateLocation(a).subscribe({next:s=>{this.success(s),this.getLocationList()}})):this.locationService.postLocation(a).subscribe({next:s=>{this.success(s),this.getLocationList()}}),e.close("Ok",n)}confirmDelete(e,n){this.deleteId=n,this.modalService.open(e,{centered:!0})}deleteLocation(e){this.locationService.postDeleteLocation({locationId:e}).subscribe({next:n=>{this.success(n),this.getLocationList()}})}success(e){d().fire({toast:!0,position:"top-end",icon:"success",title:e.message,showConfirmButton:!1,timer:3e3})}onCompanyValueChange(e){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchCompanyId=this.selectedCompanyId,this.selectedClientId=null,this.payload.SearchClientId=this.selectedClientId,this.selectedDepartmentId=null,this.payload.SearchDepartmentId=this.selectedDepartmentId,this.selectedCompanyId?this.getClientList(this.selectedCompanyId):(this.clientList=[],this.departmentList=[]),this.getLocationList()}onClientValueChange(e){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchClientId=this.selectedClientId,this.selectedDepartmentId=null,this.payload.SearchDepartmentId=this.selectedDepartmentId,this.selectedCompanyId&&this.selectedCompanyId?this.getDepartmentList(this.selectedCompanyId,this.selectedClientId):this.departmentList=[],this.getLocationList()}onChangeDepartment(e){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchDepartmentId=this.selectedDepartmentId,this.getLocationList()}clearAllPayload(){this.payload={displayLength:10,displayStart:0,SearchCompanyId:null,SearchClientId:null,SearchDepartmentId:null},this.searchLocation=null,this.selectedDepartmentId=null,this.selectedClientId=null,this.selectedCompanyId=null,this.getLocationList()}ngAfterViewInit(){(0,C.R)(this.input.nativeElement,"input").pipe((0,b.h)(Boolean),(0,f.b)(300),(0,g.x)(),(0,Z.b)(e=>{this.onTypeLocationNameChange()})).subscribe()}static{this.\u0275fac=function(n){return new(n||i)(t.Y36(x.a),t.Y36(u.F0),t.Y36(p.qu),t.Y36(h.FF),t.Y36(v.K),t.Y36(T.V),t.Y36(N.u),t.Y36(v.K),t.Y36(A.l))}}static{this.\u0275cmp=t.Xpm({type:i,selectors:[["app-location-list"]],viewQuery:function(n,o){if(1&n&&t.Gf(S,7),2&n){let a;t.iGM(a=t.CRH())&&(o.input=a.first)}},decls:42,vars:19,consts:[[3,"title","breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","border-0"],[1,"row","align-items-center","gy-3"],[1,"col-sm-3","col-xxl-3"],[1,"card-title"],[1,"col-sm-9","col-xxl-9","d-flex","gap-2","flex-wrap","justify-content-end"],[1,"search-box","w-50"],["type","search","name","searchTerm","placeholder","Search for location name",1,"form-control",3,"ngModel","ngModelChange"],["inputer",""],[1,"ri-search-line","search-icon"],[4,"ngIf"],[1,"card-body","border","border-dashed","border-end-0","border-start-0"],[1,"row","g-3"],[1,"col-lg"],["bindLabel","companyName","bindValue","companyId","id","companyName","placeholder","Select Company",1,"w-100","mr-2",3,"items","clearable","ngModel","change","ngModelChange"],["bindLabel","clientName","bindValue","clientId","id","clientName","placeholder","Select Client",1,"w-100","mr-2",3,"items","disabled","clearable","ngModel","change","ngModelChange"],["bindLabel","departmentName","bindValue","departmentId","id","clientName",1,"w-100","mr-2",3,"items","disabled","clearable","ngModel","placeholder","change","ngModelChange"],[1,"col-lg-auto"],[1,"d-flex","justify-content-end"],["type","button","ngbTooltip","Remove All Search",1,"btn","btn-danger","ms-1",3,"click"],[1,"ri-refresh-fill","me-1","align-bottom"],[1,"card-body","pt-0"],["ngbNav","",1,"nav","nav-tabs","nav-tabs-custom","nav-success","mb-3",3,"activeId"],["nav","ngbNav"],[3,"ngbNavItem"],["ngbNavContent",""],[1,"tab-content","text-muted"],[3,"ngbNavOutlet"],["formModel",""],["viewModal",""],["deleteModel",""],["type","button","id","create-btn",1,"btn","btn-success","add-btn",3,"click"],["button",""],[1,"ri-add-line","align-bottom","me-1"],[1,"table-responsive","table-card","mb-0"],[1,"table"],[1,"bg-light","text-muted","text-uppercase"],[1,"ps-4"],[4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],[1,"row","justify-content-md-between","align-items-md-center","gy-2"],[1,"col-sm-6"],["id","tickets-table_info","role","status","aria-live","polite",1,"dataTables_info","mb-2"],[1,"text-sm-right","float-end","listjs-pagination"],[3,"collectionSize","page","pageSize","maxSize","rotate","pageChange",4,"ngIf"],[1,"ps-4","fw-medium","link-primary",3,"click"],["ngbDropdown","",1,"dropdown","ms-2"],["type","button","data-bs-toggle","dropdown","aria-expanded","false","ngbDropdownToggle","",1,"btn","btn-soft-secondary","btn-sm","dropdown","arrow-none"],[1,"ri-more-fill"],["ngbDropdownMenu","",1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item","cursor-pointer",3,"click"],[1,"ri-eye-fill","align-bottom","me-2","text-muted"],["class","dropdown-item cursor-pointer",3,"click",4,"ngIf"],["class","dropdown-divider",4,"ngIf"],["class","dropdown-item cursor-pointer","data-bs-toggle","modal","data-bs-target","#removeItemModal",3,"click",4,"ngIf"],[1,"ri-pencil-fill","align-bottom","me-2","text-muted"],[1,"dropdown-divider"],["data-bs-toggle","modal","data-bs-target","#removeItemModal",1,"dropdown-item","cursor-pointer",3,"click"],[1,"ri-delete-bin-fill","align-bottom","me-2","text-muted"],[1,"text-center"],[3,"collectionSize","page","pageSize","maxSize","rotate","pageChange"],["ngbPaginationPrevious",""],["ngbPaginationNext",""],[1,"ci-arrow-left","me-2"],[1,"ci-arrow-right","ms-2"],[1,"modal-header","p-3","bg-info-subtle"],["id","modal-title",1,"modal-title"],["type","button","aria-label","Close button","aria-describedby","modal-title",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"formGroup"],[1,"mb-2"],[1,"card-body"],[1,"form-group"],["for","companyId",1,"form-label"],[1,"text-danger"],["bindLabel","companyName","bindValue","companyId","id","companyId","formControlName","companyId","placeholder","Select Company",1,"w-100","mr-2","mb-1",3,"items","clearable","change"],[1,"form-group","mt-2"],["for","Client",1,"form-label"],["bindLabel","clientName","bindValue","clientId","id","clientId","formControlName","clientId","placeholder","Select Client",1,"w-100","mr-2","mb-1",3,"items","clearable","disabled","change"],["bindLabel","departmentName","bindValue","departmentId","id","departmentId","formControlName","departmentId",1,"w-100","mr-2","mb-1",3,"items","clearable","disabled","placeholder"],["for","code",1,"form-label"],[2,"color","red"],["type","text","id","locationCode","name","locationCode","uppercase","","formControlName","locationCode","placeholder","Location Code","maxlength","6",1,"form-control","mb-1"],[1,"form-group","col-md-12","mt-2"],["for","name",1,"form-label"],["type","text","id","name","formControlName","locationName","placeholder","Location Name ",1,"form-control","mb-1"],["id","name","formControlName","remark","rows","5","placeholder","Remark ",1,"form-control","mb-1",3,"maxlength"],[1,"nopadding","clrlbl"],[1,"modal-footer"],["type","button",1,"btn","btn-danger","mr-2",3,"click"],["type","button","ngbAutofocus","",1,"btn","btn-success","mr-2","mb-2","mb-md-0",3,"disabled","click"],["class","text-danger",4,"ngIf"],[1,"modal-header","pb-3","bg-info-subtle"],[1,"col-6"],[1,"mb-2","fw-bold"],[1,"fs-14","mb-0"],[1,"col-6","mt-3"],["type","button",1,"btn","btn-danger","me-2",3,"click"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gsqxdxog.json","trigger","loop","colors","primary:#405189,secondary:#f06548",2,"width","90px","height","90px"],[1,"mt-4","pt-2","fs-15","mx-4","mx-sm-5"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["data-bs-dismiss","modal","id","deleteRecord-close",1,"btn","btn-danger",3,"click"],[1,"ri-close-line","me-1","align-middle"],["type","button","id","delete-product",1,"btn","btn-primary",3,"click"]],template:function(n,o){if(1&n&&(t._UZ(0,"app-breadcrumbs",0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h5",7),t._uU(8,"Location List"),t.qZA()(),t.TgZ(9,"div",8)(10,"div",9)(11,"input",10,11),t.NdJ("ngModelChange",function(s){return o.searchLocation=s}),t.qZA(),t._UZ(13,"i",12),t.qZA(),t.YNc(14,M,5,0,"div",13),t.qZA()()(),t.TgZ(15,"div",14)(16,"div",15)(17,"div",16)(18,"ng-select",17),t.NdJ("change",function(s){return o.onCompanyValueChange(s)})("ngModelChange",function(s){return o.selectedCompanyId=s}),t.qZA()(),t.TgZ(19,"div",16)(20,"ng-select",18),t.NdJ("change",function(s){return o.onClientValueChange(s)})("ngModelChange",function(s){return o.selectedClientId=s}),t.qZA()(),t.TgZ(21,"div",16)(22,"ng-select",19),t.NdJ("change",function(s){return o.onChangeDepartment(s)})("ngModelChange",function(s){return o.selectedDepartmentId=s}),t.qZA()(),t.TgZ(23,"div",20)(24,"div",21)(25,"button",22),t.NdJ("click",function(){return o.clearAllPayload()}),t._UZ(26,"i",23),t._uU(27," Clear "),t.qZA()()()()(),t.TgZ(28,"div",24)(29,"div")(30,"ul",25,26)(32,"li",27),t.YNc(33,V,26,7,"ng-template",28),t.qZA()(),t.TgZ(34,"div",29),t._UZ(35,"div",30),t.qZA()()()()()(),t.YNc(36,$,60,28,"ng-template",null,31,t.W1O)(38,X,44,8,"ng-template",null,32,t.W1O)(40,tt,17,0,"ng-template",null,33,t.W1O)),2&n){const a=t.MAs(31);t.Q6J("title",o.label)("breadcrumbItems",o.breadCrumbItems),t.xp6(11),t.Q6J("ngModel",o.searchLocation),t.xp6(3),t.Q6J("ngIf",o.returnValueMenu.add),t.xp6(4),t.Q6J("items",o.companyList)("clearable",!0)("ngModel",o.selectedCompanyId),t.xp6(2),t.Q6J("items",o.clientList)("disabled",!o.selectedCompanyId||0===o.selectedCompanyId)("clearable",!0)("ngModel",o.selectedClientId),t.xp6(2),t.Q6J("items",o.departmentList)("disabled",!o.selectedClientId||0===o.selectedClientId)("clearable",!0)("ngModel",o.selectedDepartmentId)("placeholder",o.isProject?"Select Project":"Select Department"),t.xp6(8),t.Q6J("activeId",1),t.xp6(2),t.Q6J("ngbNavItem",1),t.xp6(3),t.Q6J("ngbNavOutlet",a)}},dependencies:[m.sg,m.O5,p._Y,p.Fj,p.JJ,p.JL,p.nD,p.On,p.sg,p.u,y.w9,h.jt,h.iD,h.Vi,h.N9,h.GZ,h.ju,D.n,h.uN,h.Pz,h.nv,h.Is,h.Dy],styles:["@media only screen and (max-width: 600px){.w-50[_ngcontent-%COMP%]{width:100%!important}}"]})}}return i})()}]}];let ot=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=t.oAB({type:i})}static{this.\u0275inj=t.cJS({imports:[u.Bz.forChild(et),u.Bz]})}}return i})();var it=l(6903),nt=l(6762),at=l(6208),lt=l(9417),st=l(9101),rt=l(6802);let ct=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=t.oAB({type:i})}static{this.\u0275inj=t.cJS({imports:[m.ez,ot,m.ez,p.u5,p.UX,y.A0,h.XC,h.M,it.X,h.jF,h.ZS,nt.JT,at.m,lt.t,st.p.pick(rt.kEt),h.Oz]})}}return i})()},9455:(I,L,l)=>{l.d(L,{V:()=>f});var m=l(9862),u=l(553),p=l(9212),C=l(2787),b=l(5035);let f=(()=>{class g{constructor(r,d,t){this._http=r,this._route=d,this.authService=t}GetCompanyListDrobDown(r){return this._http.post(u.N.apiUrl+"api/V2_Master/GetCompanyListDrobDown",r,{headers:(new m.WM).set("Content-Type","application/json").set("Authorization","Bearer "+this.token)})}GetClientListDrobDown(r){return this._http.post(u.N.apiUrl+"api/V2_Master/GetClientListDrobDown",r,{headers:(new m.WM).set("Content-Type","application/json").set("Authorization","Bearer "+this.token)})}GetDepartmentListDrobDown(r){return this._http.post(u.N.apiUrl+"api/V2_Master/GetDepartmentListDrobDown",r,{headers:(new m.WM).set("Content-Type","application/json").set("Authorization","Bearer "+this.token)})}GetCategoryListDrobDown(r){return this._http.post(u.N.apiUrl+"api/V2_Master/GetCategoryListDrobDown",r,{headers:(new m.WM).set("Content-Type","application/json").set("Authorization","Bearer "+this.token)})}GetSubCategoryListDrobDown(r){return this._http.post(u.N.apiUrl+"api/V2_Master/GetSubCategoryListDrobDown",r,{headers:(new m.WM).set("Content-Type","application/json").set("Authorization","Bearer "+this.token)})}GetVendorListDrobDown(r){return this._http.post(u.N.apiUrl+"api/V2_Master/GetVendorListDrobDown",r,{headers:(new m.WM).set("Content-Type","application/json").set("Authorization","Bearer "+this.token)})}GetLocationListDrobDown(r){return this._http.post(u.N.apiUrl+"api/V2_Master/GetLocationListDrobDown",r,{headers:(new m.WM).set("Content-Type","application/json").set("Authorization","Bearer "+this.token)})}getCountryList(){return this._http.get(u.N.apiUrl+"api/Master/GetCountryList",{headers:(new m.WM).set("Content-Type","application/json")})}getCountryListDrobDown(){return this._http.get(u.N.apiUrl+"api/V2_Master/GetCountryListDrobDown",{headers:(new m.WM).set("Content-Type","application/json")})}getClientForApplicationSettingDrobDown(r){return this._http.post(u.N.apiUrl+"api/V2_Master/GetClientForApplicationSettingDrobDown",r,{headers:(new m.WM).set("Content-Type","application/json").set("Authorization","Bearer "+this.token)})}getV2_UserListDD(r){return this._http.post(u.N.apiUrl+"api/Maintenance/GetV2_UserListDD",r,{headers:(new m.WM).set("Content-Type","application/json").set("Authorization","Bearer "+this.token)})}static{this.\u0275fac=function(d){return new(d||g)(p.LFG(m.eN),p.LFG(C.F0),p.LFG(b.$))}}static{this.\u0275prov=p.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"})}}return g})()}}]);