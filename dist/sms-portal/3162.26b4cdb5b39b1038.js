"use strict";(self.webpackChunksms_portal=self.webpackChunksms_portal||[]).push([[3162],{3162:(ko,V,r)=>{r.r(V),r.d(V,{TicketModule:()=>To,TicketsModule:()=>fo});var m=r(6814),p=r(6223),d=r(7291),A=r(9275),K=r(2032),w=r(6762),M=r(9417),z=r(662),$=r(5904),ee=r.n($),x=r(2787),te=r(7930),J=r(6676),ie=r(8568),ne=r(1517),ae=r(3519),k=r.n(ae),Q=r(859),e=r(9212),I=r(5143),y=r(3828),D=r(7235),Z=r(2857),U=r(9455),P=r(6593),q=r(8617),R=r(4647),S=r(4807),L=r(7680),oe=r(5861);const se=["imgRenderer"],le=i=>({"new-row":i});function ce(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",6),e._UZ(2,"img",7,8),e.TgZ(4,"i",9),e.NdJ("click",function(n){const l=e.CHM(t).$implicit;return e.oxw().removeImage(l),e.KtG(n.stopPropagation())}),e.qZA()()()}if(2&i){const t=s.$implicit,a=s.index;e.xp6(1),e.Q6J("ngClass",e.VKq(2,le,a%3==0&&0!==a)),e.xp6(1),e.Q6J("src",t.url,e.LSH)}}let re=(()=>{class i{constructor(t){this.cdr=t,this.imageData=new e.vpe,this.images=[]}ngOnChanges(t){this.images=this.oldDataSave}onPaste(t){const a=t.clipboardData.items;for(const n of a)if(0===n.type.indexOf("image")){const o=n.getAsFile(),c=(new File([o],"your-filename.jpg"),new FileReader);c.onload=g=>{this.images.push({url:g.target.result,blob:o}),this.imageData.emit(this.images)},c.readAsDataURL(o)}}removeImage(t){const a=this.images.indexOf(t);-1!==a&&(this.images.splice(a,1),this.imageData.emit(this.images),this.cdr.detectChanges())}pasteFromClipboard(){var t=this;return(0,oe.Z)(function*(){try{const a=yield navigator.clipboard.read();for(const n of a)if(n.types.includes("image/png")||n.types.includes("image/jpeg")){const o=yield n.getType("image/png"),c=(new File([o],"pasted-image.png"),new FileReader);c.onload=g=>{t.images.push({url:g.target.result,blob:o}),t.imageData.emit(t.images)},c.readAsDataURL(o)}}catch(a){console.error("Error reading clipboard:",a)}})()}static{this.\u0275fac=function(a){return new(a||i)(e.Y36(e.sBO))}}static{this.\u0275cmp=e.Xpm({type:i,selectors:[["app-catalog-page-upload"]],viewQuery:function(a,n){if(1&a&&e.Gf(se,5),2&a){let o;e.iGM(o=e.CRH())&&(n.imgRenderer=o.first)}},inputs:{oldDataSave:"oldDataSave"},outputs:{imageData:"imageData"},features:[e.TTD],decls:8,vars:1,consts:[[1,"container-fluid","p-0"],[1,"dropzone",3,"paste"],[1,"btn","btn-sm","btn-primary","mb-3",3,"click"],[1,"preview-section"],["class","image-container",4,"ngFor","ngForOf"],[1,"image-container"],[1,"image-wrapper",3,"ngClass"],[1,"img-size-withd-upload",3,"src"],["imgRenderer",""],["type","button",1,"ri-close-circle-line","ri-close-circle-line2",3,"click"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0)(1,"div",1),e.NdJ("paste",function(l){return n.onPaste(l)}),e.TgZ(2,"p"),e._uU(3,"Paste images here"),e.qZA(),e.TgZ(4,"button",2),e.NdJ("click",function(){return n.pasteFromClipboard()}),e._uU(5,"Paste"),e.qZA(),e.TgZ(6,"div",3),e.YNc(7,ce,5,4,"div",4),e.qZA()()()),2&a&&(e.xp6(7),e.Q6J("ngForOf",n.images))},dependencies:[m.mk,m.sg],styles:['.container-view[_ngcontent-%COMP%], .dropzone[_ngcontent-%COMP%]{border:2px dashed #717386;padding:20px;text-align:center;cursor:pointer}.dropzone[_ngcontent-%COMP%]:hover{border:4px dashed #5477e1}.preview-section[_ngcontent-%COMP%]{overflow-x:auto;display:flex;flex-wrap:wrap}.image-container[_ngcontent-%COMP%]{width:calc(20% - 10px);margin-right:10px;margin-bottom:10px}.image-wrapper[_ngcontent-%COMP%]{position:relative;overflow:hidden;margin-bottom:5px}img[_ngcontent-%COMP%]{max-width:100%;height:auto}.ri-close-circle-line2[_ngcontent-%COMP%]{position:absolute;top:-3px;right:17px;cursor:pointer;opacity:0;transition:opacity .3s ease;font-size:31px;z-index:2;color:#fff}.image-wrapper[_ngcontent-%COMP%]:hover   .ri-close-circle-line2[_ngcontent-%COMP%]{opacity:1}.image-wrapper[_ngcontent-%COMP%]:hover:before{content:"";position:absolute;top:0;left:12px;width:85%;height:100%;background-color:#00000080;z-index:1;border-radius:8px}.new-row[_ngcontent-%COMP%]{clear:both}.fa-download-diary[_ngcontent-%COMP%]{font-size:90px;opacity:.4}.dropzoneLabel[_ngcontent-%COMP%]{display:grid}.img-size-withd-upload[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:12px}.dropzone[_ngcontent-%COMP%]{min-height:180px!important;border-radius:6px}']})}}return i})();const de=["defaultNav"];function pe(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",9)(1,"div",37)(2,"input",38),e.NdJ("change",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.onClickisGlobal(n))}),e.qZA(),e.TgZ(3,"label",39),e._uU(4," Internal Ticket purpose"),e.qZA()()()}}function _e(i,s){1&i&&(e.TgZ(0,"small",42),e._uU(1," Company is Required "),e.qZA())}function me(i,s){if(1&i&&(e.TgZ(0,"div",40),e.YNc(1,_e,2,0,"small",41),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.company.errors.required)}}function ge(i,s){1&i&&(e.TgZ(0,"small",42),e._uU(1," Client is Required "),e.qZA())}function ue(i,s){if(1&i&&(e.TgZ(0,"div",40),e.YNc(1,ge,2,0,"small",41),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.client.errors.required)}}function he(i,s){if(1&i&&(e.TgZ(0,"small",42),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.isProject?"Project":"Department"," is Required")}}function Te(i,s){if(1&i&&(e.TgZ(0,"div",40),e.YNc(1,he,2,1,"small",41),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.project.errors.required)}}function fe(i,s){1&i&&(e.TgZ(0,"small",42),e._uU(1," Service Type is Required"),e.qZA())}function ke(i,s){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,fe,2,0,"small",41),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.operationType.errors.required)}}function be(i,s){1&i&&(e.TgZ(0,"small",42),e._uU(1," Ticket Type is Required"),e.qZA())}function ve(i,s){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,be,2,0,"small",41),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.ticketType||null==t.ticketType.errors?null:t.ticketType.errors.required)}}function xe(i,s){1&i&&(e.TgZ(0,"small",42),e._uU(1," Ticket Category is Required"),e.qZA())}function Ze(i,s){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,xe,2,0,"small",41),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.type||null==t.type.errors?null:t.type.errors.required)}}function Ce(i,s){1&i&&(e.TgZ(0,"small",42),e._uU(1," Priority is Required"),e.qZA())}function Ie(i,s){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Ce,2,0,"small",41),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.urgent||null==t.urgent.errors?null:t.urgent.errors.required)}}function ye(i,s){1&i&&(e.TgZ(0,"small",42),e._uU(1," Title is Required "),e.qZA())}function we(i,s){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,ye,2,0,"small",41),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.title.errors.required)}}const Ae=i=>({"new-row":i});function De(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",58)(1,"div",59),e._UZ(2,"img",60,61),e.TgZ(4,"i",62),e.NdJ("click",function(n){const l=e.CHM(t).$implicit;return e.oxw(4).onRemove(l),e.KtG(n.stopPropagation())}),e.qZA()()()}if(2&i){const t=s.index,a=e.oxw(4);e.xp6(1),e.Q6J("ngClass",e.VKq(2,Ae,t%3==0&&0!==t)),e.xp6(1),e.Q6J("src",a.base64Strings[t],e.LSH)}}function Ue(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",49)(1,"div",50)(2,"ngx-dropzone",51),e.NdJ("change",function(n){e.CHM(t);const o=e.oxw(3);return e.KtG(o.onSelect(n))}),e.TgZ(3,"ngx-dropzone-label",52),e._uU(4," Drag and drop/Click here to upload  "),e.qZA()(),e.TgZ(5,"div",53),e.YNc(6,De,5,4,"div",54),e.qZA()(),e.TgZ(7,"div",55)(8,"h4",56),e._uU(9," Multiple Image Paste "),e.qZA(),e.TgZ(10,"app-catalog-page-upload",57),e.NdJ("imageData",function(n){e.CHM(t);const o=e.oxw(3);return e.KtG(o.getImage(n))}),e.qZA()()()}if(2&i){const t=e.oxw(3);e.xp6(2),e.Q6J("multiple",!0)("url",!1),e.xp6(4),e.Q6J("ngForOf",t.file),e.xp6(4),e.Q6J("oldDataSave",t.pasteImageAll)}}function qe(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td",69),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"i",70),e.NdJ("click",function(n){const l=e.CHM(t).index;return e.oxw(5).onRemoveFilleMultiply(l),e.KtG(n.stopPropagation())}),e.qZA()()()}if(2&i){const t=s.$implicit,a=e.oxw(5);e.xp6(1),e.Q6J("title",t.name),e.xp6(1),e.hij(" ",a.truncateFileName(t.name,t)," ")}}function Se(i,s){if(1&i&&(e.TgZ(0,"div",65)(1,"div",66)(2,"table",67)(3,"thead")(4,"tr")(5,"th"),e._uU(6,"File Name"),e.qZA(),e._UZ(7,"th"),e.qZA()(),e.TgZ(8,"tbody"),e.YNc(9,qe,5,2,"tr",68),e.qZA()()()()),2&i){const t=e.oxw(4);e.xp6(9),e.Q6J("ngForOf",t.multiplyFileUpdload)}}function Le(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",49)(1,"div",50)(2,"ngx-dropzone",63),e.NdJ("change",function(n){e.CHM(t);const o=e.oxw(3);return e.KtG(o.onSelectFilleMultiply(n))})("change",function(n){return n}),e.TgZ(3,"ngx-dropzone-label",52),e._uU(4," Drag and Drop File here/Click here to upload files "),e.qZA()(),e.YNc(5,Se,10,1,"div",64),e.qZA()()}if(2&i){const t=e.oxw(3);e.xp6(2),e.Q6J("multiple",!0)("url",!0),e.xp6(3),e.Q6J("ngIf",0!=t.multiplyFileUpdload.length)}}function Ne(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",43)(2,"div",4)(3,"div",5)(4,"h4",6),e._uU(5," Multiple Image/File Upload "),e.qZA()(),e.TgZ(6,"div",7)(7,"ul",25,48),e.NdJ("activeIdChange",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.multplyImageFileTab=n)}),e.TgZ(9,"li",27)(10,"a",28)(11,"div",29)(12,"p",30),e._uU(13,"Image"),e.qZA()()(),e.YNc(14,Ue,11,4,"ng-template",31),e.qZA(),e.TgZ(15,"li",27)(16,"a",28)(17,"div",29)(18,"p",30),e._uU(19,"File"),e.qZA()()(),e.YNc(20,Le,6,3,"ng-template",31),e.qZA()(),e.TgZ(21,"div",32),e._UZ(22,"div",33),e.qZA()()()(),e.BQk()}if(2&i){const t=e.MAs(8),a=e.oxw(2);e.xp6(7),e.Q6J("activeId",a.multplyImageFileTab),e.xp6(2),e.Q6J("ngbNavItem",1),e.xp6(6),e.Q6J("ngbNavItem",2),e.xp6(7),e.Q6J("ngbNavOutlet",t)}}const F=()=>["heading","|","bold","italic","|","NumberedList","BulletedList"],j=i=>({toolbar:i});function Oe(i,s){if(1&i&&(e.TgZ(0,"div",2)(1,"div",43)(2,"div",44)(3,"div",7)(4,"div",9)(5,"label",16),e._uU(6,"Title"),e.TgZ(7,"span",11),e._uU(8,"*"),e.qZA()(),e._UZ(9,"input",45),e.TgZ(10,"label",46),e._uU(11),e.qZA(),e.YNc(12,we,2,1,"div",19),e.qZA(),e.TgZ(13,"div")(14,"label"),e._uU(15,"Description"),e.qZA(),e._UZ(16,"ckeditor",47),e.qZA()()()(),e.YNc(17,Ne,23,4,"ng-container",19),e.qZA()),2&i){const t=e.oxw();e.xp6(9),e.ekj("is-invalid",t.title.invalid&&t.title.touched)("is-valid",t.title.valid&&t.title.touched),e.Q6J("maxlength",t.maxCharsDecisionTitle),e.xp6(2),e.AsE(" Characters Remaining: ",null==t.title||null==t.title.value?null:t.title.value.length,"/",t.maxCharsDecisionTitle,""),e.xp6(1),e.Q6J("ngIf",t.title.invalid&&t.title.touched),e.xp6(4),e.Q6J("editor",t.Editor)("config",e.VKq(12,j,e.DdM(11,F))),e.xp6(1),e.Q6J("ngIf","Incident Report"!=t.operationType.value)}}function Ve(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",77),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.getAssetList())}),e._uU(1," Add Asset "),e.qZA()}}function Me(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"a",78),e._uU(3),e.qZA()(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td",79)(7,"span"),e._uU(8),e.qZA()(),e.TgZ(9,"td",79)(10,"a",80),e.NdJ("click",function(){const o=e.CHM(t).$implicit,l=e.oxw(3);return e.KtG(l.openModalDeleteAssetObject(o))}),e._UZ(11,"i",81),e.qZA()()()}if(2&i){const t=s.$implicit,a=e.oxw(3);e.xp6(3),e.Oqu(t.assetTagId?t.assetTagId:"NA"),e.xp6(2),e.hij(" ",t.assetName," "),e.xp6(2),e.Tol(a.returnStatusBadgeClassesStatus(t.assetStatusId)),e.xp6(1),e.Oqu(t.assetStatus)}}function Je(i,s){if(1&i&&(e.TgZ(0,"tbody"),e.YNc(1,Me,12,5,"tr",68),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.selectedAssetList)}}function Qe(i,s){1&i&&(e.TgZ(0,"tbody")(1,"tr")(2,"td",82),e._uU(3," No Asset Selected "),e.qZA()()())}function Pe(i,s){if(1&i&&(e.TgZ(0,"div",4)(1,"div",71),e.YNc(2,Ve,2,0,"button",72),e.qZA(),e.TgZ(3,"div",73)(4,"div",74)(5,"table",75)(6,"thead")(7,"tr",76)(8,"th"),e._uU(9,"Asset No"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Asset"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Status"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Action"),e.qZA()()(),e.YNc(16,Je,2,1,"tbody",19)(17,Qe,4,0,"tbody",19),e.qZA()()()()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.company.value&&t.client.value&&t.project.value),e.xp6(14),e.Q6J("ngIf",0!=t.selectedAssetList.length),e.xp6(1),e.Q6J("ngIf",0==t.selectedAssetList.length)}}function Re(i,s){1&i&&(e.TgZ(0,"small",42),e._uU(1," Location is Required"),e.qZA())}function Fe(i,s){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Re,2,0,"small",41),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.locationId||null==t.locationId.errors?null:t.locationId.errors.required)}}function je(i,s){1&i&&(e.TgZ(0,"small",42),e._uU(1," Incident Type is Required"),e.qZA())}function Be(i,s){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,je,2,0,"small",41),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.incidentType||null==t.incidentType.errors?null:t.incidentType.errors.required)}}function Ge(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"i",112),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(3);return e.KtG(n.clearChangDate())}),e.qZA()}}function We(i,s){1&i&&(e.TgZ(0,"small",42),e._uU(1," Approx Date of Incident is Required"),e.qZA())}function Ye(i,s){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,We,2,0,"small",41),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==t.dateOfincident||null==t.dateOfincident.errors?null:t.dateOfincident.errors.required)}}function He(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"i",112),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(4);return e.KtG(n.clearChangTime())}),e.qZA()}}function Ee(i,s){1&i&&(e.TgZ(0,"small",42),e._uU(1," Approx Time of Incident"),e.qZA())}function Xe(i,s){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Ee,2,0,"small",41),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.Q6J("ngIf",null==t.approxTimeOfIncident||null==t.approxTimeOfIncident.errors?null:t.approxTimeOfIncident.errors.required)}}function Ke(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",88)(1,"div",14)(2,"label",86),e._uU(3,"Approx Time of Incident "),e.TgZ(4,"span",11),e._uU(5,"*"),e.qZA(),e.YNc(6,He,1,0,"i",89),e.qZA(),e.TgZ(7,"input",113),e.NdJ("blur",function(){e.CHM(t);const n=e.oxw(3);return e.KtG(n.formatTime(n.approxTimeOfIncident.value))}),e.qZA(),e._UZ(8,"ngx-mat-timepicker",114,115),e.qZA(),e.YNc(10,Xe,2,1,"div",19),e.qZA()}if(2&i){const t=e.MAs(9),a=e.oxw(3);e.xp6(6),e.Q6J("ngIf",a.approxTimeOfIncident.value),e.xp6(1),e.Q6J("ngxMatTimepicker",t),e.xp6(3),e.Q6J("ngIf",(null==a.approxTimeOfIncident?null:a.approxTimeOfIncident.invalid)&&(null==a.approxTimeOfIncident?null:a.approxTimeOfIncident.touched))}}function ze(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"label",116)(1,"div",117)(2,"div",118)(3,"i",119),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(3);return e.KtG(n.crossFirstImage(n.asset_img0))}),e.qZA()()()()}}function $e(i,s){1&i&&(e.TgZ(0,"label",120)(1,"div",117)(2,"div",118),e._UZ(3,"i",121),e.qZA()()())}function et(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"label",116)(1,"div",117)(2,"div",118)(3,"i",119),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(3);return e.KtG(n.crossSecondImage(n.asset_img1))}),e.qZA()()()()}}function tt(i,s){1&i&&(e.TgZ(0,"label",122)(1,"div",117)(2,"div",118),e._UZ(3,"i",121),e.qZA()()())}function it(i,s){1&i&&(e.TgZ(0,"label",123)(1,"div",117)(2,"div",118),e._UZ(3,"i",121),e.qZA()()())}function nt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"label",116)(1,"div",117)(2,"div",118)(3,"i",119),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(3);return e.KtG(n.crossThirdImage(n.asset_img2))}),e.qZA()()()()}}function at(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"label",116)(1,"div",117)(2,"div",118)(3,"i",119),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(3);return e.KtG(n.crossFourthImage(n.asset_img3))}),e.qZA()()()()}}function ot(i,s){1&i&&(e.TgZ(0,"label",124)(1,"div",117)(2,"div",118),e._UZ(3,"i",121),e.qZA()()())}const b=(i,s)=>({"is-invalid":i,"is-valid":s});function st(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",43)(2,"div",44)(3,"div",7)(4,"div",2)(5,"div",66)(6,"div",9)(7,"label",16),e._uU(8,"Location"),e.TgZ(9,"span",11),e._uU(10,"*"),e.qZA()(),e.TgZ(11,"ng-select",83),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.selectedDropDownLocationtIdValue=n)}),e.qZA(),e.YNc(12,Fe,2,1,"div",19),e.qZA()(),e.TgZ(13,"div",66)(14,"div",9)(15,"label"),e._uU(16,"Impact of Incident"),e.qZA(),e._UZ(17,"ckeditor",84),e.qZA()(),e.TgZ(18,"div",85)(19,"div",9)(20,"label",86),e._uU(21,"Incident Type"),e.TgZ(22,"span",11),e._uU(23,"*"),e.qZA()(),e.TgZ(24,"ng-select",87),e.NdJ("change",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onDropdownIncidentTypeValueChange(n))}),e.qZA(),e.YNc(25,Be,2,1,"div",19),e.qZA()(),e.TgZ(26,"div",88)(27,"div",14)(28,"label",86),e._uU(29,"Approx Date of Incident"),e.TgZ(30,"span",11),e._uU(31,"*"),e.qZA(),e.YNc(32,Ge,1,0,"i",89),e.qZA(),e.TgZ(33,"input",90),e.NdJ("change",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.approxTimeOfIncident.reset())}),e.qZA()(),e.YNc(34,Ye,2,1,"div",19),e.qZA(),e.YNc(35,Ke,11,3,"div",91),e.qZA()()()(),e.TgZ(36,"div",43)(37,"div",4)(38,"div",7)(39,"div")(40,"h5",92),e._uU(41,"Incident Gallery"),e.qZA(),e.TgZ(42,"p",93),e._uU(43," Add Incident Gallery Images. "),e.qZA(),e.TgZ(44,"div",94)(45,"div",95)(46,"div",96)(47,"div",97)(48,"div",98)(49,"div",99),e.YNc(50,ze,4,0,"label",100)(51,$e,4,0,"label",101),e.TgZ(52,"input",102),e.NdJ("change",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onSelectFile(n))}),e.qZA()(),e.TgZ(53,"div",103)(54,"div",104),e._UZ(55,"img",105),e.qZA()()()()(),e.TgZ(56,"div",96)(57,"div",9)(58,"div",98)(59,"div",99),e.YNc(60,et,4,0,"label",100)(61,tt,4,0,"label",106),e.TgZ(62,"input",107),e.NdJ("change",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onSelectFile1(n))}),e.qZA()(),e.TgZ(63,"div",103)(64,"div",104),e._UZ(65,"img",105),e.qZA()()()()(),e.TgZ(66,"div",96)(67,"div",9)(68,"div",98)(69,"div",99),e.YNc(70,it,4,0,"label",108)(71,nt,4,0,"label",100),e.TgZ(72,"input",109),e.NdJ("change",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onSelectFile2(n))}),e.qZA()(),e.TgZ(73,"div",103)(74,"div",104),e._UZ(75,"img",105),e.qZA()()()()(),e.TgZ(76,"div",96)(77,"div",9)(78,"div",98)(79,"div",99),e.YNc(80,at,4,0,"label",100)(81,ot,4,0,"label",110),e.TgZ(82,"input",111),e.NdJ("change",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onSelectFile3(n))}),e.qZA()(),e.TgZ(83,"div",103)(84,"div",104),e._UZ(85,"img",105),e.qZA()()()()()()()()()()()()}if(2&i){const t=e.oxw(2);e.xp6(11),e.Q6J("items",t.arrayListDropDownLocationList)("clearable",!1)("ngModel",t.selectedDropDownLocationtIdValue)("ngClass",e.WLB(31,b,t.locationId.invalid&&t.locationId.touched,t.locationId.valid&&t.locationId.touched)),e.xp6(1),e.Q6J("ngIf",(null==t.locationId?null:t.locationId.invalid)&&(null==t.locationId?null:t.locationId.touched)),e.xp6(5),e.Q6J("editor",t.Editor)("config",e.VKq(35,j,e.DdM(34,F))),e.xp6(7),e.Q6J("items",t.masterIncidentTypeList)("clearable",!1)("ngClass",e.WLB(37,b,t.incidentType.invalid&&t.incidentType.touched,t.incidentType.valid&&t.incidentType.touched)),e.xp6(1),e.Q6J("ngIf",(null==t.incidentType?null:t.incidentType.invalid)&&(null==t.incidentType?null:t.incidentType.touched)),e.xp6(7),e.Q6J("ngIf",t.dateOfincident.value),e.xp6(1),e.Q6J("altInput",!1)("enableTime",!1)("convertModelValue",!0)("dateFormat","d-m-Y")("maxDate",t.minDate),e.xp6(1),e.Q6J("ngIf",(null==t.dateOfincident?null:t.dateOfincident.invalid)&&(null==t.dateOfincident?null:t.dateOfincident.touched)),e.xp6(1),e.Q6J("ngIf",t.dateOfincident.value),e.xp6(15),e.Q6J("ngIf",t.isFirstImageVisible),e.xp6(1),e.Q6J("ngIf",!t.isFirstImageVisible),e.xp6(4),e.s9C("src",t.asset_img0,e.LSH),e.xp6(5),e.Q6J("ngIf",t.isSecondImageVisible),e.xp6(1),e.Q6J("ngIf",!t.isSecondImageVisible),e.xp6(4),e.s9C("src",t.asset_img1,e.LSH),e.xp6(5),e.Q6J("ngIf",!t.isThirdImageVisible),e.xp6(1),e.Q6J("ngIf",t.isThirdImageVisible),e.xp6(4),e.s9C("src",t.asset_img2,e.LSH),e.xp6(5),e.Q6J("ngIf",t.isFourthImageVisible),e.xp6(1),e.Q6J("ngIf",!t.isFourthImageVisible),e.xp6(4),e.s9C("src",t.asset_img3,e.LSH)}}function lt(i,s){1&i&&(e.ynx(0),e.TgZ(1,"li",27)(2,"a",28)(3,"div",29)(4,"p",30),e._uU(5,"Incident"),e.qZA()()(),e.YNc(6,st,86,40,"ng-template",31),e.qZA(),e.BQk()),2&i&&(e.xp6(1),e.Q6J("ngbNavItem",3))}function ct(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",125),e.NdJ("click",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.onSubmit(n))}),e._uU(1," Submit "),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("disabled",t.addTicketFrom.invalid)}}let rt=(()=>{class i{constructor(t,a,n,o,l,c,g,u,v,h,_){this.router=t,this.modalService=a,this.ticketService=n,this.authService=o,this.menuService=l,this.formBuilder=c,this.commonFunctionService=g,this.dropdownServices=u,this.offcanvasService=v,this.el=h,this.sanitizer=_,this.isProject=!1,this.afterApiCallSubmit=!0,this.minDate=new Date,this.label="Ticket Management",this.defaultNavActiveId=1,this.breadCrumbItems=[{label:"Ticket"},{label:"Add Ticket ",active:!0}],this.maxCharsDecision=300,this.maxCharsDecisionTitle=50,this.operationList=[{name:"Service",operationTypeId:1,disabled:!1},{name:"Incident Report",operationTypeId:2,disabled:!1},{name:"Bug",operationTypeId:3,disabled:!0},{name:"New Requirement",operationTypeId:4,disabled:!0}],this.ticketTypeList=[{typeNo:1,typeName:"Hardware"},{typeNo:2,typeName:"Non-Hardware"}],this.urgentList=[],this.imageOneUrl="",this.imageTwoUrl="",this.isFirstImageTicketVisible=!1,this.isSecondImageTicketVisible=!1,this.isDeviceRelated=!1,this.masterTicketTypeList=[],this.arrayListDropDownCompany=[],this.arrayListDropDownClientList=[],this.arrayListDropDownProjectOrDeparmentList=[],this.arrayListDropDownAssetStatus=[],this.Editor=te,this.selectedAssetList=[],this.selectedDropIncidentTypeValue=null,this.disabledWithAceessGroup=!1,this.projectDepartmentFieldDisiabled=!1,this.pasteImageAll=[],this.isFirstImageVisible=!1,this.isSecondImageVisible=!1,this.isThirdImageVisible=!1,this.isFourthImageVisible=!1,this.file=[],this.base64Strings=[],this.multplyImageFileTab=1,this.multiplyFileUpdload=[],1==this.ticketService.accessRight?(this.isProject=this.authService.getisProject(),this.getDropdownCompanyList(),this.getMX_MasterUrgentTypeList()):this.goback()}ngOnInit(){"Client User"===JSON.parse(localStorage.getItem("currentUser"))?.role&&(this.disabledWithAceessGroup=!0),this.getFromBinding()}getFromBinding(){this.imageOneUrl="../../../../../assets/images/placeholderimage.png",this.imageTwoUrl="../../../../../assets/images/placeholderimage.png",this.asset_img0=this.default_asset_img0="../../../../../assets/images/placeholderimage.png",this.asset_img1=this.default_asset_img1="../../../../../assets/images/placeholderimage.png",this.asset_img2=this.default_asset_img2="../../../../../assets/images/placeholderimage.png",this.asset_img3=this.default_asset_img3="../../../../../assets/images/placeholderimage.png",this.default_imageOneUrl="../../../../../assets/images/placeholderimage.png",this.default_imageTwoUrl="../../../../../assets/images/placeholderimage.png",this.addTicketFrom=this.formBuilder.group({operationType:["Service",[p.kI.required]],ticketType:[null,[p.kI.required]],type:[null,[p.kI.required]],company:[null,[p.kI.required]],client:[null,[p.kI.required]],project:[null,[p.kI.required]],title:["",[p.kI.required]],urgent:[null,[p.kI.required]],description:[""],picOne:[""],picTwo:[""],Remark_Pic1:[""],Remark_Pic2:[""],incidentImage1URLBase64:[""],incidentImage2URLBase64:[""],incidentImage3URLBase64:[""],incidentImage4URLBase64:[""],approxTimeOfIncident:[""],dateOfincident:[""],impactOfIncident:[""],locationId:[""],incidentType:[null],isGlobal:[!1,[p.kI.required]]}),("Software Engineer"===JSON.parse(localStorage.getItem("currentUser")).accessGroupName||"Head Of Department"===JSON.parse(localStorage.getItem("currentUser")).accessGroupName)&&(this.isGlobal.setValue(!0),this.isGlobal.disable(),this.operationType.setValue("Service"),this.operationList[1].disabled=!0,this.operationList[2].disabled=!1,this.operationList[3].disabled=!1,this.operationList=[...this.operationList],this.onChangeServiceType(this.operationType.value))}get locationId(){return this.addTicketFrom.get("locationId")}get incidentType(){return this.addTicketFrom.get("incidentType")}get impactOfIncident(){return this.addTicketFrom.get("impactOfIncident")}get dateOfincident(){return this.addTicketFrom.get("dateOfincident")}get approxTimeOfIncident(){return this.addTicketFrom.get("approxTimeOfIncident")}get incidentImage4URLBase64(){return this.addTicketFrom.get("incidentImage4URLBase64")}get incidentImage1URLBase64(){return this.addTicketFrom.get("incidentImage1URLBase64")}get incidentImage3URLBase64(){return this.addTicketFrom.get("incidentImage3URLBase64")}get incidentImage2URLBase64(){return this.addTicketFrom.get("incidentImage2URLBase64")}get operationType(){return this.addTicketFrom.get("operationType")}get ticketType(){return this.addTicketFrom.get("ticketType")}get type(){return this.addTicketFrom.get("type")}get project(){return this.addTicketFrom.get("project")}get title(){return this.addTicketFrom.get("title")}get urgent(){return this.addTicketFrom.get("urgent")}get description(){return this.addTicketFrom.get("description")}get picOne(){return this.addTicketFrom.get("picOne")}get picTwo(){return this.addTicketFrom.get("picTwo")}get client(){return this.addTicketFrom.get("client")}get company(){return this.addTicketFrom.get("company")}get Remark_Pic1(){return this.addTicketFrom.get("Remark_Pic1")}get Remark_Pic2(){return this.addTicketFrom.get("Remark_Pic2")}get isGlobal(){return this.addTicketFrom.get("isGlobal")}getDropdownCompanyList(){this.dropdownServices.GetCompanyListDrobDown({}).subscribe(t=>{this.arrayListDropDownCompany=t.list,0!=t.list.length&&"Client User"===JSON.parse(localStorage.getItem("currentUser"))?.role&&(this.selectedDropDownCompanyIdValue=this.arrayListDropDownCompany[0].companyId,this.getDropdownClientlist())})}getDropdownClientlist(){this.dropdownServices.GetClientListDrobDown({SearchCompanyId:this.selectedDropDownCompanyIdValue}).subscribe(a=>{this.arrayListDropDownClientList=a.list,0!=a.list.length&&"Client User"===JSON.parse(localStorage.getItem("currentUser"))?.role&&(this.selectedDropDownClientIdValue=this.arrayListDropDownClientList[0].clientId,this.getDropdownDepartmentList())})}getDropdownDepartmentList(){this.dropdownServices.GetDepartmentListDrobDown({SearchCompanyId:this.selectedDropDownCompanyIdValue,SearchClientId:this.selectedDropDownClientIdValue}).subscribe(a=>{this.arrayListDropDownProjectOrDeparmentList=a.list,0!=a.list.length&&"Client User"===JSON.parse(localStorage.getItem("currentUser"))?.role&&(this.selectedDropDownProjectOrDeparmentIdValue=this.arrayListDropDownProjectOrDeparmentList[0].departmentId,this.projectDepartmentFieldDisiabled=!(a.list.length>=2))})}onDropdownCompanyValueChange(t){this.selectedDropDownClientIdValue=null,this.selectedDropDownProjectOrDeparmentIdValue=null,this.arrayListDropDownProjectOrDeparmentList=[],this.selectedDropDownLocationtIdValue=null,this.selectedDropIncidentTypeValue=null,this.incidentType.reset(),this.getDropdownClientlist(),this.selectedAssetList=[]}onDropdownClientValueChange(t){this.selectedDropDownProjectOrDeparmentIdValue=null,this.selectedDropDownLocationtIdValue=null,this.selectedDropIncidentTypeValue=null,this.getDropdownDepartmentList(),this.incidentType.reset(),this.selectedAssetList=[]}onDropdownDepartmentValueChange(t){this.selectedDropDownLocationtIdValue=null,this.selectedDropIncidentTypeValue=null,this.getV2_MasterIncidentTypeList(this.selectedDropDownProjectOrDeparmentIdValue),this.getDropdownLocationList(),this.incidentType.reset(),this.selectedAssetList=[]}onDropdownIncidentTypeValueChange(t){this.selectedDropIncidentTypeValue=t}getDropdownLocationList(){this.dropdownServices.GetLocationListDrobDown({SearchCompanyId:this.selectedDropDownCompanyIdValue,SearchClientId:this.selectedDropDownClientIdValue,SearchDepartmentId:this.selectedDropDownProjectOrDeparmentIdValue}).subscribe(a=>{this.arrayListDropDownLocationList=a.list})}getMX_MasterUrgentTypeList(){this.ticketService.getMX_MasterUrgentTypeList().subscribe(t=>{t&&(this.urgentList=t?.data)})}getMX_MasterTicketType(t){this.ticketService.getMX_MasterTicketType(t).subscribe(a=>{a&&(this.masterTicketTypeList=a?.list)})}getV2_MasterIncidentTypeList(t){this.ticketService.getV2_MasterIncidentTypeList({ProjectId:t}).subscribe(n=>{n&&(this.masterIncidentTypeList=n?.data)})}ticketTypeHandler(t){"Hardware"===t?.typeName?(this.addTicketFrom.get("type").reset(),this.isDeviceRelated=!0,this.getMX_MasterTicketType(this.isDeviceRelated)):(this.addTicketFrom.get("type").reset(),this.isDeviceRelated=!1,this.getMX_MasterTicketType(this.isDeviceRelated))}onSelectFirstFileTicketFile(t){if(t.target.files&&t.target.files[0]){var a=new FileReader;a.onload=l=>{this.imageOneUrl=l.target.result,this.isFirstImageTicketVisible=!0},a.onerror=()=>{this.imageOneUrl=this.default_imageOneUrl,this.Remark_Pic1.setValue("")},/^(image)\/(jpe?g|png|gif|bmp)$/i.test(t.target.files[0].type)?a.readAsDataURL(t.target.files[0]):(this.imageOneUrl=this.default_imageOneUrl,this.Remark_Pic1.setValue(""))}else this.imageOneUrl=this.default_imageOneUrl,this.Remark_Pic1.setValue("")}onSelectSecondTicketFile(t){if(t.target.files&&t.target.files[0]){var a=new FileReader;a.onload=l=>{this.imageTwoUrl=l.target.result,this.isSecondImageTicketVisible=!0},a.onerror=()=>{this.imageTwoUrl=this.default_imageTwoUrl,this.Remark_Pic2.setValue("")},/^(image)\/(jpe?g|png|gif|bmp)$/i.test(t.target.files[0].type)?a.readAsDataURL(t.target.files[0]):(this.imageTwoUrl=this.default_imageTwoUrl,this.Remark_Pic2.setValue(""))}else this.imageTwoUrl=this.default_imageTwoUrl,this.Remark_Pic2.setValue("")}crossOneTicketImage(t){t&&(this.imageOneUrl="../../../../../assets/images/placeholderimage.png",this.isFirstImageTicketVisible=!1,this.resetFileInput("profile-img-file-input-img-1"))}crossTwoTicketImage(t){t&&(this.imageTwoUrl="../../../../../assets/images/placeholderimage.png",this.isSecondImageTicketVisible=!1,this.resetFileInput("profile-img-file-input-img-2"))}returnStatusBadgeClassesStatus(t){return this.commonFunctionService.returnStatusBadgeClasses(t)}onSubmit(t){t.preventDefault(),this.afterApiCallSubmit=!1;let n=[];0!=this.pasteImageAll.length&&this.pasteImageAll.map(_=>{_.url&&n.push({ImageBase64Url:_.url?_.url.split(",")[1]:""})}),0!=this.base64Strings.length&&this.base64Strings.map(_=>{_&&n.push({ImageBase64Url:_.split(",")[1]})}),console.log("selectAllUpload",n);const o=this.urgentList.find(_=>_.urgencyTypeName===this.urgent.value);let l={incidentImage1URLBase64:"../../../../../assets/images/placeholderimage.png"!==this.asset_img0?this.asset_img0.replace(/^data:image\/[a-z]+;base64,/,""):null,IncidentImage2URLBase64:"../../../../../assets/images/placeholderimage.png"!==this.asset_img1?this.asset_img1.replace(/^data:image\/[a-z]+;base64,/,""):null,IncidentImage3URLBase64:"../../../../../assets/images/placeholderimage.png"!==this.asset_img2?this.asset_img2.replace(/^data:image\/[a-z]+;base64,/,""):null,IncidentImage4URLBase64:"../../../../../assets/images/placeholderimage.png"!==this.asset_img3?this.asset_img3.replace(/^data:image\/[a-z]+;base64,/,""):null,ApproxTimeOfIncident:this.formatTime(this.approxTimeOfIncident.value),DateOfincident:this.commonFunctionService.dateFormatter(this.dateOfincident.value),impactOfIncident:this.impactOfIncident.value};this.selectedDropIncidentTypeValue&&(l.IncidentTypeId=this.selectedDropIncidentTypeValue.incidentTypeId,l.IncidentTypeName=this.selectedDropIncidentTypeValue.incidentTypeName),this.locationId.value&&(l.LocationId=this.locationId.value,l.LocationName=this.findNameById(this.locationId.value,this.arrayListDropDownLocationList,"locationName","locationId"));let c=this.title.value;c.charAt(0)===c.charAt(0).toLowerCase()&&(c=c.charAt(0).toUpperCase()+c.slice(1));let g={IssueType:this.ticketType.value?this.ticketType.value:"",TicketTitle:c,IssueDescription:this.description.value?this.description.value.replace(/<img/g,'<img style="height:200px!important; width:200px!important;"'):null,CompanyId:this.company.value,ClientId:this.client.value,ClientName:this.findNameById(this.client.value,this.arrayListDropDownClientList,"clientName","clientId"),CompanyName:this.findNameById(this.company.value,this.arrayListDropDownCompany,"companyName","companyId"),ProjectId:this.project.value,ProjectName:this.findNameById(this.project.value,this.arrayListDropDownProjectOrDeparmentList,"departmentName","departmentId"),TicketTypeId:this.type?.value?this.type?.value:"",TicketTypeName:this.findNameById(this.type.value,this.masterTicketTypeList,"ticketTypeName","ticketTypeId"),urgencyTypeId:o.urgencyTypeId,urgencyTypeName:o.urgencyTypeName,OperationType:this.operationType?.value?this.operationType?.value:"",isGlobal:this.isGlobal?.value?"false":"true"},u={};"Incident Report"==this.operationType.value&&(u=this.commonFunctionService.clean(l));let v=this.selectedAssetList?this.selectedAssetList.map(_=>({..._,assetId:_.id})):[];const h=new FormData;for(const _ in g)g.hasOwnProperty(_)&&g[_]&&h.append(`mX_Ticketing.${_}`,g[_]);for(const _ in u)u.hasOwnProperty(_)&&u[_]&&h.append(`mX_ReportIncident.${_}`,u[_]);v.forEach((_,f)=>{h.append(`mX_TicketItem[${f}].assetId`,_.id),h.append(`mX_TicketItem[${f}].assetTagId`,_.assetTagId),h.append(`mX_TicketItem[${f}].assetName`,_.assetName),h.append(`mX_TicketItem[${f}].assetImagePath`,_.assetImagePath)}),n.forEach((_,f)=>{h.append(`mX_TikcetImages[${f}].ImageBase64Url`,_.ImageBase64Url)});for(let _=0;_<this.multiplyFileUpdload.length;_++)h.append("file",this.multiplyFileUpdload[_],this.multiplyFileUpdload[_].name);this.saveTicket(h)}goback(){this.router.navigate(["/maintenace-management/corrective/ticket/list-ticket"])}saveTicket(t){this.afterApiCallSubmit=!1,this.ticketService.addTicket(t).subscribe(a=>{a&&(this.success(a),this.modalService.dismissAll(),this.router.navigate(["/maintenace-management/corrective/ticket/list-ticket"]))},a=>{this.afterApiCallSubmit=!0,this.refreshRouter()})}refreshRouter(){this.router.navigate([this.router.url],{queryParamsHandling:"preserve",preserveFragment:!0})}success(t){k().fire({toast:!0,position:"top-end",icon:"success",title:t.message,showConfirmButton:!1,timer:3e3})}waring(t){k().fire({toast:!0,position:"top-end",icon:"warning",title:t,showConfirmButton:!1,timer:3e3})}findNameById(t,a,n,o){const l=a.find(c=>c[o]===t);return l?l[n]:void 0}onChangeTicketType(t){this.selectedAssetList=[]}onChangeServiceType(t){this.addTicketFrom.get("incidentImage1URLBase64").reset(),this.addTicketFrom.get("incidentImage2URLBase64").reset(),this.addTicketFrom.get("incidentImage3URLBase64").reset(),this.addTicketFrom.get("incidentImage4URLBase64").reset(),this.addTicketFrom.get("approxTimeOfIncident").reset(),this.addTicketFrom.get("dateOfincident").reset(),this.addTicketFrom.get("impactOfIncident").reset(),this.addTicketFrom.get("locationId").reset(),this.addTicketFrom.get("incidentType").reset(),this.Remark_Pic1.reset(),this.Remark_Pic2.reset(),this.crossOneTicketImage("image1"),this.crossTwoTicketImage("image2"),this.asset_img0="../../../../../assets/images/placeholderimage.png",this.asset_img1="../../../../../assets/images/placeholderimage.png",this.asset_img2="../../../../../assets/images/placeholderimage.png",this.asset_img3="../../../../../assets/images/placeholderimage.png",this.base64Strings=[],this.file=[],this.pasteImageAll=[],this.defaultNavActiveId=1,this.multiplyFileUpdload=[],this.multplyImageFileTab=1,"Incident Report"==this.operationType.value?(this.addTicketFrom.get("approxTimeOfIncident").setValidators([p.kI.required]),this.addTicketFrom.get("dateOfincident").setValidators([p.kI.required]),this.addTicketFrom.get("locationId").setValidators([p.kI.required]),this.addTicketFrom.get("incidentType").setValidators([p.kI.required])):(this.addTicketFrom.get("approxTimeOfIncident").clearValidators(),this.addTicketFrom.get("dateOfincident").clearValidators(),this.addTicketFrom.get("locationId").clearValidators(),this.addTicketFrom.get("incidentType").clearValidators()),this.addTicketFrom.get("approxTimeOfIncident").updateValueAndValidity(),this.addTicketFrom.get("dateOfincident").updateValueAndValidity(),this.addTicketFrom.get("incidentType").updateValueAndValidity(),this.addTicketFrom.get("locationId").updateValueAndValidity()}formatTime(t){let a=J(t,"hh:mm:ss A");return J(a).subtract(1,"hour").format("hh:mm A")}crossFirstImage(t){t&&(this.asset_img0="../../../../../assets/images/placeholderimage.png",this.isFirstImageVisible=!1,this.resetFileInput("asset_id0"))}crossSecondImage(t){t&&(this.asset_img1="../../../../../assets/images/placeholderimage.png",this.isSecondImageVisible=!1,this.resetFileInput("asset_id1"))}crossThirdImage(t){t&&(this.asset_img2="../../../../../assets/images/placeholderimage.png",this.isThirdImageVisible=!1,this.resetFileInput("asset_id2"))}resetFileInput(t){const a=document.getElementById(t);a&&(a.value="")}crossFourthImage(t){t&&(this.asset_img3="../../../../../assets/images/placeholderimage.png",this.isFourthImageVisible=!1,this.resetFileInput("asset_id3"))}onSelectFile(t){if(t.target.files&&t.target.files[0]){var a=new FileReader;a.onload=l=>{this.asset_img0=l.target.result,this.isFirstImageVisible=!0},a.onerror=()=>{this.asset_img0=this.default_asset_img0},/^(image)\/(jpe?g|png|gif|bmp)$/i.test(t.target.files[0].type)?a.readAsDataURL(t.target.files[0]):this.asset_img0=this.default_asset_img0}else this.asset_img0=this.default_asset_img0}onSelectFile2(t){if(t.target.files&&t.target.files[0]){var a=new FileReader;a.onload=l=>{this.asset_img2=l.target.result,this.isThirdImageVisible=!0},a.onerror=()=>{this.asset_img2=this.default_asset_img2},/^(image)\/(jpe?g|png|gif|bmp)$/i.test(t.target.files[0].type)?a.readAsDataURL(t.target.files[0]):this.asset_img2=this.default_asset_img2}else this.asset_img2=this.default_asset_img2}onSelectFile1(t){if(t.target.files&&t.target.files[0]){var a=new FileReader;a.onload=l=>{this.asset_img1=l.target.result,this.isSecondImageVisible=!0},a.onerror=()=>{this.asset_img1=this.default_asset_img1},/^(image)\/(jpe?g|png|gif|bmp)$/i.test(t.target.files[0].type)?a.readAsDataURL(t.target.files[0]):this.asset_img1=this.default_asset_img1}else this.asset_img1=this.default_asset_img1}onSelectFile3(t){if(t.target.files&&t.target.files[0]){var a=new FileReader;a.onload=l=>{this.asset_img3=l.target.result,this.isFourthImageVisible=!0},a.onerror=()=>{this.asset_img3=this.default_asset_img3},/^(image)\/(jpe?g|png|gif|bmp)$/i.test(t.target.files[0].type)?a.readAsDataURL(t.target.files[0]):this.asset_img3=this.default_asset_img3}else this.asset_img3=this.default_asset_img3}getAssetList(){const t=this.offcanvasService.open(ie._,{scroll:!0,position:"end",keyboard:!1,backdrop:"static",panelClass:"custom-offcanvas "});t.componentInstance.selectedDropDownCompanyIdValue=this.company.value,t.componentInstance.selectedDropDownClientIdValue=this.client.value,t.componentInstance.selectedDropDownProjectOrDeparmentIdValue=this.project.value,t.componentInstance.selectedAsset=0!=this.selectedAssetList.length?this.selectedAssetList:[],console.log(" this.selectedAssetList",this.selectedAssetList),t.componentInstance.SearchAssetStatusIdShown=3,t.result.then(a=>{this.selectedAssetList=a}).catch(a=>{this.selectedAssetList=a})}clearChangDate(){this.approxTimeOfIncident.reset(),this.dateOfincident.reset()}clearChangTime(){this.approxTimeOfIncident.reset()}onClickisGlobal(t){if(this.isGlobal.value){let a={title:"Are you certain that the ticket you intend to create will be internal?",subTitle:"Internal tickets should not be shared with clients,they are intended exclusively for internal team members"};this.operationType.setValue("Service"),this.operationList[1].disabled=!0,this.operationList[2].disabled=!1,this.operationList[3].disabled=!1,this.operationList=[...this.operationList],console.log(this.operationList),this.openModaWaringConf(a)}else this.operationType.setValue("Service"),this.operationList[1].disabled=!1,this.operationList[2].disabled=!0,this.operationList[3].disabled=!0,this.operationList=[...this.operationList];this.onChangeServiceType(this.operationType.value)}openModaWaringConf(t){const a=this.modalService.open(ne.l,{ariaLabelledBy:"modal-basic-title",size:"md",centered:!0,backdrop:"static",keyboard:!1});a.componentInstance.title=t.title,a.componentInstance.subTitle=t.subTitle,a.componentInstance.buttonName="",a.result.then(n=>{n&&("success"==n||(this.isGlobal.setValue(!1),this.operationList[1].disabled=!1,this.operationList[2].disabled=!0,this.operationList[3].disabled=!0,this.operationList=[...this.operationList]))})}created(t){console.log("thishg",this.description.value.replace(/<img/g,'<img  style="height:200px!important; width:200px!important;" '))}onSelect(t){this.file.push(...t.addedFiles),this.onSelectwithbase64(t)}onSelectwithbase64(t){t.addedFiles.forEach(a=>{const n=new FileReader;n.onload=o=>{const l=o.target.result.includes("data:image")?o.target.result:"data:image/png;base64,"+o.target.result.split(",")[1];this.base64Strings.push(l),console.log(this.base64Strings,"cfghihg")},n.readAsDataURL(a)})}getObjectURL(t){const a=URL.createObjectURL(t);return this.sanitizer.bypassSecurityTrustUrl(a)}onRemove(t){let a=this.file.indexOf(t);this.file.splice(a,1),this.base64Strings.splice(a,1)}getImage(t){this.pasteImageAll=[],this.pasteImageAll=t}onSelectFilleMultiply(t){this.multiplyFileUpdload.push(...t.addedFiles),console.log("event.addedFiles.",t.addedFiles,this.multiplyFileUpdload[0])}onRemoveFilleMultiply(t){this.multiplyFileUpdload.splice(t,1)}truncateFileName(t,a,n=22,o=7){return t?t.length<=n+o?t:t.substring(0,n)+"..."+t.substring(t.length-o):""}openModalDeleteAssetObject(t){console.log(t,"hh");const a=this.modalService.open(Q.z,{ariaLabelledBy:"modal-basic-title",size:"md",centered:!0,backdrop:"static",keyboard:!1});a.componentInstance.title="You are about to delete a Asset ?",a.componentInstance.subTitle="Deleting your Asset will remove for this Asset List  ",a.result.then(n=>{n&&"delete"==n&&this.unCheckItemAssetList(t)})}unCheckItemAssetList(t){const a=this.getAssetIndex(t.id);this.selectedAssetList.splice(a,1)}getAssetIndex(t){return this.selectedAssetList.findIndex(a=>a.id===t)}static{this.\u0275fac=function(a){return new(a||i)(e.Y36(x.F0),e.Y36(d.FF),e.Y36(I.w),e.Y36(y.u),e.Y36(D.l),e.Y36(p.qu),e.Y36(Z.K),e.Y36(U.V),e.Y36(d._B),e.Y36(e.SBq),e.Y36(P.H7))}}static{this.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-ticket"]],viewQuery:function(a,n){if(1&a&&e.Gf(de,5),2&a){let o;e.iGM(o=e.CRH())&&(n.defaultNav=o.first)}},decls:87,vars:68,consts:[[3,"title","breadcrumbItems"],[3,"formGroup"],[1,"row"],[1,"col-lg-4","ps-0","pe-0","mt-n2","stretch-card"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body"],["class","mb-3",4,"ngIf"],[1,"mb-3"],["for","companyId",1,"form-label"],[1,"starRequried"],["bindLabel","companyName","bindValue","companyId","placeholder","Select Company","formControlName","company",1,"custom",3,"readonly","items","clearable","ngModel","ngClass","ngModelChange","change"],["class","mt-2",4,"ngIf"],[1,"form-group"],["bindLabel","clientName","bindValue","clientId","placeholder","Select Client","formControlName","client",1,"custom",3,"readonly","items","clearable","ngModel","ngClass","ngModelChange","change"],[1,"form-label"],["bindLabel","departmentName","bindValue","departmentId","formControlName","project",1,"custom",3,"readonly","items","ngModel","placeholder","clearable","ngClass","ngModelChange","change"],["bindLabel","name","bindValue","name","placeholder","Select Service Type","formControlName","operationType",3,"readonly","items","clearable","ngClass","change"],[4,"ngIf"],["bindLabel","typeName","bindValue","typeName","placeholder","Select Ticket Type","formControlName","ticketType",3,"items","clearable","ngClass","change"],["bindLabel","ticketTypeName","bindValue","ticketTypeId","placeholder","Select Category","formControlName","type",3,"items","clearable","ngClass","change"],[1,"control-label"],["bindLabel","urgencyTypeName","bindValue","urgencyTypeName","placeholder","Select Priority","formControlName","urgent",3,"items","clearable","ngClass"],[1,"col-lg-8","pe-0","mt-n2","stretch-card"],["ngbNav","",1,"nav-tabs","nav-tabs-custom",3,"activeId","activeIdChange"],["defaultNav","ngbNav"],[3,"ngbNavItem"],["ngbNavLink",""],[1,"d-flex","flex-row","flex-lg-column","flex-xl-row","align-items-center"],[1,"d-none","d-sm-block","mb-0"],["ngbNavContent",""],[1,"tab-content","text-muted"],[3,"ngbNavOutlet"],[1,"text-end","mb-3"],["type","button",1,"btn","btn-soft-primary","waves-effect","mx-3",3,"click"],["class","btn btn-success w-sm","type","button",3,"disabled","click",4,"ngIf"],[1,"form-check"],["formControlName","isGlobal","type","checkbox","id","isGlobal",1,"form-check-input",3,"change"],["for","isGlobal",1,"form-check-label",2,"opacity","1"],[1,"mt-2"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"col-lg-12"],[1,"card","mb-1"],["type","text","placeholder","Enter Title","formControlName","title",1,"form-control",3,"maxlength"],[1,"nopadding","clrlbl"],["formControlName","description",3,"editor","config"],["defaultNavMultiply","ngbNav"],[1,"mt-3"],[1,"container-fluid","container-view"],["accept","image/*","title","Only Image file will be Uploaded","data-toggle","tooltip","data-placement","top",1,"dropzone",3,"multiple","url","change"],[1,"dropzoneLabel"],[1,"preview-section"],["class","image-container",4,"ngFor","ngForOf"],[1,"mt-4","p-0"],[1,"card-title","mb-1"],[3,"oldDataSave","imageData"],[1,"image-container"],[1,"image-wrapper",3,"ngClass"],[1,"img-size-withd-upload",3,"src"],["imgRenderer",""],["type","button",1,"ri-close-circle-line","ri-close-circle-line2",3,"click"],["accept",".xlsx, .accdb, .txt , .docx ,.doc ,.pdf","title","Only ..xlsx, .accdb, .txt , .docx ,.doc ,.pdf Extensions file should be upload","data-toggle","tooltip","data-placement","top",1,"dropzone",3,"multiple","url","change"],["class","row me-0 mr-0",4,"ngIf"],[1,"row","me-0","mr-0"],[1,"col-md-12"],[1,"table",2,"text-align","justify"],[4,"ngFor","ngForOf"],[2,"white-space","nowrap",3,"title"],["type","button",1,"ri-close-circle-line","text-danger",3,"click"],[1,"card-header","text-end","p-2"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"card-body","maxHeightCard"],[1,"table-responsive","table-card","mb-0"],[1,"table"],[1,"bg-light","text-muted","text-uppercase"],[1,"btn","btn-primary",3,"click"],["href","javascript:void(0)",1,"fw-medium","link-primary"],[1,"status"],["href","javascript:void(0)",1,"dropdown-item","cursor-pointer",3,"click"],[1,"ri-delete-bin-fill","align-bottom","me-2","text-danger"],["colspan","4",1,"text-center"],["bindLabel","locationName","bindValue","locationId","placeholder","Select location","formControlName","locationId",1,"custom",3,"items","clearable","ngModel","ngClass","ngModelChange"],["formControlName","impactOfIncident",3,"editor","config"],[1,"col-md-6"],[1,"form-label","mb-0"],["bindLabel","incidentTypeName","bindValue","incidentTypeId","placeholder","Select Incident","formControlName","incidentType",1,"custom",3,"items","clearable","ngClass","change"],[1,"col-md-6","mb-3"],["ngbTooltip","Clear","class","ri-close-circle-line text-danger",3,"click",4,"ngIf"],["type","text","placeholder","Approx Date of Incident","formControlName","dateOfincident","mwlFlatpickr","",1,"form-control","flatpickr-input",3,"altInput","enableTime","convertModelValue","dateFormat","maxDate","change"],["class","col-md-6 mb-3",4,"ngIf"],[1,"fs-15","mb-1"],[1,"text-muted"],[1,"row","text-center"],[1,"row","justify-content-center"],[1,"col-md-2"],[1,"mb-0"],[1,"position-relative","d-inline-block"],[1,"position-absolute","top-100","start-100","translate-middle"],["class","mb-0","placement","left","ngbTooltip","Remove Image",4,"ngIf"],["for","asset_id0","class","mb-0","placement","left","ngbTooltip","Select Image",4,"ngIf"],["id","asset_id0","type","file","accept","image/png, image/gif, image/jpeg",1,"form-control","d-none",3,"change"],[1,"avatar-lg"],[1,"avatar-title","bg-light","rounded"],["id","product-img",1,"avatar-md","img-size-fixed",3,"src"],["for","asset_id1","class","mb-0","placement","left","ngbTooltip","Select Image",4,"ngIf"],["accept","image/*","id","asset_id1","type","file","accept","image/png, image/gif, image/jpeg",1,"form-control","d-none",3,"change"],["for","asset_id2","class","mb-0","placement","left","ngbTooltip","Select Image",4,"ngIf"],["accept","image/*","id","asset_id2","type","file","accept","image/png, image/gif, image/jpeg",1,"form-control","d-none",3,"change"],["for","asset_id3","class","mb-0","placement","left","ngbTooltip","Select Image",4,"ngIf"],["accept","image/*","id","asset_id3","type","file","accept","image/png, image/gif, image/jpeg",1,"form-control","d-none",3,"change"],["ngbTooltip","Clear",1,"ri-close-circle-line","text-danger",3,"click"],["placeholder","Enter Expected  Work Start Time","formControlName","approxTimeOfIncident",1,"form-control",3,"ngxMatTimepicker","blur"],["dottedMinutesInGap","","enableKeyboardInput",""],["picker",""],["placement","left","ngbTooltip","Remove Image",1,"mb-0"],[1,"avatar-xs"],[1,"avatar-title","bg-light","border","rounded-circle","text-muted","cursor-pointer"],[1,"ri-close-circle-fill",3,"click"],["for","asset_id0","placement","left","ngbTooltip","Select Image",1,"mb-0"],[1,"ri-image-fill"],["for","asset_id1","placement","left","ngbTooltip","Select Image",1,"mb-0"],["for","asset_id2","placement","left","ngbTooltip","Select Image",1,"mb-0"],["for","asset_id3","placement","left","ngbTooltip","Select Image",1,"mb-0"],["type","button",1,"btn","btn-success","w-sm",3,"disabled","click"]],template:function(a,n){if(1&a&&(e._UZ(0,"app-breadcrumbs",0),e.TgZ(1,"form",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h5",6),e._uU(7,"Basic Information"),e.qZA()(),e.TgZ(8,"div",7),e.YNc(9,pe,5,0,"div",8),e.TgZ(10,"div",9)(11,"label",10),e._uU(12,"Company"),e.TgZ(13,"span",11),e._uU(14,"*"),e.qZA()(),e.TgZ(15,"ng-select",12),e.NdJ("ngModelChange",function(l){return n.selectedDropDownCompanyIdValue=l})("change",function(l){return n.onDropdownCompanyValueChange(l)}),e.qZA(),e.YNc(16,me,2,1,"div",13),e.qZA(),e.TgZ(17,"div",9)(18,"div",14)(19,"label",10),e._uU(20,"Client"),e.TgZ(21,"span",11),e._uU(22,"*"),e.qZA()(),e.TgZ(23,"ng-select",15),e.NdJ("ngModelChange",function(l){return n.selectedDropDownClientIdValue=l})("change",function(l){return n.onDropdownClientValueChange(l)}),e.qZA(),e.YNc(24,ue,2,1,"div",13),e.qZA()(),e.TgZ(25,"div",9)(26,"div",14)(27,"label",16),e._uU(28),e.TgZ(29,"span",11),e._uU(30,"*"),e.qZA()(),e.TgZ(31,"ng-select",17),e.NdJ("ngModelChange",function(l){return n.selectedDropDownProjectOrDeparmentIdValue=l})("change",function(l){return n.onDropdownDepartmentValueChange(l)}),e.qZA(),e.YNc(32,Te,2,1,"div",13),e.qZA()(),e.TgZ(33,"div",9)(34,"div",14)(35,"label",16),e._uU(36,"Service Type"),e.TgZ(37,"span",11),e._uU(38,"*"),e.qZA()(),e.TgZ(39,"ng-select",18),e.NdJ("change",function(l){return n.onChangeServiceType(l)}),e.qZA(),e.YNc(40,ke,2,1,"div",19),e.qZA()(),e.TgZ(41,"div",9)(42,"div",14)(43,"label",16),e._uU(44,"Ticket Type"),e.TgZ(45,"span",11),e._uU(46,"*"),e.qZA()(),e.TgZ(47,"ng-select",20),e.NdJ("change",function(l){return n.ticketTypeHandler(l)}),e.qZA(),e.YNc(48,ve,2,1,"div",19),e.qZA()(),e.TgZ(49,"div",9)(50,"label",16),e._uU(51,"Ticket Category"),e.TgZ(52,"span",11),e._uU(53,"*"),e.qZA()(),e.TgZ(54,"ng-select",21),e.NdJ("change",function(l){return n.onChangeTicketType(l)}),e.qZA(),e.YNc(55,Ze,2,1,"div",19),e.qZA(),e.TgZ(56,"div",9)(57,"label",22),e._uU(58,"Priority"),e.TgZ(59,"span",11),e._uU(60,"*"),e.qZA()(),e._UZ(61,"ng-select",23),e.YNc(62,Ie,2,1,"div",19),e.qZA()()()(),e.TgZ(63,"div",24)(64,"div",4)(65,"div",7)(66,"ul",25,26),e.NdJ("activeIdChange",function(l){return n.defaultNavActiveId=l}),e.TgZ(68,"li",27)(69,"a",28)(70,"div",29)(71,"p",30),e._uU(72,"Ticket"),e.qZA()()(),e.YNc(73,Oe,18,14,"ng-template",31),e.qZA(),e.TgZ(74,"li",27)(75,"a",28)(76,"div",29)(77,"p",30),e._uU(78,"Asset"),e.qZA()()(),e.YNc(79,Pe,18,3,"ng-template",31),e.qZA(),e.YNc(80,lt,7,1,"ng-container",19),e.qZA(),e.TgZ(81,"div",32),e._UZ(82,"div",33),e.qZA()()()()()(),e.TgZ(83,"div",34)(84,"button",35),e.NdJ("click",function(){return n.goback()}),e._uU(85," Back "),e.qZA(),e.YNc(86,ct,2,1,"button",36),e.qZA()),2&a){const o=e.MAs(67);e.Q6J("title",n.label)("breadcrumbItems",n.breadCrumbItems),e.xp6(1),e.Q6J("formGroup",n.addTicketFrom),e.xp6(8),e.Q6J("ngIf",!n.disabledWithAceessGroup),e.xp6(6),e.Q6J("readonly",n.disabledWithAceessGroup)("items",n.arrayListDropDownCompany)("clearable",!1)("ngModel",n.selectedDropDownCompanyIdValue)("ngClass",e.WLB(47,b,n.company.invalid&&n.company.touched,n.company.valid&&n.company.touched)),e.xp6(1),e.Q6J("ngIf",n.company.invalid&&n.company.touched),e.xp6(7),e.Q6J("readonly",n.disabledWithAceessGroup)("items",n.arrayListDropDownClientList)("clearable",!1)("ngModel",n.selectedDropDownClientIdValue)("ngClass",e.WLB(50,b,n.client.invalid&&n.client.touched,n.client.valid&&n.client.touched)),e.xp6(1),e.Q6J("ngIf",n.client.invalid&&n.client.touched),e.xp6(4),e.Oqu(n.isProject?"Project":"Department"),e.xp6(3),e.Q6J("readonly",n.projectDepartmentFieldDisiabled)("items",n.arrayListDropDownProjectOrDeparmentList)("ngModel",n.selectedDropDownProjectOrDeparmentIdValue)("placeholder",n.isProject?"Select Project":"Select Department")("clearable",!1)("ngClass",e.WLB(53,b,n.project.invalid&&n.project.touched,n.project.valid&&n.project.touched)),e.xp6(1),e.Q6J("ngIf",(null==n.project?null:n.project.invalid)&&(null==n.project?null:n.project.touched)),e.xp6(7),e.Q6J("readonly",n.disabledWithAceessGroup)("items",n.operationList)("clearable",!1)("ngClass",e.WLB(56,b,n.operationType.invalid&&n.operationType.touched,n.operationType.valid&&n.operationType.touched)),e.xp6(1),e.Q6J("ngIf",(null==n.operationType?null:n.operationType.invalid)&&(null==n.operationType?null:n.operationType.touched)),e.xp6(7),e.Q6J("items",n.ticketTypeList)("clearable",!1)("ngClass",e.WLB(59,b,n.ticketType.invalid&&n.ticketType.touched,n.ticketType.valid&&n.ticketType.touched)),e.xp6(1),e.Q6J("ngIf",(null==n.ticketType?null:n.ticketType.invalid)&&(null==n.ticketType?null:n.ticketType.touched)),e.xp6(6),e.Q6J("items",n.masterTicketTypeList)("clearable",!1)("ngClass",e.WLB(62,b,n.type.invalid&&n.type.touched,n.type.valid&&n.type.touched)),e.xp6(1),e.Q6J("ngIf",(null==n.type?null:n.type.invalid)&&(null==n.type?null:n.type.touched)),e.xp6(6),e.Q6J("items",n.urgentList)("clearable",!1)("ngClass",e.WLB(65,b,n.urgent.invalid&&n.urgent.touched,n.urgent.valid&&n.urgent.touched)),e.xp6(1),e.Q6J("ngIf",(null==n.urgent?null:n.urgent.invalid)&&(null==n.urgent?null:n.urgent.touched)),e.xp6(4),e.Q6J("activeId",n.defaultNavActiveId),e.xp6(2),e.Q6J("ngbNavItem",1),e.xp6(6),e.Q6J("ngbNavItem",2),e.xp6(6),e.Q6J("ngIf","Incident Report"==n.operationType.value),e.xp6(2),e.Q6J("ngbNavOutlet",o),e.xp6(4),e.Q6J("ngIf",n.afterApiCallSubmit)}},dependencies:[m.mk,m.sg,m.O5,p._Y,p.Fj,p.Wl,p.JJ,p.JL,p.nD,p.sg,p.u,d._L,w.as,q.n,d.uN,d.Pz,d.nv,d.Is,d.Vx,d.tO,d.Dy,R.u,S.w9,L._f,L.NP,A.ft,A.Bi,re],styles:['.maxHeightCard[_ngcontent-%COMP%]{height:703px;overflow-y:scroll}.imgeVal[_ngcontent-%COMP%]{width:400px;height:400px}  ngx-dropzone{border:0px dashed #ccc!important;padding:20px;text-align:center;cursor:pointer;height:110px!important;display:block!important}  ngx-dropzone:hover{border:4px dashed #5477e1}.container-view[_ngcontent-%COMP%]{border:2px dashed #717386;padding:20px;text-align:center;cursor:pointer}.container-view[_ngcontent-%COMP%]:hover{border:4px dashed #5477e1}.preview-section[_ngcontent-%COMP%]{overflow-x:auto;display:flex;flex-wrap:wrap}.image-container[_ngcontent-%COMP%]{width:calc(20% - 10px);margin-right:10px;margin-bottom:10px}.image-wrapper[_ngcontent-%COMP%]{position:relative;overflow:hidden;margin-bottom:5px}img[_ngcontent-%COMP%]{max-width:100%;height:auto}.ri-close-circle-line2[_ngcontent-%COMP%]{position:absolute;top:-3px;right:17px;cursor:pointer;opacity:0;transition:opacity .3s ease;font-size:31px;z-index:2;color:#fff}.image-wrapper[_ngcontent-%COMP%]:hover   .ri-close-circle-line2[_ngcontent-%COMP%]{opacity:1}.image-wrapper[_ngcontent-%COMP%]:hover:before{content:"";position:absolute;top:0;left:12px;width:85%;height:100%;background-color:#00000080;z-index:1;border-radius:8px}.new-row[_ngcontent-%COMP%]{clear:both}.fa-download-diary[_ngcontent-%COMP%]{font-size:90px;opacity:.4}.dropzoneLabel[_ngcontent-%COMP%]{display:grid}.dropzone[_ngcontent-%COMP%]{min-height:19px!important}.img-size-withd-upload[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:12px}.chat-image[_ngcontent-%COMP%]{height:79%;width:54%;opacity:.5}']})}}return i})();var C=r(553),dt=r(2438),pt=r(2181),_t=r(3620),mt=r(3997),gt=r(9397),ut=r(2552),B=r(471),G=r(6592),W=r(7932);const ht=["inputerTicketNumber"];function Tt(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"h4",48),e._UZ(2,"span",49),e.qZA(),e.BQk()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("countUp",t.totalCountTicketOnly.countTotalTicket)("options",t.option)}}function ft(i,s){1&i&&(e.ynx(0),e.TgZ(1,"h4",48),e._uU(2,"0"),e.qZA(),e.BQk())}function kt(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"h4",48),e._UZ(2,"span",49),e.qZA(),e.BQk()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("countUp",t.totalCountTicketOnly.countNewTicket)("options",t.option)}}function bt(i,s){1&i&&(e.ynx(0),e.TgZ(1,"h4",48),e._uU(2,"0"),e.qZA(),e.BQk())}function vt(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"h4",48),e._UZ(2,"span",49),e.qZA(),e.BQk()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("countUp",t.totalCountTicketOnly.countInProgressTicket)("options",t.option)}}function xt(i,s){1&i&&(e.ynx(0),e.TgZ(1,"h4",48),e._uU(2,"0"),e.qZA(),e.BQk())}function Zt(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"h4",48),e._UZ(2,"span",49),e.qZA(),e.BQk()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("countUp",t.totalCountTicketOnly.countOnHoldTicket)("options",t.option)}}function Ct(i,s){1&i&&(e.ynx(0),e.TgZ(1,"h4",48),e._uU(2,"0"),e.qZA(),e.BQk())}function It(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"h4",48),e._UZ(2,"span",49),e.qZA(),e.BQk()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("countUp",t.totalCountTicketOnly.countClosedTicket)("options",t.option)}}function yt(i,s){1&i&&(e.ynx(0),e.TgZ(1,"h4",48),e._uU(2,"0"),e.qZA(),e.BQk())}function wt(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"h4",48),e._UZ(2,"span",49),e.qZA(),e.BQk()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("countUp",t.totalCountTicketOnly.countResolvedTicket)("options",t.option)}}function At(i,s){1&i&&(e.ynx(0),e.TgZ(1,"h4",48),e._uU(2,"0"),e.qZA(),e.BQk())}function Dt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"button",50),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.navigateToAdd())}),e._UZ(2,"i",51),e._uU(3," Add Tickets "),e.qZA()()}}function Ut(i,s){1&i&&(e.ynx(0),e.TgZ(1,"tr")(2,"td",60),e._uU(3," No Ticket Data "),e.qZA()(),e.BQk())}function qt(i,s){1&i&&e._UZ(0,"i",80)}function St(i,s){1&i&&e._UZ(0,"i",81)}function Lt(i,s){if(1&i&&(e.TgZ(0,"span",82),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",null==t?null:t.urgencyTypeName," ")}}function Nt(i,s){if(1&i&&(e.TgZ(0,"span",83),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",null==t?null:t.urgencyTypeName," ")}}function Ot(i,s){if(1&i&&(e.TgZ(0,"span",84),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",null==t?null:t.urgencyTypeName," ")}}function Vt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"li")(1,"a",78),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,o=e.oxw(3);return e.KtG(o.openModalcancelHandler(n.ticketId))}),e._UZ(2,"i",85),e._uU(3," Cancelation Ticket "),e.qZA()()}}function Mt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td",62)(2,"a",63),e.NdJ("click",function(){const o=e.CHM(t).$implicit,l=e.oxw(3);return e.KtG(l.viewHandler(o.ticketId))}),e._uU(3),e.qZA(),e.TgZ(4,"p",64)(5,"i",65),e.NdJ("click",function(){const o=e.CHM(t).$implicit,l=e.oxw(3),c=e.MAs(117);return e.KtG(l.getV2_MaintenanceWorkflowAudit(o.ticketId,c,o.ticketStatusId))}),e.qZA(),e.YNc(6,qt,1,0,"i",66)(7,St,1,0,"i",67),e.qZA()(),e.TgZ(8,"td",68),e.NdJ("click",function(){const n=e.CHM(t),o=n.$implicit,l=n.index,c=e.oxw(3);return e.KtG(c.expandTitle("ticketTitle_"+o.ticketId+"_"+l))}),e._uU(9),e.qZA(),e.TgZ(10,"td",68),e.NdJ("click",function(){const n=e.CHM(t),o=n.$implicit,l=n.index,c=e.oxw(3);return e.KtG(c.expandTitle("companyName_"+o.ticketId+"_"+l))}),e._uU(11),e.qZA(),e.TgZ(12,"td",68),e.NdJ("click",function(){const n=e.CHM(t),o=n.$implicit,l=n.index,c=e.oxw(3);return e.KtG(c.expandTitle("clientName_"+o.ticketId+"_"+l))}),e._uU(13),e.qZA(),e.TgZ(14,"td",68),e.NdJ("click",function(){const n=e.CHM(t),o=n.$implicit,l=n.index,c=e.oxw(3);return e.KtG(c.expandTitle("projectName_"+o.ticketId+"_"+l))}),e._uU(15),e.qZA(),e.TgZ(16,"td",68),e.NdJ("click",function(){const o=e.CHM(t).$implicit,l=e.oxw(3);return e.KtG(l.expandTitle("createdDate_"+o.ticketId))}),e._uU(17),e._UZ(18,"br"),e.TgZ(19,"span",69),e._uU(20),e.qZA()(),e.TgZ(21,"td",70),e.YNc(22,Lt,2,1,"span",71)(23,Nt,2,1,"span",72)(24,Ot,2,1,"span",73),e.qZA(),e.TgZ(25,"td",70)(26,"span"),e._uU(27),e.qZA()(),e.TgZ(28,"td",62)(29,"span")(30,"div",74)(31,"button",75),e._UZ(32,"i",76),e.qZA(),e.TgZ(33,"ul",77)(34,"li")(35,"a",78),e.NdJ("click",function(){const o=e.CHM(t).$implicit,l=e.oxw(3);return e.KtG(l.viewHandler(o.ticketId))}),e._UZ(36,"i",79),e._uU(37," View "),e.qZA()(),e.YNc(38,Vt,4,0,"li",11),e.qZA()()()()()}if(2&i){const t=s.$implicit,a=s.index,n=e.oxw(3);e.xp6(3),e.Oqu(t.ticketNo),e.xp6(3),e.Q6J("ngIf",!t.isGlobal),e.xp6(1),e.Q6J("ngIf",t.isBillingRequired),e.xp6(1),e.Q6J("title",t.ticketTitle)("id","ticketTitle_"+t.ticketId+"_"+a),e.xp6(1),e.hij(" ",t.ticketTitle," "),e.xp6(1),e.Q6J("title",t.companyName)("id","companyName_"+t.ticketId+"_"+a),e.xp6(1),e.hij(" ",t.companyName," "),e.xp6(1),e.Q6J("title",t.clientName)("id","clientName_"+t.ticketId+"_"+a),e.xp6(1),e.hij(" ",t.clientName," "),e.xp6(1),e.Q6J("title",t.projectName)("id","projectName_"+t.ticketId+"_"+a),e.xp6(1),e.hij(" ",t.projectName," "),e.xp6(1),e.Q6J("title",t.createdDate)("id","createdDate_"+t.ticketId),e.xp6(1),e.hij(" ",t.createdDate,""),e.xp6(3),e.Oqu(t.ticketTypeName),e.xp6(2),e.Q6J("ngIf","High"==(null==t?null:t.urgencyTypeName)),e.xp6(1),e.Q6J("ngIf","Low"==(null==t?null:t.urgencyTypeName)),e.xp6(1),e.Q6J("ngIf","Medium"==(null==t?null:t.urgencyTypeName)),e.xp6(2),e.Tol(n.returnStatusBadgeClassesStatus(t.ticketStatusId)),e.xp6(1),e.Oqu(t.ticketStatusName),e.xp6(11),e.Q6J("ngIf",30!=t.ticketStatusId&&34!=t.ticketStatusId&&31!=t.ticketStatusId&&32!=t.ticketStatusId&&61!=t.ticketStatusId&&19!=t.ticketStatusId)}}function Jt(i,s){if(1&i&&(e.ynx(0),e.YNc(1,Mt,39,26,"tr",61),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.ticketList)}}function Qt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"ngb-pagination",86),e.NdJ("pageChange",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.page=n)})("pageChange",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.OnChangesPage(n))}),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("collectionSize",t.totalRecordsFromApi)("pageSize",t.pageSize)("page",t.page)("maxSize",2)("rotate",!0)}}function Pt(i,s){if(1&i&&(e.TgZ(0,"div",52)(1,"table",53)(2,"thead")(3,"tr",54)(4,"th"),e._uU(5,"TICKET NO"),e.qZA(),e.TgZ(6,"th"),e._uU(7,"Title"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"Company"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Client"),e.qZA(),e.TgZ(12,"th"),e._uU(13),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Create Date"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"Priority"),e.qZA(),e.TgZ(18,"th"),e._uU(19,"Status"),e.qZA(),e.TgZ(20,"th"),e._uU(21,"Action"),e.qZA()()(),e.TgZ(22,"tbody"),e.YNc(23,Ut,4,0,"ng-container",11)(24,Jt,2,1,"ng-container",11),e.qZA()()(),e.TgZ(25,"div",55)(26,"div",56)(27,"div",57),e._uU(28),e.qZA()(),e.TgZ(29,"div",56)(30,"div",58),e.YNc(31,Qt,1,5,"ngb-pagination",59),e.qZA()()()),2&i){const t=e.oxw();e.xp6(13),e.Oqu(t.isProject?"Project":"Department"),e.xp6(10),e.Q6J("ngIf",0==t.ticketList.length),e.xp6(1),e.Q6J("ngIf",0!=t.ticketList.length),e.xp6(4),e.lnq(" Showing ",t.from," to ",t.to," of ",t.totalRecordsFromApi," entries "),e.xp6(3),e.Q6J("ngIf",t.totalRecordsFromApi>t.pageSize)}}function Rt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",87)(1,"h5",88),e._uU(2,"Filters"),e.qZA(),e.TgZ(3,"button",89),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.dismiss("Cross click"))}),e.qZA()(),e.TgZ(4,"div",90)(5,"div",1)(6,"div",91)(7,"label",92),e._uU(8,"Requester Name"),e.qZA(),e.TgZ(9,"input",93),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.selectedRequesterName=n)}),e.qZA()(),e.TgZ(10,"div",91)(11,"label",94),e._uU(12,"Requester Email"),e.qZA(),e.TgZ(13,"input",95),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.selectedRequesterEmail=n)}),e.qZA()(),e.TgZ(14,"div",91)(15,"label",96),e._uU(16,"Ticket Tag Id"),e.qZA(),e.TgZ(17,"input",97),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.selectedTicketTagId=n)}),e.qZA()(),e.TgZ(18,"div",91)(19,"label",98),e._uU(20,"Created Date"),e.qZA(),e.TgZ(21,"input",99),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.selectedCreatedDate=n)}),e.qZA()(),e.TgZ(22,"div",91)(23,"label",100),e._uU(24,"Internal/Global "),e.qZA(),e.TgZ(25,"ng-select",101),e.NdJ("change",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onClickisGlobal(n.selectedIsGlobal,!0))})("change",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.selectedOperationType=null)})("ngModelChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.selectedIsGlobal=n)}),e.qZA()(),e.TgZ(26,"div",91)(27,"label",102),e._uU(28,"Service Type"),e.qZA(),e.TgZ(29,"ng-select",103),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.selectedOperationType=n)})("change",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onChangeOperationType())})("change",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.selectedIsBillable=null)}),e.qZA()(),e.TgZ(30,"div",91)(31,"label",104),e._uU(32,"IsBillable "),e.qZA(),e.TgZ(33,"ng-select",105),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.selectedIsBillable=n)})("change",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onChangeIsBillable())}),e.qZA()(),e.TgZ(34,"div",91)(35,"label",106),e._uU(36,"Ticket Type"),e.qZA(),e.TgZ(37,"ng-select",107),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.selectedTicketType=n)})("change",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.ticketTypeHandler(n))}),e.qZA()(),e.TgZ(38,"div",91)(39,"label",108),e._uU(40,"Ticket Category"),e.qZA(),e.TgZ(41,"ng-select",109),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.selectedDropDownTicketTypeIdValue=n)}),e.qZA()(),e.TgZ(42,"div",91)(43,"label",110),e._uU(44,"Priority"),e.qZA(),e.TgZ(45,"ng-select",111),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.selectedUrgentValue=n)}),e.qZA()()()(),e.TgZ(46,"div",112)(47,"button",113),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.resetSerachVariableWithModal())}),e._uU(48," Clear "),e.qZA(),e.TgZ(49,"button",114),e.NdJ("click",function(n){const l=e.CHM(t).$implicit;return e.KtG(l.close("Ok",n))}),e._uU(50," Search "),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(9),e.Q6J("ngModel",t.selectedRequesterName),e.xp6(4),e.Q6J("ngModel",t.selectedRequesterEmail),e.xp6(4),e.Q6J("ngModel",t.selectedTicketTagId),e.xp6(4),e.Q6J("ngModel",t.selectedCreatedDate)("altInput",!1)("enableTime",!1)("dateFormat","d-m-Y")("altInput",!1)("convertModelValue",!0),e.xp6(4),e.Q6J("items",t.isGlobalList)("ngModel",t.selectedIsGlobal)("clearable",!0),e.xp6(4),e.Q6J("items",t.operationList)("clearable",!0)("ngModel",t.selectedOperationType),e.xp6(4),e.Q6J("readonly",!t.selectedIsGlobal)("items",t.isBillableList)("clearable",!1)("ngModel",t.selectedIsBillable),e.xp6(4),e.Q6J("items",t.ticketTypeList)("clearable",!1)("ngModel",t.selectedTicketType),e.xp6(4),e.Q6J("readonly",!t.selectedTicketType)("items",t.masterTicketTypeList)("clearable",!1)("ngModel",t.selectedDropDownTicketTypeIdValue),e.xp6(4),e.Q6J("items",t.urgentList)("clearable",!1)("ngModel",t.selectedUrgentValue)}}function Ft(i,s){1&i&&(e.TgZ(0,"div",123)(1,"p",124)(2,"b"),e._uU(3,"Ticket has been canceled"),e.qZA()()())}function jt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",115)(1,"h4",116),e._uU(2,"WorkFlow Audit"),e.qZA(),e.TgZ(3,"button",117),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.dismiss("Cross click"))}),e.qZA()(),e.YNc(4,Ft,4,0,"div",118),e.TgZ(5,"div",119),e._UZ(6,"app-audit-chart",120),e.TgZ(7,"div",121)(8,"button",122),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.close("Close click"))}),e._uU(9," Close "),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(4),e.Q6J("ngIf",19==t.currentStatus),e.xp6(2),e.Q6J("Data",t.maintenanceWorkflowAuditList)}}let Bt=(()=>{class i{constructor(t,a,n,o,l,c,g,u,v,h,_,f,X){this.dropdownService=t,this.router=a,this.modalService=n,this.ticketService=o,this.authService=l,this.formBuilder=c,this.commonFunctionService=g,this.dropdownServices=u,this.datePipe=v,this.helpDeskService=h,this.offcanvasService=_,this.menuService=f,this.changeDetectorRef=X,this.isProject=!1,this.label="Ticket Management",this.breadCrumbItems=[{label:"Ticket"},{label:"Ticket List",active:!0}],this.num=0,this.option={startVal:this.num,useEasing:!0,duration:2,decimalPlaces:0},this.payload={displayLength:10,displayStart:0,SearchCompanyId:null,SearchClientId:null,SearchProjectId:null,SearchLocationId:null,SearchTicketStatusId:null,SearchCategoryId:null,SearchSubCategoryId:null,SearchTicketTitle:null,SearchTicketNo:null,SearchRequesterName:null,SearchRequesterEmail:null,SearchCreatedDateFrom:null,SearchCreatedDateTo:null,SearchTicketType:null,SearchPriority:null,SearchIsGlobal:null,SearchIsBillable:null,SearchTicketTypeId:null,SearchOperationType:null},this.to=0,this.from=0,this.pageSize=10,this.totalRecordsFromApi=0,this.ticketList=[],this.page=1,this.collectionSize=0,this.imageUrl=C.N.apiUrl,this.arrayListDropDownCompany=[],this.arrayListDropDownClientList=[],this.arrayListDropDownProjectOrDeparmentList=[],this.arrayListDropDownTicketStatus=[],this.selectedCreatedDate={from:null,to:null},this.operationList=[{name:"Service",operationTypeId:1,disabled:!1},{name:"Incident Report",operationTypeId:2,disabled:!1},{name:"Bug",operationTypeId:3,disabled:!1},{name:"New Requirement",operationTypeId:4,disabled:!1}],this.ticketTypeList=["Hardware","Non-Hardware"],this.isGlobalList=["Internal","Global"],this.isBillableList=[{name:"Billable",disabled:!1},{name:"Non-Billable",disabled:!1}],this.totalCountTicketOnly={countTotalTicket:0,countNewTicket:0,countInProgressTicket:0,countResolvedTicket:0,countClosedTicket:0,countOnHoldTicket:0},this.returnValueMenu={access:!0,add:!0,delete:!0,edit:!0,reportPrint:!0,reportView:!0},this.disabledWithAceessGroup=!1,this.projectDepartmentFieldDisiabled=!1,this.urgentList=[],this.selectedUrgentValue=null,this.selectedTicketType=null,this.selectedIsGlobal=null,this.selectedIsBillable=null,this.masterTicketTypeList=[],this.activeCard=null,this.currentStatus=0,this.returnValueMenu=this.menuService.getvalueObjectreturn(this.router.url),this.isProject=this.authService.getisProject()}ngOnInit(){setTimeout(t=>{this.returnValueMenu=this.menuService.getvalueObjectreturn(this.router.url)},2e3),this.getDropdownCompanyList(),this.getMX_MasterUrgentTypeList(),this.getV2_TotalCountTicketOnly(),this.getDropdownTicketStatusList("Ticket"),this.currentUserRole=JSON.parse(localStorage.getItem("currentUser")).role,"Client User"===this.currentUserRole&&(this.disabledWithAceessGroup=!0),localStorage.getItem("objectSerachForTicket")?this.getObjectAfterRefresh():this.loadData()}getV2_TotalCountTicketOnly(){this.ticketService.getV2_TotalCountTicketOnly().subscribe(t=>{this.totalCountTicketOnly=t.data})}getMX_MasterUrgentTypeList(){this.ticketService.getMX_MasterUrgentTypeList().subscribe(t=>{t&&(this.urgentList=t?.data,this.setObjectBeforeRefesh())})}navigateToAdd(){this.ticketService.accessRight=!0,this.router.navigate(["/maintenace-management/corrective/ticket/add-ticket"])}OnChangesPage(t){t&&(this.payload.displayStart=this.pageSize*(t-1),this.loadData())}loadData(){this.ticketService.getV2_TicketingtList_ByPagination(this.commonFunctionService.clean(this.payload)).subscribe(t=>{this.setObjectBeforeRefesh(),this.ticketList=t.list,console.log("ticket cat::",this.ticketList),this.ticketList.length>0?(this.totalRecordsFromApi=t.list[0].totalCount,this.from=t.list.reduce((a,n)=>n.rowNum<a?n.rowNum:a,t.list[0].rowNum),this.to=t.list.reduce((a,n)=>n.rowNum>a?n.rowNum:a,t.list[0].rowNum),this.pageSize=this.payload.displayLength):(this.totalRecordsFromApi=0,this.from=0,this.to=0,this.pageSize=this.payload.displayLength)})}viewHandler(t){this.ticketService.sendTicketId=t,this.helpDeskService.pageAction="",this.ticketService.ticketPageAction="Basic Ticket Page",this.ticketService.lastStoreTicketRouterName="/maintenace-management/corrective/ticket/list-ticket",localStorage.setItem("lastStoreTicketRouterName",this.ticketService.lastStoreTicketRouterName),this.router.navigate(["/maintenace-management/corrective/ticket/ticket-view"])}editHandler(t){this.ticketService.sendTicketId=t,this.router.navigate(["/maintenace-management/corrective/ticket/edit-ticket"])}resetSerachVariable(){this.arrayListDropDownClientList=[],this.arrayListDropDownProjectOrDeparmentList=[],this.selectedDropDownCompanyIdValue=null,this.selectedDropDownClientIdValue=null,this.selectedDropDownProjectOrDeparmentIdValue=null,this.selectedDropDownTicketStatusIdValue=null,this.selectedTicketTagId=null,this.selectedRequesterName=null,this.selectedRequesterEmail=null,this.selectedIssueDescription=null,this.selectedCreatedDate={from:null,to:null},this.selectedOperationType=null,this.typeTicketNameValue=null,this.selectedTicketType=null,this.selectedIsGlobal=null,this.selectedIsBillable=null,this.selectedUrgentValue=null,this.selectedDropDownTicketTypeIdValue=null,this.activeCard=null,this.payload={displayLength:10,displayStart:0,SearchCompanyId:null,SearchClientId:null,SearchProjectId:null,SearchLocationId:null,SearchTicketStatusId:null,SearchCategoryId:null,SearchSubCategoryId:null,SearchTicketTitle:null,SearchTicketNo:null,SearchRequesterName:null,SearchRequesterEmail:null,SearchCreatedDateFrom:null,SearchCreatedDateTo:null,SearchTicketType:null,SearchPriority:null,SearchIsGlobal:null,SearchIsBillable:null,SearchTicketTypeId:null,SearchOperationType:null},localStorage.removeItem("objectSerachForTicket"),"Client User"===this.currentUserRole?this.resetAfterClientUser():(this.page=1,this.loadData())}resetAfterClientUser(){this.selectedDropDownCompanyIdValue=this.arrayListDropDownCompany[0].companyId,this.onDropdownCompanyValueChange(""),0!=this.arrayListDropDownClientList.length&&(this.selectedDropDownClientIdValue=this.arrayListDropDownClientList[0].clientId,this.onDropdownClientValueChange("")),0!=this.arrayListDropDownProjectOrDeparmentList.length&&"Client User"===this.currentUserRole&&(this.arrayListDropDownProjectOrDeparmentList.list.length>=2?this.projectDepartmentFieldDisiabled=!1:(this.projectDepartmentFieldDisiabled=!0,this.selectedDropDownProjectOrDeparmentIdValue=this.arrayListDropDownProjectOrDeparmentList[0].departmentId,this.onDropdownDepartmentValueChange("")))}getDropdownCompanyList(){this.dropdownServices.GetCompanyListDrobDown({}).subscribe(t=>{this.arrayListDropDownCompany=t.list,"Client User"===this.currentUserRole&&(this.selectedDropDownCompanyIdValue=this.arrayListDropDownCompany[0].companyId,this.onDropdownCompanyValueChange("")),this.setObjectBeforeRefesh()})}getDropdownClientlist(){this.dropdownServices.GetClientListDrobDown({SearchCompanyId:this.selectedDropDownCompanyIdValue}).subscribe(a=>{this.arrayListDropDownClientList=a.list,"Client User"===this.currentUserRole&&(this.selectedDropDownClientIdValue=this.arrayListDropDownClientList[0].clientId,this.onDropdownClientValueChange("")),this.setObjectBeforeRefesh()})}getDropdownDepartmentList(){this.dropdownServices.GetDepartmentListDrobDown({SearchCompanyId:this.selectedDropDownCompanyIdValue,SearchClientId:this.selectedDropDownClientIdValue}).subscribe(a=>{this.arrayListDropDownProjectOrDeparmentList=a.list,0!=a.list.length&&"Client User"===this.currentUserRole&&(a.list.length>=2?this.projectDepartmentFieldDisiabled=!1:(this.projectDepartmentFieldDisiabled=!0,this.selectedDropDownProjectOrDeparmentIdValue=this.arrayListDropDownProjectOrDeparmentList[0].departmentId,this.onDropdownDepartmentValueChange(""))),this.setObjectBeforeRefesh()})}onDropdownCompanyValueChange(t){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchCompanyId=this.selectedDropDownCompanyIdValue,this.selectedDropDownClientIdValue=null,this.selectedDropDownProjectOrDeparmentIdValue=null,this.payload.SearchClientId=this.selectedDropDownClientIdValue,this.payload.SearchProjectId=this.selectedDropDownProjectOrDeparmentIdValue,this.arrayListDropDownProjectOrDeparmentList=[],this.getDropdownClientlist(),this.loadData()}onDropdownClientValueChange(t){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchClientId=this.selectedDropDownClientIdValue,this.selectedDropDownProjectOrDeparmentIdValue=null,this.payload.SearchProjectId=this.selectedDropDownProjectOrDeparmentIdValue,this.getDropdownDepartmentList(),this.loadData()}onDropdownDepartmentValueChange(t){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchProjectId=this.selectedDropDownProjectOrDeparmentIdValue,this.loadData()}getDropdownTicketStatusList(t){this.ticketService.getMaintenanceStatus(t).subscribe(a=>{this.arrayListDropDownTicketStatus=a,this.setObjectBeforeRefesh()})}onDropdownTicketStatusValueChange(t){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchTicketStatusId=this.selectedDropDownTicketStatusIdValue,this.activeCard=null,this.loadData()}returnStatusBadgeClassesStatus(t){return this.commonFunctionService.returnStatusBadgeClasses(t)}ngAfterViewInit(){(0,dt.R)(this.inputerTicketNumber.nativeElement,"input").pipe((0,pt.h)(Boolean),(0,_t.b)(1e3),(0,mt.x)(),(0,gt.b)(t=>{this.onTypeTicketNameChange()})).subscribe()}onTypeTicketNameChange(){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchTicketTitle=this.typeTicketNameValue,this.loadData()}resetSerachVariableWithModal(){this.selectedTicketTagId=null,this.selectedRequesterName=null,this.selectedRequesterEmail=null,this.selectedCreatedDate={from:null,to:null},this.selectedTicketType=null,this.selectedUrgentValue=null,this.selectedDropDownTicketTypeIdValue=null,this.selectedIsBillable=null,this.selectedOperationType=null,this.selectedIsGlobal=null,this.payload.SearchTicketNo=this.selectedTicketTagId,this.payload.SearchRequesterName=this.selectedRequesterName,this.payload.SearchRequesterEmail=this.selectedRequesterEmail,this.payload.SearchPriority=this.selectedUrgentValue,this.payload.SearchTicketType=this.selectedTicketType,this.payload.SearchTicketTypeId=this.selectedDropDownTicketTypeIdValue,this.payload.SearchCreatedDateFrom=null,this.payload.SearchCreatedDateTo=null,this.payload.SearchTicketType=null,this.payload.SearchIsBillable=null,this.payload.SearchOperationType=null,this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.activeCard=null,this.operationList=[],this.operationList=[{name:"Service",operationTypeId:1,disabled:!1},{name:"Incident Report",operationTypeId:2,disabled:!1},{name:"Bug",operationTypeId:3,disabled:!1},{name:"New Requirement",operationTypeId:4,disabled:!1}],this.loadData()}submitFilterData(){this.payload.SearchTicketNo=this.selectedTicketTagId,this.payload.SearchRequesterName=this.selectedRequesterName,this.payload.SearchRequesterEmail=this.selectedRequesterEmail,this.payload.SearchPriority=this.selectedUrgentValue,this.payload.SearchTicketType=this.selectedTicketType,this.payload.SearchTicketTypeId=this.selectedDropDownTicketTypeIdValue,this.payload.SearchIsBillable=this.selectedIsBillable,this.payload.SearchOperationType=this.selectedOperationType,this.payload.SearchIsGlobal=this.selectedIsGlobal,this.payload.SearchCreatedDateFrom=this.selectedCreatedDate?.from?this.datePipe.transform(this.selectedCreatedDate.from,"dd-MM-yyyy"):null,this.payload.SearchCreatedDateTo=this.selectedCreatedDate?.to?this.datePipe.transform(this.selectedCreatedDate.to,"dd-MM-yyyy"):null,this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.loadData()}openFilter(t){this.offcanvasService.open(t,{scroll:!0,position:"end",keyboard:!1,backdrop:"static",panelClass:"custom-offcanvas3"}).result.then(n=>{this.submitFilterData()}).catch(n=>{this.submitFilterData()})}openAduit(t){this.offcanvasService.open(t,{scroll:!0,position:"end",keyboard:!1,backdrop:"static",panelClass:"custom-offcanvas2"})}getV2_MaintenanceWorkflowAudit(t,a,n){let o={TicketId:t};this.currentStatus=n,this.ticketService.getV2_MaintenanceWorkflowAudit(o).subscribe(l=>{this.maintenanceWorkflowAuditList=l.data,0!=this.maintenanceWorkflowAuditList.length?this.openAduit(a):(this.currentStatus=0,this.warning("No Workflow Audit Transaction "))})}warning(t){k().fire({toast:!0,position:"top-end",icon:"warning",title:t,showConfirmButton:!1,timer:3e3})}expandTitle(t){document.getElementById(t)}cancelHandler(t){}openModalcancelHandler(t){const a=this.modalService.open(ut.A,{ariaLabelledBy:"modal-basic-title",size:"md",centered:!0,backdrop:"static",keyboard:!1});a.componentInstance.title=" Are you sure you want to cancel the ticket",a.componentInstance.subTitle="Once canceled, the ticket status will be changed to 'canceled' and cannot be changed back.",a.componentInstance.subTitle1="You won't be able to revert this!",a.componentInstance.buttonName="Cancel It",a.result.then(n=>{n&&"success"==n.value&&this.requestHandler(t,n.remark)})}requestHandler(t,a){this.ticketService.UpdateV2_TicketCancelation({TicketId:t,Remark:a}).subscribe(o=>{this.success(o),this.loadData()})}success(t){k().fire({toast:!0,position:"top-end",icon:"success",title:t.action,text:t.message,showConfirmButton:!1,timer:1e3,showCloseButton:!0})}setObjectBeforeRefesh(){let t={};this.selectedDropDownCompanyIdValue&&(t.SearchCompanyId=this.selectedDropDownCompanyIdValue),this.selectedDropDownClientIdValue&&(t.SearchClientId=this.selectedDropDownClientIdValue),this.arrayListDropDownClientList&&(t.arrayListDropDownClientList=this.arrayListDropDownClientList),this.selectedDropDownProjectOrDeparmentIdValue&&(t.SearchProjectId=this.selectedDropDownProjectOrDeparmentIdValue),this.arrayListDropDownProjectOrDeparmentList&&(t.arrayListDropDownProjectOrDeparmentList=this.arrayListDropDownProjectOrDeparmentList),this.selectedUrgentValue&&(t.SearchPriority=this.selectedUrgentValue),this.urgentList&&(t.urgentList=this.urgentList),this.selectedTicketTagId&&(t.SearchTicketNo=this.selectedTicketTagId),this.selectedRequesterName&&(t.SearchRequesterName=this.selectedRequesterName),this.selectedRequesterEmail&&(t.SearchRequesterEmail=this.selectedRequesterEmail),this.selectedCreatedDate&&(t.SearchCreatedDate=this.selectedCreatedDate),this.selectedOperationType&&(t.SearchOperationType=this.selectedOperationType),this.selectedDropDownTicketStatusIdValue&&(t.SearchTicketStatusId=this.selectedDropDownTicketStatusIdValue),this.arrayListDropDownTicketStatus&&(t.arrayListDropDownTicketStatus=this.arrayListDropDownTicketStatus),this.typeTicketNameValue&&(t.SearchTicketTitle=this.typeTicketNameValue),this.masterTicketTypeList&&(t.masterTicketTypeList=this.masterTicketTypeList),this.selectedDropDownTicketTypeIdValue&&(t.SearchTicketTypeId=this.selectedDropDownTicketTypeIdValue),this.selectedTicketType&&(t.SearchTicketType=this.selectedTicketType),this.selectedIsGlobal&&(t.SearchIsGlobal=this.selectedIsGlobal),this.selectedIsBillable&&(t.SearchIsBillable=this.selectedIsBillable),this.activeCard&&(t.activeCard=this.activeCard),this.page&&(t.displayStart=this.pageSize*(this.page-1),t.page=this.page),localStorage.setItem("objectSerachForTicket",JSON.stringify(t))}getObjectAfterRefresh(){let t=JSON.parse(localStorage.getItem("objectSerachForTicket"));this.selectedDropDownCompanyIdValue=t.SearchCompanyId?t.SearchCompanyId:null,this.arrayListDropDownClientList=t.arrayListDropDownClientList?t.arrayListDropDownClientList:[],this.selectedDropDownClientIdValue=t.SearchClientId?t.SearchClientId:null,this.arrayListDropDownProjectOrDeparmentList=t.arrayListDropDownProjectOrDeparmentList?t.arrayListDropDownProjectOrDeparmentList:[],this.selectedDropDownProjectOrDeparmentIdValue=t.SearchProjectId?t.SearchProjectId:null,this.urgentList=t.urgentList?t.urgentList:[],this.selectedUrgentValue=t.SearchPriority?t.SearchPriority:null,this.arrayListDropDownTicketStatus=t.arrayListDropDownTicketStatus?t.arrayListDropDownTicketStatus:[],this.selectedDropDownTicketStatusIdValue=t.SearchTicketStatusId?t.SearchTicketStatusId:null,this.selectedTicketTagId=t.SearchTicketNo?t.SearchTicketNo:null,this.masterTicketTypeList=t.masterTicketTypeList?t.masterTicketTypeList:[],this.selectedDropDownTicketTypeIdValue=t.SearchTicketTypeId?t.SearchTicketTypeId:null,this.selectedRequesterName=t.SearchRequesterName?t.SearchRequesterName:null,this.selectedRequesterEmail=t.SearchRequesterEmail?t.SearchRequesterEmail:null,this.selectedCreatedDate=t.SearchCreatedDate?t.SearchCreatedDate:null,this.selectedOperationType=t.SearchOperationType?t.SearchOperationType:null,this.typeTicketNameValue=t.SearchTicketTitle?t.SearchTicketTitle:null,this.selectedTicketType=t.SearchTicketType?t.SearchTicketType:null,this.selectedIsGlobal=t.SearchIsGlobal?t.SearchIsGlobal:null,this.selectedIsGlobal&&this.onClickisGlobal(this.selectedIsGlobal),this.activeCard=t.activeCard?t.activeCard:null,this.selectedIsBillable=t.SearchIsBillable?t.SearchIsBillable:null,this.payload.SearchCompanyId=this.selectedDropDownCompanyIdValue,this.payload.SearchClientId=this.selectedDropDownClientIdValue,this.payload.SearchProjectId=this.selectedDropDownProjectOrDeparmentIdValue,this.payload.SearchTicketStatusId=this.selectedDropDownTicketStatusIdValue,this.payload.SearchTicketTitle=this.typeTicketNameValue,this.payload.SearchTicketNo=this.selectedTicketTagId,this.payload.SearchRequesterName=this.selectedRequesterName,this.payload.SearchRequesterEmail=this.selectedRequesterEmail,this.payload.SearchPriority=this.selectedUrgentValue,this.payload.SearchTicketType=this.selectedTicketType,this.payload.SearchIsGlobal=this.selectedIsGlobal,this.payload.SearchIsBillable=this.selectedIsBillable,this.payload.SearchTicketTypeId=this.selectedDropDownTicketTypeIdValue,this.payload.SearchCreatedDateFrom=this.selectedCreatedDate?.from?this.datePipe.transform(this.selectedCreatedDate.from,"dd-MM-yyyy"):null,this.payload.SearchCreatedDateTo=this.selectedCreatedDate?.to?this.datePipe.transform(this.selectedCreatedDate.to,"dd-MM-yyyy"):null,this.payload.SearchOperationType=this.selectedOperationType,t.displayStart&&(this.payload.displayStart=t.displayStart,this.page=t.page),this.loadData()}ticketTypeHandler(t){"Hardware"===t?.typeName?(this.isDeviceRelated=!0,this.getMX_MasterTicketType(this.isDeviceRelated)):(this.isDeviceRelated=!1,this.getMX_MasterTicketType(this.isDeviceRelated))}getMX_MasterTicketType(t){this.ticketService.getMX_MasterTicketType(t).subscribe(a=>{a&&(this.masterTicketTypeList=a?.list,this.setObjectBeforeRefesh())})}onCardClickActive(t,a){this.activeCard=t,this.arrayListDropDownClientList=[],this.arrayListDropDownProjectOrDeparmentList=[],this.selectedDropDownCompanyIdValue=null,this.selectedDropDownClientIdValue=null,this.selectedDropDownProjectOrDeparmentIdValue=null,this.selectedDropDownTicketStatusIdValue=a,this.selectedTicketTagId=null,this.selectedRequesterName=null,this.selectedRequesterEmail=null,this.selectedIssueDescription=null,this.selectedCreatedDate={from:null,to:null},this.selectedOperationType=null,this.typeTicketNameValue=null,this.selectedTicketType=null,this.selectedIsGlobal=null,this.selectedIsBillable=null,this.selectedUrgentValue=null,this.selectedDropDownTicketTypeIdValue=null,this.payload={displayLength:10,displayStart:0,SearchCompanyId:null,SearchClientId:null,SearchProjectId:null,SearchLocationId:null,SearchTicketStatusId:this.selectedDropDownTicketStatusIdValue,SearchCategoryId:null,SearchSubCategoryId:null,SearchTicketTitle:null,SearchTicketNo:null,SearchRequesterName:null,SearchRequesterEmail:null,SearchCreatedDateFrom:null,SearchCreatedDateTo:null,SearchTicketType:null,SearchPriority:null,SearchIsGlobal:null,SearchIsBillable:null,SearchTicketTypeId:null,SearchOperationType:null},localStorage.removeItem("objectSerachForTicket"),"Client User"===this.currentUserRole?this.resetAfterClientUser():(this.page=1,this.loadData())}onClickisGlobal(t,a=!1){a&&(this.selectedOperationType=null,this.selectedIsBillable=null),"Global"==t?(this.operationList[1].disabled=!1,this.operationList[2].disabled=!0,this.operationList[3].disabled=!0,this.isBillableList[1].disabled=!1,this.isBillableList[0].disabled=!1,this.operationList=[...this.operationList],this.isBillableList=[...this.isBillableList]):"Internal"==t?(this.operationList[1].disabled=!0,this.operationList[2].disabled=!1,this.operationList[3].disabled=!1,this.isBillableList[0].disabled=!0,this.isBillableList[1].disabled=!1,this.operationList=[...this.operationList],this.isBillableList=[...this.isBillableList]):(this.operationList[1].disabled=!1,this.operationList[2].disabled=!1,this.operationList[3].disabled=!1,this.operationList[0].disabled=!1,this.isBillableList[0].disabled=!1,this.isBillableList[1].disabled=!1,this.operationList=[...this.operationList],this.isBillableList=[...this.isBillableList]),a?(this.page=1,this.payload.SearchIsGlobal=this.selectedIsGlobal?this.selectedIsGlobal:null,this.payload.SearchOperationType=this.selectedOperationType?this.selectedOperationType:null,this.payload.SearchIsBillable=this.selectedIsBillable?this.selectedIsBillable:null,this.payload.displayStart=this.pageSize*(this.page-1),this.loadData()):this.setObjectBeforeRefesh()}onChangeOperationType(){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchOperationType=this.selectedOperationType?this.selectedOperationType:null,this.payload.SearchIsBillable=this.selectedIsBillable?this.selectedIsBillable:null,this.loadData()}onChangeIsBillable(){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchIsBillable=this.selectedIsBillable?this.selectedIsBillable:null,this.loadData()}static{this.\u0275fac=function(a){return new(a||i)(e.Y36(U.V),e.Y36(x.F0),e.Y36(d.FF),e.Y36(I.w),e.Y36(y.u),e.Y36(p.qu),e.Y36(Z.K),e.Y36(U.V),e.Y36(m.uU),e.Y36(B.S),e.Y36(d._B),e.Y36(D.l),e.Y36(e.sBO))}}static{this.\u0275cmp=e.Xpm({type:i,selectors:[["app-list-ticket"]],viewQuery:function(a,n){if(1&a&&e.Gf(ht,5),2&a){let o;e.iGM(o=e.CRH())&&(n.inputerTicketNumber=o.first)}},decls:118,vars:51,consts:[[3,"title","breadcrumbItems"],[1,"row"],[1,"col-xxl-2","col-sm-4","stretch-card",3,"click"],[1,"card"],[1,"card-body"],[1,"d-flex","align-items-center"],[1,"avatar-sm","flex-shrink-0"],[1,"avatar-title","bg-light","text-primary","rounded-circle","fs-3"],[1,"ri-ticket-2-line","align-middle"],[1,"flex-grow-1","ms-3"],[1,"text-uppercase","fw-semibold","fs-12","mb-1"],[4,"ngIf"],[1,"ri-coupon-5-line","align-middle"],[1,"mdi","mdi-timer-sand","align-middle"],[1,"mdi","mdi-clock","align-middle"],[1,"mdi","mdi-close-box","align-middle"],[1,"mdi","mdi-ticket-confirmation-outline","align-middle"],[1,"col-lg-12"],[1,"card-header","border-0"],[1,"row","g-3","align-items-center"],[1,"col-lg-3","mb-2"],[1,"card-title","mb-0"],[1,"col-lg-9","d-flex","justify-content-end","mb-2"],[1,"search-box","w-50"],["type","search","name","searchTerm","placeholder","Ticket name",1,"form-control",3,"ngModel","ngModelChange"],["inputerTicketNumber",""],[1,"ri-search-line","search-icon"],[1,"card-body","border","border-dashed","border-end-0","border-start-0"],[1,"row","g-3"],[1,"col-lg"],["bindLabel","companyName","bindValue","companyId","id","companyName","placeholder","Select Company","for","companyName",1,"w-100","mr-2",3,"items","clearable","ngModel","readonly","change","ngModelChange"],["bindLabel","clientName","bindValue","clientId","id","clientName","placeholder","Select Client","for","clientName",1,"w-100","mr-2",3,"items","disabled","clearable","ngModel","readonly","change","ngModelChange"],["bindLabel","departmentName","bindValue","departmentId","id","departmentName","for","departmentName",1,"w-100","mr-2",3,"readonly","items","disabled","clearable","ngModel","placeholder","change","ngModelChange"],["bindLabel","assetStatus","bindValue","assetStatusId","id","ticketStatus","placeholder","Select Ticket Status","for","ticketStatus",1,"w-100","mr-2",3,"items","clearable","ngModel","change","ngModelChange"],[1,"d-flex","justify-content-end"],["type","button",1,"btn",3,"click"],[1,"ri-equalizer-fill","align-bottom","me-1"],["type","button","ngbTooltip","Remove All Search",1,"btn","btn-danger","ms-1",3,"click"],[1,"ri-refresh-fill","me-1","align-bottom"],[1,"card-body","pt-0"],["ngbNav","",1,"nav","nav-tabs","nav-tabs-custom","nav-success","mb-3",3,"activeId"],["nav","ngbNav"],[3,"ngbNavItem"],["ngbNavContent",""],[1,"tab-content","text-muted"],[3,"ngbNavOutlet"],["filtetcontent",""],["openAduitOffSet",""],[1,"mb-0"],[1,"counter-value","cursor-pointer",3,"countUp","options"],["type","button","id","create-btn",1,"btn","btn-success","add-btn","ms-3",3,"click"],[1,"ri-add-line","align-bottom","me-1"],[1,"table-responsive","table-card","mb-0"],[1,"table"],[1,"bg-light","text-muted","text-uppercase"],[1,"row","justify-content-md-between","align-items-md-center","gy-2"],[1,"col","col-sm-12","col","col-md-6"],["id","tickets-table_info","role","status","aria-live","polite",1,"dataTables_info","mb-2"],[1,"text-sm-right","float-end","listjs-pagination"],[3,"collectionSize","pageSize","page","maxSize","rotate","pageChange",4,"ngIf"],["colspan","9",1,"text-center"],[4,"ngFor","ngForOf"],[1,"align-top"],["href","javascript:void(0)",1,"fw-medium","link-primary",3,"click"],[1,"d-flex","mb-0"],[1,"ri-eye-fill","align-bottom","ms-2","text-success","fs-15",3,"click"],["ngbTooltip","Internal","class","ri-home-gear-line align-bottom ms-2 text-info fs-15",4,"ngIf"],["ngbTooltip","Billable","class","ri-money-dollar-circle-line align-bottom ms-2 text-success fs-15",4,"ngIf"],[1,"title","align-top",3,"title","id","click"],[1,"badge","bg-info"],[1,"status","align-top"],["class","badge bg-danger text-uppercase",4,"ngIf"],["class","badge bg-success text-uppercase",4,"ngIf"],["class","badge bg-warning text-uppercase",4,"ngIf"],["ngbDropdown","",1,"dropdown"],["type","button","data-bs-toggle","dropdown","aria-expanded","false","ngbDropdownToggle","",1,"btn","btn-soft-secondary","btn-sm","dropdown","arrow-none"],[1,"ri-more-fill"],["ngbDropdownMenu","",1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item","cursor-pointer",3,"click"],[1,"ri-eye-fill","align-bottom","me-2","text-muted"],["ngbTooltip","Internal",1,"ri-home-gear-line","align-bottom","ms-2","text-info","fs-15"],["ngbTooltip","Billable",1,"ri-money-dollar-circle-line","align-bottom","ms-2","text-success","fs-15"],[1,"badge","bg-danger","text-uppercase"],[1,"badge","bg-success","text-uppercase"],[1,"badge","bg-warning","text-uppercase"],[1,"ri-close-circle-line","align-bottom","me-2","text-muted"],[3,"collectionSize","pageSize","page","maxSize","rotate","pageChange"],[1,"offcanvas-header","p-3","bg-info-subtle"],["id","exampleModalLabel",1,"offcanvas-title"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close","id","close-offcanvas",1,"btn-close",3,"click"],[1,"offcanvas-body"],[1,"col-lg-12","mb-2"],["for","selectedRequesterName",1,"form-label","mb-0","fw-semibold"],["type","text","name","selectedRequesterName","id","selectedRequesterName","placeholder","Requester Name ",1,"form-control",3,"ngModel","ngModelChange"],["for","selectedRequesterEmail",1,"form-label","mb-0","fw-semibold"],["type","email","name","selectedRequesterEmail","id","selectedRequesterEmail","placeholder","Search Requester Email",1,"form-control",3,"ngModel","ngModelChange"],["for","selectedTicketTagId",1,"form-label","mb-0","fw-semibold"],["type","text","name","selectedTicketTagId","id","selectedTicketTagId","placeholder","Ticket Tag Id",1,"form-control",3,"ngModel","ngModelChange"],["for","selectedCreatedDate",1,"form-label","mb-0","fw-semibold"],["type","text","name","selectedCreatedDate","id","selectedCreatedDate","placeholder","Created Date","mwlFlatpickr","","mode","range",1,"form-control",3,"ngModel","altInput","enableTime","dateFormat","convertModelValue","ngModelChange"],["for","selectedIsGlobal",1,"form-label","mb-0","fw-semibold"],["placeholder","Select Internal/Global",1,"custom","w-100",3,"items","ngModel","clearable","change","ngModelChange"],["for","selectedTicketTypeId",1,"form-label","mb-0","fw-semibold"],["bindLabel","name","bindValue","name","placeholder","Select Operation Type","placeholder","Service Type",1,"custom","w-100",3,"items","clearable","ngModel","ngModelChange","change"],["for","selectedIsBillable",1,"form-label","mb-0","fw-semibold"],["bindLabel","name","bindValue","name","placeholder","Select IsBillable",3,"readonly","items","clearable","ngModel","ngModelChange","change"],["for","selectedTicketType",1,"form-label","mb-0","fw-semibold"],["placeholder","Select Ticket Type",3,"items","clearable","ngModel","ngModelChange","change"],["for","selectedDropDownTicketTypeIdValue",1,"form-label","mb-0","fw-semibold"],["bindLabel","ticketTypeName","bindValue","ticketTypeId","placeholder","Select Category",3,"readonly","items","clearable","ngModel","ngModelChange"],["for","selectedUrgentValue",1,"form-label","mb-0","fw-semibold"],["bindLabel","urgencyTypeName","bindValue","urgencyTypeName","placeholder","Select Priority",3,"items","clearable","ngModel","ngModelChange"],[1,"offcanvas-footer","text-end","mb-3"],[1,"btn","btn-light","me-2",3,"click"],["type","submit",1,"btn","btn-primary","me-3",3,"click"],[1,"offcanvas-header"],[1,"offcanvas-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],["class","text-danger m-auto",4,"ngIf"],[1,"offcanvas-body","pt-0"],[3,"Data"],[1,"text-end"],["type","button",1,"btn","btn-outline-danger",3,"click"],[1,"text-danger","m-auto"],[1,"fs-17","mb-0"]],template:function(a,n){if(1&a){const o=e.EpF();e._UZ(0,"app-breadcrumbs",0),e.TgZ(1,"div",1)(2,"div",2),e.NdJ("click",function(){return n.onCardClickActive("Total",null)}),e.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"span",7),e._UZ(8,"i",8),e.qZA()(),e.TgZ(9,"div",9)(10,"p",10),e._uU(11,"Total"),e.qZA(),e.YNc(12,Tt,3,2,"ng-container",11)(13,ft,3,0,"ng-container",11),e.qZA()()()()(),e.TgZ(14,"div",2),e.NdJ("click",function(){return n.onCardClickActive("New",48)}),e.TgZ(15,"div",3)(16,"div",4)(17,"div",5)(18,"div",6)(19,"span",7),e._UZ(20,"i",12),e.qZA()(),e.TgZ(21,"div",9)(22,"p",10),e._uU(23,"New"),e.qZA(),e.YNc(24,kt,3,2,"ng-container",11)(25,bt,3,0,"ng-container",11),e.qZA()()()()(),e.TgZ(26,"div",2),e.NdJ("click",function(){return n.onCardClickActive("In-Progress",30)}),e.TgZ(27,"div",3)(28,"div",4)(29,"div",5)(30,"div",6)(31,"span",7),e._UZ(32,"i",13),e.qZA()(),e.TgZ(33,"div",9)(34,"p",10),e._uU(35,"In-Progress"),e.qZA(),e.YNc(36,vt,3,2,"ng-container",11)(37,xt,3,0,"ng-container",11),e.qZA()()()()(),e.TgZ(38,"div",2),e.NdJ("click",function(){return n.onCardClickActive("Partially",34)}),e.TgZ(39,"div",3)(40,"div",4)(41,"div",5)(42,"div",6)(43,"span",7),e._UZ(44,"i",14),e.qZA()(),e.TgZ(45,"div",9)(46,"p",10),e._uU(47,"Partially"),e.qZA(),e.YNc(48,Zt,3,2,"ng-container",11)(49,Ct,3,0,"ng-container",11),e.qZA()()()()(),e.TgZ(50,"div",2),e.NdJ("click",function(){return n.onCardClickActive("Closed",32)}),e.TgZ(51,"div",3)(52,"div",4)(53,"div",5)(54,"div",6)(55,"span",7),e._UZ(56,"i",15),e.qZA()(),e.TgZ(57,"div",9)(58,"p",10),e._uU(59,"Closed"),e.qZA(),e.YNc(60,It,3,2,"ng-container",11)(61,yt,3,0,"ng-container",11),e.qZA()()()()(),e.TgZ(62,"div",2),e.NdJ("click",function(){return n.onCardClickActive("Resolved",31)}),e.TgZ(63,"div",3)(64,"div",4)(65,"div",5)(66,"div",6)(67,"span",7),e._UZ(68,"i",16),e.qZA()(),e.TgZ(69,"div",9)(70,"p",10),e._uU(71,"Resolved"),e.qZA(),e.YNc(72,wt,3,2,"ng-container",11)(73,At,3,0,"ng-container",11),e.qZA()()()()()(),e.TgZ(74,"div",1)(75,"div",17)(76,"div",3)(77,"div",18)(78,"div",19)(79,"div",20)(80,"h5",21),e._uU(81,"Ticket List"),e.qZA()(),e.TgZ(82,"div",22)(83,"div",23)(84,"input",24,25),e.NdJ("ngModelChange",function(c){return n.typeTicketNameValue=c}),e.qZA(),e._UZ(86,"i",26),e.qZA(),e.YNc(87,Dt,4,0,"div",11),e.qZA()()(),e.TgZ(88,"div",27)(89,"div",28)(90,"div",29)(91,"ng-select",30),e.NdJ("change",function(c){return n.onDropdownCompanyValueChange(c)})("ngModelChange",function(c){return n.selectedDropDownCompanyIdValue=c}),e.qZA()(),e.TgZ(92,"div",29)(93,"ng-select",31),e.NdJ("change",function(c){return n.onDropdownClientValueChange(c)})("ngModelChange",function(c){return n.selectedDropDownClientIdValue=c}),e.qZA()(),e.TgZ(94,"div",29)(95,"ng-select",32),e.NdJ("change",function(c){return n.onDropdownDepartmentValueChange(c)})("ngModelChange",function(c){return n.selectedDropDownProjectOrDeparmentIdValue=c}),e.qZA()(),e.TgZ(96,"div",29)(97,"ng-select",33),e.NdJ("change",function(c){return n.onDropdownTicketStatusValueChange(c)})("ngModelChange",function(c){return n.selectedDropDownTicketStatusIdValue=c}),e.qZA()(),e.TgZ(98,"div",29)(99,"div",34)(100,"button",35),e.NdJ("click",function(){e.CHM(o);const c=e.MAs(115);return e.KtG(n.openFilter(c))}),e._UZ(101,"i",36),e._uU(102," Filters "),e.qZA(),e.TgZ(103,"button",37),e.NdJ("click",function(){return n.resetSerachVariable()}),e._UZ(104,"i",38),e._uU(105," Clear "),e.qZA()()()()(),e.TgZ(106,"div",39)(107,"div")(108,"ul",40,41)(110,"li",42),e.YNc(111,Pt,32,7,"ng-template",43),e.qZA()(),e.TgZ(112,"div",44),e._UZ(113,"div",45),e.qZA()()()()()(),e.YNc(114,Rt,51,29,"ng-template",null,46,e.W1O)(116,jt,10,2,"ng-template",null,47,e.W1O)}if(2&a){const o=e.MAs(109);e.Q6J("title",n.label)("breadcrumbItems",n.breadCrumbItems),e.xp6(4),e.Tol("Total"==n.activeCard?"activeCardClasss":""),e.xp6(8),e.Q6J("ngIf",0!=n.totalCountTicketOnly.countTotalTicket),e.xp6(1),e.Q6J("ngIf",0==n.totalCountTicketOnly.countTotalTicket),e.xp6(3),e.Tol("New"==n.activeCard?"activeCardClasss":""),e.xp6(8),e.Q6J("ngIf",0!=n.totalCountTicketOnly.countNewTicket),e.xp6(1),e.Q6J("ngIf",0==n.totalCountTicketOnly.countNewTicket),e.xp6(3),e.Tol("In-Progress"==n.activeCard?"activeCardClasss":""),e.xp6(8),e.Q6J("ngIf",0!=n.totalCountTicketOnly.countInProgressTicket),e.xp6(1),e.Q6J("ngIf",0==n.totalCountTicketOnly.countInProgressTicket),e.xp6(3),e.Tol("Partially"==n.activeCard?"activeCardClasss":""),e.xp6(8),e.Q6J("ngIf",0!=n.totalCountTicketOnly.countOnHoldTicket),e.xp6(1),e.Q6J("ngIf",0==n.totalCountTicketOnly.countOnHoldTicket),e.xp6(3),e.Tol("Closed"==n.activeCard?"activeCardClasss":""),e.xp6(8),e.Q6J("ngIf",0!=n.totalCountTicketOnly.countClosedTicket),e.xp6(1),e.Q6J("ngIf",0==n.totalCountTicketOnly.countClosedTicket),e.xp6(3),e.Tol("Resolved"==n.activeCard?"activeCardClasss":""),e.xp6(8),e.Q6J("ngIf",0!=n.totalCountTicketOnly.countResolvedTicket),e.xp6(1),e.Q6J("ngIf",0==n.totalCountTicketOnly.countResolvedTicket),e.xp6(11),e.Q6J("ngModel",n.typeTicketNameValue),e.xp6(3),e.Q6J("ngIf",n.returnValueMenu.add),e.xp6(4),e.Q6J("items",n.arrayListDropDownCompany)("clearable",!0)("ngModel",n.selectedDropDownCompanyIdValue)("readonly",n.disabledWithAceessGroup),e.xp6(2),e.Q6J("items",n.arrayListDropDownClientList)("disabled",!n.selectedDropDownCompanyIdValue)("clearable",!0)("ngModel",n.selectedDropDownClientIdValue)("readonly",n.disabledWithAceessGroup),e.xp6(2),e.Q6J("readonly",n.projectDepartmentFieldDisiabled)("items",n.arrayListDropDownProjectOrDeparmentList)("disabled",!n.selectedDropDownCompanyIdValue||!n.selectedDropDownClientIdValue)("clearable",!0)("ngModel",n.selectedDropDownProjectOrDeparmentIdValue)("placeholder",n.isProject?"Select Project":"Select Department"),e.xp6(2),e.Q6J("items",n.arrayListDropDownTicketStatus)("clearable",!0)("ngModel",n.selectedDropDownTicketStatusIdValue),e.xp6(3),e.Tol(n.selectedRequesterName||n.selectedRequesterEmail||n.selectedTicketTagId||null!=n.selectedCreatedDate&&n.selectedCreatedDate.form||null!=n.selectedCreatedDate&&n.selectedCreatedDate.to||n.selectedIsGlobal||n.selectedOperationType||n.selectedIsBillable||n.selectedTicketType||n.selectedDropDownTicketTypeIdValue||n.selectedUrgentValue?"btn-success":"btn-primary"),e.xp6(8),e.Q6J("activeId",1),e.xp6(2),e.Q6J("ngbNavItem",1),e.xp6(3),e.Q6J("ngbNavOutlet",o)}},dependencies:[m.sg,m.O5,p.Fj,p.JJ,p.On,d.N9,d.jt,d.iD,d.Vi,d._L,G.P,w.as,q.n,W.F,d.uN,d.Pz,d.nv,d.Is,d.Dy,S.w9],styles:[".activeCardClasss[_ngcontent-%COMP%]{background-color:#5ea3cb;color:#fff!important}.activeCardClasss[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#fff!important}.w-60[_ngcontent-%COMP%]{width:62%!important}"]})}}return i})();var T=r(6825),Y=r(886),H=r(7625),Gt=r(7189),Wt=r(7708),Yt=r(8210),Ht=r(2373),Et=r(8883),Xt=r(8868),Kt=r(9750),zt=r(4398);function $t(i,s){1&i&&(e.TgZ(0,"td",33),e._uU(1," Exp. Comp. Date "),e.qZA())}function ei(i,s){if(1&i&&(e.TgZ(0,"td"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij(" ",t.returnDate(t.mX_WorkOder.expectedComplitionDateTime)||"-"," ")}}function ti(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",36),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2),o=e.MAs(113);return e.KtG(n.openmodalUpdateDate(n.mX_WorkOder,o))}),e._uU(1,"Update Exp. Comp. Date "),e.qZA()}}function ii(i,s){1&i&&(e.TgZ(0,"span"),e._uU(1,"-"),e.qZA())}function ni(i,s){if(1&i&&(e.TgZ(0,"td",34),e.YNc(1,ti,2,0,"button",35)(2,ii,2,0,"span",16),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.updateLinkOfDateCom()),e.xp6(1),e.Q6J("ngIf",!t.updateLinkOfDateCom())}}function ai(i,s){if(1&i&&(e.TgZ(0,"div",3)(1,"div",10)(2,"div",37)(3,"h6",38),e._uU(4,"Note For Member"),e.qZA(),e._UZ(5,"p",39),e.qZA()()()),2&i){const t=e.oxw();e.xp6(5),e.Q6J("innerHTML",t.mX_WorkOder.addtionalNote,e.oJD)}}function oi(i,s){if(1&i&&(e.TgZ(0,"div",3)(1,"div",10)(2,"div",37)(3,"h6",38),e._uU(4,"Action Taken"),e.qZA(),e._UZ(5,"p",39),e.qZA()()()),2&i){const t=e.oxw();e.xp6(5),e.Q6J("innerHTML",t.mX_WorkOder.wO_Tec_Remark,e.oJD)}}function si(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"app-task-end-service-order",40),e.NdJ("afterSubmitServiceOrder",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.getafterSubmitServiceOrder(n))}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("mX_WorkOder",t.mX_WorkOder)("ticketData",t.ticketData)("workorderId",t.mX_WorkOder.woId)("expectedComplitionDateTime",t.mX_WorkOder.expectedComplitionDateTime)("ticketWOStartEndTask",t.mx_WOStartEndTask)}}function li(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",49),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2),o=e.MAs(111);return e.KtG(n.openModalTechnician(o))}),e._UZ(1,"i",50),e._uU(2," Add Member "),e.qZA()}}function ci(i,s){1&i&&(e.TgZ(0,"th",47),e._uU(1,"Action"),e.qZA())}function ri(i,s){1&i&&(e.ynx(0),e.TgZ(1,"tr")(2,"td",51),e._uU(3," No Member Assign "),e.qZA()(),e.BQk())}function di(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"a",59),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(3).$implicit,o=e.oxw(3);return e.KtG(o.openModalDeleteConf(n))}),e._UZ(1,"i",60),e.qZA()}}function pi(i,s){if(1&i&&(e.ynx(0),e.YNc(1,di,2,0,"a",58),e.BQk()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngIf",!t.isTechAvailable)}}function _i(i,s){if(1&i&&(e.TgZ(0,"td"),e.YNc(1,pi,2,1,"ng-container",16),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.Q6J("ngIf",25!=t.mX_WorkOder.woStatusId)}}function mi(i,s){if(1&i&&(e.TgZ(0,"tr")(1,"th",53)(2,"div",54),e._UZ(3,"img",55),e.TgZ(4,"div",56)(5,"a",57),e._uU(6),e.qZA()()()(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.YNc(11,_i,2,1,"td",16),e.qZA()),2&i){const t=s.$implicit,a=e.oxw(3);e.xp6(3),e.Q6J("src",t.profileImageUrl?a.imgUrl+t.profileImageUrl:"../../../../../../assets/images/placeholderimage.png",e.LSH),e.xp6(3),e.hij("",t.techName," "),e.xp6(2),e.Oqu(t.designationName),e.xp6(2),e.Oqu(t.phoneNumber),e.xp6(1),e.Q6J("ngIf",a.deleteButtonShown)}}function gi(i,s){if(1&i&&(e.ynx(0),e.YNc(1,mi,12,5,"tr",52),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.mX_WOTechAssignment)}}function ui(i,s){if(1&i&&(e.TgZ(0,"div",41)(1,"div")(2,"h6",42),e._uU(3,"Member List"),e.qZA()(),e.TgZ(4,"div"),e.YNc(5,li,3,0,"button",43),e.qZA()(),e.TgZ(6,"div",44)(7,"table",45)(8,"thead",46)(9,"tr")(10,"th",47),e._uU(11,"Name"),e.qZA(),e.TgZ(12,"th",47),e._uU(13,"Designation"),e.qZA(),e.TgZ(14,"th",47),e._uU(15,"Phone Number"),e.qZA(),e.YNc(16,ci,2,0,"th",48),e.qZA()(),e.TgZ(17,"tbody"),e.YNc(18,ri,4,0,"ng-container",16)(19,gi,2,1,"ng-container",16),e.qZA()()()),2&i){const t=e.oxw();e.xp6(5),e.Q6J("ngIf",t.shownAddTechButton),e.xp6(11),e.Q6J("ngIf",t.deleteButtonShown),e.xp6(2),e.Q6J("ngIf",0==t.mX_WOTechAssignment.length),e.xp6(1),e.Q6J("ngIf",0!=t.mX_WOTechAssignment.length)}}function hi(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",74),e.NdJ("click",function(){const n=e.CHM(t),o=n.index,l=n.$implicit,c=e.oxw(2);return e.KtG(c.selectTechnician(c.filteredTechnicianList,o,l))}),e.TgZ(2,"div",75)(3,"div",76)(4,"div",77)(5,"label",78)(6,"input",79),e.NdJ("ngModelChange",function(n){const l=e.CHM(t).index,c=e.oxw(2);return e.KtG(c.filteredTechnicianList[l].checked=n)}),e.qZA(),e._UZ(7,"i",80),e.qZA()()()(),e.TgZ(8,"div",81),e._UZ(9,"img",82),e.qZA(),e.TgZ(10,"div",83)(11,"h5",84)(12,"a",85),e._uU(13),e.qZA(),e.TgZ(14,"p",86),e._uU(15),e.qZA()()(),e.TgZ(16,"div",87)(17,"p",88)(18,"span"),e._UZ(19,"i",89),e._uU(20),e.qZA()()()()()}if(2&i){const t=s.$implicit,a=s.index,n=e.oxw(2);e.xp6(6),e.s9C("value",t),e.Q6J("ngModel",n.filteredTechnicianList[a].checked)("disabled",n.filteredTechnicianList[a].disabled),e.xp6(3),e.s9C("src",t.profileImageUrl?n.imgUrl+t.profileImageUrl:"../../../../../assets/images/placeholderimage.png",e.LSH),e.xp6(4),e.hij(" ",t.fullName," "),e.xp6(2),e.hij("Role:",t.roleName,""),e.xp6(5),e.Oqu(t.phoneNumber)}}function Ti(i,s){1&i&&(e.TgZ(0,"div",90)(1,"p"),e._uU(2,"No Member Found"),e.qZA()())}function fi(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",61)(1,"h5",62),e._uU(2,"Add Technicians"),e.qZA(),e.TgZ(3,"button",63),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.dismiss("Cross click"))}),e.qZA()(),e.TgZ(4,"div",64)(5,"div",65)(6,"input",66),e.NdJ("keyup",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.filterTechnician(n))})("ngModelChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.technicianSearchText=n)}),e.qZA(),e._UZ(7,"i",67),e.qZA(),e.TgZ(8,"ngx-simplebar",68)(9,"div",69),e.YNc(10,hi,21,7,"div",52)(11,Ti,3,0,"div",70),e.qZA()()(),e.TgZ(12,"div",71)(13,"button",72),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.close("Close click"))}),e._uU(14," Close "),e.qZA(),e.TgZ(15,"button",73),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.sweetAlertUpdateTechinionDetails())}),e._uU(16," Submit "),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(6),e.Q6J("ngModel",t.technicianSearchText),e.xp6(4),e.Q6J("ngForOf",t.filteredTechnicianList),e.xp6(1),e.Q6J("ngIf",t.technicianList&&t.filteredTechnicianList&&t.technicianSearchText.length>0?!t.filteredTechnicianList.length:!t.technicianList.length),e.xp6(4),e.Q6J("disabled",0==t.selectedTech.length)}}function ki(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"i",103),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.clearChangeExpectedComplitionDate())}),e.qZA()}}function bi(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",91)(1,"h4",92),e._uU(2," Update Expected Completion Date "),e.qZA(),e.TgZ(3,"button",93),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.dismiss("Cross click"))}),e.TgZ(4,"span",94),e._uU(5,"\xd7"),e.qZA()()(),e.TgZ(6,"div",95)(7,"form",96)(8,"div",6)(9,"div",10)(10,"div",0)(11,"div",97)(12,"label",98),e._uU(13,"Expected Completion Date "),e.YNc(14,ki,1,0,"i",99),e.qZA(),e._UZ(15,"input",100),e.qZA()()()()()(),e.TgZ(16,"div",71)(17,"button",101),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.dismiss("cancel"))}),e._uU(18," Close "),e.qZA(),e.TgZ(19,"button",102),e.NdJ("click",function(n){const l=e.CHM(t).$implicit;return e.KtG(l.close("Ok",n))}),e._uU(20," Submit "),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(7),e.Q6J("formGroup",t.updateDateForm),e.xp6(7),e.Q6J("ngIf",t.expectedComplitionDateTime.value),e.xp6(1),e.Q6J("altInput",!1)("enableTime",!1)("convertModelValue",!0)("dateFormat","d-m-Y")("minDate",t.minDate),e.xp6(4),e.Q6J("disabled",t.updateDateForm.invalid)}}const vi=(i,s,t)=>({"bg-success ":i,"bg-danger":s,"bg-warning":t});let xi=(()=>{class i{constructor(t,a,n,o,l,c,g){this.commonFunctionService=t,this.modalService=a,this.maintenanceService=n,this.authAssetService=o,this.ticketService=l,this.formBuilder=c,this.datePipe=g,this.setUpdateListValue=new e.vpe,this.shownAddTechButton=!1,this.imgUrl=C.N.apiUrl,this.technicianList=[],this.selectedTech=[],this.deleteButtonShown=!0,this.filteredTechnicianList=[],this.technicianSearchText="",this.minDate=new Date}ngOnChanges(t){if(console.log("mX_WOTechAssignment",this.ticketData),this.buildForm(),this.loadTechnician(),"Client User"===this.authAssetService.getRole()&&(this.deleteButtonShown=!1),"Client User"!==this.authAssetService.getRole()&&("Basic Service Page"==this.ticketService.ticketPageAction||"Basic Ticket Page"==this.ticketService.ticketPageAction))switch(this.mX_WorkOder.woStatusId){case 2:case 30:case 34:this.shownAddTechButton=null!=this.mX_WorkOder.expWrkStartDate&&null!=this.mX_WorkOder.expWrkStartTime;break;default:this.shownAddTechButton=!1}}ngOnInit(){if("Client User"!==this.authAssetService.getRole()&&("Basic Service Page"==this.ticketService.ticketPageAction||"Basic Ticket Page"==this.ticketService.ticketPageAction))switch(this.mX_WorkOder.woStatusId){case 2:case 30:case 34:this.shownAddTechButton=null!=this.mX_WorkOder.expWrkStartDate&&null!=this.mX_WorkOder.expWrkStartTime;break;default:this.shownAddTechButton=!1}}getafterSubmitServiceOrder(t){this.setUpdateListValue.emit(t)}openModalTechnician(t){this.checktheUserAlreadySelected(this.mX_WOTechAssignment),this.modalService.open(t,{size:"lg",centered:!0})}checktheUserAlreadySelected(t){t.length>0&&this.technicianList.forEach((a,n)=>{this.mX_WOTechAssignment.forEach(o=>{o.techId===a.userId&&this.technicianList.splice(n,1)})})}getTechnicianIndex(t){return this.technicianList.findIndex(a=>a.userId===t)}getSelectedTechnicianIndex(t){return this.selectedTech.findIndex(a=>a.userId===t)}selectTechnician(t,a,n){if(this.filteredTechnicianList[a].disabled)return;const o=this.getTechnicianIndex(n.userId);this.technicianList[o].checked=!this.technicianList[o].checked,this.getTodoListChecked(t[a].checked,n)}filterTechnician(t){this.filteredTechnicianList=this.technicianList.filter(a=>a.fullName.toLowerCase().includes(t.target.value.toLowerCase()||""))}loadTechnician(){this.maintenanceService.getTechnician(this.ticketData[0].projectId).subscribe(t=>{t&&(this.technicianList=t?.data,this.technicianList.forEach(a=>{a.checked=!1,a.disabled=!1}),this.selectedTech.length>0&&this.technicianList.forEach(a=>{this.selectedTech.forEach(n=>{n.userId===a.userId&&(a.checked=!0,a.disabled=!0)})}),this.filteredTechnicianList=this.technicianList)},t=>{})}getTodoListChecked(t,a){1==t?(a.checked=!0,this.selectedTech.push({designationName:a.designationName,phoneNumber:a.phoneNumber,profileImageUrl:a.profileImageUrl,techId:a.userId,techName:a.fullName,ticketId:this.ticketData[0].ticketId,woId:this.mX_WorkOder.woId,roleName:a.roleName})):this.selectedTech.forEach((n,o)=>{n.userId==a.techId&&this.selectedTech.splice(o,1)})}submitTechinionDetails(){let t=[];this.selectedTech.forEach(a=>{t.push({techId:a.techId,techName:a.techName,ticketId:a.ticketId,woId:a.woId})}),this.maintenanceService.insertTechnitionforServiceOrderIndividual(t).subscribe(a=>{this.setUpdateListValue.emit(a),this.modalService.dismissAll(),this.selectedTech=[]})}sweetAlertUpdateTechinionDetails(){k().fire({title:"Do you want to add an additional member for this service order?",text:"You won't be able to revert this!",icon:"info",showCancelButton:!0,cancelButtonColor:"#FF3366",confirmButtonText:"<span class='swal2-confirm '> Yes, Update it!</span>"}).then(t=>{t.isConfirmed&&this.submitTechinionDetails()})}updateTicketItemStatusAndImageByTech(t){this.maintenanceService.deleteTechnitionforServiceOrderIndividual({TicketTechId:t.ticketTechId,ticketId:t.ticketId,woId:t.woId,techId:t.techId}).subscribe(n=>{this.setUpdateListValue.emit(n)},n=>{n&&this.openModaWaringConf(n)})}openModalDeleteConf(t){const a=this.modalService.open(Q.z,{ariaLabelledBy:"modal-basic-title",size:"md",centered:!0,backdrop:"static",keyboard:!1});a.componentInstance.title="You are about to delete a Member ?",a.componentInstance.subTitle="Deleting your Member will remove for this service order",a.result.then(n=>{n&&"delete"==n&&this.updateTicketItemStatusAndImageByTech(t)})}openModaWaringConf(t){const a=this.modalService.open(Xt.e,{ariaLabelledBy:"modal-basic-title",size:"md",centered:!0,backdrop:"static",keyboard:!1});a.componentInstance.title=t,a.componentInstance.subTitle="",a.result.then(n=>{})}openmodalUpdateDate(t,a){this.modalService.open(a,{ariaLabelledBy:"modal-basic-title",centered:!0,backdrop:"static",keyboard:!1}).result.then(n=>{this.submitModalData(t)},n=>{})}submitModalData(t){let a={TicketId:t.ticketId,WOId:t.woId,ExpectedComplitionDateTime:this.commonFunctionService.dateFormatter(this.expectedComplitionDateTime.value)};console.log("payload",a,"mX_WorkOder"),this.maintenanceService.updateExpCompletionDateTime(a).subscribe(n=>{this.success(n),this.setUpdateListValue.emit(n)},n=>{n&&this.openModaWaringConf(n)})}success(t){k().fire({toast:!0,position:"top-end",icon:"success",title:t.message,showConfirmButton:!1,timer:3e3})}buildForm(){this.updateDateForm=this.formBuilder.group({expectedComplitionDateTime:["",p.kI.required]})}get expectedComplitionDateTime(){return this.updateDateForm.get("expectedComplitionDateTime")}clearChangeExpectedComplitionDate(){this.expectedComplitionDateTime.reset()}updateLinkOfDateCom(){let t=!1;return t="Client User"!==this.authAssetService.getRole()&&(29==this.ticketData[0].ticketStatusId||30==this.ticketData[0].ticketStatusId||34==this.ticketData[0].ticketStatusId),t}returnDate(t){const a=new Date(t);return this.datePipe.transform(a,"dd-MM-yyyy")}static{this.\u0275fac=function(a){return new(a||i)(e.Y36(Z.K),e.Y36(d.FF),e.Y36(Kt.N),e.Y36(y.u),e.Y36(I.w),e.Y36(p.qu),e.Y36(m.uU))}}static{this.\u0275cmp=e.Xpm({type:i,selectors:[["app-view-workorder-ticket"]],inputs:{ticketData:"ticketData",mX_WOTechAssignment:"mX_WOTechAssignment",mX_WorkOder:"mX_WorkOder",mx_WOStartEndTask:"mx_WOStartEndTask"},outputs:{setUpdateListValue:"setUpdateListValue"},features:[e.TTD],decls:114,vars:35,consts:[[1,"row"],[1,"col-xxl-3","stretch-card"],[1,"card","transparent-card"],[1,"card"],[1,"card-body","text-center"],[1,"card-title","mb-3","flex-grow-1","text-start"],[1,"mb-2"],["src","https://cdn.lordicon.com/kbtmbyzy.json","trigger","loop","colors","primary:#405189,secondary:#02a8b5",2,"width","90px","height","90px"],[1,"mb-1"],[1,"card","mb-3"],[1,"card-body"],[1,"table-card"],[1,"table","mb-0"],[1,"fw-medium"],[1,"badge","text-uppercase",3,"ngClass"],["class","fw-medium","title","Exp. Completion Date",4,"ngIf"],[4,"ngIf"],["colspan","2",4,"ngIf"],["c",""],[1,"col-xxl-9","stretch-card"],["class","card",4,"ngIf"],[1,"card-header"],["ngbNav","","role","tablist",1,"nav","nav-tabs-custom","rounded","card-header-tabs","border-bottom-0",3,"activeId"],["customNav","ngbNav"],[1,"nav-item",3,"ngbNavItem"],["ngbNavLink","","data-bs-toggle","tab","role","tab",1,"nav-link"],["ngbNavContent",""],[1,"badge","align-middle","ms-1"],[1,"tab-content"],[3,"ngbNavOutlet"],["role","document"],["TechnicianListModal",""],["openModelUodateDate",""],["title","Exp. Completion Date",1,"fw-medium"],["colspan","2"],["class","btn btn-primary mb-0","href","javascript:void(0);",3,"click",4,"ngIf"],["href","javascript:void(0);",1,"btn","btn-primary","mb-0",3,"click"],[1,"text-muted"],[1,"fw-semibold","text-uppercase","mb-3"],[3,"innerHTML"],[3,"mX_WorkOder","ticketData","workorderId","expectedComplitionDateTime","ticketWOStartEndTask","afterSubmitServiceOrder"],[1,"d-flex","align-items-center","justify-content-between","mb-3"],[1,"card-title","mb-4","pb-2"],["class","btn btn-success btn-sm","type","button","class","btn btn-soft-primary btn-sm","data-bs-toggle","modal","data-bs-target","#inviteMembersModal",3,"click",4,"ngIf"],[1,"table-responsive","table-card"],[1,"table","align-middle","mb-0"],[1,"table-light","text-muted"],["scope","col"],["scope","col",4,"ngIf"],["type","button","data-bs-toggle","modal","data-bs-target","#inviteMembersModal",1,"btn","btn-soft-primary","btn-sm",3,"click"],[1,"ri-add-fill","align-bottom","me-1"],["colspan","4",1,"text-center"],[4,"ngFor","ngForOf"],["scope","row"],[1,"d-flex","align-items-center"],["alt","",1,"rounded-circle","avatar-xxs",2,"width","40px","height","40px",3,"src"],[1,"flex-grow-1","ms-2"],["href","javascript:void(0);",1,"fw-medium"],["href","javascript:void(0)","class","dropdown-item cursor-pointer",3,"click",4,"ngIf"],["href","javascript:void(0)",1,"dropdown-item","cursor-pointer",3,"click"],[1,"ri-delete-bin-fill","align-bottom","me-2","text-danger"],[1,"modal-header","p-3","bg-primary-subtle"],["id","inviteMembersModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body","p-4"],[1,"search-box","mb-3"],["type","text","placeholder","Search member here...",1,"form-control","bg-light","border-light",3,"ngModel","keyup","ngModelChange"],[1,"ri-search-line","search-icon"],[1,"mx-n4","px-4",2,"height","400px"],[1,"vstack","gap-3"],["class","text-center mt-3 text-muted",4,"ngIf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"],["type","submit",1,"btn","btn-success","w-xs","me-3",3,"disabled","click"],[1,"d-flex","align-items-center",3,"click"],[1,"flex-shrink-0","me-3"],[1,"d-flex","align-items-center","gap-1"],[1,"form-check","form-check-flat","form-check-primary"],[1,"form-check-label"],["type","checkbox",1,"form-check-input",3,"value","ngModel","disabled","ngModelChange"],[1,"input-frame"],[1,"avatar-xs","flex-shrink-0","me-3"],["alt","",1,"img-fluid","rounded-circle",2,"width","40px","height","40px",3,"src"],[1,"flex-grow-1"],[1,"fs-14","mb-0"],["href","javascript:void(0);",1,"text-body","d-block"],[1,"mt-0","mb-0"],[1,"flex-shrink-0","me-3","mb-0"],[1,"mb-0"],[1,"ri-phone-fill","me-1"],[1,"text-center","mt-3","text-muted"],[1,"modal-header","p-3","bg-info-subtle"],["id","modal-title",1,"modal-title"],["type","button","aria-label","Close button","aria-describedby","modal-title",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"formGroup"],[1,"form-group"],[1,"form-label","mb-0"],["class","ri-close-circle-line text-danger",3,"click",4,"ngIf"],["type","text","placeholder","Enter Expected Completion Date ","formControlName","expectedComplitionDateTime","mwlFlatpickr","",1,"form-control","flatpickr-input",3,"altInput","enableTime","convertModelValue","dateFormat","minDate"],["type","button",1,"btn","btn","btn-outline-danger","mr-2","mb-2","mb-md-0",3,"click"],["type","button","ngbAutofocus","",1,"btn","btn-success","mr-2","mb-2","mb-md-0",3,"disabled","click"],[1,"ri-close-circle-line","text-danger",3,"click"]],template:function(a,n){if(1&a&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h6",5),e._uU(6,"Time Tracking"),e.qZA(),e.TgZ(7,"div",6),e._UZ(8,"lord-icon",7),e.qZA(),e.TgZ(9,"h6",8),e._uU(10),e.qZA(),e.TgZ(11,"span"),e._uU(12),e.qZA()()(),e.TgZ(13,"div",9)(14,"div",10)(15,"div",11)(16,"table",12)(17,"tbody")(18,"tr")(19,"td",13),e._uU(20,"SO No"),e.qZA(),e.TgZ(21,"td"),e._uU(22),e.qZA()(),e.TgZ(23,"tr")(24,"td",13),e._uU(25,"Task Type"),e.qZA(),e.TgZ(26,"td"),e._uU(27),e.qZA()(),e.TgZ(28,"tr")(29,"td",13),e._uU(30,"Service Type"),e.qZA(),e.TgZ(31,"td"),e._uU(32),e.qZA()(),e.TgZ(33,"tr")(34,"td",13),e._uU(35,"Support Type"),e.qZA(),e.TgZ(36,"td"),e._uU(37),e.qZA()(),e.TgZ(38,"tr")(39,"td",13),e._uU(40,"Ticket Type"),e.qZA(),e.TgZ(41,"td"),e._uU(42),e.qZA()(),e.TgZ(43,"tr")(44,"td",13),e._uU(45,"Priority"),e.qZA(),e.TgZ(46,"td")(47,"span",14),e._uU(48),e.qZA()()(),e.TgZ(49,"tr")(50,"td",13),e._uU(51,"Created By"),e.qZA(),e.TgZ(52,"td"),e._uU(53),e.qZA()(),e.TgZ(54,"tr")(55,"td",13),e._uU(56,"Created Date"),e.qZA(),e.TgZ(57,"td"),e._uU(58),e.qZA()(),e.TgZ(59,"tr"),e.YNc(60,$t,2,0,"td",15)(61,ei,2,1,"td",16)(62,ni,3,2,"td",17),e.qZA(),e.TgZ(63,"tr")(64,"td",13),e._uU(65,"Exp. Site Visit"),e.qZA(),e.TgZ(66,"td"),e._uU(67),e.qZA()(),e.TgZ(68,"tr")(69,"td",13),e._uU(70,"Started By"),e.qZA(),e.TgZ(71,"td"),e._uU(72),e.qZA()(),e.TgZ(73,"tr")(74,"td",13),e._uU(75,"Started Date"),e.qZA(),e.TgZ(76,"td"),e._uU(77),e.qZA()(),e.TgZ(78,"tr")(79,"td",13),e._uU(80,"Ended By"),e.qZA(),e.TgZ(81,"td",18),e._uU(82),e.qZA()(),e.TgZ(83,"tr")(84,"td",13),e._uU(85,"Ended Date"),e.qZA(),e.TgZ(86,"td"),e._uU(87),e.qZA()()()()()()()()(),e.TgZ(88,"div",19)(89,"div",2),e.YNc(90,ai,6,1,"div",20)(91,oi,6,1,"div",20),e.TgZ(92,"div",3)(93,"div",21)(94,"div")(95,"ul",22,23)(97,"li",24)(98,"a",25),e._uU(99," Task Details "),e.qZA(),e.YNc(100,si,1,5,"ng-template",26),e.qZA(),e.TgZ(101,"li",24)(102,"a",25),e._uU(103," Assigned To "),e.TgZ(104,"span",27),e._uU(105),e.qZA()(),e.YNc(106,ui,20,4,"ng-template",26),e.qZA()()()(),e.TgZ(107,"div",10)(108,"div",28),e._UZ(109,"div",29),e.qZA()()()()()(),e.YNc(110,fi,17,4,"ng-template",30,31,e.W1O)(112,bi,21,8,"ng-template",null,32,e.W1O)),2&a){const o=e.MAs(96);e.xp6(10),e.Oqu(n.mX_WorkOder.timeTakenToCompleteTask),e.xp6(1),e.Tol(n.commonFunctionService.returnStatusBadgeClasses(n.mX_WorkOder.woStatusId)),e.xp6(1),e.Oqu(n.mX_WorkOder.woStatusName),e.xp6(10),e.Oqu(n.mX_WorkOder.woNo||"-"),e.xp6(5),e.Oqu(n.mX_WorkOder.taskType||"-"),e.xp6(5),e.Oqu(n.mX_WorkOder.operationType||"-"),e.xp6(5),e.Oqu(n.mX_WorkOder.supportType||"-"),e.xp6(5),e.Oqu(n.mX_WorkOder.ticketTypeName||"-"),e.xp6(5),e.Q6J("ngClass",e.kEZ(31,vi,"Low"===n.mX_WorkOder.urgencyTypeName,"High"===n.mX_WorkOder.urgencyTypeName,"Medium"===n.mX_WorkOder.urgencyTypeName)),e.xp6(1),e.Oqu(n.mX_WorkOder.urgencyTypeName),e.xp6(5),e.Oqu(n.mX_WorkOder.createdBy||"-"),e.xp6(5),e.Oqu(n.mX_WorkOder.createdDate||"-"),e.xp6(2),e.Q6J("ngIf",n.mX_WorkOder.expectedComplitionDateTime),e.xp6(1),e.Q6J("ngIf",n.mX_WorkOder.expectedComplitionDateTime),e.xp6(1),e.Q6J("ngIf",!n.mX_WorkOder.expectedComplitionDateTime),e.xp6(5),e.AsE(" ",n.mX_WorkOder.expWrkStartDate," ",n.mX_WorkOder.expWrkStartTime||"-"," "),e.xp6(5),e.Oqu(n.mX_WorkOder.taskStartByName||"-"),e.xp6(5),e.Oqu(n.mX_WorkOder.taskStartDateTime||"-"),e.xp6(5),e.Oqu(n.mX_WorkOder.taskEndByName||"-"),e.xp6(5),e.Oqu(n.mX_WorkOder.taskEndDateTime||"-"),e.xp6(3),e.Q6J("ngIf",n.mX_WorkOder.addtionalNote),e.xp6(1),e.Q6J("ngIf",n.mX_WorkOder.wO_Tec_Remark),e.xp6(4),e.Q6J("activeId",1),e.xp6(2),e.Q6J("ngbNavItem",1),e.xp6(4),e.Q6J("ngbNavItem",2),e.xp6(3),e.Tol(0!=n.mX_WOTechAssignment.length?"bg-danger":"bg-success"),e.xp6(1),e.Oqu(n.mX_WOTechAssignment.length),e.xp6(4),e.Q6J("ngbNavOutlet",o)}},dependencies:[m.mk,m.sg,m.O5,p._Y,p.Fj,p.Wl,p.JJ,p.JL,p.On,p.sg,p.u,w.as,M.M,d.uN,d.Pz,d.nv,d.Is,d.Vx,d.tO,d.Dy,zt.$],styles:[".table-card[_ngcontent-%COMP%]{min-height:400px;overflow-y:scroll}.transparent-card[_ngcontent-%COMP%]{border:none;background:none;color:transparent;box-shadow:0 0 0 transparent}"]})}}return i})();var N=r(1415),Zi=r(6075),Ci=r(618);function Ii(i,s){if(1&i&&(e.TgZ(0,"tr")(1,"th",42),e._uU(2),e.qZA(),e.TgZ(3,"td",56)(4,"span",57),e._uU(5),e.qZA(),e.TgZ(6,"p",58),e._uU(7),e.qZA()(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.qZA(),e.TgZ(14,"td",40),e._uU(15),e.qZA()()),2&i){const t=s.$implicit,a=s.index;e.uIk("data-index",a),e.xp6(2),e.Oqu(a+1),e.xp6(3),e.Oqu(t.itemName),e.xp6(2),e.Oqu(t.itemDetail),e.xp6(2),e.Oqu(t.uom),e.xp6(2),e.Oqu(t.unitPrice),e.xp6(2),e.Oqu(t.qty),e.xp6(2),e.Oqu(t.unitTotalPrice)}}function yi(i,s){if(1&i&&(e.TgZ(0,"div",48)(1,"table",49)(2,"thead")(3,"tr",50)(4,"th",51),e._uU(5,"#"),e.qZA(),e.TgZ(6,"th",52),e._uU(7,"Item Details"),e.qZA(),e.TgZ(8,"th",53),e._uU(9,"UOM"),e.qZA(),e.TgZ(10,"th",53),e._uU(11,"Unit Price"),e.qZA(),e.TgZ(12,"th",53),e._uU(13,"Quantity"),e.qZA(),e.TgZ(14,"th",54),e._uU(15,"Amount "),e.TgZ(16,"span",33),e._uU(17),e.qZA()()()(),e.TgZ(18,"tbody"),e.YNc(19,Ii,16,8,"tr",55),e.qZA()()()),2&i){const t=e.oxw();e.xp6(17),e.hij("(",null==t.departmentDetail?null:t.departmentDetail.currencyCode,")"),e.xp6(2),e.Q6J("ngForOf",t.mX_quotationItem)}}let wi=(()=>{class i{constructor(t,a,n,o,l,c,g,u){this.commonFunctionService=t,this.authAssetService=a,this.quotationService=n,this.modalService=o,this.ticketService=l,this.router=c,this.print=g,this.departmentService=u,this.quotationObject={},this.mX_quotationItem=[],this.QuotId="",this.imgUrl=C.N.apiUrl,this.isProject=!1,this.departmentDetail={},this.isProject=this.authAssetService.getisProject()}ngOnInit(){}ngOnChanges(t){this.getDepartmentDetail(this.ticketInfo.projectId),this.getV2_MX_QuotationAndItemDetails(this.QuotId)}returnStatusBadgeClassesStatus(t){return this.commonFunctionService.returnStatusBadgeClasses(t)}getDepartmentDetail(t){this.departmentService.getDepartmentDetail(t).subscribe({next:a=>{this.departmentDetail=a.data,console.log("  this.departmentDetail =",this.departmentDetail)}})}getV2_MX_QuotationAndItemDetails(t){this.quotationService.getV2_MX_QuotationAndItemDetails({QuotId:t}).subscribe(n=>{this.quotationObject=n.objList.mX_Quotation,this.mX_quotationItem=n.objList.mX_quotationItem})}success(t){k().fire({toast:!0,position:"top-end",icon:"success",title:t.message,showConfirmButton:!1,timer:3e3})}static{this.\u0275fac=function(a){return new(a||i)(e.Y36(Z.K),e.Y36(y.u),e.Y36(Y.G),e.Y36(d.FF),e.Y36(I.w),e.Y36(x.F0),e.Y36(N.XU),e.Y36(Ci.n))}}static{this.\u0275cmp=e.Xpm({type:i,selectors:[["app-print-quotation-ticket"]],inputs:{QuotId:"QuotId",ticketInfo:"ticketInfo"},features:[e.TTD],decls:141,vars:38,consts:[[1,"row","justify-content-center"],[1,"col-xxl-10"],["id","demo",1,"card"],[1,"row"],[1,"col-lg-12","text-center"],[1,"p-4"],[1,"text-center","mb-2"],["alt","logo light","height","47",1,"card-logo",3,"src"],[1,"mt-sm-0","mt-0"],[1,"text-muted","text-uppercase","fw-semibold","mb-0"],[1,"text-muted","mb-1"],["id","zip-code",1,"text-muted","mb-0"],[1,"col-12"],[1,"card-header","border-bottom-dashed","border-top-dashed","p-4"],[1,"col-6"],[1,"text-muted","text-uppercase","fw-semibold"],["id","address-details",1,"text-muted","mb-1"],[1,"col-6","float-right"],[1,"d-flex","justify-content-md-end",2,"overflow","auto"],[2,"width","30px"],[1,"text-muted","fw-normal"],["id","legal-register-no"],["id","invoice-no"],[1,"mt-1","p-2"],[1,"form-label","text-muted","text-uppercase","fw-semibold"],[1,"col-12","mb-1","mt-2","p-4"],[1,"row","g-3"],[1,"col-12","col-12","mb-1"],[1,"text-muted","mb-2","text-uppercase","fw-semibold"],[1,"fs-14","mb-0"],[1,"row","g-3","d-flex"],[1,"col-3"],[1,"fs-11"],[1,"fs-10"],["id","total-amount"],[1,"col-lg-12"],[1,"card-body","p-4"],["class","table-responsive",4,"ngIf"],[1,"border-top","border-top-dashed","mt-2","d-flex","justify-content-end"],[1,"table","table-borderless","table-nowrap","align-middle","mb-0","ms-auto",2,"width","250px"],[1,"text-end"],[1,"border-top","border-top-dashed","fs-15"],["scope","row"],[1,"mt-4"],[1,"remarksNote",2,"background-color","black !important","color","white !important","padding","0.8rem","margin-bottom","1rem"],[1,"mb-0"],[1,"fw-semibold"],["id","note"],[1,"table-responsive"],[1,"table","table-borderless","text-center","table-nowrap","align-middle","mb-0"],[1,"table-active"],["scope","col",2,"width","50px"],["scope","col",1,"text-start"],["scope","col"],["scope","col",1,"text-end"],[4,"ngFor","ngForOf"],[1,"text-start"],[1,"fw-medium"],[1,"text-muted","mb-0"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),e._UZ(7,"img",7),e.qZA(),e.TgZ(8,"div",8)(9,"h6",9),e._uU(10),e.qZA(),e.TgZ(11,"p",10),e._uU(12),e.qZA(),e.TgZ(13,"p",10),e._uU(14),e.qZA(),e.TgZ(15,"p",11)(16,"span"),e._uU(17,"Zip-code: "),e.qZA(),e._uU(18),e.qZA()()()(),e.TgZ(19,"div",12)(20,"div",13)(21,"div",3)(22,"div",14)(23,"h6",15),e._uU(24),e.qZA(),e.TgZ(25,"p",16),e._uU(26),e.qZA(),e.TgZ(27,"p",10),e._uU(28),e.qZA(),e.TgZ(29,"p",11)(30,"span"),e._uU(31,"Zip-code:"),e.qZA(),e._uU(32),e.qZA()(),e.TgZ(33,"div",17)(34,"div",18)(35,"table")(36,"tbody")(37,"tr")(38,"td",19)(39,"h6")(40,"span",20),e._uU(41),e.qZA()()(),e.TgZ(42,"td")(43,"h6")(44,"span",21),e._uU(45),e.qZA()()()(),e.TgZ(46,"tr")(47,"td",19)(48,"h6")(49,"span",20),e._uU(50,"Ticket No"),e.qZA()()(),e.TgZ(51,"td")(52,"h6")(53,"span",21),e._uU(54),e.qZA()()()(),e.TgZ(55,"tr")(56,"td",19)(57,"h6")(58,"span",20),e._uU(59,"Quotation No"),e.qZA()()(),e.TgZ(60,"td")(61,"h6")(62,"span",21),e._uU(63,"\xa0: \xa0 #"),e.TgZ(64,"span",22),e._uU(65),e.qZA()()()()()()()()()()(),e.TgZ(66,"div",23)(67,"label",24),e._uU(68," Thank you for your inquiry. We are pleased to submit our quote as follows: "),e.qZA()()(),e.TgZ(69,"div",25)(70,"div",26)(71,"div",27)(72,"p",28),e._uU(73," Atten To "),e.qZA(),e.TgZ(74,"h5",29),e._uU(75),e.qZA()(),e.TgZ(76,"div",27)(77,"p",28),e._uU(78,"Title"),e.qZA(),e.TgZ(79,"h5",29),e._uU(80),e.qZA()()(),e.TgZ(81,"div",30)(82,"div",31)(83,"p",28),e._uU(84,"Date"),e.qZA(),e.TgZ(85,"h5",29),e._uU(86),e.ALo(87,"date"),e.qZA()(),e.TgZ(88,"div",31)(89,"p",28),e._uU(90,"Status"),e.qZA(),e.TgZ(91,"span",32),e._uU(92),e.qZA()(),e.TgZ(93,"div",31)(94,"p",28),e._uU(95," Created By "),e.qZA(),e.TgZ(96,"h5",29),e._uU(97),e.qZA()(),e.TgZ(98,"div",31)(99,"p",28),e._uU(100," Total Amount "),e.TgZ(101,"span",33),e._uU(102),e.qZA()(),e.TgZ(103,"h5",29)(104,"span",34),e._uU(105),e.qZA()()()()(),e.TgZ(106,"div",35)(107,"div",36),e.YNc(108,yi,20,2,"div",37),e.TgZ(109,"div",38)(110,"table",39)(111,"tbody")(112,"tr")(113,"td"),e._uU(114,"Sub Total"),e.qZA(),e.TgZ(115,"td",40),e._uU(116),e.qZA()(),e.TgZ(117,"tr")(118,"td"),e._uU(119),e.qZA(),e.TgZ(120,"td",40),e._uU(121),e.qZA()(),e.TgZ(122,"tr")(123,"td"),e._uU(124),e.qZA(),e.TgZ(125,"td",40),e._uU(126),e.qZA()(),e.TgZ(127,"tr",41)(128,"th",42),e._uU(129,"Total Amount "),e.TgZ(130,"span",33),e._uU(131),e.qZA()(),e.TgZ(132,"th",40),e._uU(133),e.qZA()()()()(),e.TgZ(134,"div",43)(135,"div",44)(136,"p",45)(137,"span",46),e._uU(138,"NOTES:"),e.qZA(),e.TgZ(139,"span",47),e._uU(140),e.qZA()()()()()()()()()()),2&a&&(e.xp6(7),e.Q6J("src",n.quotationObject.companyLogoURL?n.imgUrl+n.quotationObject.companyLogoURL:"../../../../../../assets/images/placeholderimage.png",e.LSH),e.xp6(3),e.hij(" ",n.quotationObject.companyName," "),e.xp6(2),e.hij(" ",n.quotationObject.companyAddress1," "),e.xp6(2),e.lnq(" ",n.quotationObject.companyAddress2?n.quotationObject.companyAddress2:""," ",n.quotationObject.companyAddress3?n.quotationObject.companyAddress3:""," ",null!=n.quotationObject&&n.quotationObject.companyCountry?null==n.quotationObject?null:n.quotationObject.companyCountry:""," "),e.xp6(4),e.hij(" ",n.quotationObject.companyPostalCode," "),e.xp6(6),e.hij(" ",n.quotationObject.clientName," "),e.xp6(2),e.hij(" ",n.quotationObject.clientAddress1," "),e.xp6(2),e.lnq(" ",n.quotationObject.clientAddress2?n.quotationObject.clientAddress2:""," ",n.quotationObject.clientAddress3?n.quotationObject.clientAddress3:""," ",n.quotationObject.clientCountry?n.quotationObject.clientCountry:""," "),e.xp6(4),e.hij(" ",n.quotationObject.clientPostalCode," "),e.xp6(9),e.Oqu(n.isProject?"Project":"Department"),e.xp6(4),e.hij(" \xa0: \xa0",n.quotationObject.projectName,""),e.xp6(9),e.hij("\xa0: \xa0 #",n.quotationObject.ticketNo,""),e.xp6(11),e.Oqu(n.quotationObject.quotNo),e.xp6(10),e.hij(" ",n.quotationObject.attentionTo," "),e.xp6(5),e.hij(" ",n.quotationObject.quotTitle," "),e.xp6(6),e.hij(" ",e.xi3(87,35,n.quotationObject.createdDate,"dd-MM-YYY")," "),e.xp6(5),e.Tol(n.returnStatusBadgeClassesStatus(n.quotationObject.quotStatusId)),e.xp6(1),e.Oqu(n.quotationObject.quotStatusName),e.xp6(5),e.Oqu(n.quotationObject.createdBy),e.xp6(5),e.hij("(",null==n.departmentDetail?null:n.departmentDetail.currencyCode,")"),e.xp6(3),e.Oqu(n.quotationObject.totalPrice),e.xp6(3),e.Q6J("ngIf",0!=n.mX_quotationItem.length),e.xp6(8),e.Oqu(n.quotationObject.subTotal),e.xp6(3),e.hij("Discount (",n.quotationObject.discountRate,") %"),e.xp6(2),e.Oqu(n.quotationObject.discountPrice),e.xp6(3),e.Oqu(n.quotationObject.serviceTaxType),e.xp6(2),e.Oqu(n.quotationObject.gstPrice),e.xp6(5),e.hij("(",null==n.departmentDetail?null:n.departmentDetail.currencyCode,")"),e.xp6(2),e.Oqu(n.quotationObject.totalPrice),e.xp6(7),e.hij("",n.quotationObject.remark," "))},dependencies:[m.sg,m.O5,m.uU],styles:[".remarksNote[_ngcontent-%COMP%]{background-color:#000!important;color:#fff!important;padding:.8rem;margin-bottom:1rem}"]})}}return i})();const Ai=["printRef"];function Di(i,s){if(1&i&&(e.TgZ(0,"tr",26)(1,"td",27),e._uU(2,"Verified By"),e.qZA(),e.TgZ(3,"td",28),e._uU(4),e.qZA()()),2&i){const t=e.oxw();e.xp6(4),e.hij(" ",null==t.ticketData[0]?null:t.ticketData[0].ticketVerifiedBy," ")}}function Ui(i,s){if(1&i&&(e.TgZ(0,"tr",26)(1,"td",27),e._uU(2,"Verified DateTime"),e.qZA(),e.TgZ(3,"td",28),e._uU(4),e.qZA()()),2&i){const t=e.oxw();e.xp6(4),e.hij(" ",null==t.ticketData[0]?null:t.ticketData[0].ticketVerifiedDateTime," ")}}function qi(i,s){1&i&&(e.TgZ(0,"tr",34)(1,"td",35),e._uU(2,"Verified Remark"),e.qZA()())}function Si(i,s){if(1&i&&(e.TgZ(0,"tr",26)(1,"td",36)(2,"div",37)(3,"p"),e._uU(4),e.qZA()()()()),2&i){const t=e.oxw();e.xp6(4),e.Oqu(t.ticketData[0].ticketVerifiedRemark)}}function Li(i,s){1&i&&(e.TgZ(0,"tr",34)(1,"td",35),e._uU(2,"Description"),e.qZA()())}function Ni(i,s){if(1&i&&(e.TgZ(0,"tr",26)(1,"td",36),e._UZ(2,"div",38),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("innerHTML",t.ticketData[0].issueDescription,e.oJD)}}function Oi(i,s){if(1&i&&(e.TgZ(0,"td",41),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.uIk("colspan",t.ticketData[0].ticketClosedRemark?1:2),e.xp6(1),e.hij(" ",t.ticketData[0].companyName," ")}}function Vi(i,s){if(1&i&&(e.TgZ(0,"td",41),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.ticketData[0].clientName," ")}}function Mi(i,s){if(1&i&&(e.TgZ(0,"tr",39),e.YNc(1,Oi,2,2,"td",40)(2,Vi,2,1,"td",40),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.ticketData[0].ticketAcknoledgeRemark),e.xp6(1),e.Q6J("ngIf",t.ticketData[0].ticketClosedRemark)}}function Ji(i,s){if(1&i&&(e.TgZ(0,"td",43)(1,"div")(2,"p",44)(3,"b"),e._UZ(4,"i",45),e.qZA(),e._uU(5),e.qZA(),e.TgZ(6,"p",44)(7,"b"),e._UZ(8,"i",46),e.qZA(),e._uU(9),e.qZA(),e.TgZ(10,"p",44),e._UZ(11,"i",47),e._uU(12),e.qZA(),e.TgZ(13,"div",37),e._UZ(14,"i",48),e._uU(15),e.qZA()()()),2&i){const t=e.oxw(2);e.uIk("colspan",t.ticketData[0].ticketClosedRemark?1:2),e.xp6(5),e.hij(" ",t.ticketData[0].ticketAcknoledgeBy," "),e.xp6(4),e.hij(" ",t.ticketData[0].ticketAcknoledgeDesig," "),e.xp6(3),e.hij(" ",t.ticketData[0].ticketAcknoledgeDateTime," "),e.xp6(3),e.hij(" ",t.ticketData[0].ticketAcknoledgeRemark," ")}}function Qi(i,s){if(1&i&&(e.TgZ(0,"td",43)(1,"div")(2,"p",44)(3,"b"),e._UZ(4,"i",45),e.qZA(),e._uU(5),e.qZA(),e.TgZ(6,"p",44)(7,"b"),e._UZ(8,"i",46),e.qZA(),e._uU(9),e.qZA(),e.TgZ(10,"p",44)(11,"b"),e._UZ(12,"i",47),e.qZA(),e._uU(13),e.qZA(),e.TgZ(14,"div",37)(15,"b"),e._UZ(16,"i",48),e.qZA(),e._uU(17),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(5),e.hij(" ",t.ticketData[0].ticketClosedBy," "),e.xp6(4),e.hij(" ",t.ticketData[0].ticketClosedDesig," "),e.xp6(4),e.hij(" ",t.ticketData[0].ticketClosedDateTime," "),e.xp6(4),e.hij(" ",t.ticketData[0].ticketClosedRemark," ")}}function Pi(i,s){if(1&i&&(e.TgZ(0,"tr",26),e.YNc(1,Ji,16,5,"td",42)(2,Qi,18,4,"td",42),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.ticketData[0].ticketAcknoledgeRemark),e.xp6(1),e.Q6J("ngIf",t.ticketData[0].ticketClosedRemark)}}function Ri(i,s){if(1&i&&(e.TgZ(0,"div",59)(1,"div",60),e._UZ(2,"img",61),e.qZA(),e.TgZ(3,"div",62)(4,"h5",63),e._uU(5),e.TgZ(6,"small",64),e._uU(7),e.qZA()(),e.TgZ(8,"p",65),e._uU(9),e.qZA()()()),2&i){const t=e.oxw().$implicit,a=e.oxw(4);e.xp6(2),e.hYB("src","",a.imageUrl,"",t.profileImageUrl,"",e.LSH),e.xp6(3),e.hij(" ",t.msgByName," "),e.xp6(2),e.Oqu(t.createDateTime),e.xp6(2),e.hij(" ",t.messageContain," ")}}function Fi(i,s){if(1&i&&(e.TgZ(0,"div",66)(1,"div",67)(2,"div",68),e._UZ(3,"img",61),e.qZA(),e.TgZ(4,"div",69)(5,"h5",63),e._uU(6),e.TgZ(7,"small",64),e._uU(8),e.qZA()(),e.TgZ(9,"p",65),e._uU(10),e.qZA()()()()),2&i){const t=e.oxw().$implicit,a=e.oxw(4);e.xp6(3),e.hYB("src","",a.imageUrl,"",t.profileImageUrl,"",e.LSH),e.xp6(3),e.hij(" ",t.msgByName," "),e.xp6(2),e.hij("",t.createDateTime," "),e.xp6(2),e.hij(" ",t.messageContain," ")}}function ji(i,s){if(1&i&&(e.ynx(0),e.YNc(1,Ri,10,5,"div",57)(2,Fi,11,5,"div",58),e.BQk()),2&i){const t=s.$implicit;e.xp6(1),e.Q6J("ngIf",0==t.isClient),e.xp6(1),e.Q6J("ngIf",1==t.isClient)}}function Bi(i,s){if(1&i&&(e.TgZ(0,"div",53)(1,"h5",54),e._uU(2,"Discussion"),e.qZA(),e.TgZ(3,"div")(4,"div",55),e.YNc(5,ji,3,2,"ng-container",56),e.qZA()()()),2&i){const t=e.oxw(3);e.xp6(5),e.Q6J("ngForOf",t.ticketDisscusionArrayListGlobal)}}function Gi(i,s){if(1&i&&(e.TgZ(0,"div",15)(1,"table",22)(2,"tbody")(3,"tr",23)(4,"td",24)(5,"h2",25),e._uU(6,"Discussion"),e.qZA()()(),e.TgZ(7,"tr",26)(8,"td",51),e.YNc(9,Bi,6,1,"div",52),e.qZA()()()()()),2&i){const t=e.oxw(2);e.xp6(9),e.Q6J("ngIf",0!=t.ticketDisscusionArrayListGlobal.length)}}function Wi(i,s){if(1&i&&(e.TgZ(0,"div",49),e.YNc(1,Gi,10,1,"div",50),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",0!=t.ticketDisscusionArrayListGlobal.length)}}function Yi(i,s){if(1&i&&(e.TgZ(0,"div",59)(1,"div",60),e._UZ(2,"img",61),e.qZA(),e.TgZ(3,"div",62)(4,"h5",63),e._uU(5),e.TgZ(6,"small",64),e._uU(7),e.qZA()(),e.TgZ(8,"p",65),e._uU(9),e.qZA()()()),2&i){const t=e.oxw().$implicit,a=e.oxw(4);e.xp6(2),e.hYB("src","",a.imageUrl,"",t.profileImageUrl,"",e.LSH),e.xp6(3),e.hij(" ",t.msgByName," "),e.xp6(2),e.Oqu(t.createDateTime),e.xp6(2),e.hij(" ",t.messageContain," ")}}function Hi(i,s){if(1&i&&(e.TgZ(0,"div",66)(1,"div",67)(2,"div",68),e._UZ(3,"img",61),e.qZA(),e.TgZ(4,"div",69)(5,"h5",63),e._uU(6),e.TgZ(7,"small",64),e._uU(8),e.qZA()(),e.TgZ(9,"p",65),e._uU(10),e.qZA()()()()),2&i){const t=e.oxw().$implicit,a=e.oxw(4);e.xp6(3),e.hYB("src","",a.imageUrl,"",t.profileImageUrl,"",e.LSH),e.xp6(3),e.hij(" ",t.msgByName," "),e.xp6(2),e.hij("",t.createDateTime," "),e.xp6(2),e.hij(" ",t.messageContain," ")}}function Ei(i,s){if(1&i&&(e.ynx(0),e.YNc(1,Yi,10,5,"div",57)(2,Hi,11,5,"div",58),e.BQk()),2&i){const t=s.$implicit;e.xp6(1),e.Q6J("ngIf",0==t.isClient),e.xp6(1),e.Q6J("ngIf",1==t.isClient)}}function Xi(i,s){if(1&i&&(e.TgZ(0,"div",53)(1,"h5",54),e._uU(2,"Discussion"),e.qZA(),e.TgZ(3,"div",55),e.YNc(4,Ei,3,2,"ng-container",56),e.qZA()()),2&i){const t=e.oxw(3);e.xp6(4),e.Q6J("ngForOf",t.ticketDisscusionArrayList)}}function Ki(i,s){if(1&i&&(e.TgZ(0,"div",49)(1,"div",15)(2,"table",22)(3,"tbody")(4,"tr",23)(5,"td",24)(6,"h2",25),e._uU(7,"Internal Discussion"),e.qZA()()(),e.TgZ(8,"tr",26)(9,"td",51),e.YNc(10,Xi,5,1,"div",52),e.qZA()()()()()()),2&i){const t=e.oxw(2);e.xp6(10),e.Q6J("ngIf",0!=t.ticketDisscusionArrayList.length)}}function zi(i,s){if(1&i&&(e.ynx(0),e.YNc(1,Ki,11,1,"div",32),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",0!=(null==t.ticketDisscusionArrayList?null:t.ticketDisscusionArrayList.length))}}function $i(i,s){if(1&i&&(e.TgZ(0,"div",74),e._UZ(1,"img",75),e.qZA()),2&i){const t=s.$implicit,a=e.oxw(2);e.xp6(1),e.Q6J("src",a.imageUrl+t.imageUrl,e.LSH)}}function en(i,s){if(1&i&&(e.TgZ(0,"div",49)(1,"div",70)(2,"h2",71),e._uU(3,"Image Report"),e.qZA()(),e.TgZ(4,"div",15)(5,"div",72),e.YNc(6,$i,2,1,"div",73),e.qZA()()()),2&i){const t=e.oxw();e.xp6(6),e.Q6J("ngForOf",t.selectePasteUplaodArray)}}function tn(i,s){if(1&i&&(e.TgZ(0,"tr",26)(1,"td",76)(2,"b"),e._uU(3,"Is the problem solved? (Yes /No) -"),e.qZA(),e._uU(4),e._UZ(5,"div",38),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(4),e.hij(": ",t.incidentList.isSolved?"Yes":"No"," "),e.xp6(1),e.Q6J("innerHTML",t.incidentList.isSolvedRemark,e.oJD)}}function nn(i,s){1&i&&(e.TgZ(0,"tr",23)(1,"td",24)(2,"h2",25),e._uU(3,"Cause of Incident"),e.qZA()()())}function an(i,s){if(1&i&&(e.TgZ(0,"tr",26)(1,"td",76),e._UZ(2,"div",38),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("innerHTML",t.incidentList.impactOfIncident,e.oJD)}}function on(i,s){1&i&&(e.TgZ(0,"tr",23)(1,"td",24)(2,"h2",25),e._uU(3,"Impact of Incident"),e.qZA()()())}function sn(i,s){if(1&i&&(e.TgZ(0,"tr",26)(1,"td",76),e._UZ(2,"div",38),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("innerHTML",t.incidentList.incidentRemark,e.oJD)}}function ln(i,s){1&i&&(e.TgZ(0,"tr",23)(1,"td",24)(2,"h2",25),e._uU(3,"Signature"),e.qZA()()())}function cn(i,s){if(1&i&&e._UZ(0,"img",81),2&i){const t=e.oxw(4);e.hYB("src","",t.imageUrl,"",t.incidentList.incindetTechSignImageURL,"",e.LSH)}}function rn(i,s){if(1&i&&(e.TgZ(0,"p",44)(1,"b"),e._uU(2,"Date:"),e.qZA(),e._uU(3),e.qZA()),2&i){const t=e.oxw(4);e.xp6(3),e.hij(" ",t.incidentList.incindetTechSignDateTime," ")}}function dn(i,s){if(1&i&&(e.TgZ(0,"div",37),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.hij(" Note: ",t.incidentList.techFinalRemark," ")}}function pn(i,s){if(1&i&&(e.TgZ(0,"td",43)(1,"b"),e._uU(2,"Involved Party Signature:"),e.qZA(),e._UZ(3,"br"),e._uU(4),e._UZ(5,"br"),e.YNc(6,cn,1,2,"img",78)(7,rn,4,1,"p",79)(8,dn,2,1,"div",80),e.qZA()),2&i){const t=e.oxw(3);e.xp6(4),e.hij(" ",t.incidentList.incindetTechSignByName," "),e.xp6(2),e.Q6J("ngIf",t.incidentList.incindetTechSignImageURL),e.xp6(1),e.Q6J("ngIf",t.incidentList.incindetTechSignDateTime),e.xp6(1),e.Q6J("ngIf",t.incidentList.techFinalRemark)}}function _n(i,s){if(1&i&&e._UZ(0,"img",81),2&i){const t=e.oxw(4);e.hYB("src","",t.imageUrl,"",t.incidentList.incindetClientSignImageURL,"",e.LSH)}}function mn(i,s){if(1&i&&(e.TgZ(0,"p",44)(1,"b"),e._uU(2,"Date:"),e.qZA(),e._uU(3),e.qZA()),2&i){const t=e.oxw(4);e.xp6(3),e.hij(" ",t.incidentList.incindetClientSignDateTime," ")}}function gn(i,s){if(1&i&&(e.TgZ(0,"div",37),e._uU(1),e.qZA()),2&i){const t=e.oxw(4);e.xp6(1),e.hij(" Note: ",t.incidentList.clientFinalRemark," ")}}function un(i,s){if(1&i&&(e.TgZ(0,"td",43)(1,"b"),e._uU(2,"Received Party Signature:"),e.qZA(),e._UZ(3,"br"),e._uU(4),e._UZ(5,"br"),e.YNc(6,_n,1,2,"img",78)(7,mn,4,1,"p",79)(8,gn,2,1,"div",80),e.qZA()),2&i){const t=e.oxw(3);e.xp6(4),e.hij(" ",t.incidentList.incindetClientSignByName," "),e.xp6(2),e.Q6J("ngIf",t.incidentList.incindetClientSignImageURL),e.xp6(1),e.Q6J("ngIf",t.incidentList.incindetClientSignDateTime),e.xp6(1),e.Q6J("ngIf",t.incidentList.clientFinalRemark)}}function hn(i,s){if(1&i&&(e.TgZ(0,"tr",26),e.YNc(1,pn,9,4,"td",42)(2,un,9,4,"td",42),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.incidentList.incindetTechSignByName),e.xp6(1),e.Q6J("ngIf",t.incidentList.incindetClientSignByName)}}function Tn(i,s){if(1&i&&(e.TgZ(0,"div",74)(1,"figure",85),e._UZ(2,"img",86),e.TgZ(3,"figcaption",87),e._uU(4," Incident Images 1 "),e.qZA()()()),2&i){const t=e.oxw(3);e.xp6(2),e.Q6J("src",t.incidentList.incidentImage1URL?t.imageUrl+t.incidentList.incidentImage1URL:"../../../../../assets/images/placeholderimage.png",e.LSH)}}function fn(i,s){if(1&i&&(e.TgZ(0,"div",74)(1,"figure",85),e._UZ(2,"img",86),e.TgZ(3,"figcaption",87),e._uU(4," Incident Images 2 "),e.qZA()()()),2&i){const t=e.oxw(3);e.xp6(2),e.Q6J("src",t.incidentList.incidentImage2URL?t.imageUrl+t.incidentList.incidentImage2URL:"../../../../../assets/images/placeholderimage.png",e.LSH)}}function kn(i,s){if(1&i&&(e.TgZ(0,"div",74)(1,"figure",85),e._UZ(2,"img",86),e.TgZ(3,"figcaption",87),e._uU(4," Incident Images 3 "),e.qZA()()()),2&i){const t=e.oxw(3);e.xp6(2),e.Q6J("src",t.incidentList.incidentImage3URL?t.imageUrl+t.incidentList.incidentImage3URL:"../../../../../assets/images/placeholderimage.png",e.LSH)}}function bn(i,s){if(1&i&&(e.TgZ(0,"div",74)(1,"figure",85),e._UZ(2,"img",86),e.TgZ(3,"figcaption",87),e._uU(4," Incident Images 4 "),e.qZA()()()),2&i){const t=e.oxw(3);e.xp6(2),e.Q6J("src",t.incidentList.incidentImage4URL?t.imageUrl+t.incidentList.incidentImage4URL:"../../../../../assets/images/placeholderimage.png",e.LSH)}}function vn(i,s){if(1&i&&(e.TgZ(0,"tr")(1,"td",24)(2,"h4",82),e._uU(3,"Picture of Incident- Before"),e.qZA(),e.TgZ(4,"div",83),e.YNc(5,Tn,5,1,"div",84)(6,fn,5,1,"div",84)(7,kn,5,1,"div",84)(8,bn,5,1,"div",84),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(5),e.Q6J("ngIf",t.incidentList.incidentImage1URL),e.xp6(1),e.Q6J("ngIf",t.incidentList.incidentImage2URL),e.xp6(1),e.Q6J("ngIf",t.incidentList.incidentImage3URL),e.xp6(1),e.Q6J("ngIf",t.incidentList.incidentImage4URL)}}function xn(i,s){if(1&i&&(e.TgZ(0,"div",74)(1,"figure",85),e._UZ(2,"img",86),e.TgZ(3,"figcaption",87),e._uU(4,"Updated Images 1"),e.qZA()()()),2&i){const t=e.oxw(3);e.xp6(2),e.Q6J("src",t.incidentList.tecgUpdatemage1URL?t.imageUrl+t.incidentList.tecgUpdatemage1URL:"../../../../../assets/images/placeholderimage.png",e.LSH)}}function Zn(i,s){if(1&i&&(e.TgZ(0,"div",74)(1,"figure",85),e._UZ(2,"img",86),e.TgZ(3,"figcaption",87),e._uU(4,"Updated Images 2"),e.qZA()()()),2&i){const t=e.oxw(3);e.xp6(2),e.Q6J("src",t.incidentList.tecgUpdatemage2URL?t.imageUrl+t.incidentList.tecgUpdatemage2URL:"../../../../../assets/images/placeholderimage.png",e.LSH)}}function Cn(i,s){if(1&i&&(e.TgZ(0,"div",74)(1,"figure",85),e._UZ(2,"img",86),e.TgZ(3,"figcaption",87),e._uU(4,"Updated Images 3"),e.qZA()()()),2&i){const t=e.oxw(3);e.xp6(2),e.Q6J("src",t.incidentList.tecgUpdatemage3URL?t.imageUrl+t.incidentList.tecgUpdatemage3URL:"../../../../../assets/images/placeholderimage.png",e.LSH)}}function In(i,s){if(1&i&&(e.TgZ(0,"div",74)(1,"figure",85),e._UZ(2,"img",86),e.TgZ(3,"figcaption",87),e._uU(4,"Updated Images 4"),e.qZA()()()),2&i){const t=e.oxw(3);e.xp6(2),e.Q6J("src",t.incidentList.tecgUpdatemage4URL?t.imageUrl+t.incidentList.tecgUpdatemage4URL:"../../../../../assets/images/placeholderimage.png",e.LSH)}}function yn(i,s){if(1&i&&(e.TgZ(0,"tr")(1,"td",24)(2,"h4",88),e._uU(3,"Picture of Incident- Before"),e.qZA(),e.TgZ(4,"div",83),e.YNc(5,xn,5,1,"div",84)(6,Zn,5,1,"div",84)(7,Cn,5,1,"div",84)(8,In,5,1,"div",84),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(5),e.Q6J("ngIf",t.incidentList.tecgUpdatemage1URL),e.xp6(1),e.Q6J("ngIf",t.incidentList.tecgUpdatemage2URL),e.xp6(1),e.Q6J("ngIf",t.incidentList.tecgUpdatemage3URL),e.xp6(1),e.Q6J("ngIf",t.incidentList.tecgUpdatemage4URL)}}function wn(i,s){if(1&i&&(e.TgZ(0,"div",49)(1,"div",21)(2,"table",22)(3,"tbody")(4,"tr",23)(5,"td",24)(6,"h2",25),e._uU(7,"Incident Report"),e.qZA()()(),e.TgZ(8,"tr",26)(9,"td",43)(10,"b"),e._uU(11,"Date of incident "),e.qZA(),e._uU(12),e.qZA(),e.TgZ(13,"td",43)(14,"b"),e._uU(15,"Approx. Time of incident"),e.qZA(),e._uU(16),e.qZA()(),e.TgZ(17,"tr",26)(18,"td",76)(19,"b"),e._uU(20,"Incident Type"),e.qZA(),e._uU(21),e.qZA()(),e.TgZ(22,"tr",26)(23,"td",76)(24,"b"),e._uU(25,"Location of incident"),e.qZA(),e._uU(26),e.qZA()(),e.YNc(27,tn,6,2,"tr",29)(28,nn,4,0,"tr",77)(29,an,3,1,"tr",29)(30,on,4,0,"tr",77)(31,sn,3,1,"tr",29)(32,ln,4,0,"tr",77)(33,hn,3,2,"tr",29)(34,vn,9,4,"tr",33)(35,yn,9,4,"tr",33),e.qZA()()()()),2&i){const t=e.oxw();e.xp6(12),e.hij(": ",t.incidentList.dateOfincident||"Na"," "),e.xp6(4),e.hij(": ",t.incidentList.approxTimeOfIncident||"Na"," "),e.xp6(5),e.hij(": ",t.incidentList.incidentTypeName||"Na"," "),e.xp6(5),e.hij(": ",t.incidentList.locationName||"Na"," "),e.xp6(1),e.Q6J("ngIf",t.incidentList.isSolvedRemark),e.xp6(1),e.Q6J("ngIf",t.incidentList.impactOfIncident),e.xp6(1),e.Q6J("ngIf",t.incidentList.impactOfIncident),e.xp6(1),e.Q6J("ngIf",t.incidentList.incidentRemark),e.xp6(1),e.Q6J("ngIf",t.incidentList.incidentRemark),e.xp6(1),e.Q6J("ngIf",t.incidentList.incindetTechSignByName||t.incidentList.incindetClientSignDateTime),e.xp6(1),e.Q6J("ngIf",t.incidentList.incindetTechSignByName||t.incidentList.incindetClientSignDateTime),e.xp6(1),e.Q6J("ngIf",t.incidentList.incidentImage1URL||t.incidentList.incidentImage2URL||t.incidentList.incidentImage3URL||t.incidentList.incidentImage4URL),e.xp6(1),e.Q6J("ngIf",t.incidentList.tecgUpdatemage1URL||t.incidentList.tecgUpdatemage2URL||t.incidentList.tecgUpdatemage3URL||t.incidentList.tecgUpdatemage4URL)}}function An(i,s){1&i&&(e.TgZ(0,"tr",23)(1,"td",24)(2,"h2",25),e._uU(3,"Note For Member"),e.qZA()()())}function Dn(i,s){if(1&i&&(e.TgZ(0,"tr",26)(1,"td",76),e._UZ(2,"div",38),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("innerHTML",t.ticketWorkOder.addtionalNote,e.oJD)}}function Un(i,s){1&i&&(e.TgZ(0,"tr",23)(1,"td",24)(2,"h2",25),e._uU(3,"Action Taken"),e.qZA()()())}function qn(i,s){if(1&i&&(e.TgZ(0,"tr",26)(1,"td",76),e._UZ(2,"div",38),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("innerHTML",t.ticketWorkOder.wO_Tec_Remark,e.oJD)}}function Sn(i,s){if(1&i&&(e.TgZ(0,"tr",26)(1,"td",91)(2,"b"),e._uU(3,"Remark "),e.qZA()(),e.TgZ(4,"td",28),e._uU(5),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(5),e.hij(" ",t.remark," ")}}function Ln(i,s){if(1&i&&(e.TgZ(0,"td",95)(1,"h4",88),e._uU(2,"Start "),e.qZA(),e.TgZ(3,"div",96)(4,"figure",85),e._UZ(5,"img",86),e.TgZ(6,"figcaption",87),e._uU(7,"Start Image"),e.qZA()()()()),2&i){const t=e.oxw(2).$implicit,a=e.oxw(2);e.ekj("w-100",!t.sitePicUrlEnd),e.uIk("colspan",t.sitePicUrlEnd?1:2),e.xp6(5),e.Q6J("src",t.sitePicUrlStart?a.imageUrl+t.sitePicUrlStart:"../../../../../assets/images/placeholderimage.png",e.LSH)}}function Nn(i,s){if(1&i&&(e.TgZ(0,"td",95)(1,"h4",88),e._uU(2,"End"),e.qZA(),e.TgZ(3,"div",96)(4,"figure",85),e._UZ(5,"img",86),e.TgZ(6,"figcaption",87),e._uU(7,"End Images "),e.qZA()()()()),2&i){const t=e.oxw(2).$implicit,a=e.oxw(2);e.ekj("w-100",!t.sitePicUrlStart),e.uIk("colspan",t.sitePicUrlStart?1:2),e.xp6(5),e.Q6J("src",t.sitePicUrlEnd?a.imageUrl+t.sitePicUrlEnd:"../../../../../assets/images/placeholderimage.png",e.LSH)}}function On(i,s){if(1&i&&(e.TgZ(0,"tr"),e.YNc(1,Ln,8,4,"td",94)(2,Nn,8,4,"td",94),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",t.sitePicUrlStart),e.xp6(1),e.Q6J("ngIf",t.sitePicUrlEnd)}}function Vn(i,s){if(1&i&&(e.ynx(0),e.TgZ(1,"tr",93)(2,"td",36)(3,"b"),e._uU(4),e.qZA()()(),e.TgZ(5,"tr",26)(6,"td",91)(7,"b"),e._uU(8,"Start By | Date & Time "),e.qZA()(),e.TgZ(9,"td",28),e._uU(10),e.TgZ(11,"p",14),e._uU(12),e.qZA()()(),e.TgZ(13,"tr",26)(14,"td",91)(15,"b"),e._uU(16,"End By | Date & Time "),e.qZA()(),e.TgZ(17,"td",28),e._uU(18),e.TgZ(19,"p",14),e._uU(20),e.qZA()()(),e.YNc(21,Sn,6,1,"tr",29)(22,On,3,2,"tr",33),e.BQk()),2&i){const t=s.$implicit,a=s.index;e.xp6(4),e.hij("Task ",a+1,""),e.xp6(6),e.hij(" ",t.startDateTimeByName," "),e.xp6(2),e.Oqu(t.startDateTime||"-"),e.xp6(6),e.hij(" ",t.endDateTimeByName," "),e.xp6(2),e.Oqu(t.endDateTime||"-"),e.xp6(1),e.Q6J("ngIf",t.remark),e.xp6(1),e.Q6J("ngIf",t.sitePicUrlStart||t.sitePicUrlEnd)}}function Mn(i,s){if(1&i&&(e.TgZ(0,"div",49)(1,"div",70)(2,"h2",71),e._uU(3,"Service Order Report"),e.qZA()(),e.TgZ(4,"div",15)(5,"div",2)(6,"div",16)(7,"h3",17)(8,"b"),e._uU(9," Title: "),e.qZA(),e._uU(10),e.qZA()(),e.TgZ(11,"div",89)(12,"p")(13,"b"),e._uU(14,"Created Date"),e.qZA(),e._uU(15),e.qZA()(),e.TgZ(16,"div",90)(17,"h3",14),e._uU(18),e.qZA()()()(),e.TgZ(19,"div",21)(20,"table",22)(21,"tbody")(22,"tr",23)(23,"td",24)(24,"h2",25),e._uU(25,"Service Order Report"),e.qZA()()(),e.TgZ(26,"tr",26)(27,"td",91)(28,"b"),e._uU(29,"Task Type "),e.qZA()(),e.TgZ(30,"td",28),e._uU(31),e.qZA()(),e.TgZ(32,"tr",26)(33,"td",91)(34,"b"),e._uU(35,"Service Type "),e.qZA()(),e.TgZ(36,"td",28),e._uU(37),e.qZA()(),e.TgZ(38,"tr",26)(39,"td",91)(40,"b"),e._uU(41,"Ticket Type "),e.qZA()(),e.TgZ(42,"td",28),e._uU(43),e.qZA()(),e.TgZ(44,"tr",26)(45,"td",91)(46,"b"),e._uU(47,"Priority "),e.qZA()(),e.TgZ(48,"td",28),e._uU(49),e.qZA()(),e.TgZ(50,"tr",26)(51,"td",91)(52,"b"),e._uU(53,"Start by & Date "),e.qZA()(),e.TgZ(54,"td",28),e._uU(55),e.TgZ(56,"p",92),e._uU(57),e.qZA()()(),e.TgZ(58,"tr",26)(59,"td",91)(60,"b"),e._uU(61,"End by & Date "),e.qZA()(),e.TgZ(62,"td",28),e._uU(63),e.TgZ(64,"p",92),e._uU(65),e.qZA()()(),e.TgZ(66,"tr",26)(67,"td",91)(68,"b"),e._uU(69,"Status "),e.qZA()(),e.TgZ(70,"td",28),e._uU(71),e.qZA()(),e.YNc(72,An,4,0,"tr",77)(73,Dn,3,1,"tr",29)(74,Un,4,0,"tr",77)(75,qn,3,1,"tr",29)(76,Vn,23,7,"ng-container",56),e.qZA()()()()),2&i){const t=e.oxw();e.xp6(10),e.hij("",null==t.ticketWorkOder?null:t.ticketWorkOder.woName," "),e.xp6(5),e.hij(" :",null==t.ticketWorkOder?null:t.ticketWorkOder.createdDate,""),e.xp6(3),e.hij("#",null==t.ticketWorkOder?null:t.ticketWorkOder.woNo,""),e.xp6(13),e.hij(" ",t.ticketWorkOder.taskType||"Na"," "),e.xp6(6),e.hij(" ",t.ticketWorkOder.operationType||"Na"," "),e.xp6(6),e.hij(" ",t.ticketWorkOder.ticketTypeName||"-"," "),e.xp6(6),e.hij(" ",t.ticketWorkOder.urgencyTypeName," "),e.xp6(6),e.hij(" ",t.ticketWorkOder.taskStartByName||"-"," "),e.xp6(2),e.hij(" ",t.ticketWorkOder.taskStartDateTime," "),e.xp6(6),e.hij(" ",t.ticketWorkOder.taskEndByName||"-"," "),e.xp6(2),e.hij(" ",t.ticketWorkOder.taskEndDateTime," "),e.xp6(6),e.hij(" ",t.ticketWorkOder.woStatusName||"-"," "),e.xp6(1),e.Q6J("ngIf",t.ticketWorkOder.addtionalNote),e.xp6(1),e.Q6J("ngIf",t.ticketWorkOder.addtionalNote),e.xp6(1),e.Q6J("ngIf",t.ticketWorkOder.wO_Tec_Remark),e.xp6(1),e.Q6J("ngIf",t.ticketWorkOder.wO_Tec_Remark),e.xp6(1),e.Q6J("ngForOf",t.ticketWOStartEndTask)}}function Jn(i,s){if(1&i&&(e.TgZ(0,"div",49)(1,"div",15),e._UZ(2,"app-print-quotation-ticket",98),e.qZA()()),2&i){const t=s.$implicit,a=e.oxw(2);e.xp6(2),e.Q6J("QuotId",t.quotId)("ticketInfo",a.ticketData[0])}}function Qn(i,s){if(1&i&&(e.ynx(0),e.YNc(1,Jn,3,2,"div",97),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.totalQuotationCountList)}}let Pn=(()=>{class i{constructor(t,a,n){this.print=t,this.commonFunctionService=a,this.companyService=n,this.storeDataTicket={},this.selectePasteUplaodArray=[],this.ticketDisscusionArrayListGlobal=[],this.ticketDisscusionArrayList=[],this.totalQuotationCountList=[],this.shownOffInternalChat=!1,this.ticketData=[],this.maintenanceWorkflowAuditList=[],this.incidentList=[],this.assetTicketList=[],this.ticketWOTechAssignment=[],this.ticketWOStartEndTask=[],this.ticketWorkOder=[],this.imageUrl=C.N.apiUrl,this.companyData={}}ngOnInit(){console.log("storeDataTicket",this.storeDataTicket),this.ticketData=this.storeDataTicket.data.mX_Ticketing?[this.storeDataTicket.data.mX_Ticketing]:[],this.incidentList=0!=Object.keys(this.storeDataTicket.data.mX_ReportIncident).length?this.storeDataTicket.data.mX_ReportIncident:[],this.assetTicketList=this.storeDataTicket.data.mX_TicketItem?this.storeDataTicket.data.mX_TicketItem:[],this.ticketWOTechAssignment=this.storeDataTicket.data.mX_WOTechAssignment?this.storeDataTicket.data.mX_WOTechAssignment:[],this.ticketWOStartEndTask=this.storeDataTicket.data.mx_WOStartEndTask?this.storeDataTicket.data.mx_WOStartEndTask:[],this.ticketWorkOder=this.storeDataTicket.data.mX_WorkOder?this.storeDataTicket.data.mX_WorkOder:[]}getViewData(t){this.companyService.getCompanyDetail(t).subscribe(a=>{this.companyData=a?.data})}ngOnChanges(t){this.ticketData=this.storeDataTicket.data.mX_Ticketing?[this.storeDataTicket.data.mX_Ticketing]:[],this.incidentList=0!=Object.keys(this.storeDataTicket.data.mX_ReportIncident).length?this.storeDataTicket.data.mX_ReportIncident:[],this.assetTicketList=this.storeDataTicket.data.mX_TicketItem?this.storeDataTicket.data.mX_TicketItem:[],this.ticketWOTechAssignment=this.storeDataTicket.data.mX_WOTechAssignment?this.storeDataTicket.data.mX_WOTechAssignment:[],this.ticketWOStartEndTask=this.storeDataTicket.data.mx_WOStartEndTask?this.storeDataTicket.data.mx_WOStartEndTask:[],this.ticketWorkOder=this.storeDataTicket.data.mX_WorkOder?this.storeDataTicket.data.mX_WorkOder:[];let a={};a.companyId=Number(this.ticketData[0]?.companyId),this.getViewData(a)}returnStatusBadgeClassesStatus(t){return this.commonFunctionService.returnStatusBadgeClasses(t)}static{this.\u0275fac=function(a){return new(a||i)(e.Y36(N.XU),e.Y36(Z.K),e.Y36(Zi.J))}}static{this.\u0275cmp=e.Xpm({type:i,selectors:[["app-print-view-ticket"]],viewQuery:function(a,n){if(1&a&&e.Gf(Ai,5),2&a){let o;e.iGM(o=e.CRH())&&(n.printRefValue=o.first)}},inputs:{storeDataTicket:"storeDataTicket",selectePasteUplaodArray:"selectePasteUplaodArray",ticketDisscusionArrayListGlobal:"ticketDisscusionArrayListGlobal",ticketDisscusionArrayList:"ticketDisscusionArrayList",totalQuotationCountList:"totalQuotationCountList",shownOffInternalChat:"shownOffInternalChat",maintenanceWorkflowAuditList:"maintenanceWorkflowAuditList"},features:[e.TTD],decls:94,vars:32,consts:[[1,"row","me-0","ms-0","ps-0","pe-0"],[1,"col-lg-12"],[1,"row"],[1,"col-12","text-center"],[1,"p-4"],[1,"text-center","mb-2"],["alt","logo light","height","47",1,"card-logo",3,"src"],[1,"mt-sm-0","mt-0"],[1,"text-muted","text-uppercase","fw-semibold","mb-0"],[1,"text-muted","mb-1"],["id","zip-code",1,"text-muted","mb-0"],[1,"col-12","mt-2"],[1,"border-gradient-1"],[1,"col-12","mb-2","mt-1","d-flex","justify-content-end"],[1,"mb-0"],[1,"col-12","mb-1","mt-2","p-0"],[1,"col-12"],[1,"mt-2","mb-3","fs-19"],[1,"col-6","mt-1"],[1,"mt-0","mb-0","fs-17"],[1,"mb-0","fs-17"],[1,"col-12","mb-0","mt-1","p-0"],[1,"table","table-bordered","mb-0"],[1,"p-0","m-0","text-center",2,"background-color","black","color","white"],["colspan","2"],[1,"mb-0","text-white","fs-19"],[1,"p-0","m-0"],[1,"fw-bold","fs-19","w-30"],[1,"fs-19","w-70"],["class","p-0 m-0",4,"ngIf"],["class","p-0 m-0","style","background-color: black; color: white",4,"ngIf"],["class","p-0 m-0","style","background-color: rgb(113, 112, 112); color: white",4,"ngIf"],["class","row me-0 ms-0 ps-0 pe-0 breakthepage",4,"ngIf"],[4,"ngIf"],[1,"p-0","m-0",2,"background-color","black","color","white"],["colspan","2",1,"fw-bold","fs-19","text-center"],["colspan","2",1,"fs-19"],[1,"break-word"],[1,"break-word",3,"innerHTML"],[1,"p-0","m-0",2,"background-color","rgb(113, 112, 112)","color","white"],["class","fw-bold fs-19 text-center w-50",4,"ngIf"],[1,"fw-bold","fs-19","text-center","w-50"],["class","fs-19 w-50",4,"ngIf"],[1,"fs-19","w-50"],[1,"fs-19","mb-0"],[1,"ri-user-3-line","align-bottom"],[1,"ri-outlet-2-line","align-bottom"],[1,"ri-calendar-2-line","align-bottom"],[1,"ri-edit-2-line","align-bottom"],[1,"row","me-0","ms-0","ps-0","pe-0","breakthepage"],["class","col-12 mb-1 mt-2 p-0",4,"ngIf"],["colspan","2",1,"fw-bold","fs-19"],["class","card-body p-4",4,"ngIf"],[1,"card-body","p-4"],[1,"card-title","mb-4"],[1,"px-3","mx-n3"],[4,"ngFor","ngForOf"],["class","d-flex mb-2",4,"ngIf"],["class","mt-2 text-end",4,"ngIf"],[1,"d-flex","mb-2"],[1,"flex-shrink-0"],["alt","",1,"avatar-xs","rounded-circle",3,"src"],[1,"flex-grow-1","ms-3"],[1,"fs-16"],[1,"text-muted"],[1,"text-muted","fs-13","break-word"],[1,"mt-2","text-end"],[1,"d-flex","justify-content-end"],[1,""],[1,"ms-3","text-start"],[1,"col-12","mb-1","mt-2","p-0","text-center"],[1,"mt-2","mb-3"],[1,"row","me-0","ms-0"],["class","col-3 paddinBorh pb-2 pt-2 mb-2",4,"ngFor","ngForOf"],[1,"col-3","paddinBorh","pb-2","pt-2","mb-2"],["alt","img",1,"img-fluid","img-size-withd-upload",3,"src"],["colspan","2",1,"fs-19","w-100"],["class","p-0 m-0 text-center","style","background-color: black; color: white",4,"ngIf"],["class","mt-2 mb-2 img-sign-fixed",3,"src",4,"ngIf"],["class","fs-19 mb-0",4,"ngIf"],["class","break-word",4,"ngIf"],[1,"mt-2","mb-2","img-sign-fixed",3,"src"],[1,"mb-1","mt-1"],[1,"row","mb-3","mt-3","me-0","ms-0"],["class","col-3 paddinBorh pb-2 pt-2 mb-2",4,"ngIf"],[1,"figure"],["alt","",1,"img-fluid","img-size-withd-upload",3,"src"],[1,"figure-caption"],[1,"mb-0","mt-1"],[1,"col-6","fs-19"],[1,"col-6","mt-1","text-end"],[1,"fs-19","w-30"],[1,"fs-16","mb-0"],[1,"p-0","m-0","w-100","text-center",2,"background-color","#a7a6a6","color","black"],["class","w-50",3,"w-100",4,"ngIf"],[1,"w-50"],[1,"paddinBorh","pb-2","pt-2","mb-2"],["class","row me-0 ms-0 ps-0 pe-0 breakthepage",4,"ngFor","ngForOf"],[3,"QuotId","ticketInfo"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"img",6),e.qZA(),e.TgZ(7,"div",7)(8,"h6",8),e._uU(9),e.qZA(),e.TgZ(10,"p",9),e._uU(11),e.qZA(),e.TgZ(12,"p",9),e._uU(13),e.qZA(),e.TgZ(14,"p",10)(15,"span"),e._uU(16,"Zip-code: "),e.qZA(),e._uU(17),e.qZA()()()(),e.TgZ(18,"div",11),e._UZ(19,"div",12),e.qZA()()(),e.TgZ(20,"div",13)(21,"h3",14),e._uU(22),e.qZA()(),e.TgZ(23,"div",15)(24,"div",2)(25,"div",16)(26,"h3",17)(27,"b"),e._uU(28," Title: "),e.qZA(),e._uU(29),e.qZA()(),e.TgZ(30,"div",18)(31,"p",19)(32,"b"),e._uU(33,"Client: "),e.qZA(),e._uU(34),e.qZA(),e.TgZ(35,"p",19)(36,"b"),e._uU(37," Project: "),e.qZA(),e._uU(38),e.qZA()(),e.TgZ(39,"div",18)(40,"p",20)(41,"b"),e._uU(42," Created Date: "),e.qZA(),e._uU(43),e.qZA(),e.TgZ(44,"p",19)(45,"b"),e._uU(46,"Created By: "),e.qZA(),e._uU(47),e.qZA()()()(),e.TgZ(48,"div",21)(49,"table",22)(50,"tbody")(51,"tr",23)(52,"td",24)(53,"h2",25),e._uU(54,"Ticket Details"),e.qZA()()(),e.TgZ(55,"tr",26)(56,"td",27),e._uU(57,"Service Type"),e.qZA(),e.TgZ(58,"td",28),e._uU(59),e.qZA()(),e.TgZ(60,"tr",26)(61,"td",27),e._uU(62,"Ticket Type"),e.qZA(),e.TgZ(63,"td",28),e._uU(64),e.qZA()(),e.TgZ(65,"tr",26)(66,"td",27),e._uU(67,"Bill Type"),e.qZA(),e.TgZ(68,"td",28),e._uU(69),e.qZA()(),e.TgZ(70,"tr",26)(71,"td",27),e._uU(72,"Priority"),e.qZA(),e.TgZ(73,"td",28),e._uU(74),e.qZA()(),e.TgZ(75,"tr",26)(76,"td",27),e._uU(77,"Status"),e.qZA(),e.TgZ(78,"td",28),e._uU(79),e.qZA()(),e.YNc(80,Di,5,1,"tr",29)(81,Ui,5,1,"tr",29)(82,qi,3,0,"tr",30)(83,Si,5,1,"tr",29)(84,Li,3,0,"tr",30)(85,Ni,3,1,"tr",29)(86,Mi,3,2,"tr",31)(87,Pi,3,2,"tr",29),e.qZA()()()(),e.YNc(88,Wi,2,1,"div",32)(89,zi,2,1,"ng-container",33)(90,en,7,1,"div",32)(91,wn,36,13,"div",32)(92,Mn,77,17,"div",32)(93,Qn,2,1,"ng-container",33)),2&a&&(e.xp6(6),e.Q6J("src",null!=n.ticketData[0]&&n.ticketData[0].companyLogoURL?n.imageUrl+(null==n.ticketData[0]?null:n.ticketData[0].companyLogoURL):"../../../../../../assets/images/placeholderimage.png",e.LSH),e.xp6(3),e.hij(" ",n.companyData.companyName," "),e.xp6(2),e.hij(" ",n.companyData.address1," "),e.xp6(2),e.lnq(" ",n.companyData.address2?n.companyData.address2:""," ",null!=n.companyData&&n.companyData.address3?null==n.companyData?null:n.companyData.address3:""," ",null!=n.companyData&&n.companyData.country?null==n.companyData?null:n.companyData.country:""," "),e.xp6(4),e.hij(" ",n.companyData.postalCode," "),e.xp6(5),e.hij("#",null==n.ticketData[0]?null:n.ticketData[0].ticketNo,""),e.xp6(7),e.hij("",null==n.ticketData[0]?null:n.ticketData[0].ticketTitle," "),e.xp6(5),e.hij("",(null==n.ticketData[0]?null:n.ticketData[0].clientName)||"NA"," "),e.xp6(4),e.hij("",(null==n.ticketData[0]?null:n.ticketData[0].projectName)||"NA"," "),e.xp6(5),e.hij("",(null==n.ticketData[0]?null:n.ticketData[0].createdDate)||"NA"," "),e.xp6(4),e.hij("",(null==n.ticketData[0]?null:n.ticketData[0].requesterName)||"NA"," "),e.xp6(12),e.hij(" ",(null==n.ticketData[0]?null:n.ticketData[0].operationType)||"NA"," "),e.xp6(5),e.hij(" ",1==(null==n.ticketData[0]?null:n.ticketData[0].isDeviceRelated)?"Hardware":"Non-Hardware"," "),e.xp6(5),e.hij(" ",!0===(null==n.ticketData[0]?null:n.ticketData[0].isBillingRequired)?"Billable":"Not Billable"," "),e.xp6(5),e.hij(" ",(null==n.ticketData[0]?null:n.ticketData[0].urgencyTypeName)||"-"," "),e.xp6(5),e.hij(" ",null==n.ticketData[0]?null:n.ticketData[0].ticketStatusName," "),e.xp6(1),e.Q6J("ngIf",null==n.ticketData[0]?null:n.ticketData[0].ticketVerifiedBy),e.xp6(1),e.Q6J("ngIf",null==n.ticketData[0]?null:n.ticketData[0].ticketVerifiedDateTime),e.xp6(1),e.Q6J("ngIf",n.ticketData[0].ticketVerifiedRemark),e.xp6(1),e.Q6J("ngIf",n.ticketData[0].ticketVerifiedRemark),e.xp6(1),e.Q6J("ngIf",n.ticketData[0].issueDescription),e.xp6(1),e.Q6J("ngIf",n.ticketData[0].issueDescription),e.xp6(1),e.Q6J("ngIf",n.ticketData[0].ticketClosedRemark||n.ticketData[0].ticketAcknoledgeRemark),e.xp6(1),e.Q6J("ngIf",n.ticketData[0].ticketClosedRemark||n.ticketData[0].ticketAcknoledgeRemark),e.xp6(1),e.Q6J("ngIf",0!=(null==n.ticketDisscusionArrayListGlobal?null:n.ticketDisscusionArrayListGlobal.length)),e.xp6(1),e.Q6J("ngIf",n.shownOffInternalChat),e.xp6(1),e.Q6J("ngIf",0!=(null==n.selectePasteUplaodArray?null:n.selectePasteUplaodArray.length)),e.xp6(1),e.Q6J("ngIf",0!=(null==n.incidentList?null:n.incidentList.length)),e.xp6(1),e.Q6J("ngIf",0!=(null==n.ticketWOTechAssignment?null:n.ticketWOTechAssignment.length)),e.xp6(1),e.Q6J("ngIf",0!=(null==n.totalQuotationCountList?null:n.totalQuotationCountList.length)))},dependencies:[m.sg,m.O5,wi],styles:[".fso-17[_ngcontent-%COMP%]{font-size:18px}.fs-25[_ngcontent-%COMP%]{font-size:25px}.fso-20[_ngcontent-%COMP%]{font-size:22px}.border-gradient-1[_ngcontent-%COMP%]{border-width:4px;border-style:solid;border-color:#5ea3cb;margin-bottom:8px}.border-left[_ngcontent-%COMP%]{padding-top:5px;border-left:5px solid white;margin-bottom:5px}.bgDark[_ngcontent-%COMP%]{background-color:#000!important}.border-around[_ngcontent-%COMP%]{border:1px solid #e9ebec;border-radius:1px}.pl-4p[_ngcontent-%COMP%]{padding-left:4px}.w-30[_ngcontent-%COMP%]{width:30%}.w-70[_ngcontent-%COMP%]{width:70%}.w-50[_ngcontent-%COMP%]{width:50%}.break-word[_ngcontent-%COMP%]{white-space:initial}@media print{.card[_ngcontent-%COMP%]{border:0px solid #fff}.breakthepage[_ngcontent-%COMP%]{page-break-before:always!important}.bgDark[_ngcontent-%COMP%]{background-color:#000!important}.breaktheAfterpage[_ngcontent-%COMP%]{page-break-after:always!important}}.table[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(caption) > *[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{padding:.1rem .2rem}.img-size-fixed[_ngcontent-%COMP%], .img-size-fixed-sign[_ngcontent-%COMP%]{width:350px!important;height:350px!important}.img-sign-fixed[_ngcontent-%COMP%]{height:100px;width:200px}.imgeVal[_ngcontent-%COMP%]{height:400px!important;width:400px!important}.paddinBorh[_ngcontent-%COMP%]{padding-left:8px;padding-right:8px}.imgHeight[_ngcontent-%COMP%]{height:200px}.img-size-withd-upload[_ngcontent-%COMP%]{border-radius:12px;width:300px;height:120px}"]})}}return i})();const Rn=["customNav"],Fn=["defaultNav"],jn=["iscloseTicketModalPopup"],Bn=["scrollframeGlobal"],Gn=["scrollframe"],Wn=["videoPlayer"],Yn=["item"];function Hn(i,s){if(1&i&&(e.TgZ(0,"div",7)(1,"div")(2,"h4",33),e._uU(3),e.qZA()()()),2&i){const t=s.$implicit;e.xp6(3),e.hij(" ",(null==t?null:t.ticketTitle)||"NA"," ")}}function En(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",34)(1,"app-flow-chart-with-digram",35),e.NdJ("sendToActivingForTab",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.openTheActiveTab(n))}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("isBillingRequired",null==(null==t.ticketData[0]?null:t.ticketData[0].isBillingRequired)?"null":!0===(null==t.ticketData[0]?null:t.ticketData[0].isBillingRequired)?"true":"false")("isGlobal",null!=t.ticketData[0]&&t.ticketData[0].isGlobal?"true":"false")("ticketStatusId",null==t.ticketData[0]?null:t.ticketData[0].ticketStatusId)("SeviceType",0!=t.ticketReportIncident.length&&t.ticketData?"Incident":"Service")("incindetTechSignImageURL",null==t.ticketReportIncident[0]?null:t.ticketReportIncident[0].incindetTechSignImageURL)("incindetClientSignImageURL",null==t.ticketReportIncident[0]?null:t.ticketReportIncident[0].incindetClientSignImageURL)("workFlowRequired",t.maintenanceWorkflowAuditList)}}function Xn(i,s){if(1&i&&e._UZ(0,"div",58),2&i){const t=e.oxw().$implicit,a=e.oxw(3);e.Q6J("innerHTML",a.returnHtml(t.issueDescription),e.oJD)}}function Kn(i,s){1&i&&(e.TgZ(0,"p",59),e._uU(1," No Ticket Description "),e.qZA())}function zn(i,s){if(1&i&&(e.TgZ(0,"div",52)(1,"h6",53),e._uU(2," Ticket Verified Remark "),e.qZA(),e.TgZ(3,"p",59),e._uU(4),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(4),e.hij(" ",t.ticketVerifiedRemark," ")}}function $n(i,s){if(1&i&&(e.TgZ(0,"p",64),e._UZ(1,"i",71),e._uU(2),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(2),e.hij(" ",t.ticketAcknoledgeDesig||"NA"," ")}}function ea(i,s){if(1&i&&(e.TgZ(0,"div",60)(1,"div",61)(2,"div",62)(3,"h5",63),e._uU(4),e.qZA(),e.TgZ(5,"p",64)(6,"b"),e._UZ(7,"i",65),e._uU(8),e.qZA()(),e.YNc(9,$n,3,1,"p",66),e.TgZ(10,"p",67),e._UZ(11,"i",68),e._uU(12),e.qZA(),e.TgZ(13,"p",69),e._UZ(14,"i",70),e._uU(15),e.qZA()()()()),2&i){const t=e.oxw().$implicit,a=e.oxw(3);e.xp6(1),e.Q6J("@blink",a.blinkStateInternal),e.xp6(3),e.hij(" Acknowledge By ",t.companyName," "),e.xp6(4),e.hij(" ",t.ticketAcknoledgeBy," "),e.xp6(1),e.Q6J("ngIf",t.ticketAcknoledgeDesig),e.xp6(3),e.hij(" ",t.ticketAcknoledgeDateTime||"NA"," "),e.xp6(3),e.hij(" ",t.ticketAcknoledgeRemark," ")}}function ta(i,s){if(1&i&&(e.TgZ(0,"h5",63),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" Acknowledge By ",t.clientName," ")}}function ia(i,s){if(1&i&&(e.TgZ(0,"h5",63),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" Acknowledge By ",t.companyName," ")}}function na(i,s){if(1&i&&(e.TgZ(0,"p",64),e._UZ(1,"i",71),e._uU(2),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(2),e.hij(" ",t.ticketClosedDesig," ")}}function aa(i,s){if(1&i&&(e.TgZ(0,"div",60)(1,"div",61)(2,"div",62),e.YNc(3,ta,2,1,"h5",72)(4,ia,2,1,"h5",72),e.TgZ(5,"p",64)(6,"b"),e._UZ(7,"i",65),e._uU(8),e.qZA()(),e.YNc(9,na,3,1,"p",66),e.TgZ(10,"p",67),e._UZ(11,"i",68),e._uU(12),e.qZA(),e.TgZ(13,"p",69),e._UZ(14,"i",70),e._uU(15),e.qZA()()()()),2&i){const t=e.oxw().$implicit,a=e.oxw(3);e.xp6(1),e.Q6J("@blink2",a.blinkStateClient),e.xp6(2),e.Q6J("ngIf",t.isGlobal),e.xp6(1),e.Q6J("ngIf",!t.isGlobal),e.xp6(4),e.hij(" ",t.ticketClosedBy," "),e.xp6(1),e.Q6J("ngIf",t.ticketClosedDesig),e.xp6(3),e.hij(" ",t.ticketClosedDateTime," "),e.xp6(3),e.hij(" ",t.ticketClosedRemark," ")}}function oa(i,s){if(1&i&&(e.TgZ(0,"div",51)(1,"div",6)(2,"div",52)(3,"h6",53),e._uU(4," Ticket Description "),e.qZA(),e.YNc(5,Xn,1,1,"div",54)(6,Kn,2,0,"p",55),e.qZA(),e.YNc(7,zn,5,1,"div",56)(8,ea,16,6,"div",57)(9,aa,16,7,"div",57),e.qZA()()),2&i){const t=s.$implicit;e.xp6(5),e.Q6J("ngIf",t.issueDescription),e.xp6(1),e.Q6J("ngIf",!t.issueDescription),e.xp6(1),e.Q6J("ngIf",t.ticketVerifiedRemark),e.xp6(1),e.Q6J("ngIf",t.ticketAcknoledgeRemark),e.xp6(1),e.Q6J("ngIf",t.ticketClosedRemark)}}function sa(i,s){1&i&&(e.TgZ(0,"div",79),e._UZ(1,"img",80),e.qZA())}function la(i,s){if(1&i&&(e.TgZ(0,"div",86)(1,"div",87),e._UZ(2,"img",88),e.qZA(),e.TgZ(3,"div",89)(4,"h5",90),e._uU(5),e.TgZ(6,"small",91),e._uU(7),e.qZA()(),e.TgZ(8,"p",91),e._uU(9),e.qZA()()()),2&i){const t=e.oxw().$implicit,a=e.oxw(6);e.xp6(2),e.hYB("src","",a.imageUrl,"",t.profileImageUrl,"",e.LSH),e.xp6(3),e.hij(" ",t.msgByName," "),e.xp6(2),e.Oqu(t.createDateTime),e.xp6(2),e.hij(" ",t.messageContain," ")}}function ca(i,s){if(1&i&&(e.TgZ(0,"div",92)(1,"div",93)(2,"div",94),e._UZ(3,"img",88),e.qZA(),e.TgZ(4,"div",95)(5,"h5",90),e._uU(6),e.TgZ(7,"small",91),e._uU(8),e.qZA()(),e.TgZ(9,"p",91),e._uU(10),e.qZA()()()()),2&i){const t=e.oxw().$implicit,a=e.oxw(6);e.xp6(3),e.hYB("src","",a.imageUrl,"",t.profileImageUrl,"",e.LSH),e.xp6(3),e.hij(" ",t.msgByName," "),e.xp6(2),e.hij("",t.createDateTime," "),e.xp6(2),e.hij(" ",t.messageContain," ")}}function ra(i,s){if(1&i&&(e.ynx(0),e.YNc(1,la,10,5,"div",84)(2,ca,11,5,"div",85),e.BQk()),2&i){const t=s.$implicit;e.xp6(1),e.Q6J("ngIf",0==t.isClient),e.xp6(1),e.Q6J("ngIf",1==t.isClient)}}function da(i,s){if(1&i&&(e.TgZ(0,"div")(1,"div",81,82),e.YNc(3,ra,3,2,"ng-container",83),e.qZA()()),2&i){const t=e.oxw(5);e.xp6(3),e.Q6J("ngForOf",t.ticketDisscusionArrayListGlobal)}}function pa(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",96)(1,"div",97)(2,"div",2)(3,"label",98),e._uU(4,"Leave a Comments"),e.qZA(),e.TgZ(5,"textarea",99),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw(5);return e.KtG(o.MessageContainGlobal=n)}),e.qZA(),e.TgZ(6,"label",100),e._uU(7),e.qZA()(),e.TgZ(8,"div",101)(9,"a",102),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(5);return e.KtG(n.submitChatGlobal())}),e._uU(10,"Post Comments"),e.qZA()()()()}if(2&i){const t=e.oxw(5);e.xp6(5),e.Q6J("maxlength",t.maxCharMessage)("ngModel",t.MessageContainGlobal),e.xp6(2),e.AsE(" Characters Remaining: ",t.MessageContainGlobal.length,"/",t.maxCharMessage,"")}}function _a(i,s){if(1&i&&(e.TgZ(0,"div",75)(1,"h5",76),e._uU(2," Discussion "),e.qZA(),e.YNc(3,sa,2,0,"div",77)(4,da,4,1,"div",21)(5,pa,11,4,"div",78),e.qZA()),2&i){const t=e.oxw(4);e.xp6(3),e.Q6J("ngIf",0==t.ticketDisscusionArrayListGlobal.length),e.xp6(1),e.Q6J("ngIf",0!=t.ticketDisscusionArrayListGlobal.length),e.xp6(1),e.Q6J("ngIf",32!=(null==t.ticketData[0]?null:t.ticketData[0].ticketStatusId)&&19!=(null==t.ticketData[0]?null:t.ticketData[0].ticketStatusId))}}function ma(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"li",73),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(3);return e.KtG(n.ondectionChange())}),e.TgZ(2,"a",41),e._UZ(3,"i",74),e._uU(4," Discussion "),e.qZA(),e.YNc(5,_a,6,3,"ng-template",20),e.qZA(),e.BQk()}2&i&&(e.xp6(1),e.Q6J("ngbNavItem",1))}function ga(i,s){1&i&&(e.TgZ(0,"div",79),e._UZ(1,"img",80),e.qZA())}function ua(i,s){if(1&i&&(e.TgZ(0,"div",86)(1,"div",87),e._UZ(2,"img",88),e.qZA(),e.TgZ(3,"div",89)(4,"h5",90),e._uU(5),e.TgZ(6,"small",91),e._uU(7),e.qZA()(),e.TgZ(8,"p",91),e._uU(9),e.qZA()()()),2&i){const t=e.oxw().$implicit,a=e.oxw(6);e.xp6(2),e.hYB("src","",a.imageUrl,"",t.profileImageUrl,"",e.LSH),e.xp6(3),e.hij(" ",t.msgByName," "),e.xp6(2),e.Oqu(t.createDateTime),e.xp6(2),e.hij(" ",t.messageContain," ")}}function ha(i,s){if(1&i&&(e.TgZ(0,"div",92)(1,"div",93)(2,"div",94),e._UZ(3,"img",88),e.qZA(),e.TgZ(4,"div",95)(5,"h5",90),e._uU(6),e.TgZ(7,"small",91),e._uU(8),e.qZA()(),e.TgZ(9,"p",91),e._uU(10),e.qZA()()()()),2&i){const t=e.oxw().$implicit,a=e.oxw(6);e.xp6(3),e.hYB("src","",a.imageUrl,"",t.profileImageUrl,"",e.LSH),e.xp6(3),e.hij(" ",t.msgByName," "),e.xp6(2),e.hij("",t.createDateTime," "),e.xp6(2),e.hij(" ",t.messageContain," ")}}function Ta(i,s){if(1&i&&(e.ynx(0,null,105),e.YNc(2,ua,10,5,"div",84)(3,ha,11,5,"div",85),e.BQk()),2&i){const t=s.$implicit;e.xp6(2),e.Q6J("ngIf",0==t.isClient),e.xp6(1),e.Q6J("ngIf",1==t.isClient)}}function fa(i,s){if(1&i&&(e.TgZ(0,"div")(1,"div",81,104),e.YNc(3,Ta,4,2,"ng-container",83),e.qZA()()),2&i){const t=e.oxw(5);e.xp6(3),e.Q6J("ngForOf",t.ticketDisscusionArrayList)}}function ka(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",96)(1,"div",97)(2,"div",2)(3,"label",98),e._uU(4,"Leave a Comments"),e.qZA(),e.TgZ(5,"textarea",99),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw(5);return e.KtG(o.MessageContain=n)}),e.qZA(),e.TgZ(6,"label",100),e._uU(7),e.qZA()(),e.TgZ(8,"div",101)(9,"a",102),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(5);return e.KtG(n.submitChat())}),e._uU(10,"Post Comments"),e.qZA()()()()}if(2&i){const t=e.oxw(5);e.xp6(5),e.Q6J("maxlength",t.maxCharMessage)("ngModel",t.MessageContain),e.xp6(2),e.AsE(" Characters Remaining: ",t.MessageContain.length,"/",t.maxCharMessage,"")}}function ba(i,s){if(1&i&&(e.TgZ(0,"div",75)(1,"h5",76),e._uU(2," Discussion "),e.qZA(),e.YNc(3,ga,2,0,"div",77)(4,fa,4,1,"div",21)(5,ka,11,4,"div",78),e.qZA()),2&i){const t=e.oxw(4);e.xp6(3),e.Q6J("ngIf",0==t.ticketDisscusionArrayList.length),e.xp6(1),e.Q6J("ngIf",0!=t.ticketDisscusionArrayList.length),e.xp6(1),e.Q6J("ngIf",32!=(null==t.ticketData[0]?null:t.ticketData[0].ticketStatusId)&&19!=(null==t.ticketData[0]?null:t.ticketData[0].ticketStatusId))}}function va(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"li",73),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(3);return e.KtG(n.ondectionChange())}),e.TgZ(2,"a",41),e._UZ(3,"i",103),e._uU(4," Internal Discussion "),e.qZA(),e.YNc(5,ba,6,3,"ng-template",20),e.qZA(),e.BQk()}2&i&&(e.xp6(1),e.Q6J("ngbNavItem",2))}function xa(i,s){if(1&i){const t=e.EpF();e.YNc(0,oa,10,5,"div",46),e._UZ(1,"div",47),e.TgZ(2,"ul",48,49),e.NdJ("activeIdChange",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.mainDiscussion=n)})("navChange",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onNavChange(n))}),e.YNc(4,ma,6,1,"ng-container",21)(5,va,6,1,"ng-container",21),e.qZA(),e.TgZ(6,"div",50),e._UZ(7,"div",25),e.qZA()}if(2&i){const t=e.MAs(3),a=e.oxw(2);e.Q6J("ngForOf",a.ticketData),e.xp6(2),e.Q6J("activeId",a.mainDiscussion),e.xp6(2),e.Q6J("ngIf",a.shownOffGlobalChat),e.xp6(1),e.Q6J("ngIf",a.shownOffInternalChat),e.xp6(2),e.Q6J("ngbNavOutlet",t)}}function Za(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",106)(2,"app-view-incident-ticket",107),e.NdJ("sendUpdateIncident",function(n){e.CHM(t);const o=e.oxw(3);return e.KtG(o.getUpadateIncident(n))}),e.qZA()()()}if(2&i){const t=e.oxw(3);e.xp6(2),e.Q6J("incidentList",t.ticketReportIncident[0])("ticketData",t.ticketData)}}function Ca(i,s){1&i&&(e.ynx(0),e.TgZ(1,"li",40)(2,"a",41)(3,"div",42)(4,"p",43),e._uU(5,"Incident"),e.qZA()()(),e.YNc(6,Za,3,2,"ng-template",20),e.qZA(),e.BQk()),2&i&&(e.xp6(1),e.Q6J("ngbNavItem",2))}function Ia(i,s){if(1&i&&e._UZ(0,"app-audit-chart",108),2&i){const t=e.oxw(3);e.Q6J("Data",t.maintenanceWorkflowAuditList)("showRequester",!1)}}function ya(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"li",73),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.getV2_MaintenanceWorkflowAudit(n.storeTicketId))}),e.TgZ(2,"a",41)(3,"div",42)(4,"p",43),e._uU(5," WorkFlow Audit "),e.qZA()()(),e.YNc(6,Ia,1,2,"ng-template",20),e.qZA(),e.BQk()}2&i&&(e.xp6(1),e.Q6J("ngbNavItem",3))}function wa(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",111)(1,"img",112),e.NdJ("click",function(){const o=e.CHM(t).index,l=e.oxw(4);return e.KtG(l.openAllCopyPasteImage(l.selectePasteUplaodArray,o))}),e.qZA()()}if(2&i){const t=s.$implicit,a=e.oxw(4);e.xp6(1),e.Q6J("src",a.imageUrl+t.imageUrl,e.LSH)}}function Aa(i,s){if(1&i&&(e.TgZ(0,"div",109),e.YNc(1,wa,2,1,"div",110),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.selectePasteUplaodArray)}}function Da(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"li",73),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.getV2_TicketImagesList(n.storeTicketId))}),e.TgZ(2,"a",41)(3,"div",42)(4,"p",43),e._uU(5,"Gallery"),e.qZA()()(),e.YNc(6,Aa,2,1,"ng-template",20),e.qZA(),e.BQk()}2&i&&(e.xp6(1),e.Q6J("ngbNavItem",4))}function Ua(i,s){1&i&&(e.ynx(0),e.TgZ(1,"tr")(2,"td",117),e._uU(3," No File Data "),e.qZA()(),e.BQk())}function qa(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"tr")(1,"td",118)(2,"a",119),e._uU(3),e.qZA()(),e.TgZ(4,"td",120)(5,"i",121),e.NdJ("click",function(){const o=e.CHM(t).$implicit,l=e.oxw(5);return e.KtG(l.downloadFIle(o))}),e.qZA()()()}if(2&i){const t=s.$implicit;e.xp6(3),e.Oqu(t.fileName)}}function Sa(i,s){if(1&i&&(e.ynx(0),e.YNc(1,qa,6,1,"tr",83),e.BQk()),2&i){const t=e.oxw(4);e.xp6(1),e.Q6J("ngForOf",t.selectedTicketDocumentArray)}}function La(i,s){if(1&i&&(e.TgZ(0,"div",109)(1,"div",113)(2,"div",114)(3,"table",115)(4,"thead")(5,"tr",116)(6,"th"),e._uU(7,"File Name"),e.qZA(),e._UZ(8,"th"),e.qZA()(),e.TgZ(9,"tbody"),e.YNc(10,Ua,4,0,"ng-container",21)(11,Sa,2,1,"ng-container",21),e.qZA()()()()()),2&i){const t=e.oxw(3);e.xp6(10),e.Q6J("ngIf",0==t.selectedTicketDocumentArray.length),e.xp6(1),e.Q6J("ngIf",0!=t.selectedTicketDocumentArray.length)}}function Na(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"li",73),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.getV2_TicketDocument(n.storeTicketId))}),e.TgZ(2,"a",41)(3,"div",42)(4,"p",43),e._uU(5," Documents "),e.qZA()()(),e.YNc(6,La,12,2,"ng-template",20),e.qZA(),e.BQk()}2&i&&(e.xp6(1),e.Q6J("ngbNavItem",5))}function Oa(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",111)(1,"video",122),e.NdJ("click",function(){const o=e.CHM(t).$implicit,l=e.oxw(4),c=e.MAs(44);return e.KtG(l.openModaVideeo(o,c))}),e._UZ(2,"source",123),e.qZA()()}if(2&i){const t=s.$implicit,a=e.oxw(4);e.xp6(2),e.Q6J("src",a.imageUrl+t.fileURL,e.LSH)}}function Va(i,s){if(1&i&&(e.TgZ(0,"div",109),e.YNc(1,Oa,3,1,"div",110),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.selecteTicketVideoArray)}}function Ma(i,s){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"li",73),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.getV2_TicketVideo(n.storeTicketId))}),e.TgZ(2,"a",41)(3,"div",42)(4,"p",43),e._uU(5,"Video"),e.qZA()()(),e.YNc(6,Va,2,1,"ng-template",20),e.qZA(),e.BQk()}2&i&&(e.xp6(1),e.Q6J("ngbNavItem",6))}function Ja(i,s){if(1&i&&(e.TgZ(0,"span",139)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.hij(" ",!0===(null==t?null:t.isBillingRequired)?"Billable":"Not Billable","")}}function Qa(i,s){1&i&&(e.TgZ(0,"span",141),e._uU(1,"Internal Ticket"),e.qZA())}function Pa(i,s){if(1&i&&(e.TgZ(0,"tr")(1,"td",130),e._uU(2,"Internal/Global"),e.qZA(),e.TgZ(3,"td"),e.YNc(4,Qa,2,0,"span",140),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(4),e.Q6J("ngIf",!(null!=t&&t.isGlobal))}}function Ra(i,s){if(1&i&&(e.TgZ(0,"span",142),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",(null==t?null:t.urgencyTypeName)||"-"," ")}}function Fa(i,s){if(1&i&&(e.TgZ(0,"span",143),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",(null==t?null:t.urgencyTypeName)||"-"," ")}}function ja(i,s){if(1&i&&(e.TgZ(0,"span",144),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",(null==t?null:t.urgencyTypeName)||"-"," ")}}function Ba(i,s){if(1&i&&(e.TgZ(0,"tr")(1,"td",130),e._uU(2,"Verified By"),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(4),e.hij(" ",t.ticketVerifiedBy," ")}}function Ga(i,s){if(1&i&&(e.TgZ(0,"tr")(1,"td",130),e._uU(2," Ticket Verified Date Time "),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(4),e.hij(" ",t.ticketVerifiedDateTime," ")}}function Wa(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",145)(1,"button",146),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(3);return e.KtG(n.closeTicketModalPopup())}),e._uU(2," Ticket Close "),e.qZA()()}}function Ya(i,s){if(1&i&&(e.TgZ(0,"div",124)(1,"div",125)(2,"h5",126),e._uU(3,"Ticket Details"),e.qZA()(),e.TgZ(4,"div",51),e.YNc(5,Ja,3,1,"span",127),e.TgZ(6,"div",128)(7,"table",129)(8,"tbody")(9,"tr")(10,"td",130),e._uU(11,"Ticket No"),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.qZA()(),e.TgZ(14,"tr")(15,"td",130),e._uU(16,"Company"),e.qZA(),e.TgZ(17,"td"),e._uU(18),e.qZA()(),e.TgZ(19,"tr")(20,"td",130),e._uU(21,"Client"),e.qZA(),e.TgZ(22,"td"),e._uU(23),e.qZA()(),e.TgZ(24,"tr")(25,"td",130),e._uU(26,"Project"),e.qZA(),e.TgZ(27,"td"),e._uU(28),e.qZA()(),e.YNc(29,Pa,5,1,"tr",21),e.TgZ(30,"tr")(31,"td",130),e._uU(32,"Service Type"),e.qZA(),e.TgZ(33,"td"),e._uU(34),e.qZA()(),e.TgZ(35,"tr")(36,"td",130),e._uU(37,"Ticket Type"),e.qZA(),e.TgZ(38,"td",131),e._uU(39),e.qZA()(),e.TgZ(40,"tr")(41,"td",130),e._uU(42,"Ticket Category"),e.qZA(),e.TgZ(43,"td"),e._uU(44),e.qZA()(),e.TgZ(45,"tr")(46,"td",130),e._uU(47,"Created By"),e.qZA(),e.TgZ(48,"td"),e._uU(49),e.TgZ(50,"p",132),e._UZ(51,"i",133),e._uU(52),e.qZA()()(),e.TgZ(53,"tr")(54,"td",130),e._uU(55,"Created Date"),e.qZA(),e.TgZ(56,"td"),e._uU(57),e.qZA()(),e.TgZ(58,"tr")(59,"td",130),e._uU(60,"Priority"),e.qZA(),e.TgZ(61,"td"),e.YNc(62,Ra,2,1,"span",134)(63,Fa,2,1,"span",135)(64,ja,2,1,"span",136),e.qZA()(),e.TgZ(65,"tr")(66,"td",130),e._uU(67,"Status"),e.qZA(),e.TgZ(68,"td")(69,"span",137),e._uU(70),e.qZA()()(),e.YNc(71,Ba,5,1,"tr",21)(72,Ga,5,1,"tr",21),e.qZA()()()(),e.YNc(73,Wa,3,0,"div",138),e.qZA()),2&i){const t=s.$implicit,a=e.oxw(2);e.xp6(5),e.Q6J("ngIf",null!=(null==t?null:t.isBillingRequired)),e.xp6(8),e.hij("# ",(null==t?null:t.ticketNo)||"NA",""),e.xp6(5),e.Oqu((null==t?null:t.companyName)||"NA"),e.xp6(5),e.Oqu((null==t?null:t.clientName)||"NA"),e.xp6(5),e.Oqu((null==t?null:t.projectName)||"NA"),e.xp6(1),e.Q6J("ngIf",!(null!=t&&t.isGlobal)),e.xp6(5),e.Oqu((null==t?null:t.operationType)||"NA"),e.xp6(5),e.hij(" ",1==(null==t?null:t.isDeviceRelated)?"Hardware":"Non-Hardware"," "),e.xp6(5),e.Oqu((null==t?null:t.ticketTypeName)||"NA"),e.xp6(5),e.hij(" ",(null==t?null:t.requesterName)||"NA"," "),e.xp6(3),e.hij(" ",(null==t?null:t.requesterEmail)||"NA"," "),e.xp6(5),e.Oqu((null==t?null:t.createdDate)||"NA"),e.xp6(5),e.Q6J("ngIf","High"==(null==t?null:t.urgencyTypeName)),e.xp6(1),e.Q6J("ngIf","Low"==(null==t?null:t.urgencyTypeName)),e.xp6(1),e.Q6J("ngIf","Medium"==(null==t?null:t.urgencyTypeName)),e.xp6(5),e.Tol(a.returnStatusBadgeClassesStatus(t.ticketStatusId)),e.xp6(1),e.Oqu(t.ticketStatusName),e.xp6(1),e.Q6J("ngIf",t.ticketVerifiedBy),e.xp6(1),e.Q6J("ngIf",t.ticketVerifiedDateTime),e.xp6(1),e.Q6J("ngIf",a.updateTicketCloseVisiable)}}function Ha(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",36)(2,"div",37)(3,"ul",38,39),e.NdJ("activeIdChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.defaultNavActiveId=n)}),e.TgZ(5,"li",40)(6,"a",41)(7,"div",42)(8,"p",43),e._uU(9,"Ticket"),e.qZA()()(),e.YNc(10,xa,8,5,"ng-template",20),e.qZA(),e.YNc(11,Ca,7,1,"ng-container",21)(12,ya,7,1,"ng-container",21)(13,Da,7,1,"ng-container",21)(14,Na,7,1,"ng-container",21)(15,Ma,7,1,"ng-container",21),e.qZA(),e.TgZ(16,"div",24),e._UZ(17,"div",25),e.qZA()()(),e.TgZ(18,"div",44),e.YNc(19,Ya,74,21,"div",45),e.qZA()()}if(2&i){const t=e.MAs(4),a=e.oxw();e.xp6(3),e.Q6J("activeId",a.defaultNavActiveId),e.xp6(2),e.Q6J("ngbNavItem",1),e.xp6(6),e.Q6J("ngIf",0!=a.ticketReportIncident.length&&a.ticketData),e.xp6(1),e.Q6J("ngIf",0!=(null==a.maintenanceWorkflowAuditList?null:a.maintenanceWorkflowAuditList.length)),e.xp6(1),e.Q6J("ngIf",0!=(null==a.selectePasteUplaodArray?null:a.selectePasteUplaodArray.length)),e.xp6(1),e.Q6J("ngIf",0!=(null==a.selectedTicketDocumentArray?null:a.selectedTicketDocumentArray.length)),e.xp6(1),e.Q6J("ngIf",0!=(null==a.selecteTicketVideoArray?null:a.selecteTicketVideoArray.length)),e.xp6(2),e.Q6J("ngbNavOutlet",t),e.xp6(2),e.Q6J("ngForOf",a.ticketData)}}function Ea(i,s){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.hij("[",t.assetTicketItem.length,"]")}}function Xa(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",37)(1,"div",51)(2,"div",6)(3,"div",2)(4,"app-view-asset-ticket",147),e.NdJ("updateStatusAssetList",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.getupdateStatusAssetList(n))}),e.qZA()()()()()}if(2&i){const t=e.oxw();e.xp6(4),e.Q6J("ticketData",t.ticketData)("assetList",t.assetTicketItem)("mX_WorkOder",t.ticketWorkOder)}}function Ka(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"app-view-workorder-ticket",148),e.NdJ("setUpdateListValue",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.getUpdateListValue(n))}),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("mX_WOTechAssignment",t.ticketWOTechAssignment)("mX_WorkOder",t.ticketWorkOder)("ticketData",t.ticketData)("mx_WOStartEndTask",t.ticketWOStartEndTask)}}function za(i,s){1&i&&(e.ynx(0),e.TgZ(1,"li",18)(2,"a",19),e._uU(3," Service Order "),e.qZA(),e.YNc(4,Ka,1,4,"ng-template",20),e.qZA(),e.BQk()),2&i&&(e.xp6(1),e.Q6J("ngbNavItem",3))}function $a(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"app-add-quotation",149),e.NdJ("reSubmitedsubmitQuotation",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.getResponseAfterSubmitQuotation(n))}),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("ticketInfo",t.ticketData[0])("quotationObject",t.ticketQuotation)("mX_quotationItem",t.ticketQuotationItem)("reCreatedQuotation",!0)}}function eo(i,s){1&i&&(e.ynx(0),e.TgZ(1,"li",18)(2,"a",19),e._uU(3," Generate Quotation "),e.qZA(),e.YNc(4,$a,1,4,"ng-template",20),e.qZA(),e.BQk()),2&i&&(e.xp6(1),e.Q6J("ngbNavItem",4))}function to(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",152)(2,"button",153),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(3);return e.KtG(n.nextQuotation())}),e._uU(3," Pervious "),e.qZA(),e.TgZ(4,"h6",154),e._uU(5),e.qZA(),e.TgZ(6,"button",153),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(3);return e.KtG(n.previousQuotation())}),e._uU(7," Next "),e.qZA()()()}if(2&i){const t=e.oxw(3);e.xp6(2),e.Q6J("disabled",1==t.quotationCount),e.xp6(3),e.AsE(" ",t.quotationCount,"/",t.totalQuotationCount," "),e.xp6(1),e.Q6J("disabled",t.quotationCount==t.totalQuotationCount)}}function io(i,s){if(1&i){const t=e.EpF();e.YNc(0,to,8,4,"div",150),e.TgZ(1,"app-view-quotation-ticket",151),e.NdJ("resubmitQuotation",function(n){e.CHM(t);const o=e.oxw(2);return e.KtG(o.getResubmittedQuotationValue(n))}),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("ngIf",1!=t.totalQuotationCount),e.xp6(1),e.Q6J("ticketInfo",t.ticketData)("quotationObject",t.ticketQuotation)("mX_quotationItem",t.ticketQuotationItem)("resubmitButtonView",t.resubmitButtonView)}}function no(i,s){1&i&&(e.ynx(0),e.TgZ(1,"li",18)(2,"a",19),e._uU(3," View Quotation Details "),e.qZA(),e.YNc(4,io,2,5,"ng-template",20),e.qZA(),e.BQk()),2&i&&(e.xp6(1),e.Q6J("ngbNavItem",6))}function ao(i,s){if(1&i&&(e.TgZ(0,"div",155)(1,"div",156),e._UZ(2,"app-print-view-ticket",157),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("storeDataTicket",t.storeFullData)("totalQuotationCountList",t.totalQuotationCountList)("maintenanceWorkflowAuditList",t.maintenanceWorkflowAuditList)("selectePasteUplaodArray",t.selectePasteUplaodArray)("ticketDisscusionArrayListGlobal",t.ticketDisscusionArrayListGlobal)("ticketDisscusionArrayList",t.ticketDisscusionArrayList)("shownOffInternalChat",t.shownOffInternalChat)}}function oo(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",158)(1,"div",159)(2,"div",160)(3,"button",161),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.dismiss("Cross click"))}),e.qZA()(),e.TgZ(4,"div",162)(5,"div",94),e._UZ(6,"lord-icon",163),e.qZA(),e.TgZ(7,"h4",164),e._uU(8,"Ticket Close"),e.qZA(),e.TgZ(9,"p",165),e._uU(10," Are you sure you want to close this ticket? "),e._UZ(11,"br"),e._uU(12," Once submitted, it cannot be reverted. Please enter your remark or note. "),e.qZA(),e._UZ(13,"br"),e.TgZ(14,"div",6)(15,"div",166)(16,"textarea",167),e.NdJ("ngModelChange",function(n){e.CHM(t);const o=e.oxw();return e.KtG(o.updateTicKetCloseRemarkValue=n)}),e.qZA(),e.TgZ(17,"label",100),e._uU(18),e.qZA()()(),e._UZ(19,"br")(20,"br"),e.TgZ(21,"div",168)(22,"button",169),e.NdJ("click",function(n){const l=e.CHM(t).$implicit;return e.KtG(l.close("Ok",n))}),e._uU(23," Yes, Proceed! "),e.qZA(),e.TgZ(24,"button",170),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.dismiss("Cross click"))}),e._uU(25," Close "),e.qZA()()()()()}if(2&i){const t=e.oxw();e.xp6(16),e.Q6J("ngModel",t.updateTicKetCloseRemarkValue)("maxlength",t.maxCharsDecision),e.xp6(2),e.AsE(" Characters Remaining: ",null==t.updateTicKetCloseRemarkValue?null:t.updateTicKetCloseRemarkValue.length,"/",t.maxCharsDecision,""),e.xp6(4),e.Q6J("disabled",!t.updateTicKetCloseRemarkValue)}}function so(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",158)(1,"div",171)(2,"h5",172),e._uU(3," Print Report "),e.qZA(),e.TgZ(4,"button",173),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.dismiss("Cross click"))}),e.qZA()(),e.TgZ(5,"div",174),e._UZ(6,"app-print-view-ticket",175),e.qZA(),e.TgZ(7,"div",176)(8,"a",177),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.close("Close click"))}),e._UZ(9,"i",178),e._uU(10," Close"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(6),e.Q6J("storeDataTicket",t.storeFullData)}}function lo(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",179)(1,"h5",180),e._uU(2),e.qZA(),e.TgZ(3,"button",173),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.dismiss("Cross click"))}),e.qZA()(),e.TgZ(4,"div",181)(5,"div",182)(6,"video",183),e._UZ(7,"source",123),e.qZA()()(),e.TgZ(8,"div",176)(9,"button",184),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.close("Close click"))}),e._uU(10," Close "),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(2),e.hij(" ",t.storeInfomationVideo.preventiveTypeName," "),e.xp6(5),e.s9C("src",t.linkVideo,e.LSH)}}let E=(()=>{class i{constructor(t,a,n,o,l,c,g,u,v,h,_,f){this.router=t,this.modalService=a,this.ticketService=n,this.authService=o,this.menuService=l,this.commonFunctionService=c,this.helpDeskService=g,this.quotationService=u,this.lightbox=v,this.sanitizer=h,this.ngZone=_,this.location=f,this.blinkStateClient="end2",this.blinkStateInternal="end1",this.defaultNavActiveId=1,this.ticketData=[],this.assetTicketItem=[],this.ticketReportIncident=[],this.maxCharsDecision=300,this.breadCrumbItems=[{label:"Ticket"},{label:"Ticket View",active:!0}],this.quotationCount=1,this.totalQuotationCount=0,this.totalQuotationCountList=[],this.activeId=1,this.imageUrl=C.N.apiUrl,this.viewQuotationTabShown=!1,this.updateTicketCloseVisiable=!1,this.maintenanceWorkflowAuditList=[],this.generateQuotationTabShown=!1,this.resubmitButtonView=!1,this.shownQuotation=!0,this.maxCharMessage=2e3,this.MessageContain="",this.MessageContainGlobal="",this.takenAction=0,this.selectePasteUplaodArray=[],this.selectedTicketDocumentArray=[],this.selecteTicketVideoArray=[],this.onCurrentChatDection=!0,this.ticketDisscusionTotalRecordsFromApi=0,this.ticketDisscusionFrom=0,this.ticketDisscusionTo=0,this.ticketDisscusionPageSize=10,this.ticketDisscusionArrayList=[],this.ticketDisscusionPage=1,this.ticketDisscusionTotalRecordsFromApiGlobal=0,this.ticketDisscusionFromGlobal=0,this.ticketDisscusionToGlobal=0,this.ticketDisscusionPageSizeGlobal=10,this.ticketDisscusionArrayListGlobal=[],this.updateTicKetCloseRemarkValue="",this.mainDiscussion=1,this.isNearBottom=!0,this.firsttime=!0,this.shownOffInternalChat=!0,this.shownOffGlobalChat=!0,this.isPlay=!1,this.storeInfomationVideo="",this.linkVideo="",this.isProject=this.authService.getisProject(),this.storeTicketId=this.ticketService.sendTicketId?this.ticketService.sendTicketId:0,0==this.storeTicketId||null==this.storeTicketId?(this.location.back(),this.router.navigate([this.ticketService.lastStoreTicketRouterName])):(this.getTicketDetails(this.storeTicketId),this.getV2_TicketDocument(this.storeTicketId),this.getV2_MaintenanceWorkflowAudit(this.storeTicketId))}ngOnInit(){this.breadCrumbItems=[{label:"Ticket"},{label:"Ticket View",active:!0}],this.firsttime=!1,this.defaultNavActiveId=1}refreshThePage(){this.defaultNavActiveId=1,this.getTicketDetails(this.storeTicketId)}getupdateStatusAssetList(t){this.getTicketDetails(this.storeTicketId,"delete")}getTicketDetails(t,a="Normal",n=""){this.ticketService.getV2_TicketingAssetIncidentQuotWorkorderTask({TicketId:t}).subscribe(l=>{Object.keys(l.data).forEach(g=>{null===l.data[g]&&(l.data[g]=[])}),this.storeFullData=l,this.ticketData=l.data.mX_Ticketing?[l.data.mX_Ticketing]:[],this.assetTicketItem=l.data.mX_TicketItem?l.data.mX_TicketItem:[],this.ticketReportIncident=0!=l.data.mX_ReportIncident.length?[l.data.mX_ReportIncident]:[],this.ticketQuotation=l.data.mX_Quotation?l.data.mX_Quotation:[],this.ticketQuotationItem=l.data.mX_quotationItem?l.data.mX_quotationItem:[],this.ticketWorkOder=l.data.mX_WorkOder?l.data.mX_WorkOder:[],this.ticketWOTechAssignment=l.data.mX_WOTechAssignment?l.data.mX_WOTechAssignment:[],this.ticketWOStartEndTask=l.data.mx_WOStartEndTask?l.data.mx_WOStartEndTask:[],this.getChatData(),this.getV2_TicketDisscusion_ServerPaging(),this.getV2_TicketDisscusionGlobal_ServerPaging(),this.getV2_TicketImagesList(this.storeTicketId),this.getV2_TicketVideo(this.storeTicketId),"Normal"==a&&this.initaliseTypeForNewTicketStatus(this.ticketService.ticketPageAction),0!=l.listExtraQuot.length&&(this.totalQuotationCountList=l.listExtraQuot,this.totalQuotationCount=this.totalQuotationCountList.length,this.getV2_MX_QuotationAndItemDetails(this.totalQuotationCountList[0].quotId)),this.shownQuotation=!0;let c=JSON.parse(localStorage.getItem("currentUser")).role;"Client User"===c&&"Application User"===JSON.parse(localStorage.getItem("currentUser"))?.accessGroupName&&(this.shownQuotation=!1,this.activeId=1),"Help Desk"===c&&(this.shownQuotation=!1,this.activeId=1),"Technition"===c&&(this.shownQuotation=!1,this.activeId=1),"Service"==n&&(this.activeId=3),this.onMainNavChangeTab&&(this.activeId=this.onMainNavChangeTab)})}ondectionChange(){this.onCurrentChatDection=!1}getV2_TicketDisscusion_ServerPaging(t=50,a=0){this.ticketService.getV2_TicketDisscusion_ServerPaging({ticketId:this.storeTicketId,displayLength:t,displayStart:a}).subscribe(o=>{o.list.length>0?(this.ticketDisscusionTotalRecordsFromApi=o.list[0].totalCount,this.ticketDisscusionArrayList=o.list,this.ticketDisscusionFrom=o.list.reduce((l,c)=>c.rowNum<l?c.rowNum:l,o.list[0].rowNum),this.ticketDisscusionTo=o.list.reduce((l,c)=>c.rowNum>l?c.rowNum:l,o.list[0].rowNum),this.ticketDisscusionPageSize=t):0==this.ticketDisscusionArrayList.length&&0==o.list.length&&(this.ticketDisscusionPage=1,this.ticketDisscusionTotalRecordsFromApi=0,this.ticketDisscusionFrom=0,this.ticketDisscusionTo=0,this.ticketDisscusionPageSize=t)})}getV2_TicketDisscusionGlobal_ServerPaging(t=50,a=0){this.ticketService.getV2_TicketDisscusionGlobal_ServerPaging({ticketId:this.storeTicketId,displayLength:t,displayStart:a}).subscribe(o=>{o.list.length>0?(this.ticketDisscusionArrayListGlobal=o.list,this.ticketDisscusionTotalRecordsFromApiGlobal=o.list[0].totalCount,this.ticketDisscusionFromGlobal=o.list.reduce((l,c)=>c.rowNum<l?c.rowNum:l,o.list[0].rowNum),this.ticketDisscusionToGlobal=o.list.reduce((l,c)=>c.rowNum>l?c.rowNum:l,o.list[0].rowNum),this.ticketDisscusionPageSizeGlobal=t):0==this.ticketDisscusionArrayListGlobal.length&&0==o.list.length&&(this.ticketDisscusionTotalRecordsFromApiGlobal=0,this.ticketDisscusionFromGlobal=0,this.ticketDisscusionToGlobal=0,this.ticketDisscusionPageSizeGlobal=t)})}getV2_MX_QuotationAndItemDetails(t){this.quotationService.getV2_MX_QuotationAndItemDetails({QuotId:t}).subscribe(n=>{this.ticketQuotation=n.objList.mX_Quotation,this.ticketQuotationItem=n.objList.mX_quotationItem})}nextQuotation(){this.quotationCount>1&&this.quotationCount--,this.getV2_MX_QuotationAndItemDetails(this.totalQuotationCountList[this.quotationCount-1].quotId)}previousQuotation(){this.quotationCount<this.totalQuotationCount&&this.quotationCount++,this.getV2_MX_QuotationAndItemDetails(this.totalQuotationCountList[this.quotationCount-1].quotId)}returnStatusBadgeClassesStatus(t){return this.commonFunctionService.returnStatusBadgeClasses(t)}initaliseTypeForNewTicketStatus(t){"Basic Service Page"==t?this.activeId=3:"Basic Quotation Page"==t?this.activeId=6:"Waiting Client to Close Ticket"==t?this.updateTicketCloseVisiable=!0:"Total Ticket Quotation Rejected"==t?(this.activeId=6,this.resubmitButtonView=!0):this.activeId=1}getUpdateListValue(t){this.getTicketDetails(this.storeTicketId,"Normal","Service")}getResubmittedQuotationValue(t){this.generateQuotationTabShown=t,this.activeId=4,this.resubmitButtonView=!1}getUpadateIncident(t){this.getTicketDetails(this.storeTicketId,"delete")}closeTicketModalPopup(){this.modalService.open(this.iscloseTicketModalPopup,{backdrop:"static",keyboard:!1,centered:!0}).result.then(t=>{this.updateTicketClose(this.updateTicKetCloseRemarkValue)},t=>{})}updateTicketClose(t){this.ticketService.getV2_UpdateTicketClose({ticketId:this.ticketService.sendTicketId,ticketClosedRemark:t}).subscribe(n=>{this.success(n),this.router.navigate([this.ticketService.lastStoreRouterDashboardName])})}success(t){k().fire({toast:!0,position:"top-end",icon:"success",title:t.message,showConfirmButton:!1,timer:3e3})}getV2_MaintenanceWorkflowAudit(t){this.ticketService.getV2_MaintenanceWorkflowAudit({TicketId:t}).subscribe(n=>{this.maintenanceWorkflowAuditList=n.data?n.data:[]})}getResponseAfterSubmitQuotation(t){this.getTicketDetails(this.storeTicketId),this.getV2_MaintenanceWorkflowAudit(this.storeTicketId),this.activeId=6,this.generateQuotationTabShown=!1,this.resubmitButtonView=!1}ngOnDestroy(){}goBack(){this.location.back(),this.router.navigate([this.ticketService.lastStoreTicketRouterName])}open(t){let n=[];n.push({src:t,caption:"",thumb:"thumb"}),this.lightbox.open(n)}fullSMModal(t){this.modalService.open(t,{size:"fullscreen",centered:!0})}printReport(){this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{try{document.execCommand("print",!1,null)}catch{window.print()}this.ngZone.run(()=>{console.log("Print operation completed")})},50)})}submitChat(){if(this.MessageContain){let t={TicketId:this.storeTicketId,MessageContain:this.MessageContain,IsClient:"Client"===this.authService.getRole(),AccessGroup:this.authService.getaccessGroupName()};this.ticketService.createV2_TicketDiscussion(t).subscribe(a=>{this.takenAction=2,this.scrollToTop(),this.refreshThePage(),this.MessageContain="",this.success(a),this.mainDiscussion=2})}else this.warning("Please Put Message  ")}submitChatGlobal(){if(this.MessageContainGlobal){let t={TicketId:this.storeTicketId,MessageContain:this.MessageContainGlobal,IsClient:"Client"===this.authService.getRole(),AccessGroup:this.authService.getaccessGroupName()};this.ticketService.createV2_TicketDiscussionGlobal(t).subscribe(a=>{this.takenAction=1,this.scrollToTopGlobal(),this.refreshThePage(),this.MessageContainGlobal="",this.success(a),this.mainDiscussion=1})}else this.warning("Please Put Message  ")}warning(t){k().fire({toast:!0,position:"top-end",icon:"warning",title:t,showConfirmButton:!1,timer:3e3})}ngAfterViewInit(){}ngAfterViewChecked(){0!=this.ticketDisscusionArrayListGlobal.length&&this.scrollFrameGlobal&&!this.scrollContainerGlobal&&(this.scrollContainerGlobal=this.scrollFrameGlobal.nativeElement),0!=this.ticketDisscusionArrayList.length&&this.scrollFrame&&!this.scrollContainer&&(this.scrollContainer=this.scrollFrame.nativeElement)}scrollToTopGlobal(){this.scrollContainerGlobal&&this.scrollContainerGlobal.scroll({top:0,left:0,behavior:"smooth"})}scrollToTop(){this.scrollContainer&&this.scrollContainer.scroll({top:0,left:0,behavior:"smooth"})}getChatData(){"Client User"===JSON.parse(localStorage.getItem("currentUser")).role?(this.shownOffInternalChat=!1,this.shownOffGlobalChat=!0,this.mainDiscussion=1,this.getV2_TicketDisscusionGlobal_ServerPaging()):("Software Support Dashboard Page"==this.ticketService.ticketPageAction&&(this.generateQuotationTabShown=!1,this.shownQuotation=!1,this.ticketData[0]?.isGlobal?(this.mainDiscussion=1,this.shownOffGlobalChat=!0):(this.mainDiscussion=2,this.shownOffGlobalChat=!1)),this.onCurrentChatDection&&("Message Internal Chat Helpdesk Ticket Page"==this.ticketService.ticketPageAction&&(this.mainDiscussion=2),"Message Global Chat Helpdesk Ticket Page"==this.ticketService.ticketPageAction&&(this.mainDiscussion=1))),2==this.takenAction?this.mainDiscussion=2:1==this.takenAction?this.mainDiscussion=1:this.takenAction=0}onNavChange(t){this.takenAction=1==t.activeId?2:2==t.activeId?1:0}openTheActiveTab(t){console.log(t),"Service Order"==t.title?"warning"!=t.background&&(this.generateQuotationTabShown?this.activeId=4:0!=this.ticketWorkOder?.length&&0!=this.ticketData.length?this.activeId=3:(this.activeId=1,this.defaultNavActiveId=1)):"Task"==t.title?"warning"!=t.background&&0!=this.ticketWorkOder?.length&&0!=this.ticketData.length&&(this.activeId=3):"Internal Verification"==t.title?"warning"!=t.background&&(this.activeId=1,this.defaultNavActiveId=1,this.startBlinkingInternal()):"Client Verification"==t.title?"warning"!=t.background&&("Second"==t.client?(this.activeId=1,this.defaultNavActiveId=2):(this.activeId=1,this.defaultNavActiveId=1,this.startBlinkingClient())):"Billing Verification"==t.title?(this.activeId=1,this.defaultNavActiveId=3):"Ticket Created"==t.title?(this.activeId=1,this.defaultNavActiveId=1):"Quotation"==t.title?"warning"!=t.background&&0!=this.ticketQuotation?.length&&this.shownQuotation&&(this.activeId=6):"Quotation Internal Verification"==t.title||"Quotation Client Verification"==t.title?(this.activeId=1,this.defaultNavActiveId=3):"Tech Signature Process"==t.title&&"warning"!=t.background&&(this.activeId=1,this.defaultNavActiveId=2)}startBlinkingInternal(){this.blinkStateInternal="start1",setTimeout(()=>{this.blinkStateInternal="end1"},1e3)}startBlinkingClient(){this.blinkStateClient="start2",setTimeout(()=>{this.blinkStateClient="end2"},1e3)}returnHtml(t){return this.sanitizer.bypassSecurityTrustHtml(t)}getV2_TicketImagesList(t){this.selectePasteUplaodArray=[],this.ticketService.getV2_TicketImagesList({TicketId:t}).subscribe(n=>{this.selectePasteUplaodArray=n.objImage?n.objImage:[],this.ticketData.length&&(this.ticketData[0].pic1_URL&&this.selectePasteUplaodArray.push({imageBase64Url:this.ticketData[0].pic1_URLBase64,imageUrl:this.ticketData[0].pic1_URL,ticketId:this.ticketData[0].ticketId,ticketImageId:0}),this.ticketData[0].pic2_URL&&this.selectePasteUplaodArray.push({imageBase64Url:this.ticketData[0].pic2_URLBase64,imageUrl:this.ticketData[0].pic2_URL,ticketId:this.ticketData[0].ticketId,ticketImageId:0}))})}getV2_TicketVideo(t){this.selecteTicketVideoArray=[],this.ticketService.getV2_TicketVideo({TicketId:t}).subscribe(n=>{this.selecteTicketVideoArray=n.list?n.list:[],console.log("vdo view::",this.selecteTicketVideoArray)})}openModaVideeo(t,a){this.storeInfomationVideo=t,this.linkVideo=C.N.apiUrl+t.fileURL,this.modalService.open(a,{ariaLabelledBy:"modal-basic-title",size:"md",centered:!0,backdrop:"static",keyboard:!1}).result.then(o=>{})}toggleVideo(){this.videoplayer.nativeElement.play()}playPause(){var t=document.getElementById("my_video_1");t.paused?t.play():t.pause()}getV2_TicketDocument(t){this.ticketService.getV2_TicketDocument({TicketId:t}).subscribe(n=>{this.selectedTicketDocumentArray=n.list?n.list:[]})}downloadFIle(t){let a=t.fileName.split(".");this.ticketService.downloadTikcetFile({FileURL:t.fileURL,ContentType:"application/"+a[a.length-1]}).subscribe(o=>{const l=new Blob([o],{type:"application/octet-stream"}),c=document.createElement("a");c.download=t.fileName,c.href=window.URL.createObjectURL(l),document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(c.href)})}openAllCopyPasteImage(t,a){let n=[];t.map(o=>{n.push({src:this.imageUrl+o.imageUrl,caption:"",thumb:"thumb"})}),this.lightbox.open(n,a,{showImageNumberLabel:!0,showRotate:!0,showZoom:!0})}onMainNavChange(t){this.onMainNavChangeTab=t.nextId}static{this.\u0275fac=function(a){return new(a||i)(e.Y36(x.F0),e.Y36(d.FF),e.Y36(I.w),e.Y36(y.u),e.Y36(D.l),e.Y36(Z.K),e.Y36(B.S),e.Y36(Y.G),e.Y36(H.ey),e.Y36(P.H7),e.Y36(e.R0b),e.Y36(m.Ye))}}static{this.\u0275cmp=e.Xpm({type:i,selectors:[["app-view-ticket"]],viewQuery:function(a,n){if(1&a&&(e.Gf(Rn,5),e.Gf(Fn,5),e.Gf(jn,7),e.Gf(Bn,5),e.Gf(Gn,5),e.Gf(Wn,5),e.Gf(Yn,5)),2&a){let o;e.iGM(o=e.CRH())&&(n.customNav=o.first),e.iGM(o=e.CRH())&&(n.defaultNav=o.first),e.iGM(o=e.CRH())&&(n.iscloseTicketModalPopup=o.first),e.iGM(o=e.CRH())&&(n.scrollFrameGlobal=o.first),e.iGM(o=e.CRH())&&(n.scrollFrame=o.first),e.iGM(o=e.CRH())&&(n.videoplayer=o.first),e.iGM(o=e.CRH())&&(n.itemElements=o)}},features:[e._Bn([m.JJ])],decls:45,vars:12,consts:[["title","Ticket View",3,"breadcrumbItems"],[1,"row","mt-1","displayShown"],[1,"col-lg-12"],[1,"card","mt-n4","mx-n4"],[1,"bg-white-subtle"],[1,"card-body","pb-0","px-4"],[1,"row"],[1,"col-md"],[1,"row","align-items-center"],["class","col-md",4,"ngFor","ngForOf"],[1,"col-md-auto","text-end"],["href","javascript:void(0);",1,"text-primary","text-decoration-underline","fw-medium","text-end","me-3",3,"click"],[1,"ri-printer-fill","text-primary","fs-18"],["href","javascript:void(0);",1,"text-primary","text-decoration-underline","fw-medium","text-end",3,"click"],[1,"ri-refresh-line","text-primary","fs-18"],["clas","col-md-12","style","overflow: auto",4,"ngIf"],["ngbNav","","role","tablist",1,"nav","nav-tabs-custom","border-bottom-0",3,"activeId","activeIdChange","navChange"],["customNav","ngbNav"],[1,"nav-item",3,"ngbNavItem"],["ngbNavLink","","data-bs-toggle","tab","role","tab",1,"nav-link"],["ngbNavContent",""],[4,"ngIf"],[1,"row","displayShown","me-0"],[1,"col-lg-12","pe-0","ps-0"],[1,"tab-content","text-muted"],[3,"ngbNavOutlet"],[1,"d-flex","justify-content-end","px-4","mb-3"],[1,"btn","btn-soft-primary","waves-effect","back-button",3,"click"],["class","row m-0 p-0",4,"ngIf"],["iscloseTicketModalPopup",""],["fullSmDataModal",""],["role","document"],["VideoPlayer",""],[1,"fw-bold"],["clas","col-md-12",2,"overflow","auto"],[3,"isBillingRequired","isGlobal","ticketStatusId","SeviceType","incindetTechSignImageURL","incindetClientSignImageURL","workFlowRequired","sendToActivingForTab"],[1,"col-xxl-8","stretch-card"],[1,"card"],["ngbNav","",1,"nav-tabs","nav-tabs-custom",3,"activeId","activeIdChange"],["defaultNav","ngbNav"],[3,"ngbNavItem"],["ngbNavLink",""],[1,"d-flex","flex-row","flex-lg-column","flex-xl-row","align-items-center"],[1,"d-none1","d-sm-block","mb-0"],[1,"col-xxl-4"],["class","card ribbon-box right",4,"ngFor","ngForOf"],["class","card-body",4,"ngFor","ngForOf"],[1,"border-top","border-top-dashed"],["ngbNav","",1,"nav","nav-tabs","nav-tabs-custom","nav-success","mb-3",3,"activeId","activeIdChange","navChange"],["nav","ngbNav"],[1,"tab-content"],[1,"card-body"],[1,"col-12","mb-3"],[1,"fw-semibold","text-uppercase","mb-3"],["class","text-muted mb-0 editot",3,"innerHTML",4,"ngIf"],["class","text-muted mb-0",4,"ngIf"],["class","col-12 mb-3",4,"ngIf"],["class","col-sm-6 stretch-card pt-2 mb-3",4,"ngIf"],[1,"text-muted","mb-0","editot",3,"innerHTML"],[1,"text-muted","mb-0"],[1,"col-sm-6","stretch-card","pt-2","mb-3"],[1,"card","border","shadow-none","mb-lg-0","right"],[1,"card-body","text-muted"],[1,"fs-14","mb-2"],[1,"fs-13","text-dark","mb-0"],[1,"ri-user-3-line","align-bottom"],["class","fs-13 text-dark mb-0",4,"ngIf"],[1,"fs-13","text-muted","mb-0"],[1,"ri-calendar-2-line","align-bottom"],[1,"fs-12","text-muted"],[1,"ri-edit-2-linealign-bottom"],[1,"ri-outlet-2-line","align-bottom"],["class","fs-14 mb-2",4,"ngIf"],[3,"ngbNavItem","click"],[1,"ri-chat-1-line","me-1","align-bottom"],[1,"card-body","p-4"],[1,"card-title","mb-4"],["class","text-center",4,"ngIf"],["class","mt-3",4,"ngIf"],[1,"text-center"],["src","../../../../../assets/images/ticketChatpartImage.png",1,"img-fluid","rounded","chat-image"],[1,"px-3","mx-n3",2,"height","300px","overflow-y","auto"],["scrollframeGlobal",""],[4,"ngFor","ngForOf"],["class","d-flex mb-2",4,"ngIf"],["class","mt-2 text-end",4,"ngIf"],[1,"d-flex","mb-2"],[1,"flex-shrink-0"],["alt","",1,"avatar-xs","rounded-circle",3,"src"],[1,"flex-grow-1","ms-3"],[1,"fs-13"],[1,"text-muted"],[1,"mt-2","text-end"],[1,"d-flex","justify-content-end"],[1,""],[1,"ms-3","text-start"],[1,"mt-3"],[1,"row","g-3"],["for","exampleFormControlTextarea1",1,"form-label"],["id","exampleFormControlTextarea1","rows","3","placeholder","Enter comments",1,"form-control","bg-light","border-light",3,"maxlength","ngModel","ngModelChange"],[1,"nopadding","clrlbl"],[1,"col-lg-12","text-end"],["href","javascript:void(0);",1,"btn","btn-success",3,"click"],[1,"ri-chat-3-line","me-1","align-bottom"],["scrollframe",""],["item",""],[1,"col-lg-12","p-4"],[3,"incidentList","ticketData","sendUpdateIncident"],[3,"Data","showRequester"],[1,"row","me-0","ms-0"],["class","col-md-3 paddinBorh pb-2 pt-2 mb-2",4,"ngFor","ngForOf"],[1,"col-md-3","paddinBorh","pb-2","pt-2","mb-2"],["alt","img",1,"img-fluid","img-size-withd-upload",3,"src","click"],[1,"col-md-12","pb-2","pt-2","mb-2"],[1,"table-responsive","mb-0"],[1,"table"],[1,"bg-light","text-muted","text-uppercase"],["colspan","2",1,"text-center"],[1,"align-top"],["href","javascript:void(0)",1,"fw-medium","link-primary"],[1,"title","align-top"],[1,"fs-16","ri-download-line","text-danger","cursor",3,"click"],["controls","","preload","none",1,"img-fluid","img-size-withd-upload",3,"click"],["type","video/mp4",3,"src"],[1,"card","ribbon-box","right"],[1,"card-header","d-flex","justify-content-between","align-items-baseline"],[1,"card-title","mb-0","a11"],["class","ribbon ribbon-info ribbon-shape",4,"ngIf"],[1,"table-responsive"],[1,"table","table-borderless","mb-0"],[1,"fw-medium"],["id","t-client"],[1,"mb-0","fs-12"],[1,"mdi","mdi-email","me-1"],["class","badge bg-danger fs-12",4,"ngIf"],["class","badge bg-success fs-12",4,"ngIf"],["class","badge bg-warning fs-12",4,"ngIf"],[1,"fs-12"],["class","card-footer text-end",4,"ngIf"],[1,"ribbon","ribbon-info","ribbon-shape"],["class","badge bg-info-subtle text-info badge-border",4,"ngIf"],[1,"badge","bg-info-subtle","text-info","badge-border"],[1,"badge","bg-danger","fs-12"],[1,"badge","bg-success","fs-12"],[1,"badge","bg-warning","fs-12"],[1,"card-footer","text-end"],[1,"btn","btn-danger",3,"click"],[3,"ticketData","assetList","mX_WorkOder","updateStatusAssetList"],[3,"mX_WOTechAssignment","mX_WorkOder","ticketData","mx_WOStartEndTask","setUpdateListValue"],[3,"ticketInfo","quotationObject","mX_quotationItem","reCreatedQuotation","reSubmitedsubmitQuotation"],["class","row",4,"ngIf"],[3,"ticketInfo","quotationObject","mX_quotationItem","resubmitButtonView","resubmitQuotation"],[1,"col-12","d-flex","justify-content-between"],[1,"btn","btn-outline-primary",3,"disabled","click"],[1,"mb-1"],[1,"row","m-0","p-0"],[1,"col-md-12","displayPrint"],[3,"storeDataTicket","totalQuotationCountList","maintenanceWorkflowAuditList","selectePasteUplaodArray","ticketDisscusionArrayListGlobal","ticketDisscusionArrayList","shownOffInternalChat"],[1,"modal-content"],[1,"modal-body","p-5","text-center"],[1,"text-end"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close","text-end",3,"click"],[1,"mt-2"],["src","https://cdn.lordicon.com/tqywkdcz.json","trigger","hover",2,"width","150px","height","150px"],[1,"mb-3","mt-4","text-justify"],[1,"text-muted","fs-15","mb-1","text-justify"],[1,"col-lg"],["id","exampleFormControlTextarea1","rows","4","placeholder","Enter your remark...",1,"form-control","bg-light","border-light",3,"ngModel","maxlength","ngModelChange"],[1,"hstack","gap-2","justify-content-center"],[1,"btn","btn-success",3,"disabled","click"],["data-bs-dismiss","modal","id","deleteRecord-close",1,"btn","btn-soft-danger",3,"click"],[1,"modal-header"],["id","exampleModalFullscreenSmLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"storeDataTicket"],[1,"modal-footer"],["href","javascript:void(0);","data-bs-dismiss","modal",1,"btn","btn-danger","fw-medium",3,"click"],[1,"ri-close-line","me-1","align-middle"],[1,"modal-header","p-3","bg-primary-subtle"],["id","inviteMembersModalLabel",1,"modal-title"],[1,"modal-body","p-4"],["id","instructions"],["id","my_video_1","width","100%","height","267px","controls","","preload","none","autoplay","","data-setup",'{ "aspectRatio":"640:267", "playbackRates": [1, 1.5, 2] }',1,"video-js","vjs-default-skin"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"]],template:function(a,n){if(1&a&&(e._UZ(0,"app-breadcrumbs",0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),e.YNc(9,Hn,4,1,"div",9),e.TgZ(10,"div",10)(11,"a",11),e.NdJ("click",function(){return n.printReport()}),e._UZ(12,"i",12),e.qZA(),e.TgZ(13,"a",13),e.NdJ("click",function(){return n.refreshThePage()}),e._UZ(14,"i",14),e.qZA()()(),e.YNc(15,En,2,7,"div",15),e.qZA(),e.TgZ(16,"ul",16,17),e.NdJ("activeIdChange",function(l){return n.activeId=l})("navChange",function(l){return n.onMainNavChange(l)}),e.TgZ(18,"li",18)(19,"a",19),e._uU(20," Ticket "),e.qZA(),e.YNc(21,Ha,20,9,"ng-template",20),e.qZA(),e.TgZ(22,"li",18)(23,"a",19),e._uU(24," Assets "),e.YNc(25,Ea,2,1,"span",21),e.qZA(),e.YNc(26,Xa,5,3,"ng-template",20),e.qZA(),e.YNc(27,za,5,1,"ng-container",21)(28,eo,5,1,"ng-container",21)(29,no,5,1,"ng-container",21),e.qZA()()()()()(),e.TgZ(30,"div",22)(31,"div",23)(32,"div",24),e._UZ(33,"div",25),e.qZA()(),e.TgZ(34,"div",2)(35,"div",26)(36,"button",27),e.NdJ("click",function(){return n.goBack()}),e._uU(37," Back "),e.qZA()()()()(),e.YNc(38,ao,3,7,"div",28)(39,oo,26,5,"ng-template",null,29,e.W1O)(41,so,11,1,"ng-template",null,30,e.W1O)(43,lo,11,2,"ng-template",31,32,e.W1O)),2&a){const o=e.MAs(17);e.Q6J("breadcrumbItems",n.breadCrumbItems),e.xp6(9),e.Q6J("ngForOf",n.ticketData),e.xp6(6),e.Q6J("ngIf",0!=n.ticketData.length),e.xp6(1),e.Q6J("activeId",n.activeId),e.xp6(2),e.Q6J("ngbNavItem",1),e.xp6(4),e.Q6J("ngbNavItem",2),e.xp6(3),e.Q6J("ngIf",0!=n.assetTicketItem.length),e.xp6(2),e.Q6J("ngIf",0!=(null==n.ticketWorkOder?null:n.ticketWorkOder.length)&&0!=n.ticketData.length),e.xp6(1),e.Q6J("ngIf",n.generateQuotationTabShown),e.xp6(1),e.Q6J("ngIf",0!=(null==n.ticketQuotation?null:n.ticketQuotation.length)&&n.shownQuotation),e.xp6(4),e.Q6J("ngbNavOutlet",o),e.xp6(5),e.Q6J("ngIf",n.storeFullData)}},dependencies:[m.sg,m.O5,p.Fj,p.JJ,p.nD,p.On,q.n,W.F,Gt.L,Wt.Z,d.uN,d.Pz,d.nv,d.Is,d.Vx,d.tO,d.Dy,Yt.a,Ht.n,Et.S,xi,Pn],styles:[".wordBrrak[_ngcontent-%COMP%]{word-break:break-word}.editot[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .imgeVal[_ngcontent-%COMP%]{height:400px!important;width:400px!important}.paddinBorh[_ngcontent-%COMP%]{padding-left:8px;padding-right:8px}.imgHeight[_ngcontent-%COMP%]{height:200px}.img-size-withd-upload[_ngcontent-%COMP%]{border-radius:12px;width:300px;height:120px}.chat-image[_ngcontent-%COMP%]{height:79%!important;width:64%!important;opacity:.5}"],data:{animation:[(0,T.X$)("blink",[(0,T.SB)("start1",(0,T.oB)({background:"lavender",opacity:.5})),(0,T.SB)("end1",(0,T.oB)({background:"inherit",opacity:1})),(0,T.eR)("start1 <=> end1",[(0,T.jt)("0.9s")])]),(0,T.X$)("blink2",[(0,T.SB)("start2",(0,T.oB)({background:"lavender",opacity:.5})),(0,T.SB)("end2",(0,T.oB)({background:"inherit",opacity:1})),(0,T.eR)("start2 <=> end2",[(0,T.jt)("0.9s")])])]}})}}return i})();const co=[{path:"add-ticket",component:rt},{path:"list-ticket",component:Bt},{path:"view-ticket",component:E},{path:"ticket-view",component:E},{path:"",pathMatch:"full",redirectTo:"list-ticket"}];let ro=(()=>{class i{static{this.\u0275fac=function(a){return new(a||i)}}static{this.\u0275mod=e.oAB({type:i})}static{this.\u0275inj=e.cJS({imports:[x.Bz.forChild(co),x.Bz]})}}return i})();var po=r(6208),_o=r(9101),mo=r(6802),go=r(6480),uo=r(6250),ho=r(3187);class To{}let fo=(()=>{class i{constructor(){(0,z.N)(ee().loadAnimation)}static{this.\u0275fac=function(a){return new(a||i)}}static{this.\u0275mod=e.oAB({type:i})}static{this.\u0275inj=e.cJS({providers:[m.uU],imports:[m.ez,p.u5,ro,p.UX,d.jF,d.ZS,d.XC,d.HK,G.m,w.JT.forRoot(),M.t,po.m,d.ZQ,d.Oz,_o.p.pick(mo.kEt),R.d,S.A0,go.DashboardModule,uo.QuotationModule,ho.ServiceOrderModule,H.QM,N.xL,L.bB,A.Yy,K.c]})}}return i})()}}]);