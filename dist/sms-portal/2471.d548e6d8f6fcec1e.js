"use strict";(self.webpackChunksms_portal=self.webpackChunksms_portal||[]).push([[2471],{471:(M,C,p)=>{p.d(C,{S:()=>h});var s=p(9862),g=p(553),e=p(9212),m=p(2787);let h=(()=>{class y{constructor(c,r){this._http=c,this._route=r,this.ticketStatusId=0,this.serviceStatusId=0,this.auditStatusId=0,this.initalToTabs=Number(sessionStorage.getItem("initalToTabs"))?Number(sessionStorage.getItem("initalToTabs")):1,this.innerTaskTab=Number(sessionStorage.getItem("innerTaskTab"))?Number(sessionStorage.getItem("innerTaskTab")):1,this.ticketAgingTab=Number(sessionStorage.getItem("ticketAgingTab"))?Number(sessionStorage.getItem("ticketAgingTab")):1,this.billingTab=Number(sessionStorage.getItem("billingTab"))?Number(sessionStorage.getItem("billingTab")):1,this.workflowObject={},this.pageAction=null,this.scheduleStatusId=0,this.scheduleTypeAdminAndClient="",this.auditTypeAdminAndClient=""}getMaintenanceTodoList_V2(){return this._http.get(g.N.apiUrl+"api/MaintentDash/GetMaintenanceTodoList_V2",{headers:(new s.WM).set("Content-Type","application/json")})}getV2_TotalCountTicketServiceOrderIncident(){return this._http.post(g.N.apiUrl+"api/MaintentDash/GetV2_TotalCountTicketServiceOrderIncident",{headers:(new s.WM).set("Content-Type","application/json")})}getV2_MaintenanceWorkflowTodoList(){return this._http.post(g.N.apiUrl+"api/MaintentDash/GetV2_MaintenanceWorkflowTodoList",{headers:(new s.WM).set("Content-Type","application/json")})}getV2_DashboardTodoList(){return this._http.post(g.N.apiUrl+"api/AssetDash/GetV2_DashboardTodoList",{headers:(new s.WM).set("Content-Type","application/json")})}getV2_MX_PM_ScheduleList_ServerPaging(c){return this._http.post(g.N.apiUrl+"api/Prevent/GetV2_MX_PM_ScheduleList_ServerPaging",c,{headers:(new s.WM).set("Content-Type","application/json")})}getSupportTypeCounts(){return this._http.post(g.N.apiUrl+"api/MaintentDash/GetV2_TotalCountSupportTypeDash",{},{headers:(new s.WM).set("Content-Type","application/json")})}getBillableNonBillableCounts(){return this._http.post(g.N.apiUrl+"api/MaintentDash/GetV2_TotalCountIsBillingeDash",{},{headers:(new s.WM).set("Content-Type","application/json")})}getProjectList(){return this._http.post(g.N.apiUrl+"api/MaintentDash/GetV2_ProjectTotalTicketWIthBillableNonBillList",{},{headers:(new s.WM).set("Content-Type","application/json")})}getV2_ServiceOrder_Tech_TaskListAndDetail(c){return this._http.post(g.N.apiUrl+"api/Maintenance/GetV2_ServiceOrder_Tech_TaskListAndDetail",c,{headers:(new s.WM).set("Content-Type","application/json")})}updateV2_SignatureTech(c){return this._http.post(g.N.apiUrl+"api/Maintenance/UpdateV2_SignatureTech",c,{headers:(new s.WM).set("Content-Type","application/json")})}updateSignatureClient(c){return this._http.post(g.N.apiUrl+"api/Incident/UpdateSignatureClient",c,{headers:(new s.WM).set("Content-Type","application/json")})}updateV2_ScheudleSignatureUser(c){return this._http.post(g.N.apiUrl+"api/Prevent/UpdateV2_ScheudleSignatureUser",c,{headers:(new s.WM).set("Content-Type","application/json")})}updateV2_ScheudleSignatureClient(c){return this._http.post(g.N.apiUrl+"api/Prevent/UpdateV2_ScheudleSignatureClient",c,{headers:(new s.WM).set("Content-Type","application/json")})}getV2_MX_PM_ScheduleList_ByDate(c){return this._http.post(g.N.apiUrl+"api/Prevent/GetV2_MX_PM_ScheduleList_ByDate",c,{headers:(new s.WM).set("Content-Type","application/json")})}getV2_TechnitionsAttendanceTransaction(){return this._http.post(g.N.apiUrl+"api/MaintentDash/GetV2_TechnitionsAttendanceTransaction",{headers:(new s.WM).set("Content-Type","application/json")})}getV2_TechnitionsAttendanceTransactionDaily(){return this._http.post(g.N.apiUrl+"api/MaintentDash/GetV2_TechnitionsAttendanceTransactionDaily",{headers:(new s.WM).set("Content-Type","application/json")})}getV2_TotalTicket7DayGraph(){return this._http.post(g.N.apiUrl+"api/MaintentDash/GetV2_TotalTicket7DayGraph",{headers:(new s.WM).set("Content-Type","application/json")})}getV2_TotalTicketMonthlyGraph(){return this._http.post(g.N.apiUrl+"api/MaintentDash/GetV2_TotalTicketMonthlyGraph",{headers:(new s.WM).set("Content-Type","application/json")})}getV2_OverDue(){return this._http.post(g.N.apiUrl+"api/MaintentDash/GetV2_OverDue",{headers:(new s.WM).set("Content-Type","application/json")})}createV2_TicketDiscussionGlobalAudit(c){return this._http.post(g.N.apiUrl+"api/Maintenance/CreateV2_TicketDiscussionGlobalAudit",c,{headers:(new s.WM).set("Content-Type","application/json")})}createV2_TicketDiscussionAudit(c){return this._http.post(g.N.apiUrl+"api/Maintenance/CreateV2_TicketDiscussionAudit",c,{headers:(new s.WM).set("Content-Type","application/json")})}static{this.\u0275fac=function(r){return new(r||y)(e.LFG(s.eN),e.LFG(m.F0))}}static{this.\u0275prov=e.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"})}}return y})()},5143:(M,C,p)=>{p.d(C,{w:()=>y});var s=p(9862),g=p(6306),e=p(8504),m=p(553),h=p(9212);let y=(()=>{class _{constructor(r){if(this._http=r,this.sendTicketId=null,this.accessRight=!1,this.lastStoreRouterDashboardName="/maintenace-management/dashboard/help-desk-dashboard",this.lastStoreTicketRouterName="/maintenace-management/corrective/service-order/list-service-order",this.ticketObjectInBillingWorkFlow={},this.quotationObjectWorkFlow={},this.ticketPageAction=null,localStorage.getItem("lastStoreTicketRouterName"))this.lastStoreTicketRouterName=localStorage.getItem("lastStoreTicketRouterName");else{let l=JSON.parse(localStorage.getItem("currentUser"));"Client User"===l?.userInfor?.role?this.lastStoreTicketRouterName="Application User"===l?.userInfor?.accessGroupName?"maintenace-management/corrective/ticket/list-ticket":"/maintenace-management/dashboard/client-dashboard":"Help Desk"===l?.userInfor?.role&&(this.lastStoreTicketRouterName="/maintenace-management/dashboard/help-desk-dashboard")}}getTicketList_ByPagination(r){let l;return l=m.N.apiUrl+"api/Maintenance/GetTicketList_ByPagination",this._http.post(l,r,{headers:(new s.WM).set("Content-Type","application/json")})}getV2_TicketingtList_ByPagination(r){let l;return l=m.N.apiUrl+"api/Maintenance/GetV2_TicketList_ByPagination",this._http.post(l,r,{headers:(new s.WM).set("Content-Type","application/json")})}getV2_TicketDiscussionDetail_Paging_ByPagination(r){let l;return l=m.N.apiUrl+"api/Maintenance/GetV2_TicketDiscussionDetail_Paging_ByPagination",this._http.post(l,r,{headers:(new s.WM).set("Content-Type","application/json")})}getV2_TicketDiscussionGlobalDetail_Paging_ByPagination(r){let l;return l=m.N.apiUrl+"api/Maintenance/GetV2_TicketDiscussionGlobalDetail_Paging_ByPagination",this._http.post(l,r,{headers:(new s.WM).set("Content-Type","application/json")})}getV2_TotalCountTicketOnly(){let r;return r=m.N.apiUrl+"api/MaintentDash/GetV2_TotalCountTicketOnly",this._http.post(r,{headers:(new s.WM).set("Content-Type","application/json")})}getV2_TicketList_ByPagination(r){let l;return l=m.N.apiUrl+"api/Maintenance/GetV2_TicketListLates_ByPagination",this._http.post(l,r,{headers:(new s.WM).set("Content-Type","application/json")})}getV2_TicketWithIncidentReportSignature_ByPagination(r){let l;return l=m.N.apiUrl+"api/Maintenance/GetV2_TicketWithIncidentReportSignature_ByPagination",this._http.post(l,r,{headers:(new s.WM).set("Content-Type","application/json")})}getV2_MaintenanceWorkflowTicketList(r){let l;return l=m.N.apiUrl+"api/MaintentDash/GetV2_MaintenanceWorkflowTicketList",this._http.post(l,r,{headers:(new s.WM).set("Content-Type","application/json")})}getV2_MaintenanceWorkflowQuotationList(r){let l;return l=m.N.apiUrl+"api/MaintentDash/GetV2_MaintenanceWorkflowQuotationList",this._http.post(l,r,{headers:(new s.WM).set("Content-Type","application/json")})}getV2_MaintenanceGeneralQuotationList(r){let l;return l=m.N.apiUrl+"api/MaintentDash/GetV2_MaintenanceGeneralQuotationList",this._http.post(l,r,{headers:(new s.WM).set("Content-Type","application/json")})}getV2_MaintenanceGeneralQuotationListOnlyWaitingForInvoice(r){let l;return l=m.N.apiUrl+"api/MaintentDash/GetV2_MaintenanceGeneralQuotationListOnlyWaitingForInvoice",this._http.post(l,r,{headers:(new s.WM).set("Content-Type","application/json")})}getV2_MaintenanceGeneralQuotationListInvoiceDone(r){let l;return l=m.N.apiUrl+"api/MaintentDash/GetV2_MaintenanceGeneralQuotationListInvoiceDone",this._http.post(l,r,{headers:(new s.WM).set("Content-Type","application/json")})}getMaintenanceStatus(r){return this._http.get(m.N.apiUrl+"api/Maintenance/GetMaintenanceStatus/"+r,{headers:(new s.WM).set("Content-Type","application/json")})}getMX_MasterUrgentTypeList(){return this._http.get(m.N.apiUrl+"api/Maintenance/GetMX_MasterUrgentTypeList",{headers:(new s.WM).set("Content-Type","application/json")})}getV2_MasterIncidentTypeList(r){return this._http.post(m.N.apiUrl+"api/Maintenance/GetV2_MasterIncidentTypeList",r,{headers:(new s.WM).set("Content-Type","application/json")})}deletedAssetTicketByTech(r){return this._http.post(m.N.apiUrl+"api/Maintenance/DeletedAssetTicketByTech",r,{headers:(new s.WM).set("Content-Type","application/json")})}getMX_MasterTicketType(r){return this._http.get(m.N.apiUrl+"api/Maintenance/GetMX_MasterTicketType?IsDeviceRelated="+r,{headers:(new s.WM).set("Content-Type","application/json")})}createV2_TicketDiscussion(r){return this._http.post(m.N.apiUrl+"api/Maintenance/CreateV2_TicketDiscussion",r,{headers:(new s.WM).set("Content-Type","application/json")})}createV2_TicketDiscussionGlobal(r){return this._http.post(m.N.apiUrl+"api/Maintenance/CreateV2_TicketDiscussionGlobal",r,{headers:(new s.WM).set("Content-Type","application/json")})}addTicket(r){return this._http.post(m.N.apiUrl+"api/Maintenance/CreateTicket",r).pipe((0,g.K)(T=>(0,e._)(T)))}createTicket(r){return this._http.post(`${m.N.apiUrl}api/Maintenance/CreateTicket_Wait`,r).pipe((0,g.K)(l=>(console.error("Error creating ticket:",l),(0,e._)(l))))}getTicketDetails(r){return this._http.get(m.N.apiUrl+"api/Maintenance/GetTicketViewList?ticketId="+r,{headers:(new s.WM).set("Content-Type","application/json")})}getV2_TicketingAndIncidentListDetail(r){return this._http.post(m.N.apiUrl+"api/Maintenance/GetV2_TicketingAndIncidentListDetail",r,{headers:(new s.WM).set("Content-Type","application/json")})}getV2_TicketingAssetIncidentQuotWorkorderTask(r){return this._http.post(m.N.apiUrl+"api/Maintenance/GetV2_TicketingAssetIncidentQuotWorkorderTask",r,{headers:(new s.WM).set("Content-Type","application/json")})}getV2_TicketDisscusion_ServerPaging(r){return this._http.post(m.N.apiUrl+"api/Maintenance/GetV2_TicketDisscusion_ServerPaging",r,{headers:(new s.WM).set("Content-Type","application/json")})}getV2_TicketDisscusionGlobal_ServerPaging(r){return this._http.post(m.N.apiUrl+"api/Maintenance/GetV2_TicketDisscusionGlobal_ServerPaging",r,{headers:(new s.WM).set("Content-Type","application/json")})}requestBillingEligibilityProcess_V2(r){return this._http.post(m.N.apiUrl+"api/Maintenance/RequestBillingEligibilityProcess_V2",r,{headers:(new s.WM).set("Content-Type","application/json")})}updateReviewerApproverBillingEligibilityProcess(r){return this._http.post(m.N.apiUrl+"api/MaintentDash/UpdateReviewerApproverBillingEligibilityProcess",r,{headers:(new s.WM).set("Content-Type","application/json")})}updateAsset(r){return this._http.post(m.N.apiUrl+"api/Maintenance/UpdateTicketItemStatusAndImageByTech",r,{headers:(new s.WM).set("Content-Type","application/json")})}getV2_UpdateTicketClose(r){return this._http.post(m.N.apiUrl+"api/MaintentDash/GetV2_UpdateTicketClose",r,{headers:(new s.WM).set("Content-Type","application/json")})}getV2_UpdateTicketAcknolodge(r){return this._http.post(m.N.apiUrl+"api/MaintentDash/GetV2_UpdateTicketAcknolodge",r,{headers:(new s.WM).set("Content-Type","application/json")})}getV2_UpdateTicketVerification(r){return this._http.post(m.N.apiUrl+"api/MaintentDash/GetV2_UpdateTicketVerification",r,{headers:(new s.WM).set("Content-Type","application/json")})}getV2_MaintenanceWorkflowAudit(r){return this._http.post(m.N.apiUrl+"api/Maintenance/GetV2_MaintenanceWorkflowAudit",r,{headers:(new s.WM).set("Content-Type","application/json")})}UpdateV2_TicketCancelation(r){return this._http.post(m.N.apiUrl+"api/Maintenance/UpdateV2_TicketCancelation",r,{headers:(new s.WM).set("Content-Type","application/json")})}getV2_TicketImagesList(r){return this._http.post(m.N.apiUrl+"api/Maintenance/GetV2_TicketImagesList",r,{headers:(new s.WM).set("Content-Type","application/json")})}getV2_TicketVideo(r){return this._http.post(m.N.apiUrl+"api/Maintenance/GetV2_TicketVideo",r,{headers:(new s.WM).set("Content-Type","application/json")})}getV2_TicketDocument(r){return this._http.post(m.N.apiUrl+"api/Maintenance/GetV2_TicketDocument",r,{headers:(new s.WM).set("Content-Type","application/json")})}downloadTikcetFile(r){return this._http.post(m.N.apiUrl+"api/Maintenance/DownloadTikcetFile",r,{responseType:"blob"})}static{this.\u0275fac=function(l){return new(l||_)(h.LFG(s.eN))}}static{this.\u0275prov=h.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"})}}return _})()},6253:(M,C,p)=>{p.r(C),p.d(C,{DeliveryNoteModule:()=>Xe});var s=p(6814),g=p(2787),e=p(9212);let m=(()=>{class a{static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275cmp=e.Xpm({type:a,selectors:[["app-delivery-note"]],decls:1,vars:0,template:function(n,i){1&n&&e._UZ(0,"router-outlet")},dependencies:[g.lC]})}}return a})();var h=p(6223),y=p(553),_=p(2438),c=p(2181),r=p(3620),l=p(3997),T=p(9397),J=p(3519),x=p.n(J),O=p(1517),F=p(6676),b=p(9862),w=p(3828);let V=(()=>{class a{constructor(t,n,i){this._http=t,this._route=n,this.authService=i,this.accessRight=!1,this.sendDeliveryId=0}getV2_DeliveryingtList_ByPagination(t){let n;return n=y.N.apiUrl+"api/Delivery/GetV2_DeliveryNoteList_ServerPaging",this._http.post(n,t,{headers:(new b.WM).set("Content-Type","application/json")})}getDeliveryNoteStatus(t){return this._http.get(y.N.apiUrl+"api/Delivery/GetDeliveryStatus/"+t,{headers:(new b.WM).set("Content-Type","application/json")})}GetAssetStatusList(t){return this._http.get(y.N.apiUrl+"api/AssetManagement/GetAssetStatusList/"+t,{headers:(new b.WM).set("Content-Type","application/json")})}createDeliveryNote(t){let n;return n=y.N.apiUrl+"api/Delivery/V2_CreateDeliveryNote",this._http.post(n,t,{headers:(new b.WM).set("Content-Type","application/json")})}updateDeliveryNoteToClient(t){let n;return n=y.N.apiUrl+"api/Delivery/V2_UpdateDeliveryNoteToClient",this._http.post(n,t,{headers:(new b.WM).set("Content-Type","application/json")})}getV2_DeliveryNoteAndTransDetail(t){let n;return n=y.N.apiUrl+"api/Delivery/GetV2_DeliveryNoteAndTransDetail",this._http.post(n,t,{headers:(new b.WM).set("Content-Type","application/json")})}static{this.\u0275fac=function(n){return new(n||a)(e.LFG(b.eN),e.LFG(g.F0),e.LFG(w.u))}}static{this.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();var S=p(2857),I=p(9455),G=p(471),U=p(7235),D=p(7291),L=p(4807),j=p(8617),Z=p(6762);const R=["inputerDeliveryName"],Q=["inputerDeliveryNumber"];function W(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"div",6)(1,"button",32),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.navigateToAdd())}),e._UZ(2,"i",33),e._uU(3," Add Delivery "),e.qZA()()}}function B(a,u){1&a&&(e.ynx(0),e.TgZ(1,"tr")(2,"td",43),e._uU(3," No Delivery Data "),e.qZA()(),e.BQk())}function Y(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"li")(1,"a",52),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,o=e.oxw(3),d=e.MAs(42);return e.KtG(o.openUpdateFormModal(d,i))}),e._UZ(2,"i",54),e._uU(3," Update Delivery "),e.qZA()()}}function E(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"a",45),e.NdJ("click",function(){const o=e.CHM(t).$implicit,d=e.oxw(3);return e.KtG(d.viewHandler(o.deliveryNoteId))}),e._uU(3),e.qZA()(),e.TgZ(4,"td",46),e.NdJ("click",function(){const o=e.CHM(t).$implicit,d=e.oxw(3);return e.KtG(d.expandTitle("deliveryNoteTitle_"+o.deliveryNoteNo))}),e._uU(5),e.qZA(),e.TgZ(6,"td",46),e.NdJ("click",function(){const o=e.CHM(t).$implicit,d=e.oxw(3);return e.KtG(d.expandTitle("companyName_"+o.deliveryNoteNo))}),e._uU(7),e.qZA(),e.TgZ(8,"td",46),e.NdJ("click",function(){const o=e.CHM(t).$implicit,d=e.oxw(3);return e.KtG(d.expandTitle("clientName_"+o.deliveryNoteNo))}),e._uU(9),e.qZA(),e.TgZ(10,"td",46),e.NdJ("click",function(){const o=e.CHM(t).$implicit,d=e.oxw(3);return e.KtG(d.expandTitle("projectName_"+o.deliveryNoteNo))}),e._uU(11),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.qZA(),e.TgZ(16,"td",47)(17,"span"),e._uU(18),e.qZA()(),e.TgZ(19,"td")(20,"span")(21,"div",48)(22,"button",49),e._UZ(23,"i",50),e.qZA(),e.TgZ(24,"ul",51)(25,"li")(26,"a",52),e.NdJ("click",function(){const o=e.CHM(t).$implicit,d=e.oxw(3);return e.KtG(d.viewHandler(o.deliveryNoteId))}),e._UZ(27,"i",53),e._uU(28," View "),e.qZA()(),e.YNc(29,Y,4,0,"li",37),e.qZA()()()()()}if(2&a){const t=u.$implicit,n=e.oxw(3);e.xp6(3),e.Oqu(t.deliveryNoteNo),e.xp6(1),e.Q6J("title",t.deliveryNoteTitle)("id","deliveryNoteTitle_"+t.deliveryNoteNo),e.xp6(1),e.hij(" ",t.deliveryNoteTitle," "),e.xp6(1),e.Q6J("title",t.companyName)("id","companyName_"+t.deliveryNoteNo),e.xp6(1),e.hij(" ",t.companyName," "),e.xp6(1),e.Q6J("title",t.clientName)("id","clientName_"+t.deliveryNoteNo),e.xp6(1),e.hij(" ",t.clientName," "),e.xp6(1),e.Q6J("title",t.projectName)("id","projectName_"+t.deliveryNoteNo),e.xp6(1),e.hij(" ",t.projectName," "),e.xp6(2),e.hij(" ",t.createdDateTime," "),e.xp6(2),e.hij(" ",t.expectedDeliveryDateTime," "),e.xp6(2),e.Tol(n.returnStatusBadgeClassesStatus(t.deliveryNoteStatusId)),e.xp6(1),e.Oqu(t.deliveryNoteStatusName),e.xp6(11),e.Q6J("ngIf",2==(null==t?null:t.deliveryNoteStatusId))}}function z(a,u){if(1&a&&(e.ynx(0),e.YNc(1,E,30,19,"tr",44),e.BQk()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.DeliveryList)}}function H(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"ngb-pagination",55),e.NdJ("pageChange",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.page=i)})("pageChange",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.OnChangesPage(i))}),e.qZA()}if(2&a){const t=e.oxw(2);e.Q6J("collectionSize",t.totalRecordsFromApi)("pageSize",t.pageSize)("page",t.page)("maxSize",2)("rotate",!0)}}function K(a,u){if(1&a&&(e.TgZ(0,"div",34)(1,"table",35)(2,"thead")(3,"tr",36)(4,"th"),e._uU(5,"Delivery NO"),e.qZA(),e.TgZ(6,"th"),e._uU(7,"Title"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"Company"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Client"),e.qZA(),e.TgZ(12,"th"),e._uU(13),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Create Date"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"Expected Delivery Date"),e.qZA(),e.TgZ(18,"th"),e._uU(19,"Status"),e.qZA(),e.TgZ(20,"th"),e._uU(21,"Action"),e.qZA()()(),e.TgZ(22,"tbody"),e.YNc(23,B,4,0,"ng-container",37)(24,z,2,1,"ng-container",37),e.qZA()()(),e.TgZ(25,"div",38)(26,"div",39)(27,"div",40),e._uU(28),e.qZA()(),e.TgZ(29,"div",39)(30,"div",41),e.YNc(31,H,1,5,"ngb-pagination",42),e.qZA()()()),2&a){const t=e.oxw();e.xp6(13),e.Oqu(t.isProject?"Project":"Department"),e.xp6(10),e.Q6J("ngIf",0==t.DeliveryList.length),e.xp6(1),e.Q6J("ngIf",0!=t.DeliveryList.length),e.xp6(4),e.lnq(" Showing ",t.from," to ",t.to," of ",t.totalRecordsFromApi," entries "),e.xp6(3),e.Q6J("ngIf",t.totalRecordsFromApi>t.pageSize)}}function $(a,u){1&a&&(e.TgZ(0,"small",77),e._uU(1," Delivery Date is Required"),e.qZA())}function X(a,u){if(1&a&&(e.TgZ(0,"div"),e.YNc(1,$,2,0,"small",76),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.deliveryDate.errors.required)}}function ee(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"div",56)(1,"h4",57),e._uU(2,"Update Delivery"),e.qZA(),e.TgZ(3,"button",58),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.dismiss("Cross click"))}),e.TgZ(4,"span",59),e._uU(5,"\xd7"),e.qZA()()(),e.TgZ(6,"div",60)(7,"form",61)(8,"div",62)(9,"div",63)(10,"div",1)(11,"div",64)(12,"label",65),e._uU(13,"Delivery Date "),e.TgZ(14,"span",66),e._uU(15,"*"),e.qZA()(),e._UZ(16,"input",67),e.YNc(17,X,2,1,"div",37),e.qZA(),e.TgZ(18,"div",64)(19,"label",68),e._uU(20,"Remark "),e.TgZ(21,"span",69),e._uU(22,"*"),e.qZA()(),e._UZ(23,"textarea",70),e.TgZ(24,"label",71),e._uU(25),e.qZA(),e.TgZ(26,"div",72),e._uU(27,"Please enter a Remark"),e.qZA()()()()()()(),e.TgZ(28,"div",73)(29,"button",74),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.dismiss("cancel"))}),e._uU(30," Close "),e.qZA(),e.TgZ(31,"button",75),e.NdJ("click",function(i){const d=e.CHM(t).$implicit;return e.KtG(d.close("Ok",i))}),e._uU(32," Submit "),e.qZA()()}if(2&a){const t=e.oxw();e.xp6(7),e.Q6J("formGroup",t.updateDeliveryNoteFrom),e.xp6(9),e.ekj("is-invalid",t.deliveryDate.invalid&&t.deliveryDate.touched),e.Q6J("altInput",!1)("enableTime",!1)("convertModelValue",!0)("dateFormat","d-m-Y"),e.xp6(1),e.Q6J("ngIf",t.deliveryDate.invalid&&t.deliveryDate.touched),e.xp6(6),e.ekj("is-invalid",t.deliveryNoteRemark.invalid&&t.deliveryNoteRemark.touched),e.Q6J("maxlength",t.maxCharsDecision),e.xp6(2),e.AsE(" Characters Remaining: ",null==t.deliveryNoteRemark||null==t.deliveryNoteRemark.value?null:t.deliveryNoteRemark.value.length,"/",t.maxCharsDecision,""),e.xp6(6),e.Q6J("disabled",t.updateDeliveryNoteFrom.invalid)}}let te=(()=>{class a{constructor(t,n,i,o,d,v,f,N,A){this.router=t,this.DeliveryService=n,this.authService=i,this.formBuilder=o,this.commonFunctionService=d,this.dropdownServices=v,this.helpDeskService=f,this.menuService=N,this.modalService=A,this.isProject=!1,this.label="Delivery Note",this.breadCrumbItems=[{label:"Delivery"},{label:"Delivery List",active:!0}],this.payload={displayLength:10,displayStart:0,SearchCompanyId:null,SearchClientId:null,SearchProjectId:null,SearchDeliveryNoteNo:null,SearchDeliveryNoteTitle:null,SearchDeliveryNoteStatusId:null},this.to=0,this.from=0,this.pageSize=10,this.totalRecordsFromApi=0,this.DeliveryList=[],this.page=1,this.collectionSize=0,this.imageUrl=y.N.apiUrl,this.arrayListDropDownCompany=[],this.arrayListDropDownClientList=[],this.arrayListDropDownProjectOrDeparmentList=[],this.arrayListDropDownDeliveryStatus=[],this.returnValueMenu={access:!0,add:!0,delete:!0,edit:!0,reportPrint:!0,reportView:!0},this.disabledWithAceessGroup=!1,this.projectDepartmentFieldDisiabled=!1,this.maxCharsDecision=300,this.returnValueMenu=this.menuService.getvalueObjectreturn(this.router.url),this.isProject=this.authService.getisProject()}ngOnInit(){this.getDropdownCompanyList(),this.getDeliveryNoteStatus("DeliveredStatus"),this.currentUserRole=JSON.parse(localStorage.getItem("currentUser")).role,"Client User"===this.currentUserRole&&(this.disabledWithAceessGroup=!0),localStorage.getItem("objectSerachForDeliveryList")?this.getObjectAfterRefresh():this.loadData()}navigateToAdd(){this.DeliveryService.accessRight=!0,this.router.navigate(["asset-management/delivery-note/add-delivery"])}setObjectBeforeRefesh(){let t={};this.arrayListDropDownCompany&&(t.arrayListDropDownCompany=this.arrayListDropDownCompany),this.selectedDropDownCompanyIdValue&&(t.SearchCompanyId=this.selectedDropDownCompanyIdValue),this.arrayListDropDownClientList&&(t.arrayListDropDownClientList=this.arrayListDropDownClientList),this.arrayListDropDownProjectOrDeparmentList&&(t.arrayListDropDownProjectOrDeparmentList=this.arrayListDropDownProjectOrDeparmentList),this.selectedDropDownClientIdValue&&(t.SearchClientId=this.selectedDropDownClientIdValue),this.selectedDropDownProjectOrDeparmentIdValue&&(t.SearchProjectId=this.selectedDropDownProjectOrDeparmentIdValue),this.typeDeliveryNoteTitleValue&&(t.SearchAssetAuditName=this.typeDeliveryNoteTitleValue),this.arrayListDropDownDeliveryStatus&&(t.arrayListDropDownDeliveryStatus=this.arrayListDropDownDeliveryStatus),this.selectedDropDownDeliveryStatusIdValue&&(t.SearchDeliveryNoteStatusId=this.selectedDropDownDeliveryStatusIdValue),this.selectedDeliveryNumber&&(t.SearchDeliveryNoteNo=this.selectedDeliveryNumber),this.typeDeliveryNoteTitleValue&&(t.SearchDeliveryNoteTitle=this.typeDeliveryNoteTitleValue),this.page&&(t.displayStart=this.pageSize*(this.page-1),t.page=this.page),localStorage.setItem("objectSerachForDeliveryList",JSON.stringify(t))}getObjectAfterRefresh(){let t=JSON.parse(localStorage.getItem("objectSerachForDeliveryList"));this.selectedDropDownCompanyIdValue=t.selectedDropDownCompanyIdValue?t.selectedDropDownCompanyIdValue:[],this.selectedDropDownCompanyIdValue=t.SearchCompanyId?t.SearchCompanyId:null,this.arrayListDropDownCompany=t.arrayListDropDownCompany?t.arrayListDropDownCompany:[],this.arrayListDropDownClientList=t.arrayListDropDownClientList?t.arrayListDropDownClientList:[],this.arrayListDropDownProjectOrDeparmentList=t.arrayListDropDownProjectOrDeparmentList?t.arrayListDropDownProjectOrDeparmentList:[],this.typeDeliveryNoteTitleValue=t.typeDeliveryNoteTitleValue?t.typeDeliveryNoteTitleValue:[],this.arrayListDropDownDeliveryStatus=t.arrayListDropDownDeliveryStatus?t.arrayListDropDownDeliveryStatus:[],this.selectedDropDownDeliveryStatusIdValue=t.SearchDeliveryNoteStatusId?t.SearchDeliveryNoteStatusId:null,this.typeDeliveryNoteTitleValue=t.SearchAssetAuditName?t.SearchAssetAuditName:null,this.selectedDeliveryNumber=t.SearchDeliveryNoteNo?t.SearchDeliveryNoteNo:null,this.typeDeliveryNoteTitleValue=t.SearchDeliveryNoteTitle?t.SearchDeliveryNoteTitle:null,this.selectedDropDownClientIdValue=t.SearchClientId?t.SearchClientId:null,this.selectedDropDownProjectOrDeparmentIdValue=t.SearchProjectId?t.SearchProjectId:null,this.payload.SearchDeliveryNoteStatusId=this.selectedDropDownDeliveryStatusIdValue,this.payload.SearchCompanyId=this.selectedDropDownCompanyIdValue,this.payload.SearchClientId=this.selectedDropDownClientIdValue,this.payload.SearchProjectId=this.selectedDropDownProjectOrDeparmentIdValue,this.payload.SearchAssetAuditName=this.typeDeliveryNoteTitleValue,this.payload.SearchDeliveryNoteNo=this.selectedDeliveryNumber,this.payload.SearchDeliveryNoteTitle=this.typeDeliveryNoteTitleValue,this.loadData()}OnChangesPage(t){t&&(this.payload.displayStart=this.pageSize*(t-1),this.loadData())}loadData(){this.DeliveryService.getV2_DeliveryingtList_ByPagination(this.commonFunctionService.clean(this.payload)).subscribe(t=>{this.DeliveryList=t.data,this.setObjectBeforeRefesh(),this.DeliveryList.length>0?(this.totalRecordsFromApi=t.data[0].totalCount,this.from=t.data.reduce((n,i)=>i.rowNum<n?i.rowNum:n,t.data[0].rowNum),this.to=t.data.reduce((n,i)=>i.rowNum>n?i.rowNum:n,t.data[0].rowNum),this.pageSize=this.payload.displayLength):(this.totalRecordsFromApi=0,this.from=0,this.to=0,this.pageSize=this.payload.displayLength)})}viewHandler(t){this.DeliveryService.sendDeliveryId=t,this.router.navigate(["asset-management/delivery-note/view-delivery"])}resetSerachVariable(){this.arrayListDropDownClientList=[],this.arrayListDropDownProjectOrDeparmentList=[],this.selectedDropDownCompanyIdValue=null,this.selectedDropDownClientIdValue=null,this.selectedDropDownProjectOrDeparmentIdValue=null,this.selectedDropDownDeliveryStatusIdValue=null,this.selectedDeliveryNumber=null,this.typeDeliveryNoteTitleValue=null,this.payload={displayLength:10,displayStart:0,SearchCompanyId:null,SearchClientId:null,SearchProjectId:null,SearchDeliveryNoteNo:null,SearchDeliveryNoteTitle:null,SearchDeliveryNoteStatusId:null},"Client User"===this.currentUserRole?this.resetAfterClientUser():(this.page=1,this.loadData())}resetAfterClientUser(){this.selectedDropDownCompanyIdValue=this.arrayListDropDownCompany[0].companyId,this.onDropdownCompanyValueChange(""),0!=this.arrayListDropDownClientList.length&&(this.selectedDropDownClientIdValue=this.arrayListDropDownClientList[0].clientId,this.onDropdownClientValueChange("")),0!=this.arrayListDropDownProjectOrDeparmentList.length&&"Client User"===this.currentUserRole&&(this.arrayListDropDownProjectOrDeparmentList.list.length>=2?this.projectDepartmentFieldDisiabled=!1:(this.projectDepartmentFieldDisiabled=!0,this.selectedDropDownProjectOrDeparmentIdValue=this.arrayListDropDownProjectOrDeparmentList[0].departmentId,this.onDropdownDepartmentValueChange("")))}getDropdownCompanyList(){this.dropdownServices.GetCompanyListDrobDown({}).subscribe(t=>{this.arrayListDropDownCompany=t.list,"Client User"===this.currentUserRole&&(this.selectedDropDownCompanyIdValue=this.arrayListDropDownCompany[0].companyId,this.onDropdownCompanyValueChange("")),this.setObjectBeforeRefesh()})}getDropdownClientlist(){this.dropdownServices.GetClientListDrobDown({SearchCompanyId:this.selectedDropDownCompanyIdValue}).subscribe(n=>{this.arrayListDropDownClientList=n.list,"Client User"===this.currentUserRole&&(this.selectedDropDownClientIdValue=this.arrayListDropDownClientList[0].clientId,this.onDropdownClientValueChange("")),this.setObjectBeforeRefesh()})}getDropdownDepartmentList(){this.dropdownServices.GetDepartmentListDrobDown({SearchCompanyId:this.selectedDropDownCompanyIdValue,SearchClientId:this.selectedDropDownClientIdValue}).subscribe(n=>{this.arrayListDropDownProjectOrDeparmentList=n.list,0!=n.list.length&&"Client User"===this.currentUserRole&&(n.list.length>=2?this.projectDepartmentFieldDisiabled=!1:(this.projectDepartmentFieldDisiabled=!0,this.selectedDropDownProjectOrDeparmentIdValue=this.arrayListDropDownProjectOrDeparmentList[0].departmentId,this.onDropdownDepartmentValueChange(""))),this.setObjectBeforeRefesh()})}onDropdownCompanyValueChange(t){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchCompanyId=this.selectedDropDownCompanyIdValue,this.selectedDropDownClientIdValue=null,this.selectedDropDownProjectOrDeparmentIdValue=null,this.payload.SearchClientId=this.selectedDropDownClientIdValue,this.payload.SearchProjectId=this.selectedDropDownProjectOrDeparmentIdValue,this.arrayListDropDownProjectOrDeparmentList=[],this.getDropdownClientlist(),this.loadData()}onDropdownClientValueChange(t){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchClientId=this.selectedDropDownClientIdValue,this.selectedDropDownProjectOrDeparmentIdValue=null,this.payload.SearchProjectId=this.selectedDropDownProjectOrDeparmentIdValue,this.getDropdownDepartmentList(),this.loadData()}onDropdownDepartmentValueChange(t){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchProjectId=this.selectedDropDownProjectOrDeparmentIdValue,this.loadData()}getDeliveryNoteStatus(t){this.DeliveryService.GetAssetStatusList(t).subscribe(n=>{this.arrayListDropDownDeliveryStatus=n})}onDropdownDeliveryStatusValueChange(t){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchDeliveryNoteStatusId=this.selectedDropDownDeliveryStatusIdValue,this.loadData()}returnStatusBadgeClassesStatus(t){return this.commonFunctionService.returnStatusBadgeClasses(t)}ngAfterViewInit(){(0,_.R)(this.inputerDeliveryName.nativeElement,"input").pipe((0,c.h)(Boolean),(0,r.b)(1e3),(0,l.x)(),(0,T.b)(t=>{this.onTypeDeliveryNameChange()})).subscribe(),(0,_.R)(this.inputerDeliveryNumber.nativeElement,"input").pipe((0,c.h)(Boolean),(0,r.b)(1e3),(0,l.x)(),(0,T.b)(t=>{this.onTypeDeliveryNumberChange()})).subscribe()}onTypeDeliveryNameChange(){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchDeliveryNoteTitle=this.typeDeliveryNoteTitleValue,this.loadData()}onTypeDeliveryNumberChange(){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchDeliveryNoteNo=this.selectedDeliveryNumber,this.loadData()}warning(t){x().fire({toast:!0,position:"top-end",icon:"warning",title:t,showConfirmButton:!1,timer:3e3})}getFromBinding(){this.updateDeliveryNoteFrom=this.formBuilder.group({deliveryDate:["",[h.kI.required]],deliveryNoteRemark:["",[h.kI.required]]})}get deliveryDate(){return this.updateDeliveryNoteFrom.get("deliveryDate")}get deliveryNoteRemark(){return this.updateDeliveryNoteFrom.get("deliveryNoteRemark")}openUpdateFormModal(t,n){this.getFromBinding(),this.modalService.open(t,{ariaLabelledBy:"modal-basic-title",size:"md",centered:!0,backdrop:"static",keyboard:!1}).result.then(i=>{this.openModalSuccess(n)},i=>{this.updateDeliveryNoteFrom.reset()})}updateDeliveryNoteToClient(t){let n={DeliveryNoteId:t.deliveryNoteId,DeliveryNoteRemark:this.deliveryNoteRemark.value,DeliveryDate:this.deliveryDate.value?this.dateFormatter(this.deliveryDate.value):null};this.DeliveryService.updateDeliveryNoteToClient(n).subscribe(i=>{this.success(i),this.loadData()})}success(t){x().fire({toast:!0,position:"top-end",icon:"success",title:t.message,showConfirmButton:!1,timer:3e3})}openModalSuccess(t){const n=this.modalService.open(O.l,{ariaLabelledBy:"modal-basic-title",size:"md",centered:!0,backdrop:"static",keyboard:!1});n.componentInstance.title="Are you Sure to Update Delivery Date!",n.componentInstance.subTitle="You won't be able to revert this!",n.result.then(i=>{i&&"success"==i&&this.updateDeliveryNoteToClient(t)})}dateFormatter(t){const n=F(t).format("YYYY-MM-DD");return"1970-01-01"===n?null:n}expandTitle(t){document.getElementById(t)}static{this.\u0275fac=function(n){return new(n||a)(e.Y36(g.F0),e.Y36(V),e.Y36(w.u),e.Y36(h.qu),e.Y36(S.K),e.Y36(I.V),e.Y36(G.S),e.Y36(U.l),e.Y36(D.FF))}}static{this.\u0275cmp=e.Xpm({type:a,selectors:[["app-delivery-note-list"]],viewQuery:function(n,i){if(1&n&&(e.Gf(R,7),e.Gf(Q,7)),2&n){let o;e.iGM(o=e.CRH())&&(i.inputerDeliveryName=o.first),e.iGM(o=e.CRH())&&(i.inputerDeliveryNumber=o.first)}},decls:43,vars:26,consts:[[3,"title","breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","border-0"],[1,"row","align-items-center","gy-3"],[1,"col-lg-auto"],[1,"card-title","mb-0"],[1,"col-lg"],["type","text","name","selectedDeliveryNumber","id","selectedDeliveryNumber","placeholder","Delivery No",1,"form-control",3,"ngModel","ngModelChange"],["inputerDeliveryNumber",""],[1,"search-box"],["type","search","name","searchTerm","placeholder","Delivery name",1,"form-control",3,"ngModel","ngModelChange"],["inputerDeliveryName",""],[1,"ri-search-line","search-icon"],["class","col-lg-auto",4,"ngIf"],[1,"card-body","border","border-dashed","border-end-0","border-start-0"],[1,"row","g-3"],["bindLabel","companyName","bindValue","companyId","id","companyName","placeholder","Select Company","for","companyName",1,"w-100","mr-2",3,"items","clearable","ngModel","readonly","change","ngModelChange"],["bindLabel","clientName","bindValue","clientId","id","clientName","placeholder","Select Client","for","clientName",1,"w-100","mr-2",3,"items","disabled","clearable","ngModel","readonly","change","ngModelChange"],["bindLabel","departmentName","bindValue","departmentId","id","departmentName","for","departmentName",1,"w-100","mr-2",3,"items","disabled","clearable","readonly","ngModel","placeholder","change","ngModelChange"],["bindLabel","assetStatus","bindValue","assetStatusId","id","DeliveryStatus","placeholder","Select Delivery Status","for","DeliveryStatus",1,"w-100","mr-2",3,"items","clearable","ngModel","change","ngModelChange"],["type","button","ngbTooltip","Remove All Search",1,"btn","btn-danger","ms-1",3,"click"],[1,"ri-refresh-fill","me-1","align-bottom"],[1,"card-body","pt-0"],["ngbNav","",1,"nav","nav-tabs","nav-tabs-custom","nav-success","mb-3",3,"activeId"],["nav","ngbNav"],[3,"ngbNavItem"],["ngbNavContent",""],[1,"tab-content","text-muted"],[3,"ngbNavOutlet"],["updateDeliveryModal",""],["type","button","id","create-btn",1,"btn","btn-success","add-btn",3,"click"],[1,"ri-add-line","align-bottom","me-1"],[1,"table-responsive","table-card","mb-0"],[1,"table"],[1,"bg-light","text-muted","text-uppercase"],[4,"ngIf"],[1,"row","justify-content-md-between","align-items-md-center","gy-2"],[1,"col","col-sm-12","col","col-md-6"],["id","Deliverys-table_info","role","status","aria-live","polite",1,"dataTables_info","mb-2"],[1,"text-sm-right","float-end","listjs-pagination"],[3,"collectionSize","pageSize","page","maxSize","rotate","pageChange",4,"ngIf"],["colspan","9",1,"text-center"],[4,"ngFor","ngForOf"],["href","javascript:void(0)",1,"fw-medium","link-primary",3,"click"],[1,"title",3,"title","id","click"],[1,"status"],["ngbDropdown","",1,"dropdown"],["type","button","data-bs-toggle","dropdown","aria-expanded","false","ngbDropdownToggle","",1,"btn","btn-soft-secondary","btn-sm","dropdown","arrow-none"],[1,"ri-more-fill"],["ngbDropdownMenu","",1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item","cursor-pointer",3,"click"],[1,"ri-eye-fill","align-bottom","me-2","text-muted"],[1,"ri-edit-box-line","align-bottom","me-2","text-muted"],[3,"collectionSize","pageSize","page","maxSize","rotate","pageChange"],[1,"modal-header","bg-info-subtle","pb-3"],["id","modal-title",1,"modal-title"],["type","button","aria-label","Close button","aria-describedby","modal-title",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"formGroup"],[1,"mb-2"],[1,"card-body"],[1,"form-group","col-md-12","mt-2"],["for","name",1,"form-label"],[2,"color","red"],["type","text","id","name","formControlName","deliveryDate","placeholder","Delivery Date ","mwlFlatpickr","",1,"form-control","mb-1",3,"altInput","enableTime","convertModelValue","dateFormat"],["for","exampleFormControlTextarea1",1,"form-label","text-muted","text-uppercase","fw-semibold"],[1,"starRequried"],["id","Remark","rows","4","placeholder","Remark","formControlName","deliveryNoteRemark",1,"form-control","bg-light","border-0",3,"maxlength"],[1,"nopadding","clrlbl"],[1,"invalid-feedback"],[1,"modal-footer"],["type","button",1,"btn","btn-danger","mr-2","mb-2","mb-md-0",3,"click"],["type","button","ngbAutofocus","",1,"btn","btn-success","mr-2","mb-2","mb-md-0",3,"disabled","click"],["class","text-danger",4,"ngIf"],[1,"text-danger"]],template:function(n,i){if(1&n&&(e._UZ(0,"app-breadcrumbs",0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h5",7),e._uU(8,"Delivery List"),e.qZA()(),e._UZ(9,"div",8),e.TgZ(10,"div",8)(11,"input",9,10),e.NdJ("ngModelChange",function(d){return i.selectedDeliveryNumber=d}),e.qZA()(),e.TgZ(13,"div",8)(14,"div",11)(15,"input",12,13),e.NdJ("ngModelChange",function(d){return i.typeDeliveryNoteTitleValue=d}),e.qZA(),e._UZ(17,"i",14),e.qZA()(),e.YNc(18,W,4,0,"div",15),e.qZA()(),e.TgZ(19,"div",16)(20,"div",17)(21,"div",8)(22,"ng-select",18),e.NdJ("change",function(d){return i.onDropdownCompanyValueChange(d)})("ngModelChange",function(d){return i.selectedDropDownCompanyIdValue=d}),e.qZA()(),e.TgZ(23,"div",8)(24,"ng-select",19),e.NdJ("change",function(d){return i.onDropdownClientValueChange(d)})("ngModelChange",function(d){return i.selectedDropDownClientIdValue=d}),e.qZA()(),e.TgZ(25,"div",8)(26,"ng-select",20),e.NdJ("change",function(d){return i.onDropdownDepartmentValueChange(d)})("ngModelChange",function(d){return i.selectedDropDownProjectOrDeparmentIdValue=d}),e.qZA()(),e.TgZ(27,"div",8)(28,"ng-select",21),e.NdJ("change",function(d){return i.onDropdownDeliveryStatusValueChange(d)})("ngModelChange",function(d){return i.selectedDropDownDeliveryStatusIdValue=d}),e.qZA()(),e.TgZ(29,"div",6)(30,"button",22),e.NdJ("click",function(){return i.resetSerachVariable()}),e._UZ(31,"i",23),e._uU(32," Clear "),e.qZA()()()(),e.TgZ(33,"div",24)(34,"div")(35,"ul",25,26)(37,"li",27),e.YNc(38,K,32,7,"ng-template",28),e.qZA()(),e.TgZ(39,"div",29),e._UZ(40,"div",30),e.qZA()()()()()(),e.YNc(41,ee,33,14,"ng-template",null,31,e.W1O)),2&n){const o=e.MAs(36);e.Q6J("title",i.label)("breadcrumbItems",i.breadCrumbItems),e.xp6(11),e.Q6J("ngModel",i.selectedDeliveryNumber),e.xp6(4),e.Q6J("ngModel",i.typeDeliveryNoteTitleValue),e.xp6(3),e.Q6J("ngIf",i.returnValueMenu.add),e.xp6(4),e.Q6J("items",i.arrayListDropDownCompany)("clearable",!0)("ngModel",i.selectedDropDownCompanyIdValue)("readonly",i.disabledWithAceessGroup),e.xp6(2),e.Q6J("items",i.arrayListDropDownClientList)("disabled",!i.selectedDropDownCompanyIdValue)("clearable",!0)("ngModel",i.selectedDropDownClientIdValue)("readonly",i.disabledWithAceessGroup),e.xp6(2),e.Q6J("items",i.arrayListDropDownProjectOrDeparmentList)("disabled",!i.selectedDropDownCompanyIdValue||!i.selectedDropDownClientIdValue)("clearable",!0)("readonly",i.projectDepartmentFieldDisiabled)("ngModel",i.selectedDropDownProjectOrDeparmentIdValue)("placeholder",i.isProject?"Select Project":"Select Department"),e.xp6(2),e.Q6J("items",i.arrayListDropDownDeliveryStatus)("clearable",!0)("ngModel",i.selectedDropDownDeliveryStatusIdValue),e.xp6(7),e.Q6J("activeId",1),e.xp6(2),e.Q6J("ngbNavItem",1),e.xp6(3),e.Q6J("ngbNavOutlet",o)}},dependencies:[s.sg,s.O5,h._Y,h.Fj,h.JJ,h.JL,h.nD,h.On,h.sg,h.u,D.jt,D.iD,D.Vi,D.uN,D.Pz,D.nv,D.Is,D.Dy,D.N9,D._L,L.w9,j.n,Z.as]})}}return a})();var ie=p(1343);const ne=["inputer"],ae=["poNumber"];function oe(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"div",5)(1,"ng-select",34),e.NdJ("change",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.onDropdownAssetStatusValueChange(i))})("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.selectedDropDownAssetStatusIdValue=i)}),e.qZA()()}if(2&a){const t=e.oxw();e.xp6(1),e.Q6J("items",t.arrayListDropDownAssetStatus)("clearable",!0)("ngModel",t.selectedDropDownAssetStatusIdValue)}}function re(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"div",35)(1,"input",36),e.NdJ("change",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.onCheckboxChange(i))}),e.qZA()()}if(2&a){const t=e.oxw();e.xp6(1),e.Q6J("checked",t.checkUncheckAll())}}function se(a,u){if(1&a&&(e.TgZ(0,"p",52),e._uU(1),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.hij(" Po No:",t.poNumber?t.poNumber:"NA"," ")}}function le(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"tr")(1,"th",38)(2,"div",35)(3,"input",39),e.NdJ("ngModelChange",function(i){const d=e.CHM(t).index,v=e.oxw(2);return e.KtG(v.assetList[d].checked=i)})("change",function(){const i=e.CHM(t),o=i.index,d=i.$implicit,v=e.oxw(2);return e.KtG(v.getAssetlistChecked(v.assetList[o].checked,d))}),e.qZA()()(),e.TgZ(4,"td")(5,"span")(6,"div",40)(7,"div",41)(8,"div",42),e._UZ(9,"img",43),e.qZA()(),e.TgZ(10,"div",44)(11,"h5",45)(12,"a",46),e._uU(13),e.qZA()(),e.TgZ(14,"p",47)(15,"a",48),e._uU(16),e.qZA()(),e.YNc(17,se,2,1,"p",49),e.TgZ(18,"p",50)(19,"span",51),e._uU(20),e.qZA()()()()()()()}if(2&a){const t=u.$implicit,n=u.index,i=e.oxw(2);e.xp6(3),e.s9C("value",t.id),e.Q6J("ngModel",i.assetList[n].checked),e.xp6(6),e.Q6J("src",t.assetImagePath?i.imageUrl+t.assetImagePath:"../../../../../assets/images/placeholderimage.png",e.LSH),e.xp6(4),e.Oqu(t.assetName),e.xp6(3),e.hij("",t.assetTagId," "),e.xp6(1),e.Q6J("ngIf",t.poNumber),e.xp6(3),e.Oqu(t.assetStatus)}}function de(a,u){if(1&a&&(e.ynx(0),e.YNc(1,le,21,7,"tr",37),e.BQk()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.assetList)}}function ce(a,u){1&a&&(e.ynx(0),e.TgZ(1,"tr")(2,"td",53)(3,"p",54),e._uU(4,"No Data Found"),e.qZA()()(),e.BQk())}function pe(a,u){1&a&&(e._UZ(0,"i",58),e._uU(1," Prev "))}function ue(a,u){1&a&&(e._uU(0," Next "),e._UZ(1,"i",59))}function he(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"ngb-pagination",55),e.NdJ("pageChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.page=i)})("pageChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.OnChangesPage(i))}),e.YNc(1,pe,2,0,"ng-template",56)(2,ue,2,0,"ng-template",57),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("collectionSize",t.totalRecordsFromApi)("page",t.page)("pageSize",t.pageSize)("maxSize",1)("rotate",!0)}}function me(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"div",60)(1,"h4",61),e._uU(2,"Qr-Code"),e.qZA(),e.TgZ(3,"button",62),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.dismiss("Cross click"))}),e.TgZ(4,"span",63),e._uU(5,"\xd7"),e.qZA()()(),e.TgZ(6,"div",64),e._UZ(7,"img",65),e.qZA()}if(2&a){const t=e.oxw();e.xp6(7),e.Q6J("src",t.imageUrl+(null==t.assetQrData?null:t.assetQrData.qrCodeImgPath),e.LSH)}}let ge=(()=>{class a{constructor(t,n,i,o,d,v,f,N,A,k,et){this.dropdownService=t,this.router=n,this.modalService=i,this.assetService=o,this.authService=d,this.menuService=v,this.formBuilder=f,this.commonFunctionService=N,this.dropdownServices=A,this.modal=k,this.cdr=et,this.isProject=!1,this.shownCol4=!0,this.label="Asset Management",this.breadCrumbItems=[{label:"Asset"},{label:"Asset List",active:!0}],this.payload={displayLength:10,displayStart:0,SearchCompanyId:null,SearchClientId:null,SearchDepartmentId:null,SearchLocationId:null,SearchAssetStatusId:null,SearchCategoryId:null,SearchSubCategoryId:null,SearchAssetName:null,SearchAssetTagId:null,SearchPoNumber:null},this.to=0,this.from=0,this.pageSize=10,this.totalRecordsFromApi=0,this.assetList=[],this.page=1,this.collectionSize=0,this.imageUrl=y.N.apiUrl,this.arrayListDropDownCompany=[],this.arrayListDropDownClientList=[],this.arrayListDropDownProjectOrDeparmentList=[],this.arrayListDropDownAssetStatus=[],this.arrayListDropDownLocationList=[],this.checkedAssetList=[],this.selectedAsset=[],this.isProject=this.authService.getisProject()}ngOnInit(){this.payload.SearchCompanyId=this.selectedDropDownCompanyIdValue,this.payload.SearchClientId=this.selectedDropDownClientIdValue,this.payload.SearchDepartmentId=this.selectedDropDownProjectOrDeparmentIdValue,this.checkedAssetList=this.selectedAsset?this.selectedAsset:[],this.payload.SearchAssetStatusId=this.SearchAssetStatusIdShown?this.SearchAssetStatusIdShown:null,this.loadData(),this.getLocationListDrobDown(),this.getDropdownCompanyList(),this.getDropdownAssetStatusList("AssetList")}ngOnChanges(t){this.payload.SearchCompanyId=this.selectedDropDownCompanyIdValue,this.payload.SearchClientId=this.selectedDropDownClientIdValue,this.payload.SearchDepartmentId=this.selectedDropDownProjectOrDeparmentIdValue,this.payload.SearchAssetStatusId=this.SearchAssetStatusIdShown?this.SearchAssetStatusIdShown:null,this.checkedAssetList=this.selectedAsset?this.selectedAsset:[],this.loadData(),this.getDropdownCompanyList(),this.getLocationListDrobDown(),this.getDropdownAssetStatusList("AssetList")}getLocationListDrobDown(){this.dropdownServices.GetLocationListDrobDown({SearchCompanyId:this.selectedDropDownCompanyIdValue,SearchClientId:this.selectedDropDownClientIdValue,SearchDepartmentId:this.selectedDropDownProjectOrDeparmentIdValue}).subscribe(n=>{this.arrayListDropDownLocationList=n.list})}onDropdownLocationValueChange(t){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchLocationId=this.selectedDropDownLocationIdValue,this.loadData()}navigateToAdd(){this.router.navigate(["/asset-management/asset/createasset"])}navigateToSpareList(){this.router.navigate(["/asset-management/spare/list-spare"])}navigateToQrList(){this.router.navigate(["/asset-management/asset/qr-detail"])}OnChangesPage(t){t&&(this.payload.displayStart=this.pageSize*(t-1),this.loadData())}loadData(){this.SearchAssetStatusIdShown?this.assetService.GetV2_DeliveryAssetOnly_ByPagination(this.commonFunctionService.clean(this.payload)).subscribe(t=>{this.assetList=t.list,this.checkedAssetList.length>0&&(this.assetList=this.assetList.filter(n=>((this.checkedAssetList?.filter(o=>o.id==n.id)).length>0&&(n.checked=!0),1))),this.assetList.length>0?(this.totalRecordsFromApi=t.list[0].totalCount,this.from=t.list.reduce((n,i)=>i.rowNum<n?i.rowNum:n,t.list[0].rowNum),this.to=t.list.reduce((n,i)=>i.rowNum>n?i.rowNum:n,t.list[0].rowNum),this.pageSize=this.payload.displayLength):(this.totalRecordsFromApi=0,this.from=0,this.to=0,this.pageSize=this.payload.displayLength)}):this.assetService.GetV2_CommanAssetList_ByPagination(this.commonFunctionService.clean(this.payload)).subscribe(t=>{this.assetList=t.list,this.checkedAssetList.length>0&&(this.assetList=this.assetList.filter(n=>((this.checkedAssetList?.filter(o=>o.id==n.id)).length>0&&(n.checked=!0),1))),this.assetList.length>0?(this.totalRecordsFromApi=t.list[0].totalCount,this.from=t.list.reduce((n,i)=>i.rowNum<n?i.rowNum:n,t.list[0].rowNum),this.to=t.list.reduce((n,i)=>i.rowNum>n?i.rowNum:n,t.list[0].rowNum),this.pageSize=this.payload.displayLength):(this.totalRecordsFromApi=0,this.from=0,this.to=0,this.pageSize=this.payload.displayLength)})}viewQrCodeImage(t,n){this.assetQrData=n,this.modalService.open(t,{ariaLabelledBy:"modal-basic-title",size:"lg",centered:!0,backdrop:"static",keyboard:!1})}viewHandler(t){this.assetService.sendAssetId=t,this.router.navigate(["/asset-management/asset/viewasset"])}editHandler(t){this.assetService.sendAssetId=t,this.router.navigate(["/asset-management/asset/editasset"])}onTypeAssetNameChange(){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchAssetName=this.typeAssetNameValue,this.loadData()}onTypePoNumberChange(){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchPoNumber=this.typePoNumber,this.loadData()}resetSerachVariable(){this.selectedDropDownAssetStatusIdValue=null,this.selectedDropDownLocationIdValue=null,this.typeAssetNameValue=null,this.typePoNumber=null,this.payload={displayLength:10,displayStart:0,SearchCompanyId:this.selectedDropDownCompanyIdValue,SearchClientId:this.selectedDropDownClientIdValue,SearchDepartmentId:this.selectedDropDownProjectOrDeparmentIdValue,SearchLocationId:null,SearchAssetStatusId:this.SearchAssetStatusIdShown?this.SearchAssetStatusIdShown:null,SearchCategoryId:null,SearchSubCategoryId:null,SearchAssetName:null,SearchAssetTagId:null,SearchPoNumber:null},this.page=1,this.loadData()}getDropdownCompanyList(){this.dropdownServices.GetCompanyListDrobDown({}).subscribe(t=>{this.arrayListDropDownCompany=t.list})}getDropdownClientlist(){this.dropdownServices.GetClientListDrobDown({SearchCompanyId:this.selectedDropDownCompanyIdValue}).subscribe(n=>{this.arrayListDropDownClientList=n.list})}getDropdownDepartmentList(){this.dropdownServices.GetDepartmentListDrobDown({SearchCompanyId:this.selectedDropDownCompanyIdValue,SearchClientId:this.selectedDropDownClientIdValue}).subscribe(n=>{this.arrayListDropDownProjectOrDeparmentList=n.list})}onDropdownCompanyValueChange(t){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchCompanyId=this.selectedDropDownCompanyIdValue,this.selectedDropDownClientIdValue=null,this.selectedDropDownProjectOrDeparmentIdValue=null,this.payload.SearchClientId=this.selectedDropDownClientIdValue,this.payload.SearchDepartmentId=this.selectedDropDownProjectOrDeparmentIdValue,this.arrayListDropDownProjectOrDeparmentList=[],this.getDropdownClientlist(),this.loadData()}onDropdownClientValueChange(t){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchClientId=this.selectedDropDownClientIdValue,this.selectedDropDownProjectOrDeparmentIdValue=null,this.payload.SearchDepartmentId=this.selectedDropDownProjectOrDeparmentIdValue,this.getDropdownDepartmentList(),this.loadData()}onDropdownDepartmentValueChange(t){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchDepartmentId=this.selectedDropDownProjectOrDeparmentIdValue,this.loadData()}getDropdownAssetStatusList(t){this.assetService.getAssetStatusList(t).subscribe(n=>{this.arrayListDropDownAssetStatus=n})}onDropdownAssetStatusValueChange(t){this.payload.SearchAssetStatusId=this.selectedDropDownAssetStatusIdValue,this.loadData()}uniqTheObject(t,n){return[...new Map(t.map(i=>[n(i),i])).values()]}onCheckboxChange(t){return this.assetList.length&&(this.assetList.forEach(n=>n.checked=t.target.checked),1==t.target.checked?this.assetList.forEach((n,i)=>{this.checkedAssetList.push(n)}):this.checkedAssetList=this.checkedAssetList.filter(n=>!(this.assetList.filter(o=>o.id==n.id).length>0)),this.checkedAssetList=this.uniqTheObject(this.checkedAssetList,n=>n.id)),!1}checkUncheckAll(){return 0!=this.assetList.length&&this.assetList.every(t=>t.checked)}getAssetlistChecked(t,n){1==t?this.checkedAssetList.push(n):this.checkedAssetList.forEach((i,o)=>{i.id==n.id&&this.checkedAssetList.splice(o,1)})}removeCheckedAssetList(t){this.assetList.forEach((n,i)=>{n.id==t.id&&(this.assetList[i].checked=!1)}),this.checkedAssetList.forEach((n,i)=>{n.id==t.id&&this.checkedAssetList.splice(i,1)})}ngAfterViewInit(){this.cdr.detectChanges(),(0,_.R)(this.input.nativeElement,"input").pipe((0,c.h)(Boolean),(0,r.b)(1e3),(0,l.x)(),(0,T.b)(t=>{this.onTypeAssetNameChange()})).subscribe(),(0,_.R)(this.poNumber.nativeElement,"input").pipe((0,c.h)(Boolean),(0,r.b)(1e3),(0,l.x)(),(0,T.b)(t=>{this.onTypePoNumberChange()})).subscribe()}close(){this.modal.dismiss(this.checkedAssetList)}submit(){this.modal.dismiss(this.checkedAssetList)}static{this.\u0275fac=function(n){return new(n||a)(e.Y36(I.V),e.Y36(g.F0),e.Y36(D.FF),e.Y36(ie.d),e.Y36(w.u),e.Y36(U.l),e.Y36(h.qu),e.Y36(S.K),e.Y36(I.V),e.Y36(D._B),e.Y36(e.sBO))}}static{this.\u0275cmp=e.Xpm({type:a,selectors:[["app-delivery-asset-list-common"]],viewQuery:function(n,i){if(1&n&&(e.Gf(ne,7),e.Gf(ae,7)),2&n){let o;e.iGM(o=e.CRH())&&(i.input=o.first),e.iGM(o=e.CRH())&&(i.poNumber=o.first)}},inputs:{shownCol4:"shownCol4",selectedDropDownCompanyIdValue:"selectedDropDownCompanyIdValue",selectedDropDownClientIdValue:"selectedDropDownClientIdValue",selectedDropDownProjectOrDeparmentIdValue:"selectedDropDownProjectOrDeparmentIdValue",SearchAssetStatusIdShown:"SearchAssetStatusIdShown",selectedAsset:"selectedAsset"},features:[e.TTD],decls:50,vars:14,consts:[[1,"offcanvas-header","border-bottom"],[1,"offcanvas-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"offcanvas-body"],[1,"row","mb-3"],[1,"col-lg","mb-2"],["bindLabel","locationName","bindValue","locationId","id","locationName","placeholder","Select Location","for","locationName",1,"w-100","mr-2",3,"items","disabled","clearable","ngModel","change","ngModelChange"],["class","col-lg mb-2",4,"ngIf"],[1,"search-box"],["type","search","name","searchTerm","placeholder","Search for asset name",1,"form-control",3,"ngModel","ngModelChange"],["inputer",""],[1,"ri-search-line","search-icon"],["type","search","name","searchTerm","placeholder","Search by Po Number",1,"form-control",3,"ngModel","ngModelChange"],["poNumber",""],[1,"col-lg","text-end","mb-2"],["type","button","ngbTooltip","Remove All Search",1,"btn","btn-danger","ms-1",3,"click"],[1,"ri-refresh-fill","me-1","align-bottom"],[1,"row","mt-2","border","border-dashed","border-top"],[1,"col-md-12","col-lg-12","mt-2","mb-2"],[1,"table-responsive","table-card","mb-0"],[1,"table"],[1,"bg-light","text-muted","text-uppercase"],["scope","col",2,"width","50px"],["class","form-check",4,"ngIf"],[4,"ngIf"],[1,"row","justify-content-md-between","align-items-md-center","gy-2"],[1,"col","col-sm-12","col","col-md-6"],["id","tickets-table_info","role","status","aria-live","polite",1,"dataTables_info","mb-2"],[1,"text-sm-right","float-end","listjs-pagination"],[3,"collectionSize","page","pageSize","maxSize","rotate","pageChange",4,"ngIf"],[1,"offcanvas-footer","text-end","mb-4","pb-2"],["type","button",1,"btn","btn","btn-outline-danger","me-2",3,"click"],["type","button","ngbAutofocus","",1,"btn","btn-success","me-2",3,"click"],["qrView",""],["bindLabel","assetStatus","bindValue","assetStatusId","id","assetStatus","placeholder","Select Asset Status","for","assetStatus",1,"mr-2",3,"items","clearable","ngModel","change","ngModelChange"],[1,"form-check"],["type","checkbox","id","checkAll","value","option",1,"form-check-input",3,"checked","change"],[4,"ngFor","ngForOf"],["scope","row"],["type","checkbox","name","checkAll",1,"form-check-input",3,"value","ngModel","ngModelChange","change"],[1,"d-flex","align-items-center"],[1,"flex-shrink-0","me-3"],[1,"avatar-sm","bg-light","rounded","p-1"],["alt","",1,"img-fluid-with-HW","d-block",3,"src"],[1,"flex-grow-1"],[1,"fs-14","mb-0"],["href","javascript:void(0)",1,"text-body"],[1,"text-muted","mb-0"],["href","javascript:void(0)",1,"fw-sm","link-primary"],["class","text-muted mb-0 fs-12",4,"ngIf"],[1,"text-muted","mb-0","status"],[1,"badge","text-uppercase","bg-secondary-subtle","text-secondary"],[1,"text-muted","mb-0","fs-12"],["colspan","2"],[1,"text-center"],[3,"collectionSize","page","pageSize","maxSize","rotate","pageChange"],["ngbPaginationPrevious",""],["ngbPaginationNext",""],[1,"ci-arrow-left","me-2"],[1,"ci-arrow-right","ms-2"],[1,"modal-header"],["id","modal-title",1,"modal-title"],["type","button","aria-label","Close button","aria-describedby","modal-title",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body","text-center"],["alt","qr",1,"qrCode-img",3,"src"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0)(1,"h5",1),e._uU(2,"Ready Stock Asset List"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return i.close()}),e.qZA()(),e.TgZ(4,"div",3)(5,"div",4)(6,"div",5)(7,"ng-select",6),e.NdJ("change",function(d){return i.onDropdownLocationValueChange(d)})("ngModelChange",function(d){return i.selectedDropDownLocationIdValue=d}),e.qZA()(),e.YNc(8,oe,2,3,"div",7),e.TgZ(9,"div",5)(10,"div",8)(11,"input",9,10),e.NdJ("ngModelChange",function(d){return i.typeAssetNameValue=d}),e.qZA(),e._UZ(13,"i",11),e.qZA()(),e.TgZ(14,"div",5)(15,"div",8)(16,"input",12,13),e.NdJ("ngModelChange",function(d){return i.typePoNumber=d}),e.qZA(),e._UZ(18,"i",11),e.qZA()(),e.TgZ(19,"div",14)(20,"button",15),e.NdJ("click",function(){return i.resetSerachVariable()}),e._UZ(21,"i",16),e._uU(22," Clear "),e.qZA()()(),e.TgZ(23,"div",17)(24,"div",18)(25,"div",19)(26,"table",20)(27,"thead")(28,"tr",21)(29,"th",22),e.YNc(30,re,2,1,"div",23),e.qZA(),e.TgZ(31,"th"),e._uU(32,"Asset"),e.qZA()()(),e.TgZ(33,"tbody"),e.YNc(34,de,2,1,"ng-container",24)(35,ce,5,0,"ng-container",24),e.qZA()()(),e.TgZ(36,"div",25)(37,"div",26)(38,"div",27),e._uU(39),e.qZA()(),e.TgZ(40,"div",26)(41,"div",28),e.YNc(42,he,3,5,"ngb-pagination",29),e.qZA()()()()()(),e.TgZ(43,"div",30)(44,"button",31),e.NdJ("click",function(){return i.close()}),e._uU(45," Close "),e.qZA(),e.TgZ(46,"button",32),e.NdJ("click",function(){return i.submit()}),e._uU(47," Submit "),e.qZA()(),e.YNc(48,me,8,1,"ng-template",null,33,e.W1O)),2&n&&(e.xp6(7),e.Q6J("items",i.arrayListDropDownLocationList)("disabled",!i.selectedDropDownProjectOrDeparmentIdValue)("clearable",!0)("ngModel",i.selectedDropDownLocationIdValue),e.xp6(1),e.Q6J("ngIf",!i.SearchAssetStatusIdShown),e.xp6(3),e.Q6J("ngModel",i.typeAssetNameValue),e.xp6(5),e.Q6J("ngModel",i.typePoNumber),e.xp6(14),e.Q6J("ngIf",0!=i.assetList.length),e.xp6(4),e.Q6J("ngIf",0!=i.assetList.length),e.xp6(1),e.Q6J("ngIf",0==i.assetList.length),e.xp6(4),e.lnq(" Showing ",i.from," to ",i.to," of ",i.totalRecordsFromApi," entries "),e.xp6(3),e.Q6J("ngIf",i.totalRecordsFromApi>i.pageSize))},dependencies:[s.sg,s.O5,h.Fj,h.Wl,h.JJ,h.On,D.N9,D.GZ,D.ju,D._L,L.w9],styles:[".fw-sm[_ngcontent-%COMP%]{font-size:12px;font-weight:800}.transpart[_ngcontent-%COMP%]{background-color:transparent}.close[_ngcontent-%COMP%]{padding:8px;margin:2px}.w-75[_ngcontent-%COMP%]{width:400px!important}.col-w-30[_ngcontent-%COMP%]{width:32%}.img-fluid-with-HW[_ngcontent-%COMP%]{height:45px;width:45px}"]})}}return a})();var De=p(859),P=p(9275);function ye(a,u){1&a&&(e.TgZ(0,"small",41),e._uU(1," Company is Required "),e.qZA())}function _e(a,u){if(1&a&&(e.TgZ(0,"div",39),e.YNc(1,ye,2,0,"small",40),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.company.errors.required)}}function ve(a,u){1&a&&(e.TgZ(0,"small",41),e._uU(1," Client is Required "),e.qZA())}function Ce(a,u){if(1&a&&(e.TgZ(0,"div",39),e.YNc(1,ve,2,0,"small",40),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.client.errors.required)}}function be(a,u){if(1&a&&(e.TgZ(0,"small",41),e._uU(1),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.isProject?"Project":"Department"," is Required")}}function fe(a,u){if(1&a&&(e.TgZ(0,"div",39),e.YNc(1,be,2,1,"small",40),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.project.errors.required)}}function Te(a,u){1&a&&(e.TgZ(0,"small",41),e._uU(1," Delivery Tilte is Required "),e.qZA())}function Ne(a,u){if(1&a&&(e.TgZ(0,"div"),e.YNc(1,Te,2,0,"small",40),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.title.errors.required)}}function we(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"i",42),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.clearChangDate())}),e.qZA()}}function Ae(a,u){1&a&&(e.TgZ(0,"small",41),e._uU(1," Expected Delivery Date is Required "),e.qZA())}function Se(a,u){if(1&a&&(e.TgZ(0,"div"),e.YNc(1,Ae,2,0,"small",40),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.expectedDeliveryDate.errors?null:t.expectedDeliveryDate.errors.required)}}function Ie(a,u){1&a&&(e.TgZ(0,"small",41),e._uU(1," Time is Required "),e.qZA())}function Le(a,u){if(1&a&&(e.TgZ(0,"div"),e.YNc(1,Ie,2,0,"small",40),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.expectedDeliveryTime.errors?null:t.expectedDeliveryTime.errors.required)}}function Ze(a,u){1&a&&(e.TgZ(0,"small",41),e._uU(1," Note is Required "),e.qZA())}function ke(a,u){if(1&a&&(e.TgZ(0,"div"),e.YNc(1,Ze,2,0,"small",40),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.title.errors.required)}}function Me(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"button",43),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.getAssetList())}),e._uU(1," Add Asset "),e.qZA()}}function xe(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"a",45),e._uU(3),e.qZA()(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td",46)(7,"span"),e._uU(8),e.qZA()(),e.TgZ(9,"td",46)(10,"a",47),e.NdJ("click",function(){const o=e.CHM(t).$implicit,d=e.oxw(2);return e.KtG(d.openModalDeleteAssetObject(o))}),e._UZ(11,"i",48),e.qZA()()()}if(2&a){const t=u.$implicit,n=e.oxw(2);e.xp6(3),e.Oqu(t.assetTagId?t.assetTagId:"NA"),e.xp6(2),e.hij(" ",t.assetName," "),e.xp6(2),e.Tol(n.returnStatusBadgeClassesStatus(t.assetStatusId)),e.xp6(1),e.Oqu(t.assetStatus)}}function Ve(a,u){if(1&a&&(e.TgZ(0,"tbody"),e.YNc(1,xe,12,5,"tr",44),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.selectedAssetList)}}function Ue(a,u){1&a&&(e.TgZ(0,"tbody")(1,"tr")(2,"td",49),e._uU(3,"No Asset Selected"),e.qZA()()())}const q=(a,u)=>({"is-invalid":a,"is-valid":u});let je=(()=>{class a{constructor(t,n,i,o,d,v,f,N,A){this.router=t,this.authService=n,this.formBuilder=i,this.dropdownServices=o,this.deliveryService=d,this.offcanvasService=v,this.commonFunctionService=f,this.datePipe=N,this.modalService=A,this.isProject=!1,this.label="Delivery Note",this.breadCrumbItems=[{label:"Delivery"},{label:"Delivery Add",active:!0}],this.maxCharsDecision=300,this.arrayListDropDownCompany=[],this.arrayListDropDownClientList=[],this.arrayListDropDownProjectOrDeparmentList=[],this.arrayListDropDownAssetStatus=[],this.projectDepartmentFieldDisiabled=!1,this.selectedAssetList=[],this.disabledWithAceessGroup=!1,1==this.deliveryService.accessRight?(this.isProject=this.authService.getisProject(),this.getDropdownCompanyList()):this.goback()}ngOnInit(){let t=JSON.parse(localStorage.getItem("currentUser"));"Client User"===t?.role&&"Application User"===t?.accessGroupName&&(this.disabledWithAceessGroup=!0),this.getFromBinding()}getFromBinding(){this.addDeliveryNoteFrom=this.formBuilder.group({company:[null,[h.kI.required]],client:[null,[h.kI.required]],project:[null,[h.kI.required]],title:["",[h.kI.required]],expectedDeliveryTime:["",[h.kI.required]],expectedDeliveryDate:["",[h.kI.required]],deliveryNoteRemark:["",[h.kI.required]]})}get client(){return this.addDeliveryNoteFrom.get("client")}get company(){return this.addDeliveryNoteFrom.get("company")}get project(){return this.addDeliveryNoteFrom.get("project")}get title(){return this.addDeliveryNoteFrom.get("title")}get expectedDeliveryTime(){return this.addDeliveryNoteFrom.get("expectedDeliveryTime")}get expectedDeliveryDate(){return this.addDeliveryNoteFrom.get("expectedDeliveryDate")}get deliveryNoteRemark(){return this.addDeliveryNoteFrom.get("deliveryNoteRemark")}goback(){this.router.navigate(["/asset-management/delivery-note/list-delivery"])}getDropdownCompanyList(){this.dropdownServices.GetCompanyListDrobDown({}).subscribe(t=>{if(this.arrayListDropDownCompany=t.list,0!=t.list.length){let n=JSON.parse(localStorage.getItem("currentUser"));"Client User"===n?.role&&"Application User"===n?.accessGroupName&&(this.selectedDropDownCompanyIdValue=this.arrayListDropDownCompany[0].companyId,this.getDropdownClientlist())}})}getDropdownClientlist(){this.dropdownServices.GetClientListDrobDown({SearchCompanyId:this.selectedDropDownCompanyIdValue}).subscribe(n=>{if(this.arrayListDropDownClientList=n.list,0!=n.list.length){let i=JSON.parse(localStorage.getItem("currentUser"));"Client User"===i?.role&&"Application User"===i?.accessGroupName&&(this.selectedDropDownClientIdValue=this.arrayListDropDownClientList[0].clientId,this.getDropdownDepartmentList())}})}getDropdownDepartmentList(){this.dropdownServices.GetDepartmentListDrobDown({SearchCompanyId:this.selectedDropDownCompanyIdValue,SearchClientId:this.selectedDropDownClientIdValue}).subscribe(n=>{if(this.arrayListDropDownProjectOrDeparmentList=n.list,0!=n.list.length){let i=JSON.parse(localStorage.getItem("currentUser"));"Client User"===i?.role&&"Application User"===i?.accessGroupName&&(this.selectedDropDownProjectOrDeparmentIdValue=this.arrayListDropDownProjectOrDeparmentList[0].departmentId,this.projectDepartmentFieldDisiabled=!(n.list.length>=2))}})}onDropdownCompanyValueChange(t){this.selectedDropDownClientIdValue=null,this.selectedDropDownProjectOrDeparmentIdValue=null,this.arrayListDropDownProjectOrDeparmentList=[],this.getDropdownClientlist(),this.selectedAssetList=[]}onDropdownClientValueChange(t){this.selectedDropDownProjectOrDeparmentIdValue=null,this.getDropdownDepartmentList(),this.selectedAssetList=[]}onDropdownDepartmentValueChange(t){this.selectedAssetList=[]}returnStatusBadgeClassesStatus(t){return this.commonFunctionService.returnStatusBadgeClasses(t)}getAssetList(){const t=this.offcanvasService.open(ge,{scroll:!0,position:"end",keyboard:!1,backdrop:"static",panelClass:"custom-offcanvas "});t.componentInstance.selectedDropDownCompanyIdValue=this.company.value,t.componentInstance.selectedDropDownClientIdValue=this.client.value,t.componentInstance.selectedDropDownProjectOrDeparmentIdValue=this.project.value,t.componentInstance.SearchAssetStatusIdShown=11,t.componentInstance.selectedAsset=0!=this.selectedAssetList.length?this.selectedAssetList:[],t.result.then(n=>{this.selectedAssetList=n}).catch(n=>{this.selectedAssetList=n})}convertTo12HourFormat(t){const[n,i]=t.split(":");let o=parseInt(n,10);const d=o>=12?"PM":"AM";return o>12?o-=12:0===o&&(o=12),`${o}:${i} ${d}`}findNameById(t,n,i,o){const d=n.find(v=>v[o]===t);return d?d[i]:void 0}onSubmit(){let t={header:{DeliveryNoteTitle:this.title.value,DeliveryNoteRemark:this.deliveryNoteRemark?.value,CompanyId:this.company.value,ClientId:this.client.value,ClientName:this.findNameById(this.client.value,this.arrayListDropDownClientList,"clientName","clientId"),CompanyName:this.findNameById(this.company.value,this.arrayListDropDownCompany,"companyName","companyId"),ProjectId:this.project.value,ProjectName:this.findNameById(this.project.value,this.arrayListDropDownProjectOrDeparmentList,"departmentName","departmentId"),ExpectedDeliveryDateTime:this.datePipe.transform(this.expectedDeliveryDate.value,"yyyy-MM-dd ")+" "+this.expectedDeliveryTime.value},assetList:this.selectedAssetList?this.selectedAssetList.map(n=>({assetId:n.id})):[]};this.saveDelivery(this.commonFunctionService.clean(t))}saveDelivery(t){this.deliveryService.createDeliveryNote(t).subscribe(n=>{n&&(this.success(n),this.router.navigate(["asset-management/delivery-note/list-delivery"]))},n=>{this.refreshRouter()})}success(t){x().fire({toast:!0,position:"top-end",icon:"success",title:t.message,showConfirmButton:!1,timer:3e3})}refreshRouter(){this.router.navigate([this.router.url],{queryParamsHandling:"preserve",preserveFragment:!0})}clearChangDate(){this.expectedDeliveryDate.reset(),this.expectedDeliveryTime.reset()}openModalDeleteAssetObject(t){console.log(t,"hh");const n=this.modalService.open(De.z,{ariaLabelledBy:"modal-basic-title",size:"md",centered:!0,backdrop:"static",keyboard:!1});n.componentInstance.title="You are about to delete a Asset ?",n.componentInstance.subTitle="Deleting your Asset will remove for this Asset List  ",n.result.then(i=>{i&&"delete"==i&&this.unCheckItemAssetList(t)})}unCheckItemAssetList(t){const n=this.getAssetIndex(t.id);this.selectedAssetList.splice(n,1)}getAssetIndex(t){return this.selectedAssetList.findIndex(n=>n.id===t)}static{this.\u0275fac=function(n){return new(n||a)(e.Y36(g.F0),e.Y36(w.u),e.Y36(h.qu),e.Y36(I.V),e.Y36(V),e.Y36(D._B),e.Y36(S.K),e.Y36(s.uU),e.Y36(D.FF))}}static{this.\u0275cmp=e.Xpm({type:a,selectors:[["app-delivery-note-add"]],decls:90,vars:63,consts:[[3,"title","breadcrumbItems"],[3,"formGroup"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body"],[1,"col-md-4","mb-3"],["for","companyId",1,"form-label","mb-0"],[1,"starRequried"],["bindLabel","companyName","bindValue","companyId","placeholder","Select Company","formControlName","company",1,"custom",3,"readonly","items","clearable","ngModel","ngClass","ngModelChange","change"],["class","mt-2",4,"ngIf"],[1,"form-group"],["bindLabel","clientName","bindValue","clientId","placeholder","Select Client","formControlName","client",1,"custom",3,"readonly","items","clearable","ngModel","ngClass","ngModelChange","change"],[1,"form-label","mb-0"],["bindLabel","departmentName","bindValue","departmentId","formControlName","project",1,"custom",3,"readonly","items","ngModel","placeholder","clearable","ngClass","ngModelChange","change"],[1,"col-md-8","mb-3"],["type","text","placeholder","Enter Delivery Tilte","formControlName","title",1,"form-control"],[4,"ngIf"],["for","expectedDeliveryDate",1,"form-label","mb-0"],["class"," ri-close-circle-line text-danger",3,"click",4,"ngIf"],[1,"d-flex"],["type","date","id","expectedDeliveryDate","formControlName","expectedDeliveryDate","placeholder","Schedule Start On","mwlFlatpickr","",1,"form-control",3,"altInput","enableTime","convertModelValue","dateFormat"],["id","timeInput","formControlName","expectedDeliveryTime",1,"form-control",3,"ngxMatTimepicker"],["dottedMinutesInGap","","enableKeyboardInput",""],["picker",""],[1,"col-md-8"],["placeholder","Note","rows","3","id","remark","name","remark","formControlName","deliveryNoteRemark",1,"form-control","my-1","height-textarea-2",3,"maxlength"],[1,"nopadding","clrlbl"],[1,"row","mt-3"],[1,"card-header","d-flex","justify-content-between"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"table-responsive","table-card","mb-0"],[1,"table"],[1,"bg-light","text-muted","text-uppercase"],[1,"text-end","mb-3"],["type","button",1,"btn","btn-soft-primary","waves-effect","mx-3",3,"click"],["type","button",1,"btn","btn-success","w-sm",3,"disabled","click"],[1,"mt-2"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"ri-close-circle-line","text-danger",3,"click"],[1,"btn","btn-primary",3,"click"],[4,"ngFor","ngForOf"],["href","javascript:void(0)",1,"fw-medium","link-primary"],[1,"status"],["href","javascript:void(0)",1,"dropdown-item","cursor-pointer",3,"click"],[1,"ri-delete-bin-fill","align-bottom","me-2","text-danger"],["colspan","4",1,"text-center"]],template:function(n,i){if(1&n&&(e._UZ(0,"app-breadcrumbs",0),e.TgZ(1,"form",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h5",6),e._uU(7,"Basic Information"),e.qZA()(),e.TgZ(8,"div",7)(9,"div",2)(10,"div",8)(11,"label",9),e._uU(12,"Company"),e.TgZ(13,"span",10),e._uU(14,"*"),e.qZA()(),e.TgZ(15,"ng-select",11),e.NdJ("ngModelChange",function(d){return i.selectedDropDownCompanyIdValue=d})("change",function(d){return i.onDropdownCompanyValueChange(d)}),e.qZA(),e.YNc(16,_e,2,1,"div",12),e.qZA(),e.TgZ(17,"div",8)(18,"div",13)(19,"label",9),e._uU(20,"Client"),e.TgZ(21,"span",10),e._uU(22,"*"),e.qZA()(),e.TgZ(23,"ng-select",14),e.NdJ("ngModelChange",function(d){return i.selectedDropDownClientIdValue=d})("change",function(d){return i.onDropdownClientValueChange(d)}),e.qZA(),e.YNc(24,Ce,2,1,"div",12),e.qZA()(),e.TgZ(25,"div",8)(26,"div",13)(27,"label",15),e._uU(28),e.TgZ(29,"span",10),e._uU(30,"*"),e.qZA()(),e.TgZ(31,"ng-select",16),e.NdJ("ngModelChange",function(d){return i.selectedDropDownProjectOrDeparmentIdValue=d})("change",function(d){return i.onDropdownDepartmentValueChange(d)}),e.qZA(),e.YNc(32,fe,2,1,"div",12),e.qZA()(),e.TgZ(33,"div",17)(34,"label",15),e._uU(35,"Delivery Tilte"),e.TgZ(36,"span",10),e._uU(37,"*"),e.qZA()(),e._UZ(38,"input",18),e.YNc(39,Ne,2,1,"div",19),e.qZA(),e.TgZ(40,"div",8)(41,"div",13)(42,"label",20),e._uU(43,"Expected Delivery Date "),e.TgZ(44,"span",10),e._uU(45,"*"),e.qZA(),e.YNc(46,we,1,0,"i",21),e.qZA(),e.TgZ(47,"div",22),e._UZ(48,"input",23)(49,"input",24)(50,"ngx-mat-timepicker",25,26),e.qZA(),e.YNc(52,Se,2,1,"div",19)(53,Le,2,1,"div",19),e.qZA()(),e.TgZ(54,"div",27)(55,"label",15),e._uU(56,"Note "),e.TgZ(57,"span",10),e._uU(58,"*"),e.qZA()(),e._UZ(59,"textarea",28),e.TgZ(60,"label",29),e._uU(61),e.qZA(),e.YNc(62,ke,2,1,"div",19),e.qZA()()()()()(),e.TgZ(63,"div",30)(64,"div",3)(65,"div",4)(66,"div",31)(67,"h5",6),e._uU(68,"Select Asset"),e.qZA(),e.YNc(69,Me,2,0,"button",32),e.qZA(),e.TgZ(70,"div",7)(71,"div",33)(72,"table",34)(73,"thead")(74,"tr",35)(75,"th"),e._uU(76,"Asset No"),e.qZA(),e.TgZ(77,"th"),e._uU(78,"Asset"),e.qZA(),e.TgZ(79,"th"),e._uU(80,"Status"),e.qZA(),e.TgZ(81,"th"),e._uU(82,"Action"),e.qZA()()(),e.YNc(83,Ve,2,1,"tbody",19)(84,Ue,4,0,"tbody",19),e.qZA()()()()()()(),e.TgZ(85,"div",36)(86,"button",37),e.NdJ("click",function(){return i.goback()}),e._uU(87," Back "),e.qZA(),e.TgZ(88,"button",38),e.NdJ("click",function(){return i.onSubmit()}),e._uU(89," Submit "),e.qZA()()),2&n){const o=e.MAs(51);e.Q6J("title",i.label)("breadcrumbItems",i.breadCrumbItems),e.xp6(1),e.Q6J("formGroup",i.addDeliveryNoteFrom),e.xp6(14),e.Q6J("readonly",i.disabledWithAceessGroup)("items",i.arrayListDropDownCompany)("clearable",!1)("ngModel",i.selectedDropDownCompanyIdValue)("ngClass",e.WLB(54,q,i.company.invalid&&i.company.touched,i.company.valid&&i.company.touched)),e.xp6(1),e.Q6J("ngIf",i.company.invalid&&i.company.touched),e.xp6(7),e.Q6J("readonly",i.disabledWithAceessGroup)("items",i.arrayListDropDownClientList)("clearable",!1)("ngModel",i.selectedDropDownClientIdValue)("ngClass",e.WLB(57,q,i.client.invalid&&i.client.touched,i.client.valid&&i.client.touched)),e.xp6(1),e.Q6J("ngIf",i.client.invalid&&i.client.touched),e.xp6(4),e.Oqu(i.isProject?"Project":"Department"),e.xp6(3),e.Q6J("readonly",i.projectDepartmentFieldDisiabled)("items",i.arrayListDropDownProjectOrDeparmentList)("ngModel",i.selectedDropDownProjectOrDeparmentIdValue)("placeholder",i.isProject?"Select Project":"Select Department")("clearable",!1)("ngClass",e.WLB(60,q,i.project.invalid&&i.project.touched,i.project.valid&&i.project.touched)),e.xp6(1),e.Q6J("ngIf",(null==i.project?null:i.project.invalid)&&(null==i.project?null:i.project.touched)),e.xp6(6),e.ekj("is-invalid",i.title.invalid&&i.title.touched)("is-valid",i.title.valid&&i.title.touched),e.xp6(1),e.Q6J("ngIf",i.title.invalid&&i.title.touched),e.xp6(7),e.Q6J("ngIf",i.expectedDeliveryDate.value),e.xp6(2),e.ekj("is-invalid",i.expectedDeliveryDate.invalid&&i.expectedDeliveryDate.touched)("is-valid",i.expectedDeliveryDate.valid&&i.expectedDeliveryDate.touched),e.Q6J("altInput",!1)("enableTime",!1)("convertModelValue",!0)("dateFormat","d-m-Y"),e.xp6(1),e.Q6J("ngxMatTimepicker",o),e.xp6(3),e.Q6J("ngIf",i.expectedDeliveryDate.invalid&&i.expectedDeliveryDate.touched),e.xp6(1),e.Q6J("ngIf",i.expectedDeliveryTime.invalid&&i.expectedDeliveryTime.touched),e.xp6(6),e.ekj("is-invalid",i.deliveryNoteRemark.invalid&&i.deliveryNoteRemark.touched)("is-valid",i.deliveryNoteRemark.valid&&i.deliveryNoteRemark.touched),e.Q6J("maxlength",i.maxCharsDecision),e.xp6(2),e.AsE(" Characters Remaining: ",null==i.deliveryNoteRemark.value?null:i.deliveryNoteRemark.value.length,"/",i.maxCharsDecision,""),e.xp6(1),e.Q6J("ngIf",i.title.invalid&&i.title.touched),e.xp6(7),e.Q6J("ngIf",i.company.value&&i.client.value&&i.project.value),e.xp6(1),e.Tol(0!=(null==i.selectedAssetList?null:i.selectedAssetList.length)?"maxHeightCard":""),e.xp6(13),e.Q6J("ngIf",0!=i.selectedAssetList.length),e.xp6(1),e.Q6J("ngIf",0==i.selectedAssetList.length),e.xp6(4),e.Q6J("disabled",i.addDeliveryNoteFrom.invalid||0==i.selectedAssetList.length)}},dependencies:[s.mk,s.sg,s.O5,h._Y,h.Fj,h.JJ,h.JL,h.nD,h.sg,h.u,L.w9,j.n,Z.as,P.ft,P.Bi],styles:[".maxHeightCard[_ngcontent-%COMP%]{height:500px;overflow-y:auto}"]})}}return a})();var Pe=p(5675);const qe=["customNav"],Oe=["defaultNav"];function Fe(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"button",43),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2),o=e.MAs(45);return e.KtG(i.openUpdateFormModal(o,i.masterDeliveryList))}),e._uU(1," Update Delivery"),e.qZA()}}function Je(a,u){if(1&a&&(e.TgZ(0,"div",22)(1,"div",28)(2,"div",29)(3,"div",30)(4,"h6",31),e._uU(5,"Remark"),e.qZA(),e.TgZ(6,"p",32),e._uU(7),e.qZA()()()(),e.TgZ(8,"div",33)(9,"div",34)(10,"div",35)(11,"h5",36),e._uU(12,"Delivery Details"),e.qZA(),e.YNc(13,Fe,2,0,"button",37),e.qZA(),e.TgZ(14,"div",30)(15,"div",38)(16,"table",39)(17,"tbody")(18,"tr")(19,"td",40),e._uU(20,"Delivery Note No"),e.qZA(),e.TgZ(21,"td"),e._uU(22),e.qZA()(),e.TgZ(23,"tr")(24,"td",40),e._uU(25," Expected Delivery Date Time "),e.qZA(),e.TgZ(26,"td"),e._uU(27),e.qZA()(),e.TgZ(28,"tr")(29,"td",40),e._uU(30,"Created By"),e.qZA(),e.TgZ(31,"td"),e._uU(32),e.qZA()(),e.TgZ(33,"tr")(34,"td",40),e._uU(35," Created Date Time "),e.qZA(),e.TgZ(36,"td",41),e._uU(37),e.qZA()(),e.TgZ(38,"tr")(39,"td",40),e._uU(40,"Status"),e.qZA(),e.TgZ(41,"td")(42,"span",42),e._uU(43),e.qZA()()()()()()()()()()),2&a){const t=e.oxw();e.xp6(7),e.hij(" ",t.masterDeliveryList.deliveryNoteRemark||"-"," "),e.xp6(6),e.Q6J("ngIf",2==(null==t.masterDeliveryList?null:t.masterDeliveryList.deliveryNoteStatusId)),e.xp6(9),e.hij(" ",(null==t.masterDeliveryList?null:t.masterDeliveryList.deliveryNoteNo)||"-"," "),e.xp6(5),e.hij(" ",(null==t.masterDeliveryList?null:t.masterDeliveryList.expectedDeliveryDateTime)||"-"," "),e.xp6(5),e.hij(" ",(null==t.masterDeliveryList?null:t.masterDeliveryList.createdByName)||"-"," "),e.xp6(5),e.hij(" ",(null==t.masterDeliveryList?null:t.masterDeliveryList.createdDateTime)||"-"," "),e.xp6(5),e.Tol(t.returnStatusBadgeClassesStatus(t.masterDeliveryList.deliveryNoteStatusId)),e.xp6(1),e.Oqu(t.masterDeliveryList.deliveryNoteStatusName)}}function Ge(a,u){if(1&a&&(e.TgZ(0,"div",29)(1,"div",30)(2,"div",22)(3,"div",2),e._UZ(4,"app-asset-view",44),e.qZA()()()()),2&a){const t=e.oxw();e.xp6(4),e.Q6J("assetList",t.assetTicketItem)}}function Re(a,u){1&a&&(e.TgZ(0,"small",66),e._uU(1," Delivery Date is Required"),e.qZA())}function Qe(a,u){if(1&a&&(e.TgZ(0,"div"),e.YNc(1,Re,2,0,"small",65),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.deliveryDate.errors.required)}}function We(a,u){if(1&a){const t=e.EpF();e.TgZ(0,"div",45)(1,"h4",46),e._uU(2,"Update Delivery"),e.qZA(),e.TgZ(3,"button",47),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.dismiss("Cross click"))}),e.TgZ(4,"span",48),e._uU(5,"\xd7"),e.qZA()()(),e.TgZ(6,"div",49)(7,"form",50)(8,"div",51)(9,"div",30)(10,"div",22)(11,"div",52)(12,"label",53),e._uU(13,"Delivery Date "),e.TgZ(14,"span",54),e._uU(15,"*"),e.qZA()(),e._UZ(16,"input",55),e.YNc(17,Qe,2,1,"div",56),e.qZA(),e.TgZ(18,"div",52)(19,"label",57),e._uU(20,"Remark "),e.TgZ(21,"span",58),e._uU(22,"*"),e.qZA()(),e._UZ(23,"textarea",59),e.TgZ(24,"label",60),e._uU(25),e.qZA(),e.TgZ(26,"div",61),e._uU(27,"Please enter a Remark"),e.qZA()()()()()()(),e.TgZ(28,"div",62)(29,"button",63),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.dismiss("cancel"))}),e._uU(30," Close "),e.qZA(),e.TgZ(31,"button",64),e.NdJ("click",function(i){const d=e.CHM(t).$implicit;return e.KtG(d.close("Ok",i))}),e._uU(32," Submit "),e.qZA()()}if(2&a){const t=e.oxw();e.xp6(7),e.Q6J("formGroup",t.updateDeliveryNoteFrom),e.xp6(9),e.ekj("is-invalid",t.deliveryDate.invalid&&t.deliveryDate.touched),e.Q6J("altInput",!1)("enableTime",!1)("convertModelValue",!0)("dateFormat","d-m-Y"),e.xp6(1),e.Q6J("ngIf",t.deliveryDate.invalid&&t.deliveryDate.touched),e.xp6(6),e.ekj("is-invalid",t.deliveryNoteRemark.invalid&&t.deliveryNoteRemark.touched),e.Q6J("maxlength",t.maxCharsDecision),e.xp6(2),e.AsE(" Characters Remaining: ",null==t.deliveryNoteRemark||null==t.deliveryNoteRemark.value?null:t.deliveryNoteRemark.value.length,"/",t.maxCharsDecision,""),e.xp6(6),e.Q6J("disabled",t.updateDeliveryNoteFrom.invalid)}}const Be=[{path:"",component:m,children:[{path:"",pathMatch:"full",redirectTo:"list-delivery"},{path:"list-delivery",component:te},{path:"add-delivery",component:je},{path:"view-delivery",component:(()=>{class a{constructor(t,n,i,o,d,v,f){this.router=t,this.modalService=n,this.deliveryService=i,this.authService=o,this.menuService=d,this.commonFunctionService=v,this.formBuilder=f,this.defaultNavActiveId=1,this.assetTicketItem=[],this.label="Preventive Management",this.breadCrumbItems=[{label:"Delivery"},{label:"Delivery View",active:!0}],this.activeId=1,this.imageUrl=y.N.apiUrl,this.paylod={DeliveryNoteId:null},this.masterDeliveryList=[],this.maxCharsDecision=300,this.isProject=this.authService.getisProject(),this.storesendDeliveryId=this.deliveryService.sendDeliveryId?this.deliveryService.sendDeliveryId:0,this.paylod.DeliveryNoteId=this.storesendDeliveryId,0==this.storesendDeliveryId||null==this.storesendDeliveryId?this.router.navigate(["/asset-management/delivery-note/list-delivery"]):this.getV2_DeliveryNoteAndTransDetail()}ngOnInit(){this.defaultNavActiveId=1}refreshThePage(){this.defaultNavActiveId=1,this.getV2_DeliveryNoteAndTransDetail()}getV2_DeliveryNoteAndTransDetail(){this.deliveryService.getV2_DeliveryNoteAndTransDetail(this.paylod).subscribe(t=>{Object.keys(t).forEach(n=>{null===t[n]&&(t[n]=[])}),this.masterDeliveryList=t.objHeader,this.assetTicketItem=t.objAssetList})}returnStatusBadgeClassesStatus(t){return this.commonFunctionService.returnStatusBadgeClasses(t)}goback(){this.router.navigate(["/asset-management/delivery-note/list-delivery"])}getFromBinding(){this.updateDeliveryNoteFrom=this.formBuilder.group({deliveryDate:["",[h.kI.required]],deliveryNoteRemark:["",[h.kI.required]]})}get deliveryDate(){return this.updateDeliveryNoteFrom.get("deliveryDate")}get deliveryNoteRemark(){return this.updateDeliveryNoteFrom.get("deliveryNoteRemark")}openUpdateFormModal(t,n){this.getFromBinding(),this.modalService.open(t,{ariaLabelledBy:"modal-basic-title",size:"md",centered:!0,backdrop:"static",keyboard:!1}).result.then(i=>{this.openModalSuccess(n)},i=>{this.updateDeliveryNoteFrom.reset()})}updateDeliveryNoteToClient(t){let n={DeliveryNoteId:t.deliveryNoteId,DeliveryNoteRemark:this.deliveryNoteRemark.value,DeliveryDate:this.deliveryDate.value?this.dateFormatter(this.deliveryDate.value):null};this.deliveryService.updateDeliveryNoteToClient(n).subscribe(i=>{this.goback()})}openModalSuccess(t){const n=this.modalService.open(O.l,{ariaLabelledBy:"modal-basic-title",size:"md",centered:!0,backdrop:"static",keyboard:!1});n.componentInstance.title="Are you Sure to Update Delivery Date!",n.componentInstance.subTitle="You won't be able to revert this!",n.result.then(i=>{i&&"success"==i&&this.updateDeliveryNoteToClient(t)})}dateFormatter(t){const n=F(t).format("YYYY-MM-DD");return"1970-01-01"===n?null:n}static{this.\u0275fac=function(n){return new(n||a)(e.Y36(g.F0),e.Y36(D.FF),e.Y36(V),e.Y36(w.u),e.Y36(U.l),e.Y36(S.K),e.Y36(h.qu))}}static{this.\u0275cmp=e.Xpm({type:a,selectors:[["app-delivery-note-view"]],viewQuery:function(n,i){if(1&n&&(e.Gf(qe,5),e.Gf(Oe,5)),2&n){let o;e.iGM(o=e.CRH())&&(i.customNav=o.first),e.iGM(o=e.CRH())&&(i.defaultNav=o.first)}},decls:46,vars:9,consts:[["title","Delivery Note",3,"breadcrumbItems"],[1,"row","mt-1"],[1,"col-lg-12"],[1,"card","mt-n4","mx-n4"],[1,"bg-warning-subtle"],[1,"card-body","pb-0","px-4"],[1,"row","mb-4"],["href","javascript:void(0);",1,"text-primary","text-decoration-underline","fw-medium","text-end",3,"click"],[1,"ri-refresh-line","text-primary","fs-18"],[1,"col-md"],[1,"row","align-items-center"],[1,"fw-bold"],[1,"hstack","gap-3","flex-wrap"],[1,"ri-building-line","align-bottom","me-1"],[1,"vr"],[1,"ri-building-2-line","align-bottom","me-1"],[1,"ri-community-line","align-bottom","me-1"],["ngbNav","","role","tablist",1,"nav","nav-tabs-custom","border-bottom-0",3,"activeId"],["customNav","ngbNav"],[1,"nav-item",3,"ngbNavItem"],["ngbNavLink","","data-bs-toggle","tab","role","tab",1,"nav-link"],["ngbNavContent",""],[1,"row"],[1,"tab-content","text-muted"],[3,"ngbNavOutlet"],[1,"text-end","mb-3"],["type","button",1,"btn","btn-soft-primary","waves-effect","mx-3",3,"click"],["updateDeliveryModal",""],[1,"col-xxl-8","stretch-card"],[1,"card"],[1,"card-body"],[1,"fw-semibold","text-uppercase","mb-3"],[1,"text-muted","mb-2"],[1,"col-xxl-4"],[1,"card","ribbon-box","right"],[1,"card-header","d-flex","justify-content-between","align-items-baseline"],[1,"card-title","mb-0"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"table-responsive"],[1,"table","table-borderless","mb-0"],[1,"fw-medium","w-10"],["id","t-client"],[1,"fs-12"],[1,"btn","btn-primary",3,"click"],[3,"assetList"],[1,"modal-header","bg-info-subtle","pb-3"],["id","modal-title",1,"modal-title"],["type","button","aria-label","Close button","aria-describedby","modal-title",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"formGroup"],[1,"mb-2"],[1,"form-group","col-md-12","mt-2"],["for","name",1,"form-label"],[2,"color","red"],["type","text","id","name","formControlName","deliveryDate","placeholder","Delivery Date ","mwlFlatpickr","",1,"form-control","mb-1",3,"altInput","enableTime","convertModelValue","dateFormat"],[4,"ngIf"],["for","exampleFormControlTextarea1",1,"form-label","text-muted","text-uppercase","fw-semibold"],[1,"starRequried"],["id","Remark","rows","4","placeholder","Remark","formControlName","deliveryNoteRemark",1,"form-control","bg-light","border-0",3,"maxlength"],[1,"nopadding","clrlbl"],[1,"invalid-feedback"],[1,"modal-footer"],["type","button",1,"btn","btn-danger","mr-2","mb-2","mb-md-0",3,"click"],["type","button","ngbAutofocus","",1,"btn","btn-success","mr-2","mb-2","mb-md-0",3,"disabled","click"],["class","text-danger",4,"ngIf"],[1,"text-danger"]],template:function(n,i){if(1&n&&(e._UZ(0,"app-breadcrumbs",0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"a",7),e.NdJ("click",function(){return i.refreshThePage()}),e._UZ(8,"i",8),e.qZA(),e.TgZ(9,"div",9)(10,"div",10)(11,"div",9)(12,"div")(13,"h4",11),e._uU(14),e.qZA(),e.TgZ(15,"div",12)(16,"div"),e._UZ(17,"i",13),e._uU(18),e.qZA(),e._UZ(19,"div",14),e.TgZ(20,"div"),e._UZ(21,"i",15),e._uU(22),e.qZA(),e._UZ(23,"div",14),e.TgZ(24,"div"),e._UZ(25,"i",16),e._uU(26),e.qZA()()()()()()(),e.TgZ(27,"ul",17,18)(29,"li",19)(30,"a",20),e._uU(31," Schedule "),e.qZA(),e.YNc(32,Je,44,9,"ng-template",21),e.qZA(),e.TgZ(33,"li",19)(34,"a",20),e._uU(35," Assets "),e.qZA(),e.YNc(36,Ge,5,1,"ng-template",21),e.qZA()()()()()()(),e.TgZ(37,"div",22)(38,"div",2)(39,"div",23),e._UZ(40,"div",24),e.qZA()()(),e.TgZ(41,"div",25)(42,"button",26),e.NdJ("click",function(){return i.goback()}),e._uU(43," Back "),e.qZA()(),e.YNc(44,We,33,14,"ng-template",null,27,e.W1O)),2&n){const o=e.MAs(28);e.Q6J("breadcrumbItems",i.breadCrumbItems),e.xp6(14),e.hij(" ",(null==i.masterDeliveryList?null:i.masterDeliveryList.deliveryNoteTitle)||"-"," "),e.xp6(4),e.hij(" ",(null==i.masterDeliveryList?null:i.masterDeliveryList.companyName)||"-"," "),e.xp6(4),e.hij("",(null==i.masterDeliveryList?null:i.masterDeliveryList.clientName)||"-"," "),e.xp6(4),e.hij("",(null==i.masterDeliveryList?null:i.masterDeliveryList.projectName)||"-"," "),e.xp6(1),e.Q6J("activeId",i.activeId),e.xp6(2),e.Q6J("ngbNavItem",1),e.xp6(4),e.Q6J("ngbNavItem",2),e.xp6(7),e.Q6J("ngbNavOutlet",o)}},dependencies:[s.O5,h._Y,h.Fj,h.JJ,h.JL,h.nD,h.sg,h.u,D.uN,D.Pz,D.nv,D.Is,D.Vx,D.tO,D.Dy,j.n,Pe.F,Z.as]})}}return a})()}]}];let Ye=(()=>{class a{static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275mod=e.oAB({type:a})}static{this.\u0275inj=e.cJS({imports:[g.Bz.forChild(Be),g.Bz]})}}return a})();var Ee=p(9364),ze=p(6208),He=p(6592),Ke=p(7625),$e=p(2032);let Xe=(()=>{class a{static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275mod=e.oAB({type:a})}static{this.\u0275inj=e.cJS({providers:[s.uU],imports:[s.ez,Ye,Ee.xD,h.u5,h.UX,D.IJ,L.A0,D.Gs,D.HK,D.XC,D.M,ze.m,He.m,Z.JT.forRoot(),Ke.QM,P.Yy,$e.c]})}}return a})()},859:(M,C,p)=>{p.d(C,{z:()=>e});var s=p(9212),g=p(7291);let e=(()=>{class m{constructor(y){this.modal=y}ngOnInit(){}ngOnChanges(y){}close(y){this.modal.close(y)}deleteData(){}static{this.\u0275fac=function(_){return new(_||m)(s.Y36(g.Kz))}}static{this.\u0275cmp=s.Xpm({type:m,selectors:[["app-delete-modal"]],inputs:{title:"title",subTitle:"subTitle"},features:[s.TTD],decls:17,vars:2,consts:[[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gsqxdxog.json","trigger","loop","colors","primary:#405189,secondary:#f06548",2,"width","90px","height","90px"],[1,"mt-4","fs-15","mx-2","mx-sm-2"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["data-bs-dismiss","modal","id","deleteRecord-close",1,"btn","w-sm","btn-danger","fw-medium","text-decoration-none",3,"click"],[1,"ri-close-line","me-1","align-middle"],["type","button","id","delete-product",1,"btn","w-sm","btn-primary",3,"click"]],template:function(_,c){1&_&&(s.TgZ(0,"div",0)(1,"div",1)(2,"button",2),s.NdJ("click",function(){return c.close("Close click")}),s.qZA()(),s.TgZ(3,"div",3)(4,"div",4),s._UZ(5,"lord-icon",5),s.TgZ(6,"div",6)(7,"h5"),s._uU(8),s.qZA(),s.TgZ(9,"p",7),s._uU(10),s.qZA()()(),s.TgZ(11,"div",8)(12,"button",9),s.NdJ("click",function(){return c.close("Close click")}),s._UZ(13,"i",10),s._uU(14," Close "),s.qZA(),s.TgZ(15,"button",11),s.NdJ("click",function(){return c.close("delete")}),s._uU(16," Yes, Delete It! "),s.qZA()()()()),2&_&&(s.xp6(8),s.Oqu(c.title),s.xp6(2),s.hij("",c.subTitle," "))}})}}return m})()}}]);