"use strict";(self.webpackChunksms_portal=self.webpackChunksms_portal||[]).push([[6250],{8384:(j,A,p)=>{p.d(A,{y:()=>S});var e=p(9862),u=p(553),I=p(9212),L=p(2787),b=p(5035);let S=(()=>{class f{constructor(m,g,k){this._http=m,this._route=g,this.authService=k,this.cItem={},this.addAccess=!1}getClientTableList_LocalPagination(m){return this._http.post(u.N.apiUrl+"api/V2_Master/GetClientTableList_LocalPagination",m,{headers:(new e.WM).set("Content-Type","application/json").set("Authorization","Bearer "+this.token)})}clientList(m){return this._http.post(u.N.apiUrl+"api/V2_Master/GetV2_GetClientListDrobDown",m,{headers:(new e.WM).set("Content-Type","application/json").set("Authorization","Bearer "+this.token)})}getClientDetailById(m){return this._http.post(u.N.apiUrl+"api/V2_Master/GetClientDetail",{clientId:m},{headers:(new e.WM).set("Content-Type","application/json").set("Authorization","Bearer "+this.token)})}GetV2_GetClientTableList(m){return this._http.post(u.N.apiUrl+"api/Master/GetV2_GetClientTableList",m,{headers:(new e.WM).set("Content-Type","application/json").set("Authorization","Bearer "+this.token)})}postClient(m){return this._http.post(u.N.apiUrl+"api/V2_Master/CreateClient",m,{headers:(new e.WM).set("Content-Type","application/json").set("Authorization","Bearer "+this.token)})}postGetV2_GetCompanyListDrobDown(m){return this._http.post(u.N.apiUrl+"api/V2_Master/GetCompanyListDrobDown",m,{headers:(new e.WM).set("Content-Type","application/json").set("Authorization","Bearer "+this.token)})}postUpdateClient(m){return this._http.post(u.N.apiUrl+"api/V2_Master/UpdateCLient",m,{headers:(new e.WM).set("Content-Type","application/json").set("Authorization","Bearer "+this.token)})}postDeleteClient(m){return this._http.post(u.N.apiUrl+"api/V2_Master/DeleteCLient",m,{headers:(new e.WM).set("Content-Type","application/json").set("Authorization","Bearer "+this.token)})}getClientDetailsById(m){return this._http.post(u.N.apiUrl+"api/V2_Master/GetClientDetail",m,{headers:(new e.WM).set("Content-Type","application/json").set("Authorization","Bearer "+this.token)})}UpdateClientLogo(m){return this._http.post(u.N.apiUrl+"api/V2_Master/UpdateClientLogo",m,{headers:(new e.WM).set("Content-Type","application/json").set("Authorization",`Bearer ${localStorage.getItem("token")}`)})}static{this.\u0275fac=function(g){return new(g||f)(I.LFG(e.eN),I.LFG(L.F0),I.LFG(b.$))}}static{this.\u0275prov=I.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"})}}return f})()},6075:(j,A,p)=>{p.d(A,{J:()=>b});var e=p(9862),u=p(553),I=p(9212);let b=(()=>{class S{constructor(C){this._http=C,this.addCompanyAccess=!1}getCompanyTableList_LocalPagination(){return this._http.post(u.N.apiUrl+"api/V2_Master/GetCompanyTableList_LocalPagination",{headers:(new e.WM).set("Content-Type","application/json").set("Authorization",`Bearer ${localStorage.getItem("token")}`)})}postCompany(C){return this._http.post(u.N.apiUrl+"api/V2_Master/CreateCompany",C,{headers:(new e.WM).set("Content-Type","application/json").set("Authorization",`Bearer ${localStorage.getItem("token")}`)})}updateCompanyLogo(C){return this._http.post(u.N.apiUrl+"api/V2_Master/UpdateCompanyLogo",C,{headers:(new e.WM).set("Content-Type","application/json").set("Authorization",`Bearer ${localStorage.getItem("token")}`)})}getCompanyDetail(C){return this._http.post(u.N.apiUrl+"api/V2_Master/GetCompanyDetail",C,{headers:(new e.WM).set("Content-Type","application/json").set("Authorization",`Bearer ${localStorage.getItem("token")}`)})}updateCompany(C){return this._http.post(u.N.apiUrl+"api/V2_Master/UpdateCompany",C,{headers:(new e.WM).set("Content-Type","application/json").set("Authorization",`Bearer ${localStorage.getItem("token")}`)})}deleteCompany(C){return this._http.post(u.N.apiUrl+"api/V2_Master/DeleteCompany",C,{headers:(new e.WM).set("Content-Type","application/json").set("Authorization",`Bearer ${localStorage.getItem("token")}`)})}static{this.\u0275fac=function(m){return new(m||S)(I.LFG(e.eN))}}static{this.\u0275prov=I.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"})}}return S})()},618:(j,A,p)=>{p.d(A,{n:()=>S});var e=p(9862),u=p(553),I=p(9212),L=p(2787),b=p(5035);let S=(()=>{class f{static{this.editDepartmentId=0}constructor(m,g,k){this._http=m,this._route=g,this.authService=k,this.accessRight=!1}getDepartmentTableList_LocalPagination(m){return this._http.post(u.N.apiUrl+"api/V2_Master/GetDepartmentTableList_LocalPagination",m,{headers:(new e.WM).set("Content-Type","application/json")})}getClientForApplicationSettingDrobDown(m){return this._http.post(u.N.apiUrl+"api/V2_Master/GetClientForApplicationSettingDrobDown",m,{headers:(new e.WM).set("Content-Type","application/json")})}postDepartment(m){return this._http.post(u.N.apiUrl+"api/V2_Master/CreateDepartment",m,{headers:(new e.WM).set("Content-Type","application/json")})}postUpdateDepartmentLogo(m){return this._http.post(u.N.apiUrl+"api/Master/UpdateDepartmentLogo",m,{headers:(new e.WM).set("Content-Type","application/json")})}getDepartmentByCompanyId(m){return this._http.get(u.N.apiUrl+"api/Master/GetDepartmentList/"+m,{headers:(new e.WM).set("Content-Type","application/json")})}getDepartmentByClientId(m,g){return this._http.get(u.N.apiUrl+"api/Master/GetDepartmentListByClient/"+m+"/"+g,{headers:(new e.WM).set("Content-Type","application/json")})}getCompanyListWithDept(m){return this._http.get(u.N.apiUrl+"api/Master/GetCompanyListWithDept/"+m,{headers:(new e.WM).set("Content-Type","application/json")})}getDepartmentListByDeptId(m){return this._http.get(u.N.apiUrl+"api/Master/GetDepartmentListByDeptId/"+m,{headers:(new e.WM).set("Content-Type","application/json")})}getDepartmentDetail(m){return this._http.post(u.N.apiUrl+"api/V2_Master/GetDepartmentDetail",{DepartmentId:m},{headers:(new e.WM).set("Content-Type","application/json")})}postUpdateDepartment(m){return this._http.post(u.N.apiUrl+"api/V2_Master/UpdateDepartment",m,{headers:(new e.WM).set("Content-Type","application/json")})}postDeleteDepartment(m){return this._http.post(u.N.apiUrl+"api/Master/DeleteDepartment",m,{headers:(new e.WM).set("Content-Type","application/json")})}getClient(m){return this._http.post(u.N.apiUrl+"api/V2_Master/GetClientListDrobDown",{SearchCompanyId:m},{headers:(new e.WM).set("Content-Type","application/json")})}getDepartmentListDropdown(m,g){return this._http.post(u.N.apiUrl+"api/V2_Master/GetDepartmentListDrobDown",{SearchCompanyId:m,SearchClientId:g},{headers:(new e.WM).set("Content-Type","application/json")})}static{this.\u0275fac=function(g){return new(g||f)(I.LFG(e.eN),I.LFG(L.F0),I.LFG(b.$))}}static{this.\u0275prov=I.Yz7({token:f,factory:f.\u0275fac,providedIn:"root"})}}return f})()},886:(j,A,p)=>{p.d(A,{G:()=>L});var e=p(553),u=p(9862),I=p(9212);let L=(()=>{class b{constructor(f){this._http=f}genererateV2_Quotation(f){return this._http.post(e.N.apiUrl+"api/Maintenance/GenererateV2_Quotation",f,{headers:(new u.WM).set("Content-Type","application/json")})}genererateV2_QuotationResubmit(f){return this._http.post(e.N.apiUrl+"api/Maintenance/GenererateV2_QuotationResubmit",f,{headers:(new u.WM).set("Content-Type","application/json")})}getV2_MX_QuotationAndItemDetails(f){return this._http.post(e.N.apiUrl+"api/Maintenance/GetV2_MX_QuotationAndItemDetails",f,{headers:(new u.WM).set("Content-Type","application/json")})}updateV2_MaintenanceQuotationBillProcess(f){return this._http.post(e.N.apiUrl+"api/MaintentDash/UpdateV2_MaintenanceQuotationBillProcess",f,{headers:(new u.WM).set("Content-Type","application/json")})}updateReviewerApproverQuotationInReview(f){return this._http.post(e.N.apiUrl+"api/MaintentDash/UpdateReviewerApproverQuotationInReview",f,{headers:(new u.WM).set("Content-Type","application/json")})}UpdateReviewerApproverQuotationPending(f){return this._http.post(e.N.apiUrl+"api/MaintentDash/UpdateReviewerApproverQuotationPending",f,{headers:(new u.WM).set("Content-Type","application/json")})}getV2_MX_QuotationAndItemDetailsByTicketId(f){return this._http.post(e.N.apiUrl+"api/Maintenance/GetV2_MX_QuotationAndItemDetailsByTicketId",f,{headers:(new u.WM).set("Content-Type","application/json")})}getV2_MX_QuotationNoListOnlyByTicketId(f){return this._http.post(e.N.apiUrl+"api/Maintenance/GetV2_MX_QuotationNoListOnlyByTicketId",f,{headers:(new u.WM).set("Content-Type","application/json")})}static{this.\u0275fac=function(C){return new(C||b)(I.LFG(u.eN))}}static{this.\u0275prov=I.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"})}}return b})()},8883:(j,A,p)=>{p.d(A,{S:()=>mt});var e=p(9212),u=p(6223),I=p(7337),L=p(6676),b=p(7291),S=p(6075),f=p(8384),C=p(3828),m=p(886),g=p(471),k=p(2787),t=p(618),_=p(6814),q=p(553),O=p(2438),F=p(2181),w=p(3620),J=p(3997),G=p(9397),M=p(9455),$=p(1343),B=p(7235),P=p(2857),Y=p(4807);const X=["inputer"];function tt(D,T){1&D&&e._UZ(0,"div",25)}function et(D,T){1&D&&(e.ynx(0),e.TgZ(1,"tr")(2,"td",26)(3,"p",27),e._uU(4,"No Data Found"),e.qZA()()(),e.BQk())}function ot(D,T){if(1&D){const s=e.EpF();e.TgZ(0,"tr")(1,"th",29)(2,"div",25)(3,"input",30),e.NdJ("ngModelChange",function(r){const y=e.CHM(s).index,N=e.oxw(2);return e.KtG(N.assetList[y].checked=r)})("change",function(){const r=e.CHM(s),h=r.index,y=r.$implicit,N=e.oxw(2);return e.KtG(N.getAssetlistChecked(N.assetList[h].checked,y))}),e.qZA()()(),e.TgZ(4,"td")(5,"span")(6,"div",31)(7,"div",32)(8,"div",33),e._UZ(9,"img",34),e.qZA()(),e.TgZ(10,"div",35)(11,"h5",36)(12,"a",37),e._uU(13),e.qZA()(),e.TgZ(14,"p",38)(15,"a",39),e._uU(16),e.qZA()(),e.TgZ(17,"p",40)(18,"span",41),e._uU(19),e.qZA()()()()()()()}if(2&D){const s=T.$implicit,l=T.index,r=e.oxw(2);e.xp6(3),e.s9C("value",s.id),e.Q6J("ngModel",r.assetList[l].checked),e.xp6(6),e.Q6J("src",s.assetImagePath?r.imageUrl+s.assetImagePath:"../../../../../assets/images/placeholderimage.png",e.LSH),e.xp6(4),e.Oqu(s.assetName),e.xp6(3),e.hij("",s.assetTagId," "),e.xp6(3),e.Oqu(s.assetStatus)}}function nt(D,T){if(1&D&&(e.ynx(0),e.YNc(1,ot,20,6,"tr",28),e.BQk()),2&D){const s=e.oxw();e.xp6(1),e.Q6J("ngForOf",s.assetList)}}function it(D,T){1&D&&(e._UZ(0,"i",45),e._uU(1," Prev "))}function at(D,T){1&D&&(e._uU(0," Next "),e._UZ(1,"i",46))}function st(D,T){if(1&D){const s=e.EpF();e.TgZ(0,"ngb-pagination",42),e.NdJ("pageChange",function(r){e.CHM(s);const h=e.oxw();return e.KtG(h.page=r)})("pageChange",function(r){e.CHM(s);const h=e.oxw();return e.KtG(h.OnChangesPage(r))}),e.YNc(1,it,2,0,"ng-template",43)(2,at,2,0,"ng-template",44),e.qZA()}if(2&D){const s=e.oxw();e.Q6J("collectionSize",s.totalRecordsFromApi)("page",s.page)("pageSize",s.pageSize)("maxSize",1)("rotate",!0)}}let rt=(()=>{class D{constructor(s,l,r,h,y,N,V,x,Q){this.dropdownService=s,this.router=l,this.modalService=r,this.assetService=h,this.authService=y,this.menuService=N,this.formBuilder=V,this.commonFunctionService=x,this.dropdownServices=Q,this.isProject=!1,this.shownCol4=!0,this.assetListSelected=new e.vpe,this.selectedAsset=[],this.label="Asset Management",this.breadCrumbItems=[{label:"Asset"},{label:"Asset List",active:!0}],this.payload={displayLength:10,displayStart:0,SearchCompanyId:null,SearchClientId:null,SearchDepartmentId:null,SearchLocationId:null,SearchAssetStatusId:null,SearchCategoryId:null,SearchSubCategoryId:null,SearchAssetName:null,SearchAssetTagId:null},this.to=0,this.from=0,this.pageSize=10,this.totalRecordsFromApi=0,this.assetList=[],this.page=1,this.collectionSize=0,this.imageUrl=q.N.apiUrl,this.arrayListDropDownCompany=[],this.arrayListDropDownClientList=[],this.arrayListDropDownProjectOrDeparmentList=[],this.arrayListDropDownAssetStatus=[],this.checkedAssetList=[],this.isProject=this.authService.getisProject()}ngOnInit(){this.payload.SearchCompanyId=this.selectedDropDownCompanyIdValue,this.payload.SearchClientId=this.selectedDropDownClientIdValue,this.payload.SearchDepartmentId=this.selectedDropDownProjectOrDeparmentIdValue,this.checkedAssetList=this.selectedAsset?this.selectedAsset:[],this.loadData(),this.getDropdownCompanyList(),this.getDropdownAssetStatusList("AssetList")}navigateToAdd(){this.router.navigate(["/asset-management/asset/createasset"])}navigateToSpareList(){this.router.navigate(["/asset-management/spare/list-spare"])}navigateToQrList(){this.router.navigate(["/asset-management/asset/qr-detail"])}OnChangesPage(s){s&&(this.payload.displayStart=this.pageSize*(s-1),this.loadData())}loadData(){this.assetService.GetV2_CommanAssetList_ByPagination(this.commonFunctionService.clean(this.payload)).subscribe(s=>{this.assetList=s.list,this.assetList=this.assetList.filter(l=>(this.checkedAssetList.filter(h=>h.id==l.id).length>0&&(l.checked=!0),1)),this.assetList.length>0?(this.totalRecordsFromApi=s.list[0].totalCount,this.from=s.list.reduce((l,r)=>r.rowNum<l?r.rowNum:l,s.list[0].rowNum),this.to=s.list.reduce((l,r)=>r.rowNum>l?r.rowNum:l,s.list[0].rowNum),this.pageSize=this.payload.displayLength):(this.totalRecordsFromApi=0,this.from=0,this.to=0,this.pageSize=this.payload.displayLength)})}viewQrCodeImage(s,l){this.assetQrData=l,this.modalService.open(s,{ariaLabelledBy:"modal-basic-title",size:"lg",centered:!0,backdrop:"static",keyboard:!1})}viewHandler(s){this.assetService.sendAssetId=s,this.router.navigate(["/asset-management/asset/viewasset"])}editHandler(s){this.assetService.sendAssetId=s,this.router.navigate(["/asset-management/asset/editasset"])}onTypeAssetNameChange(){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchAssetName=this.typeAssetNameValue,this.loadData()}resetSerachVariable(){this.selectedDropDownAssetStatusIdValue=null,this.typeAssetNameValue=null,this.payload={displayLength:10,displayStart:0,SearchCompanyId:this.selectedDropDownCompanyIdValue,SearchClientId:this.selectedDropDownClientIdValue,SearchDepartmentId:this.selectedDropDownProjectOrDeparmentIdValue,SearchLocationId:null,SearchAssetStatusId:null,SearchCategoryId:null,SearchSubCategoryId:null,SearchAssetName:null,SearchAssetTagId:null},this.page=1,this.loadData()}getDropdownCompanyList(){this.dropdownServices.GetCompanyListDrobDown({}).subscribe(s=>{this.arrayListDropDownCompany=s.list})}getDropdownClientlist(){this.dropdownServices.GetClientListDrobDown({SearchCompanyId:this.selectedDropDownCompanyIdValue}).subscribe(l=>{this.arrayListDropDownClientList=l.list})}getDropdownDepartmentList(){this.dropdownServices.GetDepartmentListDrobDown({SearchCompanyId:this.selectedDropDownCompanyIdValue,SearchClientId:this.selectedDropDownClientIdValue}).subscribe(l=>{this.arrayListDropDownProjectOrDeparmentList=l.list})}onDropdownCompanyValueChange(s){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchCompanyId=this.selectedDropDownCompanyIdValue,this.selectedDropDownClientIdValue=null,this.selectedDropDownProjectOrDeparmentIdValue=null,this.payload.SearchClientId=this.selectedDropDownClientIdValue,this.payload.SearchDepartmentId=this.selectedDropDownProjectOrDeparmentIdValue,this.arrayListDropDownProjectOrDeparmentList=[],this.getDropdownClientlist(),this.loadData()}onDropdownClientValueChange(s){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchClientId=this.selectedDropDownClientIdValue,this.selectedDropDownProjectOrDeparmentIdValue=null,this.payload.SearchDepartmentId=this.selectedDropDownProjectOrDeparmentIdValue,this.getDropdownDepartmentList(),this.loadData()}onDropdownDepartmentValueChange(s){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchDepartmentId=this.selectedDropDownProjectOrDeparmentIdValue,this.loadData()}getDropdownAssetStatusList(s){this.assetService.getAssetStatusList(s).subscribe(l=>{this.arrayListDropDownAssetStatus=l})}onDropdownAssetStatusValueChange(s){this.payload.SearchAssetStatusId=this.selectedDropDownAssetStatusIdValue,this.loadData()}uniqTheObject(s,l){return[...new Map(s.map(r=>[l(r),r])).values()]}onCheckboxChange(s){this.assetList.forEach(l=>l.checked=s.target.checked),1==s.target.checked?this.assetList.forEach((l,r)=>{this.checkedAssetList.push(l)}):this.checkedAssetList=this.checkedAssetList.filter(l=>!(this.assetList.filter(h=>h.id==l.id).length>0)),this.checkedAssetList=this.uniqTheObject(this.checkedAssetList,l=>l.id),this.assetListSelected.emit(this.checkedAssetList)}checkUncheckAll(){return this.assetList.every(s=>s.checked)}getAssetlistChecked(s,l){1==s?this.checkedAssetList.push(l):this.checkedAssetList.forEach((r,h)=>{r.id==l.id&&this.checkedAssetList.splice(h,1)}),this.assetListSelected.emit(this.checkedAssetList)}removeCheckedAssetList(s){this.assetList.forEach((l,r)=>{l.id==s.id&&(this.assetList[r].checked=!1)}),this.checkedAssetList.forEach((l,r)=>{l.id==s.id&&this.checkedAssetList.splice(r,1)}),this.assetListSelected.emit(this.checkedAssetList)}ngOnChanges(s){this.payload.SearchCompanyId=this.selectedDropDownCompanyIdValue,this.payload.SearchClientId=this.selectedDropDownClientIdValue,this.payload.SearchDepartmentId=this.selectedDropDownProjectOrDeparmentIdValue,this.checkedAssetList=this.selectedAsset?this.selectedAsset:[],this.loadData(),this.getDropdownCompanyList(),this.getDropdownAssetStatusList("AssetList")}ngAfterViewInit(){(0,O.R)(this.input.nativeElement,"input").pipe((0,F.h)(Boolean),(0,w.b)(1e3),(0,J.x)(),(0,G.b)(s=>{this.onTypeAssetNameChange()})).subscribe()}static{this.\u0275fac=function(l){return new(l||D)(e.Y36(M.V),e.Y36(k.F0),e.Y36(b.FF),e.Y36($.d),e.Y36(C.u),e.Y36(B.l),e.Y36(u.qu),e.Y36(P.K),e.Y36(M.V))}}static{this.\u0275cmp=e.Xpm({type:D,selectors:[["app-common-asset-list"]],viewQuery:function(l,r){if(1&l&&e.Gf(X,7),2&l){let h;e.iGM(h=e.CRH())&&(r.input=h.first)}},inputs:{shownCol4:"shownCol4",selectedDropDownCompanyIdValue:"selectedDropDownCompanyIdValue",selectedDropDownClientIdValue:"selectedDropDownClientIdValue",selectedDropDownProjectOrDeparmentIdValue:"selectedDropDownProjectOrDeparmentIdValue",selectedAsset:"selectedAsset"},outputs:{assetListSelected:"assetListSelected"},features:[e.TTD],decls:34,vars:11,consts:[[1,"card"],[1,"card-header","border-0"],[1,"row","align-items-center","gy-3"],[1,"col-lg-5"],["bindLabel","assetStatus","bindValue","assetStatusId","id","assetStatus","placeholder","Select Asset Status","for","assetStatus",1,"w-100","mr-2",3,"items","clearable","ngModel","change","ngModelChange"],[1,"search-box"],["type","text","name","searchTerm","placeholder","Search for asset name",1,"form-control",3,"ngModel","ngModelChange","keyup"],["inputer",""],[1,"ri-search-line","search-icon"],[1,"col-lg-2"],[1,"d-flex","justify-content-end"],["type","button","ngbTooltip","Remove All Search",1,"btn","btn-danger","ms-1",3,"click"],[1,"ri-refresh-fill","me-1","align-bottom"],[1,"card-body","pt-0"],[1,"table-responsive","mb-0"],[1,"table"],[1,"bg-light","text-muted","text-uppercase"],["scope","col",2,"width","50px"],["class","form-check",4,"ngIf"],[4,"ngIf"],[1,"row","justify-content-md-between","align-items-md-center","gy-2"],[1,"col-sm-6"],["id","tickets-table_info","role","status","aria-live","polite",1,"dataTables_info","mb-2"],[1,"text-sm-right","float-end","listjs-pagination"],[3,"collectionSize","page","pageSize","maxSize","rotate","pageChange",4,"ngIf"],[1,"form-check"],["colspan","2"],[1,"text-muted"],[4,"ngFor","ngForOf"],["scope","row"],["type","checkbox","name","checkAll",1,"form-check-input",3,"value","ngModel","ngModelChange","change"],[1,"d-flex","align-items-center"],[1,"flex-shrink-0","me-3"],[1,"avatar-sm","bg-light","rounded","p-1"],["alt","",1,"img-fluid","d-block",3,"src"],[1,"flex-grow-1"],[1,"fs-14","mb-0"],["href","javascript:void(0)",1,"text-body"],[1,"text-muted","mb-0"],["href","javascript:void(0)",1,"fw-sm","link-primary"],[1,"text-muted","mb-0","status"],[1,"badge","text-uppercase","bg-secondary-subtle","text-secondary"],[3,"collectionSize","page","pageSize","maxSize","rotate","pageChange"],["ngbPaginationPrevious",""],["ngbPaginationNext",""],[1,"ci-arrow-left","me-2"],[1,"ci-arrow-right","ms-2"]],template:function(l,r){1&l&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"ng-select",4),e.NdJ("change",function(y){return r.onDropdownAssetStatusValueChange(y)})("ngModelChange",function(y){return r.selectedDropDownAssetStatusIdValue=y}),e.qZA()(),e.TgZ(5,"div",3)(6,"div",5)(7,"input",6,7),e.NdJ("ngModelChange",function(y){return r.typeAssetNameValue=y})("keyup",function(){return r.onTypeAssetNameChange()}),e.qZA(),e._UZ(9,"i",8),e.qZA()(),e.TgZ(10,"div",9)(11,"div",10)(12,"button",11),e.NdJ("click",function(){return r.resetSerachVariable()}),e._UZ(13,"i",12),e._uU(14," Clear "),e.qZA()()()()(),e.TgZ(15,"div",13)(16,"div",14)(17,"table",15)(18,"thead")(19,"tr",16)(20,"th",17),e.YNc(21,tt,1,0,"div",18),e.qZA(),e.TgZ(22,"th"),e._uU(23,"Asset"),e.qZA()()(),e.TgZ(24,"tbody"),e.YNc(25,et,5,0,"ng-container",19)(26,nt,2,1,"ng-container",19),e.qZA()()(),e.TgZ(27,"div",20)(28,"div",21)(29,"div",22),e._uU(30),e.qZA()(),e.TgZ(31,"div",21)(32,"div",23),e.YNc(33,st,3,5,"ngb-pagination",24),e.qZA()()()()()),2&l&&(e.xp6(4),e.Q6J("items",r.arrayListDropDownAssetStatus)("clearable",!1)("ngModel",r.selectedDropDownAssetStatusIdValue),e.xp6(3),e.Q6J("ngModel",r.typeAssetNameValue),e.xp6(14),e.Q6J("ngIf",0!=r.assetList.length),e.xp6(4),e.Q6J("ngIf",0==r.assetList.length),e.xp6(1),e.Q6J("ngIf",0!=r.assetList.length),e.xp6(4),e.lnq(" Showing ",r.from," to ",r.to," of ",r.totalRecordsFromApi," entries "),e.xp6(3),e.Q6J("ngIf",r.totalRecordsFromApi>r.pageSize))},dependencies:[_.sg,_.O5,u.Fj,u.Wl,u.JJ,u.On,b.N9,b.GZ,b.ju,b._L,Y.w9],styles:[".fw-sm[_ngcontent-%COMP%]{font-size:12px;font-weight:800}"]})}}return D})();function lt(D,T){1&D&&(e.TgZ(0,"div"),e._uU(1," The value must be greater than or equal to 0. "),e.qZA())}function ct(D,T){1&D&&(e.TgZ(0,"div"),e._uU(1," The value must be less than or equal to 100. "),e.qZA())}function dt(D,T){if(1&D&&(e.TgZ(0,"div"),e.YNc(1,lt,2,0,"div",48)(2,ct,2,0,"div",48),e.qZA()),2&D){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",null==s.discountControl?null:s.discountControl.hasError("min")),e.xp6(1),e.Q6J("ngIf",null==s.discountControl?null:s.discountControl.hasError("max"))}}function pt(D,T){if(1&D){const s=e.EpF();e.TgZ(0,"tr",88)(1,"th",89),e._uU(2),e.qZA(),e.TgZ(3,"td",90)(4,"div",91),e._UZ(5,"input",92),e.TgZ(6,"div",34),e._uU(7," Please enter a product name "),e.qZA()(),e._UZ(8,"textarea",93),e.qZA(),e.TgZ(9,"td"),e._UZ(10,"ng-select",94),e.qZA(),e.TgZ(11,"td")(12,"input",95),e.NdJ("keyup",function(){const h=e.CHM(s).index,y=e.oxw();return e.KtG(y.updateQuantity(h))}),e.qZA(),e.TgZ(13,"div",34),e._uU(14,"Please enter a rate"),e.qZA()(),e.TgZ(15,"td")(16,"div",96)(17,"button",97),e.NdJ("click",function(){const h=e.CHM(s).index,y=e.oxw();return e.KtG(y.decrement(h))}),e._uU(18," \u2013 "),e.qZA(),e._UZ(19,"input",98),e.TgZ(20,"button",99),e.NdJ("click",function(){const h=e.CHM(s).index,y=e.oxw();return e.KtG(y.increment(h))}),e._uU(21," + "),e.qZA()()(),e.TgZ(22,"td",100)(23,"div"),e._UZ(24,"input",101),e.qZA()(),e.TgZ(25,"td",100)(26,"i",102),e.NdJ("click",function(){const h=e.CHM(s).index,y=e.oxw();return e.KtG(y.removeItem(h))}),e.qZA()()()}if(2&D){const s=T.index,l=e.oxw();e.Q6J("formGroupName",s),e.xp6(2),e.Oqu(s+1),e.xp6(6),e.Q6J("id","productDetails"+s),e.xp6(2),e.Q6J("items",l.unoAraay)("clearable",!1),e.xp6(9),e.s9C("value",l.counter[s])}}function ut(D,T){1&D&&(e.TgZ(0,"span",103)(1,"span",104),e._uU(2,"Loading..."),e.qZA()())}function ht(D,T){if(1&D){const s=e.EpF();e.TgZ(0,"div",105)(1,"h4",106),e._uU(2,"Asset List"),e.qZA(),e.TgZ(3,"button",107),e.NdJ("click",function(){const h=e.CHM(s).$implicit;return e.KtG(h.dismiss("Cross click"))}),e.qZA()(),e.TgZ(4,"div",108)(5,"app-common-asset-list",109),e.NdJ("assetListSelected",function(r){e.CHM(s);const h=e.oxw();return e.KtG(h.getAllselectAsset(r))}),e.qZA()(),e.TgZ(6,"div",110)(7,"button",111),e.NdJ("click",function(){const h=e.CHM(s).$implicit;return e.KtG(h.dismiss("cancel"))}),e._uU(8," Close "),e.qZA()()}if(2&D){const s=e.oxw();e.xp6(5),e.Q6J("selectedDropDownCompanyIdValue",s.ticketInfo.companyId)("selectedDropDownClientIdValue",s.ticketInfo.clientId)("selectedDropDownProjectOrDeparmentIdValue",s.ticketInfo.projectId)("selectedAsset",s.selectedAssetList)}}const R=D=>({"is-invalid":D});let mt=(()=>{class D{constructor(s,l,r,h,y,N,V,x,Q,U){this.formBuilder=s,this.modalService=l,this.companyService=r,this.clientService=h,this.authAssetService=y,this.quotationService=N,this.helpDeskService=V,this.router=x,this.offcanvasService=Q,this.departmentService=U,this.submitAfterQuotation=new e.vpe,this.reSubmitedsubmitQuotation=new e.vpe,this.reCreatedQuotation=!1,this.quotationObject={},this.mX_quotationItem=[],this.maxCharsDecision=300,this.unoAraay=["CM","Unit","box"],this.submitted=!1,this.loadingForSubmitBtn=!1,this.paymentSign="$",this.subtotal=0,this.taxRate=.125,this.shippingRate=65,this.discountRate=0,this.counter=[],this.imgUrl=I.N.apiUrl,this.isProject=!1,this.companyDetailsObject={companyId:0,companyCode:null,companyName:null,contactPerson:null,mobileNo:null,address1:null,address2:null,address3:null,postalCode:null,country:null,officePhoneNo:null,officeFaxNo:null,companyHead:null,companyLogoURL:null},this.clientDetailsObject={companyId:0,companyName:null,clientId:0,clientCode:null,clientName:null,contactPerson:null,mobileNo:null,address1:null,address2:null,address3:null,postalCode:null,country:null,officePhoneNo:null,officeFaxNo:null,serviceTaxType:null,serviceTaxValue:null},this.maxCharsDecisionTitle=50,this.departmentDetail=[],this.totalAmountCalu=0,this.mainSelectedAssetList=[],this.allSelectedAssets=[],this.isProject=this.authAssetService.getisProject()}ngOnInit(){this.todayDate=new Date,this.getCompanyDetailsById(this.ticketInfo.companyId),this.getClientDetailsById(this.ticketInfo.clientId),this.getDepartmentDetail(this.ticketInfo.projectId),this.InvoicesForm=this.formBuilder.group({quotTitle:["",[u.kI.required]],attenTo:["",[u.kI.required]],totalPrice:[0,[u.kI.required]],discount:[0,[u.kI.min(0),u.kI.max(99),u.kI.required]],items:this.formBuilder.array([]),remarkControl:["",[u.kI.required]],gSTPrice:["",[u.kI.required]],subTotal:["",[u.kI.required]],discountPrice:["",[u.kI.required]]}),this.InvoicesForm.controls.items.controls.forEach((s,l)=>{this.counter[l]=0}),0!=Object.keys(this.quotationObject).length&&(this.InvoicesForm.get("quotTitle").setValue(this.quotationObject.quotTitle),this.InvoicesForm.get("attenTo").setValue(this.quotationObject.attentionTo),this.InvoicesForm.get("remarkControl").setValue(this.quotationObject.remark)),0!=this.mX_quotationItem?.length&&this.mX_quotationItem.forEach((s,l)=>{s&&this.addItem(l,s.itemName,s.itemDetail,s.assetId)})}initRows(s=null,l=null,r=null){return this.formBuilder.group({itemName:[s,[u.kI.required]],itemDetails:[l],rate:[0,[u.kI.required]],counterValue:[0,[u.kI.required]],amount:[0,[u.kI.required]],unoSeleted:[null,[u.kI.required]],assetId:[r]})}get discountControl(){return this.InvoicesForm.get("discount")}get quotTitle(){return this.InvoicesForm.get("quotTitle")}get itemsValueControl(){return this.InvoicesForm.get("items")}get form(){return this.InvoicesForm.controls}saveUser(){this.submitted=!0}otherPayment(s){this.paymentSign=s.target.value}increment(s){this.counter[s]++,this.itemsValueControl.at(s).get("counterValue").setValue(this.counter[s]),this.updateQuantity(s)}decrement(s){this.counter[s]--,this.counter[s]<0&&(this.counter[s]=0),this.itemsValueControl.at(s).get("counterValue").setValue(this.counter[s]),this.updateQuantity(s)}updateQuantity(s){this.itemsValueControl.at(s).get("rate"),this.recalculateCart(s)}recalculateCart(s){const h=this.itemsValueControl.at(s).get("counterValue").value*this.itemsValueControl.at(s).get("rate").value;this.itemsValueControl.at(s).get("amount").setValue(h);const y=this.InvoicesForm.get("items").value.reduce((U,gt)=>U+gt.amount,0);this.InvoicesForm.get("subTotal").setValue(y);const N=y*this.discountRate/100;let V=0;V=Number(this.clientDetailsObject.serviceTaxValue)/100;let x=0;x=y*V;const Q=y-N+x;this.InvoicesForm.get("subTotal").setValue(y.toFixed(2)),this.InvoicesForm.get("discountPrice").setValue(N.toFixed(2)),this.InvoicesForm.get("gSTPrice").setValue(x.toFixed(2)),this.InvoicesForm.get("totalPrice").setValue(Q.toFixed(2))}calculateDiscount(){const s=this.InvoicesForm.get("discount").value/100,l=this.InvoicesForm.get("subTotal").value*s;this.InvoicesForm.get("discountPrice").setValue(l.toFixed(2)),this.InvoicesForm.get("items").value.forEach((r,h)=>{this.recalculateCart(h)})}addItem(s,l=null,r=null,h=null){this.formArr.push(this.initRows(l,r,h)),this.counter[s]=0}get formArr(){return this.InvoicesForm.get("items")}removeItem(s){(this.selectedAssetList||[]).forEach((l,r)=>{this.formArr.value.forEach(h=>{if(l.id==h.assetId){const y=this.selectedAssetList.findIndex(N=>N.id===l.id);-1!==y&&this.selectedAssetList.splice(y,1)}})}),this.InvoicesForm.get("items").removeAt(s),this.InvoicesForm.get("items").value.forEach((l,r)=>{this.recalculateCart(r)}),this.counter.splice(s,1)}openAssetModal(s){this.offcanvasService.open(s,{scroll:!0,position:"end",keyboard:!1,backdrop:"static",panelClass:"custom-offcanvas2"}).result.then(l=>{this.maketheData()},l=>{this.maketheData()})}goBack(){this.router.navigate(["/maintenace-management/dashboard/new-ticket-list"])}getAllselectAsset(s){this.selectedAssetList=s;const r=new Map(this.selectedAssetList.map(h=>[h.id,h]));this.selectedAssetList=Array.from(r.values()),this.allSelectedAssets=this.selectedAssetList}maketheData(){this.InvoicesForm.get("items").value.forEach((l,r)=>{this.selectedAssetList.find(y=>y.id===l.assetId)||l.assetId&&this.InvoicesForm.get("items").removeAt(r)}),this.selectedAssetList=(this.selectedAssetList||[]).filter(l=>!this.formArr.value.some(r=>l.id===r.assetId)),this.selectedAssetList.forEach(l=>{let r=l.id,h=l.assetTagId+"("+l.assetName+")";h&&this.addItem(this.InvoicesForm.get("items").value.length,h,"",r)}),this.InvoicesForm.get("items"),this.selectedAssetList=this.allSelectedAssets}getCompanyDetailsById(s){this.companyService.getCompanyDetail({CompanyId:s}).subscribe(r=>{this.companyDetailsObject=r.data})}getClientDetailsById(s){this.clientService.getClientDetailsById({ClientId:s}).subscribe(r=>{this.clientDetailsObject=r.data})}getDepartmentDetail(s){this.departmentService.getDepartmentDetail(s).subscribe({next:l=>{this.departmentDetail=l.data}})}dateFormatter(s){const l=L(s).format("YYYY-MM-DD");return"1970-01-01"===l?null:l}submitQuotation(){if(this.loadingForSubmitBtn=!0,this.reCreatedQuotation){let s=this.InvoicesForm.getRawValue(),l=[];this.InvoicesForm.value.items.forEach(h=>{l.push({ItemName:h.itemName,ItemDetail:h.itemDetails,AssetId:h.assetId,UnitPrice:h.rate,UnitTotalPrice:Number(h.amount),Qty:h.counterValue,UOM:h.unoSeleted})}),this.quotationService.genererateV2_QuotationResubmit({mX_Quotation:{TicketId:this.ticketInfo.ticketId,TicketNo:this.ticketInfo.ticketNo,QuotTitle:s.quotTitle,AttentionTo:s.attenTo,CompanyId:this.ticketInfo.companyId,CompanyName:this.ticketInfo.companyName,ClientId:this.ticketInfo.clientId,ClientName:this.ticketInfo.clientName,ProjectId:this.ticketInfo.projectId,ProjectName:this.ticketInfo.projectName,TotalPrice:s.totalPrice,GSTPrice:s.gSTPrice,DiscountPrice:s.discountPrice,DiscountRate:s.discount,SubTotal:s.subTotal,Remark:s.remarkControl,ServiceTaxType:this.clientDetailsObject.serviceTaxType},mX_quotationItem:l}).subscribe(h=>{this.loadingForSubmitBtn=!1,this.reSubmitedsubmitQuotation.emit(h)})}else{let s=this.InvoicesForm.getRawValue(),l=[];this.InvoicesForm.value.items.forEach(h=>{l.push({ItemName:h.itemName,ItemDetail:h.itemDetails,AssetId:h.assetId,UnitPrice:h.rate,UnitTotalPrice:Number(h.amount),Qty:h.counterValue,UOM:h.unoSeleted})}),this.quotationService.genererateV2_Quotation({mX_Quotation:{TicketId:this.ticketInfo.ticketId,TicketNo:this.ticketInfo.ticketNo,QuotTitle:s.quotTitle,AttentionTo:s.attenTo,CompanyId:this.ticketInfo.companyId,CompanyName:this.ticketInfo.companyName,ClientId:this.ticketInfo.clientId,ClientName:this.ticketInfo.clientName,ProjectId:this.ticketInfo.projectId,ProjectName:this.ticketInfo.projectName,TotalPrice:s.totalPrice,GSTPrice:s.gSTPrice,Remark:s.remarkControl,ServiceTaxType:this.clientDetailsObject.serviceTaxType,DiscountPrice:s.discountPrice,DiscountRate:s.discount,SubTotal:s.subTotal},mX_quotationItem:l}).subscribe(h=>{this.loadingForSubmitBtn=!1,this.submitAfterQuotation.emit(h)})}}static{this.\u0275fac=function(l){return new(l||D)(e.Y36(u.QS),e.Y36(b.FF),e.Y36(S.J),e.Y36(f.y),e.Y36(C.u),e.Y36(m.G),e.Y36(g.S),e.Y36(k.F0),e.Y36(b._B),e.Y36(t.n))}}static{this.\u0275cmp=e.Xpm({type:D,selectors:[["app-add-quotation"]],inputs:{ticketInfo:"ticketInfo",reCreatedQuotation:"reCreatedQuotation",quotationObject:"quotationObject",mX_quotationItem:"mX_quotationItem"},outputs:{submitAfterQuotation:"submitAfterQuotation",reSubmitedsubmitQuotation:"reSubmitedsubmitQuotation"},decls:187,vars:48,consts:[[1,"row","justify-content-center"],[1,"col-xxl-10"],[1,"card"],[1,"row"],[1,"col-lg-12","text-center"],[1,"p-4"],[1,"text-center","mb-2"],["alt","logo light","height","47",1,"card-logo",3,"src"],[1,"mt-sm-0","mt-0"],[1,"text-muted","text-uppercase","fw-semibold","mb-0"],[1,"text-muted","mb-1"],["id","zip-code",1,"text-muted","mb-0"],[1,"col-lg-12"],[1,"card-header","border-bottom-dashed","border-top-dashed","p-4"],[1,"d-flex","flex-wrap"],[1,"flex-grow-1"],[1,"text-muted","text-uppercase","fw-semibold"],["id","address-details",1,"text-muted","mb-1"],[1,"flex-shrink-0","mt-sm-0","mt-3"],[1,"department-text"],[1,"text-muted","fw-normal"],["id","legal-register-no",1,"department-text"],[2,"width","30px"],["id","legal-register-no"],[1,"mt-1","p-2","ps-2"],[1,"form-label","text-muted","text-uppercase","fw-semibold","ps-2"],[3,"formGroup"],[1,"card-body","border-bottom","border-bottom-dashed","p-4"],[1,"col-lg-5"],["for","quotTitle"],[1,"starRequried"],[1,"mb-2"],["id","quotTitle","rows","2","placeholder","Quotation Title","formControlName","quotTitle",1,"form-control","bg-light","border-0",3,"ngClass","maxlength"],[1,"nopadding","clrlbl"],[1,"invalid-feedback"],[1,"col-lg-2"],["for","attenTo"],["id","attenTo","rows","2","placeholder","Atten To","formControlName","attenTo",1,"form-control","bg-light","border-0",3,"ngClass"],[1,"card-body","p-4"],[1,"row","g-3"],[1,"col-lg-3","col-sm-6"],["for","invoicenoInput"],[1,"fs-14","mb-0"],["ngbTooltip","It will be generated automatically by the system",1,"ri-information-line","align-middle","text-info"],["for","date-field"],["id","invoice-date"],["for","discount"],["type","number","id","discount","placeholder","0.00","formControlName","discount",1,"form-control","bg-light","border-0",3,"min","max","ngModel","ngModelChange","keyup"],[4,"ngIf"],["for","totalamountInput"],[1,"fs-10"],["type","text","id","totalamountInput","formControlName","totalPrice","placeholder","$0.00","readonly","",1,"form-control","bg-light","border-0"],[1,"table-responsive"],[1,"invoice-table","table","table-borderless","table-nowrap","mb-0"],[1,"align-middle"],[1,"table-active"],["scope","col",2,"width","50px"],["scope","col"],["scope","col",2,"width","120px"],["scope","col",1,"text-end",2,"width","150px"],["scope","col",1,"text-end",2,"width","105px"],["id","newlink","formArrayName","items"],["id","1","class","product",3,"formGroupName",4,"ngFor","ngForOf"],["id","newForm",2,"display","none"],["colspan","5",1,"d-none"],["colspan","5"],["href","javascript:void(0);","id","add-item",1,"btn","btn-soft-secondary","fw-medium","me-3",3,"click"],[1,"ri-add-fill","me-1","align-bottom"],[1,"border-top","border-top-dashed","mt-2"],["colspan","4"],["colspan","2",1,"p-0"],[1,"table","table-borderless","table-sm","table-nowrap","align-middle","mb-0"],["scope","row"],[2,"width","150px"],["type","text","formControlName","subTotal","id","cart-subtotal","placeholder","0.00","readonly","",1,"form-control","bg-light","border-0"],["type","text","formControlName","discountPrice","id","cart-discount","placeholder","0.00","readonly","",1,"form-control","bg-light","border-0"],["type","text","id","cart-shipping","placeholder","0.00","formControlName","gSTPrice","readonly","",1,"form-control","bg-light","border-0"],[1,"border-top","border-top-dashed"],["type","text","formControlName","totalPrice","id","cart-total","placeholder","0.00","readonly","",1,"form-control","bg-light","border-0"],[1,"mt-4"],["for","exampleFormControlTextarea1",1,"form-label","text-muted","text-uppercase","fw-semibold"],["id","Remark","rows","2","placeholder","Remark","formControlName","remarkControl",1,"form-control","bg-light","border-0",3,"ngClass","maxlength"],[1,"hstack","gap-2","justify-content-end","d-print-none","mt-4","flex-wrap"],[1,"btn","btn-soft-primary","ms-2","me-2",3,"click"],["type","button",1,"btn","btn-success","btn-load",3,"disabled","click"],[1,"d-flex","align-items-center"],["class","spinner-border flex-shrink-0 me-2","role","status",4,"ngIf"],["AssetList",""],["id","1",1,"product",3,"formGroupName"],["scope","row",1,"product-id"],[1,"text-start"],[1,"mb-2","text-desc"],["type","text","id","productName","placeholder","Item Name","formControlName","itemName",1,"form-control","bg-light","border-0"],["rows","2","placeholder","Item Details","formControlName","itemDetails",1,"form-control","bg-light","border-0",3,"id"],["placeholder","UOM","formControlName","unoSeleted",1,"tableClass","bg-light","border-0",3,"items","clearable"],["type","number","placeholder","Unit Price","placeholder","0.00","formControlName","rate","value","0",1,"form-control","bg-light","border-0",3,"keyup"],[1,"input-step"],["type","button",1,"minus",3,"click"],["type","number","formControlName","counterValue","readonly","",1,"product-quantity",3,"value"],["type","button",1,"plus",3,"click"],[1,"text-end"],["type","text","formControlName","amount","placeholder","0.00","readonly","",1,"form-control","bg-light","border-0"],[1,"ri-delete-bin-6-line","text-danger","fs-15",3,"click"],["role","status",1,"spinner-border","flex-shrink-0","me-2"],[1,"visually-hidden"],[1,"offcanvas-header"],[1,"offcanvas-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"offcanvas-body","p-0"],[3,"selectedDropDownCompanyIdValue","selectedDropDownClientIdValue","selectedDropDownProjectOrDeparmentIdValue","selectedAsset","assetListSelected"],[1,"offcanvas-footer","text-end","gy-2"],["type","button","data-bs-dismiss","modal",1,"btn","btn-outline-danger",3,"click"]],template:function(l,r){1&l&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),e._UZ(7,"img",7),e.qZA(),e.TgZ(8,"div",8)(9,"h6",9),e._uU(10),e.qZA(),e.TgZ(11,"p",10),e._uU(12),e.qZA(),e.TgZ(13,"p",10),e._uU(14),e.qZA(),e.TgZ(15,"p",11)(16,"span"),e._uU(17,"Zip-code:"),e.qZA(),e._uU(18),e.qZA()()()(),e.TgZ(19,"div",12)(20,"div",13)(21,"div",14)(22,"div",15)(23,"h6",16),e._uU(24),e.qZA(),e.TgZ(25,"p",17),e._uU(26),e.qZA(),e.TgZ(27,"p",10),e._uU(28),e.qZA(),e.TgZ(29,"p",11)(30,"span"),e._uU(31,"Zip-code:"),e.qZA(),e._uU(32),e.qZA()(),e.TgZ(33,"div",18)(34,"table")(35,"tbody")(36,"tr")(37,"td",19)(38,"h6")(39,"span",20),e._uU(40),e.qZA()()(),e.TgZ(41,"td")(42,"h6")(43,"span",21),e._uU(44),e.qZA()()()(),e.TgZ(45,"tr")(46,"td",22)(47,"h6")(48,"span",20),e._uU(49,"TicketNo"),e.qZA()()(),e.TgZ(50,"td")(51,"h6")(52,"span",23),e._uU(53),e.qZA()()()()()()()()(),e.TgZ(54,"div",24)(55,"label",25),e._uU(56," Thank you for your inquiry. We are pleased to submit our quote as follows: "),e.qZA()()()(),e.TgZ(57,"form",26)(58,"div",27)(59,"div",3)(60,"div",28)(61,"label",29),e._uU(62,"Quotation Title "),e.TgZ(63,"span",30),e._uU(64,"*"),e.qZA()(),e.TgZ(65,"div",31),e._UZ(66,"textarea",32),e.TgZ(67,"label",33),e._uU(68),e.qZA(),e.TgZ(69,"div",34),e._uU(70," Please Enter Quotation Title Value "),e.qZA()()(),e._UZ(71,"div",35),e.TgZ(72,"div",28)(73,"label",36),e._uU(74,"Atten To"),e.TgZ(75,"span",30),e._uU(76,"*"),e.qZA()(),e.TgZ(77,"div",31),e._UZ(78,"textarea",37),e.TgZ(79,"div",34),e._uU(80,"Please Enter Atten To Value"),e.qZA()()()()(),e.TgZ(81,"div",38)(82,"div",39)(83,"div",40)(84,"label",41),e._uU(85,"Quotation No"),e.qZA(),e.TgZ(86,"h5",42),e._uU(87," #QUO-YYMM-0000 "),e._UZ(88,"i",43),e.qZA()(),e.TgZ(89,"div",40)(90,"label",44),e._uU(91,"Date"),e.qZA(),e.TgZ(92,"h5",42)(93,"span",45),e._uU(94),e.ALo(95,"date"),e.qZA()()(),e.TgZ(96,"div",40)(97,"label",46),e._uU(98,"Discount"),e.qZA(),e.TgZ(99,"input",47),e.NdJ("ngModelChange",function(y){return r.discountRate=y})("keyup",function(){return r.calculateDiscount()}),e.qZA(),e.YNc(100,dt,3,2,"div",48),e.qZA(),e.TgZ(101,"div",40)(102,"div")(103,"label",49),e._uU(104,"Total Amount "),e.TgZ(105,"span",50),e._uU(106),e.qZA()(),e._UZ(107,"input",51),e.qZA()()()(),e.TgZ(108,"div",38)(109,"div",52)(110,"table",53)(111,"thead",54)(112,"tr",55)(113,"th",56),e._uU(114,"#"),e.qZA(),e.TgZ(115,"th",57),e._uU(116,"Item Details"),e.qZA(),e.TgZ(117,"th",58),e._uU(118,"UOM"),e.qZA(),e.TgZ(119,"th",58),e._uU(120,"Unit Price"),e.qZA(),e.TgZ(121,"th",58),e._uU(122,"Quantity"),e.qZA(),e.TgZ(123,"th",59),e._uU(124," Amount "),e.TgZ(125,"span",50),e._uU(126),e.qZA()(),e._UZ(127,"th",60),e.qZA()(),e.TgZ(128,"tbody",61),e.YNc(129,pt,27,6,"tr",62),e.qZA(),e.TgZ(130,"tbody")(131,"tr",63)(132,"td",64)(133,"p"),e._uU(134,"Add New Form"),e.qZA()()(),e.TgZ(135,"tr")(136,"td",65)(137,"a",66),e.NdJ("click",function(){return r.addItem(r.InvoicesForm.get("items").value.length)}),e._UZ(138,"i",67),e._uU(139," Add Item"),e.qZA()()(),e.TgZ(140,"tr",68),e._UZ(141,"td",69),e.TgZ(142,"td",70)(143,"table",71)(144,"tbody")(145,"tr")(146,"th",72),e._uU(147,"Sub Total"),e.qZA(),e.TgZ(148,"td",73),e._UZ(149,"input",74),e.qZA()(),e.TgZ(150,"tr")(151,"th",72),e._uU(152),e.qZA(),e.TgZ(153,"td"),e._UZ(154,"input",75),e.qZA()(),e.TgZ(155,"tr")(156,"th",72),e._uU(157),e.qZA(),e.TgZ(158,"td"),e._UZ(159,"input",76),e.qZA()(),e.TgZ(160,"tr",77)(161,"th",72),e._uU(162,"Total Amount "),e.TgZ(163,"span",50),e._uU(164),e.qZA()(),e.TgZ(165,"td"),e._UZ(166,"input",78),e.qZA()()()()()()()()(),e.TgZ(167,"div",79)(168,"label",80),e._uU(169,"Remark "),e.TgZ(170,"span",30),e._uU(171,"*"),e.qZA()(),e._UZ(172,"textarea",81),e.TgZ(173,"label",33),e._uU(174),e.qZA(),e.TgZ(175,"div",34),e._uU(176,"Please enter a Remark"),e.qZA()(),e.TgZ(177,"div",82)(178,"button",83),e.NdJ("click",function(){return r.goBack()}),e._uU(179," Back "),e.qZA(),e.TgZ(180,"button",84),e.NdJ("click",function(){return r.submitQuotation()}),e.TgZ(181,"span",85),e.YNc(182,ut,3,0,"span",86),e.TgZ(183,"span",15),e._uU(184,"Submit "),e.qZA()()()()()()()()(),e.YNc(185,ht,9,4,"ng-template",null,87,e.W1O)),2&l&&(e.xp6(7),e.Q6J("src",r.companyDetailsObject.companyLogoURL?r.imgUrl+r.companyDetailsObject.companyLogoURL:"../../../../../../assets/images/placeholderimage.png",e.LSH),e.xp6(3),e.hij(" ",r.companyDetailsObject.companyName," "),e.xp6(2),e.hij(" ",r.companyDetailsObject.address1," "),e.xp6(2),e.lnq(" ",r.companyDetailsObject.address2?r.companyDetailsObject.address2:""," ",r.companyDetailsObject.address3?r.companyDetailsObject.address3:""," ",r.companyDetailsObject.country?r.companyDetailsObject.country:""," "),e.xp6(4),e.hij(" ",r.companyDetailsObject.postalCode," "),e.xp6(6),e.hij(" ",r.clientDetailsObject.clientName," "),e.xp6(2),e.hij(" ",r.clientDetailsObject.address1," "),e.xp6(2),e.lnq(" ",r.clientDetailsObject.address2?r.clientDetailsObject.address2:""," ",r.clientDetailsObject.address3?r.clientDetailsObject.address3:""," ",r.clientDetailsObject.country?r.clientDetailsObject.country:""," "),e.xp6(4),e.hij(" ",r.clientDetailsObject.postalCode," "),e.xp6(8),e.Oqu(r.isProject?"Project":"Department"),e.xp6(4),e.hij(" \xa0: \xa0",r.ticketInfo.projectName,""),e.xp6(9),e.hij("\xa0: \xa0 ",r.ticketInfo.ticketNo,""),e.xp6(4),e.Q6J("formGroup",r.InvoicesForm),e.xp6(9),e.Q6J("ngClass",e.VKq(42,R,r.submitted&&r.form.quotTitle.errors))("maxlength",r.maxCharsDecisionTitle),e.xp6(2),e.AsE(" Characters Remaining: ",null==r.quotTitle||null==r.quotTitle.value?null:r.quotTitle.value.length,"/",r.maxCharsDecisionTitle,""),e.xp6(10),e.Q6J("ngClass",e.VKq(44,R,r.submitted&&r.form.attenTo.errors)),e.xp6(16),e.Oqu(e.lcZ(95,40,r.todayDate)),e.xp6(5),e.Q6J("min",0)("max",100)("ngModel",r.discountRate),e.xp6(1),e.Q6J("ngIf",(null==r.discountControl?null:r.discountControl.invalid)&&((null==r.discountControl?null:r.discountControl.dirty)||(null==r.discountControl?null:r.discountControl.touched))),e.xp6(6),e.hij("(",null==r.departmentDetail?null:r.departmentDetail.currencyCode,")"),e.xp6(20),e.hij("(",null==r.departmentDetail?null:r.departmentDetail.currencyCode,")"),e.xp6(3),e.Q6J("ngForOf",null==r.InvoicesForm.controls||null==r.InvoicesForm.controls.items?null:r.InvoicesForm.controls.items.controls),e.xp6(23),e.hij("Discount (",r.discountRate," %)"),e.xp6(5),e.AsE(" ",r.clientDetailsObject.serviceTaxType," Price (",r.clientDetailsObject.serviceTaxValue,"%) "),e.xp6(7),e.hij("(",null==r.departmentDetail?null:r.departmentDetail.currencyCode,")"),e.xp6(8),e.Q6J("ngClass",e.VKq(46,R,r.submitted&&r.form.remarkControl.errors))("maxlength",r.maxCharsDecision),e.xp6(2),e.AsE(" Characters Remaining: ",null==r.form.remarkControl||null==r.form.remarkControl.value?null:r.form.remarkControl.value.length,"/",r.maxCharsDecision,""),e.xp6(6),e.Q6J("disabled",r.InvoicesForm.invalid||r.loadingForSubmitBtn),e.xp6(2),e.Q6J("ngIf",r.loadingForSubmitBtn))},dependencies:[_.mk,_.sg,_.O5,u._Y,u.Fj,u.wV,u.JJ,u.JL,u.nD,u.qQ,u.Fd,u.sg,u.u,u.x0,u.CE,rt,b._L,Y.w9,_.uU],styles:["td[_ngcontent-%COMP%]{vertical-align:top!important}.department-text[_ngcontent-%COMP%]{width:30px}@media only screen and (max-width: 600px){.text-desc[_ngcontent-%COMP%]{width:150px}.department-text[_ngcontent-%COMP%]{width:30px!important;word-wrap:break-word;word-break:break-word}}"]})}}return D})()},6250:(j,A,p)=>{p.r(A),p.d(A,{QuotationModule:()=>Qt});var e=p(6814),u=p(2787),I=p(8883),L=p(553),b=p(2438),S=p(2181),f=p(3620),C=p(3997),m=p(9397),g=p(3519),k=p.n(g),t=p(9212),_=p(7291),q=p(5143),O=p(3828),F=p(7235),w=p(6223),J=p(2857),G=p(9455),M=p(471),$=p(8617),B=p(7932),P=p(4807);const Y=["inputerQuotationName"],X=["inputerQuotationUmber"],tt=["inputerTicketNumber"];function et(d,v){1&d&&(t.ynx(0),t.TgZ(1,"tr")(2,"td",45),t._uU(3," No Quotation Data "),t.qZA()(),t.BQk())}function ot(d,v){if(1&d){const o=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"a",47),t.NdJ("click",function(){const a=t.CHM(o).$implicit,c=t.oxw(3);return t.KtG(c.viewHandler(a))}),t._uU(3),t.qZA(),t.TgZ(4,"p",48)(5,"i",49),t.NdJ("click",function(){const a=t.CHM(o).$implicit,c=t.oxw(3),Z=t.MAs(47);return t.KtG(c.getV2_MaintenanceWorkflowAudit(a.ticketId,Z,a.ticketStatusId))}),t.qZA()()(),t.TgZ(6,"td",50),t._uU(7),t.qZA(),t.TgZ(8,"td",51),t.NdJ("click",function(){const a=t.CHM(o).$implicit,c=t.oxw(3);return t.KtG(c.expandTitle("quotTitle_"+a.quotNo))}),t._uU(9),t.qZA(),t.TgZ(10,"td",51),t.NdJ("click",function(){const a=t.CHM(o).$implicit,c=t.oxw(3);return t.KtG(c.expandTitle("companyName_"+a.quotNo))}),t._uU(11),t.qZA(),t.TgZ(12,"td",51),t.NdJ("click",function(){const a=t.CHM(o).$implicit,c=t.oxw(3);return t.KtG(c.expandTitle("clientName_"+a.quotNo))}),t._uU(13),t.qZA(),t.TgZ(14,"td",51),t.NdJ("click",function(){const a=t.CHM(o).$implicit,c=t.oxw(3);return t.KtG(c.expandTitle("projectName_"+a.quotNo))}),t._uU(15),t.qZA(),t.TgZ(16,"td",51),t.NdJ("click",function(){const a=t.CHM(o).$implicit,c=t.oxw(3);return t.KtG(c.expandTitle("createdDate_"+a.quotNo))}),t._uU(17),t.qZA(),t.TgZ(18,"td",52)(19,"span"),t._uU(20),t.qZA()(),t.TgZ(21,"td",52)(22,"span"),t._uU(23),t.qZA()(),t.TgZ(24,"td",50)(25,"span")(26,"div",53)(27,"button",54),t._UZ(28,"i",55),t.qZA(),t.TgZ(29,"ul",56)(30,"li")(31,"a",57),t.NdJ("click",function(){const a=t.CHM(o).$implicit,c=t.oxw(3);return t.KtG(c.viewHandler(a))}),t._UZ(32,"i",58),t._uU(33," View "),t.qZA()()()()()()()}if(2&d){const o=v.$implicit,i=t.oxw(3);t.xp6(2),t.Tol(i.getReturnQuotationNoColor(o)),t.xp6(1),t.Oqu(o.quotNo),t.xp6(4),t.hij(" ",o.ticketNo," "),t.xp6(1),t.Q6J("title",o.quotTitle)("id","quotTitle_"+o.quotNo),t.xp6(1),t.hij(" ",o.quotTitle," "),t.xp6(1),t.Q6J("title",o.companyName)("id","companyName_"+o.quotNo),t.xp6(1),t.hij(" ",o.companyName," "),t.xp6(1),t.Q6J("title",o.clientName)("id","clientName_"+o.quotNo),t.xp6(1),t.hij(" ",o.clientName," "),t.xp6(1),t.Q6J("title",o.projectName)("id","projectName_"+o.quotNo),t.xp6(1),t.hij(" ",o.projectName," "),t.xp6(1),t.Q6J("title",o.createdDate)("id","createdDate_"+o.quotNo),t.xp6(1),t.hij(" ",o.createdDate," "),t.xp6(2),t.Tol(i.returnStatusBadgeClassesStatus(o.ticketStatusId)),t.xp6(1),t.Oqu(o.ticketStatusName),t.xp6(2),t.Tol(i.returnStatusBadgeClassesStatus(o.quotStatusId)),t.xp6(1),t.Oqu(o.quotStatusName)}}function nt(d,v){if(1&d&&(t.ynx(0),t.YNc(1,ot,34,25,"tr",46),t.BQk()),2&d){const o=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",o.ticketList)}}function it(d,v){if(1&d){const o=t.EpF();t.TgZ(0,"ngb-pagination",59),t.NdJ("pageChange",function(n){t.CHM(o);const a=t.oxw(2);return t.KtG(a.page=n)})("pageChange",function(n){t.CHM(o);const a=t.oxw(2);return t.KtG(a.OnChangesPage(n))}),t.qZA()}if(2&d){const o=t.oxw(2);t.Q6J("collectionSize",o.totalRecordsFromApi)("pageSize",o.pageSize)("page",o.page)("maxSize",2)("rotate",!0)}}function at(d,v){if(1&d&&(t.TgZ(0,"div",36)(1,"table",37)(2,"thead")(3,"tr",38)(4,"th"),t._uU(5,"Quotation NO"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"TICKET NO"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Title"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Company"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Client"),t.qZA(),t.TgZ(14,"th"),t._uU(15),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Create Date"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Ticket Status"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Status"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Action"),t.qZA()()(),t.TgZ(24,"tbody"),t.YNc(25,et,4,0,"ng-container",39)(26,nt,2,1,"ng-container",39),t.qZA()()(),t.TgZ(27,"div",40)(28,"div",41)(29,"div",42),t._uU(30),t.qZA()(),t.TgZ(31,"div",41)(32,"div",43),t.YNc(33,it,1,5,"ngb-pagination",44),t.qZA()()()),2&d){const o=t.oxw();t.xp6(15),t.Oqu(o.isProject?"Project":"Department"),t.xp6(10),t.Q6J("ngIf",0==o.ticketList.length),t.xp6(1),t.Q6J("ngIf",0!=o.ticketList.length),t.xp6(4),t.lnq(" Showing ",o.from," to ",o.to," of ",o.totalRecordsFromApi," entries "),t.xp6(3),t.Q6J("ngIf",o.totalRecordsFromApi>o.pageSize)}}function st(d,v){if(1&d){const o=t.EpF();t.TgZ(0,"div",60)(1,"h5",61),t._uU(2,"Filters"),t.qZA(),t.TgZ(3,"button",62),t.NdJ("click",function(){const a=t.CHM(o).$implicit;return t.KtG(a.dismiss("Cross click"))}),t.qZA()(),t.TgZ(4,"div",63)(5,"div",0)(6,"div",64)(7,"label",65),t._uU(8,"Ticket Status "),t.qZA(),t.TgZ(9,"ng-select",66),t.NdJ("ngModelChange",function(n){t.CHM(o);const a=t.oxw();return t.KtG(a.selectedTicketStatusIdValue=n)}),t.qZA()(),t.TgZ(10,"div",64)(11,"label",65),t._uU(12,"Quotation Status "),t.qZA(),t.TgZ(13,"ng-select",67),t.NdJ("ngModelChange",function(n){t.CHM(o);const a=t.oxw();return t.KtG(a.selectedQuotStatusIdValue=n)}),t.qZA()()()(),t.TgZ(14,"div",68)(15,"button",69),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.resetSerachVariableWithModal())})("click",function(){const a=t.CHM(o).$implicit;return t.KtG(a.dismiss("Close click"))}),t._uU(16," Clear "),t.qZA(),t.TgZ(17,"button",70),t.NdJ("click",function(n){const c=t.CHM(o).$implicit;return t.KtG(c.close("Ok",n))}),t._uU(18," Search "),t.qZA()()}if(2&d){const o=t.oxw();t.xp6(9),t.Q6J("items",o.arrayListDropDownTicketStatus)("clearable",!1)("ngModel",o.selectedTicketStatusIdValue),t.xp6(4),t.Q6J("items",o.arrayListDropDownQuotationStatus)("clearable",!1)("ngModel",o.selectedQuotStatusIdValue)}}function rt(d,v){1&d&&(t.TgZ(0,"div",79)(1,"p",80)(2,"b"),t._uU(3,"Ticket has been canceled"),t.qZA()()())}function lt(d,v){if(1&d){const o=t.EpF();t.TgZ(0,"div",71)(1,"h4",72),t._uU(2,"WorkFlow Audit"),t.qZA(),t.TgZ(3,"button",73),t.NdJ("click",function(){const a=t.CHM(o).$implicit;return t.KtG(a.dismiss("Cross click"))}),t.qZA()(),t.YNc(4,rt,4,0,"div",74),t.TgZ(5,"div",75),t._UZ(6,"app-audit-chart",76),t.TgZ(7,"div",77)(8,"button",78),t.NdJ("click",function(){const a=t.CHM(o).$implicit;return t.KtG(a.close("Close click"))}),t._uU(9," Close "),t.qZA()()()}if(2&d){const o=t.oxw();t.xp6(4),t.Q6J("ngIf",19==o.currentStatus),t.xp6(2),t.Q6J("Data",o.maintenanceWorkflowAuditList)}}let ct=(()=>{class d{constructor(o,i,n,a,c,Z,W,z,E,K){this.router=o,this.modalService=i,this.ticketService=n,this.authService=a,this.menuService=c,this.formBuilder=Z,this.commonFunctionService=W,this.dropdownServices=z,this.helpDeskService=E,this.offcanvasService=K,this.isProject=!1,this.label="Quotation",this.breadCrumbItems=[{label:"Quotation"},{label:"Quotation List",active:!0}],this.payload={displayLength:10,displayStart:0,SearchCompanyId:null,SearchClientId:null,SearchProjectId:null,QuotStatusId:null,SearchQuotName:null,SearchTicketNo:null,SearchQuotNo:null,SearchTicketStatusId:null,SearchQuotStatusId:null,SearchIsQuotationBilled:null},this.invoiceProcessList=[{id:"Complete",name:"Complete"},{id:"Pending",name:"Pending"}],this.to=0,this.from=0,this.pageSize=10,this.totalRecordsFromApi=0,this.ticketList=[],this.page=1,this.collectionSize=0,this.imageUrl=L.N.apiUrl,this.arrayListDropDownCompany=[],this.arrayListDropDownClientList=[],this.arrayListDropDownProjectOrDeparmentList=[],this.arrayListDropDownTicketStatus=[],this.arrayListDropDownQuotationStatus=[],this.returnValueMenu={access:!0,add:!0,delete:!0,edit:!0,reportPrint:!0,reportView:!0},this.disabledWithAceessGroup=!1,this.projectDepartmentFieldDisiabled=!1,this.maintenanceWorkflowAuditList=[],this.currentStatus=0,this.returnValueMenu=this.menuService.getvalueObjectreturn(this.router.url),this.isProject=this.authService.getisProject()}ngOnInit(){this.getDropdownCompanyList(),this.breadCrumbItems=[{label:"WorkFlow"},{label:"Quotation list ",active:!0}],this.currentUserRole=JSON.parse(localStorage.getItem("currentUser")).role,"Client User"===this.currentUserRole&&(this.disabledWithAceessGroup=!0),localStorage.getItem("objectSerachForInvoiceProcess")?this.getObjectAfterRefresh():this.loadData()}OnChangesPage(o){o&&(this.payload.displayStart=this.pageSize*(o-1),this.loadData())}setObjectBeforeRefesh(){let o={};this.selectedDropDownCompanyIdValue&&(o.SearchCompanyId=this.selectedDropDownCompanyIdValue),this.selectedDropDownClientIdValue&&(o.SearchClientId=this.selectedDropDownClientIdValue),this.selectedDropDownProjectOrDeparmentIdValue&&(o.SearchProjectId=this.selectedDropDownProjectOrDeparmentIdValue),this.selectedInvoiceProcessValue&&(o.SearchIsQuotationBilled=this.selectedInvoiceProcessValue),this.arrayListDropDownClientList&&(o.arrayListDropDownClientList=this.arrayListDropDownClientList),this.arrayListDropDownProjectOrDeparmentList&&(o.arrayListDropDownProjectOrDeparmentList=this.arrayListDropDownProjectOrDeparmentList),this.typeQuotationNameValue&&(o.SearchQuotName=this.typeQuotationNameValue),this.typeQuotationNumberValue&&(o.SearchQuotNo=this.typeQuotationNumberValue),this.typeTicketNameValue&&(o.SearchTicketNo=this.typeTicketNameValue),this.page&&(o.displayStart=this.pageSize*(this.page-1),o.page=this.page),localStorage.setItem("objectSerachForInvoiceProcess",JSON.stringify(o))}getObjectAfterRefresh(){let o=JSON.parse(localStorage.getItem("objectSerachForInvoiceProcess"));this.arrayListDropDownClientList=o.arrayListDropDownClientList?o.arrayListDropDownClientList:[],this.arrayListDropDownProjectOrDeparmentList=o.arrayListDropDownProjectOrDeparmentList?o.arrayListDropDownProjectOrDeparmentList:[],this.selectedDropDownCompanyIdValue=o.SearchCompanyId?o.SearchCompanyId:null,this.selectedDropDownClientIdValue=o.SearchClientId?o.SearchClientId:null,this.selectedDropDownProjectOrDeparmentIdValue=o.SearchProjectId?o.SearchProjectId:null,this.selectedInvoiceProcessValue=o.SearchIsQuotationBilled?o.SearchIsQuotationBilled:null,this.typeQuotationNameValue=o.SearchQuotName?o.SearchQuotName:null,this.typeQuotationNumberValue=o.SearchQuotNo?o.SearchQuotNo:null,this.typeTicketNameValue=o.SearchTicketNo?o.SearchTicketNo:null,this.payload.SearchCompanyId=this.selectedDropDownCompanyIdValue,this.payload.SearchClientId=this.selectedDropDownClientIdValue,this.payload.SearchProjectId=this.selectedDropDownProjectOrDeparmentIdValue,this.payload.SearchQuotName=this.typeQuotationNameValue,this.payload.SearchQuotNo=this.typeQuotationNumberValue,this.payload.SearchTicketNo=this.typeTicketNameValue,this.payload.SearchIsQuotationBilled="Complete"==this.selectedInvoiceProcessValue||"Pending"!=this.selectedInvoiceProcessValue&&null,o.displayStart&&(this.payload.displayStart=o.displayStart,this.page=o.page),this.loadData()}loadData(){this.ticketService.getV2_MaintenanceGeneralQuotationListOnlyWaitingForInvoice(this.commonFunctionService.clean(this.payload)).subscribe(o=>{this.ticketList=o.list,console.log("res22::",this.ticketList),this.setObjectBeforeRefesh(),this.ticketList.length>0?(this.totalRecordsFromApi=o.list[0].totalCount,this.from=o.list.reduce((i,n)=>n.rowNum<i?n.rowNum:i,o.list[0].rowNum),this.to=o.list.reduce((i,n)=>n.rowNum>i?n.rowNum:i,o.list[0].rowNum),this.pageSize=this.payload.displayLength):(this.totalRecordsFromApi=0,this.from=0,this.to=0,this.pageSize=this.payload.displayLength)})}viewHandler(o){this.ticketService.sendTicketId=o.ticketId,this.ticketService.ticketPageAction="Basic Quotation Page",this.ticketService.lastStoreTicketRouterName="maintenace-management/corrective/quotation/list-quotation",localStorage.setItem("lastStoreTicketRouterName",this.ticketService.lastStoreTicketRouterName),this.router.navigate(["maintenace-management/corrective/ticket/ticket-view"])}resetSerachVariable(){this.arrayListDropDownClientList=[],this.arrayListDropDownProjectOrDeparmentList=[],this.selectedDropDownCompanyIdValue=null,this.selectedDropDownClientIdValue=null,this.selectedDropDownProjectOrDeparmentIdValue=null,this.selectedDropDownTicketStatusIdValue=null,this.typeQuotationNumberValue=null,this.typeQuotationNameValue=null,this.typeTicketNameValue=null,this.selectedInvoiceProcessValue=null,this.selectedQuotStatusIdValue=null,this.selectedTicketStatusIdValue=null,this.payload={displayLength:10,displayStart:0,SearchCompanyId:null,SearchClientId:null,SearchProjectId:null,SearchQuotName:null,SearchTicketNo:null,SearchQuotNo:null,SearchIsQuotationBilled:null,SearchTicketStatusId:null,SearchQuotStatusId:null},localStorage.removeItem("objectSerachForInvoiceProcess"),"Client User"===this.currentUserRole?this.resetAfterClientUser():(this.page=1,this.loadData())}resetAfterClientUser(){this.selectedDropDownCompanyIdValue=this.arrayListDropDownCompany[0].companyId,this.onDropdownCompanyValueChange(""),0!=this.arrayListDropDownClientList.length&&(this.selectedDropDownClientIdValue=this.arrayListDropDownClientList[0].clientId,this.onDropdownClientValueChange("")),0!=this.arrayListDropDownProjectOrDeparmentList.length&&"Client User"===this.currentUserRole&&(this.arrayListDropDownProjectOrDeparmentList.list.length>=2?this.projectDepartmentFieldDisiabled=!1:(this.projectDepartmentFieldDisiabled=!0,this.selectedDropDownProjectOrDeparmentIdValue=this.arrayListDropDownProjectOrDeparmentList[0].departmentId,this.onDropdownDepartmentValueChange("")))}resetSerachVariableWithModal(){this.selectedQuotStatusIdValue=null,this.selectedTicketStatusIdValue=null,this.payload.SearchTicketStatusId=this.selectedTicketStatusIdValue,this.payload.SearchQuotStatusId=this.selectedQuotStatusIdValue,this.loadData()}getDropdownCompanyList(){this.dropdownServices.GetCompanyListDrobDown({}).subscribe(o=>{this.arrayListDropDownCompany=o.list,"Client User"===this.currentUserRole&&(this.selectedDropDownCompanyIdValue=this.arrayListDropDownCompany[0].companyId,this.onDropdownCompanyValueChange("")),this.setObjectBeforeRefesh()})}getDropdownClientlist(){this.dropdownServices.GetClientListDrobDown({SearchCompanyId:this.selectedDropDownCompanyIdValue}).subscribe(i=>{this.arrayListDropDownClientList=i.list,"Client User"===this.currentUserRole&&(this.selectedDropDownClientIdValue=this.arrayListDropDownClientList[0].clientId,this.onDropdownClientValueChange(""),this.setObjectBeforeRefesh())})}getDropdownDepartmentList(){this.dropdownServices.GetDepartmentListDrobDown({SearchCompanyId:this.selectedDropDownCompanyIdValue,SearchClientId:this.selectedDropDownClientIdValue}).subscribe(i=>{this.arrayListDropDownProjectOrDeparmentList=i.list,0!=i.list.length&&"Client User"===this.currentUserRole&&(i.list.length>=2?this.projectDepartmentFieldDisiabled=!1:(this.projectDepartmentFieldDisiabled=!0,this.selectedDropDownProjectOrDeparmentIdValue=this.arrayListDropDownProjectOrDeparmentList[0].departmentId,this.onDropdownDepartmentValueChange(""),this.setObjectBeforeRefesh()))})}onDropdownCompanyValueChange(o){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchCompanyId=this.selectedDropDownCompanyIdValue,this.selectedDropDownClientIdValue=null,this.selectedDropDownProjectOrDeparmentIdValue=null,this.payload.SearchClientId=this.selectedDropDownClientIdValue,this.payload.SearchProjectId=this.selectedDropDownProjectOrDeparmentIdValue,this.arrayListDropDownProjectOrDeparmentList=[],this.getDropdownClientlist(),this.loadData()}onDropdownClientValueChange(o){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchClientId=this.selectedDropDownClientIdValue,this.selectedDropDownProjectOrDeparmentIdValue=null,this.payload.SearchProjectId=this.selectedDropDownProjectOrDeparmentIdValue,this.getDropdownDepartmentList(),this.loadData()}onDropdownDepartmentValueChange(o){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchProjectId=this.selectedDropDownProjectOrDeparmentIdValue,this.loadData()}onDropdownInvoiceProcessChange(o){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchIsQuotationBilled="Complete"==this.selectedInvoiceProcessValue||"Pending"!=this.selectedInvoiceProcessValue&&null,this.loadData()}returnStatusBadgeClassesStatus(o){return this.commonFunctionService.returnStatusBadgeClasses(o)}returnWorkFlowStatusBadgeClasses(o){return this.commonFunctionService.returnWorkFlowStatusBadgeClasses(o)}ngAfterViewInit(){(0,b.R)(this.inputerTicketNumber.nativeElement,"input").pipe((0,S.h)(Boolean),(0,f.b)(1e3),(0,C.x)(),(0,m.b)(o=>{this.onTypeTicketNameChange()})).subscribe(),(0,b.R)(this.inputerQuotationUmber.nativeElement,"input").pipe((0,S.h)(Boolean),(0,f.b)(1e3),(0,C.x)(),(0,m.b)(o=>{this.onTypeQuotationNumberValueChange()})).subscribe(),(0,b.R)(this.inputerQuotationName.nativeElement,"input").pipe((0,S.h)(Boolean),(0,f.b)(1e3),(0,C.x)(),(0,m.b)(o=>{this.onTypeQuotationNameValueChange()})).subscribe()}onTypeQuotationNameValueChange(){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchQuotName=this.typeQuotationNameValue,this.loadData()}onTypeQuotationNumberValueChange(){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchQuotNo=this.typeQuotationNumberValue,this.loadData()}onTypeTicketNameChange(){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchTicketNo=this.typeTicketNameValue,this.loadData()}openFilter(o){this.modalService.open(o,{ariaLabelledBy:"modal-basic-title",centered:!0,backdrop:"static",keyboard:!1}).result.then(i=>{this.submitFilterData()},i=>{this.submitFilterData()})}submitFilterData(){this.payload.SearchTicketStatusId=this.selectedTicketStatusIdValue,this.payload.SearchQuotStatusId=this.selectedQuotStatusIdValue,this.loadData()}getDropdownTicketStatusList(o){this.ticketService.getMaintenanceStatus(o).subscribe(i=>{this.arrayListDropDownTicketStatus=i})}getDropdownQuotationStatusList(o){this.ticketService.getMaintenanceStatus(o).subscribe(i=>{this.arrayListDropDownQuotationStatus=i})}getReturnQuotationNoColor(o){return 32==o.ticketStatusId&&o.isQuotationBilled?"link-danger":"link-primary"}getV2_MaintenanceWorkflowAudit(o,i,n){let a={TicketId:o};this.currentStatus=n,this.ticketService.getV2_MaintenanceWorkflowAudit(a).subscribe(c=>{this.maintenanceWorkflowAuditList=c.data,0!=this.maintenanceWorkflowAuditList.length?this.openAduit(i):(this.currentStatus=0,this.warning("No Workflow Audit Transaction "))})}warning(o){k().fire({toast:!0,position:"top-end",icon:"warning",title:o,showConfirmButton:!1,timer:3e3})}openAduit(o){this.offcanvasService.open(o,{scroll:!0,position:"end",keyboard:!1,backdrop:"static",panelClass:"custom-offcanvas2"})}expandTitle(o){document.getElementById(o)}static{this.\u0275fac=function(i){return new(i||d)(t.Y36(u.F0),t.Y36(_.FF),t.Y36(q.w),t.Y36(O.u),t.Y36(F.l),t.Y36(w.qu),t.Y36(J.K),t.Y36(G.V),t.Y36(M.S),t.Y36(_._B))}}static{this.\u0275cmp=t.Xpm({type:d,selectors:[["app-waitingfor-invoice-process"]],viewQuery:function(i,n){if(1&i&&(t.Gf(Y,7),t.Gf(X,7),t.Gf(tt,5)),2&i){let a;t.iGM(a=t.CRH())&&(n.inputerQuotationName=a.first),t.iGM(a=t.CRH())&&(n.inputerQuotationUmber=a.first),t.iGM(a=t.CRH())&&(n.inputerTicketNumber=a.first)}},decls:48,vars:23,consts:[[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","border-0"],[1,"row","align-items-center","gy-3"],[1,"col-sm-3","col-xxl-3"],[1,"card-title","mb-0"],[1,"col-sm-auto","col-xxl-9","gap-2","topsera","justify-content-end"],[1,"search-box","w-50"],["type","search","name","searchTerm","placeholder","Search for quotation name",1,"form-control",3,"ngModel","ngModelChange"],["inputerQuotationName",""],[1,"ri-search-line","search-icon"],["type","search","name","searchTerm","placeholder","Search for quotation number",1,"form-control",3,"ngModel","ngModelChange"],["inputerQuotationUmber",""],["type","search","name","searchTerm","placeholder","Search for ticket number",1,"form-control",3,"ngModel","ngModelChange"],["inputerTicketNumber",""],[1,"card-body","border","border-dashed","border-end-0","border-start-0"],[1,"row","g-3"],[1,"col-lg"],["bindLabel","companyName","bindValue","companyId","id","companyName","placeholder","Select Company","for","companyName",1,"w-100","mr-2",3,"items","clearable","ngModel","readonly","change","ngModelChange"],["bindLabel","clientName","bindValue","clientId","id","clientName","placeholder","Select Client","for","clientName",1,"w-100","mr-2",3,"items","disabled","clearable","ngModel","readonly","change","ngModelChange"],["bindLabel","departmentName","bindValue","departmentId","id","departmentName","placeholder","Select Project","for","departmentName",1,"w-100","mr-2",3,"readonly","items","disabled","clearable","ngModel","change","ngModelChange"],["bindLabel","name","bindValue","id","id","invoiceProcess","placeholder","Select Invoice Process","for","invoiceProcess",1,"w-100","mr-2",3,"items","clearable","ngModel","change","ngModelChange"],[1,"col-lg-auto","text-end"],[1,"d-flex","justify-content-end"],["type","button","ngbTooltip","Remove All Search",1,"btn","btn-danger","ms-1",3,"click"],[1,"ri-refresh-fill","me-1","align-bottom"],[1,"card-body","pt-0"],["ngbNav","",1,"nav","nav-tabs","nav-tabs-custom","nav-success","mb-3",3,"activeId"],["nav","ngbNav"],[3,"ngbNavItem"],["ngbNavContent",""],[1,"tab-content","text-muted"],[3,"ngbNavOutlet"],["filtetcontent",""],["openAduitOffSet",""],[1,"table-responsive","table-card","mb-0"],[1,"table"],[1,"bg-light","text-muted","text-uppercase"],[4,"ngIf"],[1,"row","justify-content-md-between","align-items-md-center","gy-2"],[1,"col-sm-6"],["id","tickets-table_info","role","status","aria-live","polite",1,"dataTables_info","mb-2"],[1,"text-sm-right","float-end","listjs-pagination"],[3,"collectionSize","pageSize","page","maxSize","rotate","pageChange",4,"ngIf"],["colspan","10",1,"text-center"],[4,"ngFor","ngForOf"],["href","javascript:void(0)",1,"fw-medium",3,"click"],[1,"d-flex","mb-0"],[1,"ri-eye-fill","align-bottom","ms-2","text-success","fs-15",3,"click"],[1,"align-top"],[1,"title","align-top",3,"title","id","click"],[1,"status","align-top"],["ngbDropdown","",1,"dropdown"],["type","button","data-bs-toggle","dropdown","aria-expanded","false","ngbDropdownToggle","",1,"btn","btn-soft-secondary","btn-sm","dropdown","arrow-none"],[1,"ri-more-fill"],["ngbDropdownMenu","",1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item","cursor-pointer",3,"click"],[1,"ri-eye-fill","align-bottom","me-2","text-muted"],[3,"collectionSize","pageSize","page","maxSize","rotate","pageChange"],[1,"modal-header","p-3","bg-info-subtle"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","close-modal",1,"btn-close",3,"click"],[1,"modal-body"],[1,"col-lg-6","mb-3"],["for","selectedTicketTypeId",1,"form-label","fw-semibold"],["bindLabel","assetStatus","bindValue","assetStatusId","id","ticketStatus","placeholder","Select Ticket Status","for","ticketStatus",1,"w-100","mr-2",3,"items","clearable","ngModel","ngModelChange"],["bindLabel","assetStatus","bindValue","assetStatusId","id","QuotationStatus","placeholder","Select Quotation Status","for","QuotationStatus",1,"w-100","mr-2",3,"items","clearable","ngModel","ngModelChange"],[1,"modal-footer"],[1,"btn","btn-light",3,"click"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"offcanvas-header"],[1,"offcanvas-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],["class","text-danger m-auto",4,"ngIf"],[1,"offcanvas-body","pt-0"],[3,"Data"],[1,"text-end"],["type","button",1,"btn","btn-outline-danger",3,"click"],[1,"text-danger","m-auto"],[1,"fs-17","mb-0"]],template:function(i,n){if(1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h5",6),t._uU(7,"Waiting for Invoice Process List"),t.qZA()(),t.TgZ(8,"div",7)(9,"div",8)(10,"input",9,10),t.NdJ("ngModelChange",function(c){return n.typeQuotationNameValue=c}),t.qZA(),t._UZ(12,"i",11),t.qZA(),t.TgZ(13,"div",8)(14,"input",12,13),t.NdJ("ngModelChange",function(c){return n.typeQuotationNumberValue=c}),t.qZA(),t._UZ(16,"i",11),t.qZA(),t.TgZ(17,"div",8)(18,"input",14,15),t.NdJ("ngModelChange",function(c){return n.typeTicketNameValue=c}),t.qZA(),t._UZ(20,"i",11),t.qZA()()()(),t.TgZ(21,"div",16)(22,"div",17)(23,"div",18)(24,"ng-select",19),t.NdJ("change",function(c){return n.onDropdownCompanyValueChange(c)})("ngModelChange",function(c){return n.selectedDropDownCompanyIdValue=c}),t.qZA()(),t.TgZ(25,"div",18)(26,"ng-select",20),t.NdJ("change",function(c){return n.onDropdownClientValueChange(c)})("ngModelChange",function(c){return n.selectedDropDownClientIdValue=c}),t.qZA()(),t.TgZ(27,"div",18)(28,"ng-select",21),t.NdJ("change",function(c){return n.onDropdownDepartmentValueChange(c)})("ngModelChange",function(c){return n.selectedDropDownProjectOrDeparmentIdValue=c}),t.qZA()(),t.TgZ(29,"div",18)(30,"ng-select",22),t.NdJ("change",function(c){return n.onDropdownInvoiceProcessChange(c)})("ngModelChange",function(c){return n.selectedInvoiceProcessValue=c}),t.qZA()(),t.TgZ(31,"div",23)(32,"div",24)(33,"button",25),t.NdJ("click",function(){return n.resetSerachVariable()}),t._UZ(34,"i",26),t._uU(35," Clear "),t.qZA()()()()(),t.TgZ(36,"div",27)(37,"div")(38,"ul",28,29)(40,"li",30),t.YNc(41,at,34,7,"ng-template",31),t.qZA()(),t.TgZ(42,"div",32),t._UZ(43,"div",33),t.qZA()()()()()(),t.YNc(44,st,19,6,"ng-template",null,34,t.W1O)(46,lt,10,2,"ng-template",null,35,t.W1O)),2&i){const a=t.MAs(39);t.xp6(10),t.Q6J("ngModel",n.typeQuotationNameValue),t.xp6(4),t.Q6J("ngModel",n.typeQuotationNumberValue),t.xp6(4),t.Q6J("ngModel",n.typeTicketNameValue),t.xp6(6),t.Q6J("items",n.arrayListDropDownCompany)("clearable",!0)("ngModel",n.selectedDropDownCompanyIdValue)("readonly",n.disabledWithAceessGroup),t.xp6(2),t.Q6J("items",n.arrayListDropDownClientList)("disabled",!n.selectedDropDownCompanyIdValue)("clearable",!0)("ngModel",n.selectedDropDownClientIdValue)("readonly",n.disabledWithAceessGroup),t.xp6(2),t.Q6J("readonly",n.projectDepartmentFieldDisiabled)("items",n.arrayListDropDownProjectOrDeparmentList)("disabled",!n.selectedDropDownCompanyIdValue||!n.selectedDropDownClientIdValue)("clearable",!0)("ngModel",n.selectedDropDownProjectOrDeparmentIdValue),t.xp6(2),t.Q6J("items",n.invoiceProcessList)("clearable",!0)("ngModel",n.selectedInvoiceProcessValue),t.xp6(8),t.Q6J("activeId",1),t.xp6(2),t.Q6J("ngbNavItem",1),t.xp6(3),t.Q6J("ngbNavOutlet",a)}},dependencies:[e.sg,e.O5,w.Fj,w.JJ,w.On,_.N9,_.jt,_.iD,_.Vi,B.F,_.uN,_.Pz,_.nv,_.Is,_.Dy,_._L,P.w9],styles:[".topsera[_ngcontent-%COMP%]{display:flex!important;flex-direction:rows}@media only screen and (max-width: 600px){.w-50[_ngcontent-%COMP%]{width:100%!important}.topsera[_ngcontent-%COMP%]{display:flex!important;flex-direction:column}}"]})}}return d})();const dt=["inputerQuotationName"],pt=["inputerQuotationUmber"],ut=["inputerTicketNumber"];function ht(d,v){1&d&&(t.ynx(0),t.TgZ(1,"tr")(2,"td",45),t._uU(3," No Quotation Data "),t.qZA()(),t.BQk())}function R(d,v){if(1&d){const o=t.EpF();t.TgZ(0,"tr")(1,"td")(2,"a",47),t.NdJ("click",function(){const a=t.CHM(o).$implicit,c=t.oxw(3);return t.KtG(c.viewHandler(a))}),t._uU(3),t.qZA(),t.TgZ(4,"p",48)(5,"i",49),t.NdJ("click",function(){const a=t.CHM(o).$implicit,c=t.oxw(3),Z=t.MAs(47);return t.KtG(c.getV2_MaintenanceWorkflowAudit(a.ticketId,Z,a.ticketStatusId))}),t.qZA()()(),t.TgZ(6,"td",50),t._uU(7),t.qZA(),t.TgZ(8,"td",51),t.NdJ("click",function(){const a=t.CHM(o).$implicit,c=t.oxw(3);return t.KtG(c.expandTitle("quotTitle_"+a.quotNo))}),t._uU(9),t.qZA(),t.TgZ(10,"td",51),t.NdJ("click",function(){const a=t.CHM(o).$implicit,c=t.oxw(3);return t.KtG(c.expandTitle("companyName_"+a.quotNo))}),t._uU(11),t.qZA(),t.TgZ(12,"td",51),t.NdJ("click",function(){const a=t.CHM(o).$implicit,c=t.oxw(3);return t.KtG(c.expandTitle("clientName_"+a.quotNo))}),t._uU(13),t.qZA(),t.TgZ(14,"td",51),t.NdJ("click",function(){const a=t.CHM(o).$implicit,c=t.oxw(3);return t.KtG(c.expandTitle("projectName_"+a.quotNo))}),t._uU(15),t.qZA(),t.TgZ(16,"td",51),t.NdJ("click",function(){const a=t.CHM(o).$implicit,c=t.oxw(3);return t.KtG(c.expandTitle("createdDate_"+a.quotNo))}),t._uU(17),t.qZA(),t.TgZ(18,"td",52)(19,"span"),t._uU(20),t.qZA()(),t.TgZ(21,"td",52)(22,"span"),t._uU(23),t.qZA()(),t.TgZ(24,"td",50)(25,"span")(26,"div",53)(27,"button",54),t._UZ(28,"i",55),t.qZA(),t.TgZ(29,"ul",56)(30,"li")(31,"a",57),t.NdJ("click",function(){const a=t.CHM(o).$implicit,c=t.oxw(3);return t.KtG(c.viewHandler(a))}),t._UZ(32,"i",58),t._uU(33," View "),t.qZA()()()()()()()}if(2&d){const o=v.$implicit,i=t.oxw(3);t.xp6(2),t.Tol(i.getReturnQuotationNoColor(o)),t.xp6(1),t.Oqu(o.quotNo),t.xp6(4),t.hij(" ",o.ticketNo," "),t.xp6(1),t.Q6J("title",o.quotTitle)("id","quotTitle_"+o.quotNo),t.xp6(1),t.hij(" ",o.quotTitle," "),t.xp6(1),t.Q6J("title",o.companyName)("id","companyName_"+o.quotNo),t.xp6(1),t.hij(" ",o.companyName," "),t.xp6(1),t.Q6J("title",o.clientName)("id","clientName_"+o.quotNo),t.xp6(1),t.hij(" ",o.clientName," "),t.xp6(1),t.Q6J("title",o.projectName)("id","projectName_"+o.quotNo),t.xp6(1),t.hij(" ",o.projectName," "),t.xp6(1),t.Q6J("title",o.createdDate)("id","createdDate_"+o.quotNo),t.xp6(1),t.hij(" ",o.createdDate," "),t.xp6(2),t.Tol(i.returnStatusBadgeClassesStatus(o.ticketStatusId)),t.xp6(1),t.Oqu(o.ticketStatusName),t.xp6(2),t.Tol(i.returnStatusBadgeClassesStatus(o.quotStatusId)),t.xp6(1),t.Oqu(o.quotStatusName)}}function mt(d,v){if(1&d&&(t.ynx(0),t.YNc(1,R,34,25,"tr",46),t.BQk()),2&d){const o=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",o.ticketList)}}function D(d,v){if(1&d){const o=t.EpF();t.TgZ(0,"ngb-pagination",59),t.NdJ("pageChange",function(n){t.CHM(o);const a=t.oxw(2);return t.KtG(a.page=n)})("pageChange",function(n){t.CHM(o);const a=t.oxw(2);return t.KtG(a.OnChangesPage(n))}),t.qZA()}if(2&d){const o=t.oxw(2);t.Q6J("collectionSize",o.totalRecordsFromApi)("pageSize",o.pageSize)("page",o.page)("maxSize",2)("rotate",!0)}}function T(d,v){if(1&d&&(t.TgZ(0,"div",36)(1,"table",37)(2,"thead")(3,"tr",38)(4,"th"),t._uU(5,"Quotation NO"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"TICKET NO"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Title"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Company"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Client"),t.qZA(),t.TgZ(14,"th"),t._uU(15),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Create Date"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Ticket Status"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Status"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Action"),t.qZA()()(),t.TgZ(24,"tbody"),t.YNc(25,ht,4,0,"ng-container",39)(26,mt,2,1,"ng-container",39),t.qZA()()(),t.TgZ(27,"div",40)(28,"div",41)(29,"div",42),t._uU(30),t.qZA()(),t.TgZ(31,"div",41)(32,"div",43),t.YNc(33,D,1,5,"ngb-pagination",44),t.qZA()()()),2&d){const o=t.oxw();t.xp6(15),t.Oqu(o.isProject?"Project":"Department"),t.xp6(10),t.Q6J("ngIf",0==o.ticketList.length),t.xp6(1),t.Q6J("ngIf",0!=o.ticketList.length),t.xp6(4),t.lnq(" Showing ",o.from," to ",o.to," of ",o.totalRecordsFromApi," entries "),t.xp6(3),t.Q6J("ngIf",o.totalRecordsFromApi>o.pageSize)}}function s(d,v){if(1&d){const o=t.EpF();t.TgZ(0,"div",60)(1,"h5",61),t._uU(2,"Filters"),t.qZA(),t.TgZ(3,"button",62),t.NdJ("click",function(){const a=t.CHM(o).$implicit;return t.KtG(a.dismiss("Cross click"))}),t.qZA()(),t.TgZ(4,"div",63)(5,"div",0)(6,"div",64)(7,"label",65),t._uU(8,"Ticket Status "),t.qZA(),t.TgZ(9,"ng-select",66),t.NdJ("ngModelChange",function(n){t.CHM(o);const a=t.oxw();return t.KtG(a.selectedTicketStatusIdValue=n)}),t.qZA()(),t.TgZ(10,"div",64)(11,"label",65),t._uU(12,"Quotation Status "),t.qZA(),t.TgZ(13,"ng-select",67),t.NdJ("ngModelChange",function(n){t.CHM(o);const a=t.oxw();return t.KtG(a.selectedQuotStatusIdValue=n)}),t.qZA()()()(),t.TgZ(14,"div",68)(15,"button",69),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.resetSerachVariableWithModal())})("click",function(){const a=t.CHM(o).$implicit;return t.KtG(a.dismiss("Close click"))}),t._uU(16," Clear "),t.qZA(),t.TgZ(17,"button",70),t.NdJ("click",function(n){const c=t.CHM(o).$implicit;return t.KtG(c.close("Ok",n))}),t._uU(18," Search "),t.qZA()()}if(2&d){const o=t.oxw();t.xp6(9),t.Q6J("items",o.arrayListDropDownTicketStatus)("clearable",!1)("ngModel",o.selectedTicketStatusIdValue),t.xp6(4),t.Q6J("items",o.arrayListDropDownQuotationStatus)("clearable",!1)("ngModel",o.selectedQuotStatusIdValue)}}function l(d,v){1&d&&(t.TgZ(0,"div",79)(1,"p",80)(2,"b"),t._uU(3,"Ticket has been canceled"),t.qZA()()())}function r(d,v){if(1&d){const o=t.EpF();t.TgZ(0,"div",71)(1,"h4",72),t._uU(2,"WorkFlow Audit"),t.qZA(),t.TgZ(3,"button",73),t.NdJ("click",function(){const a=t.CHM(o).$implicit;return t.KtG(a.dismiss("Cross click"))}),t.qZA()(),t.YNc(4,l,4,0,"div",74),t.TgZ(5,"div",75),t._UZ(6,"app-audit-chart",76),t.TgZ(7,"div",77)(8,"button",78),t.NdJ("click",function(){const a=t.CHM(o).$implicit;return t.KtG(a.close("Close click"))}),t._uU(9," Close "),t.qZA()()()}if(2&d){const o=t.oxw();t.xp6(4),t.Q6J("ngIf",19==o.currentStatus),t.xp6(2),t.Q6J("Data",o.maintenanceWorkflowAuditList)}}let h=(()=>{class d{constructor(o,i,n,a,c,Z,W,z,E,K){this.router=o,this.modalService=i,this.ticketService=n,this.authService=a,this.menuService=c,this.formBuilder=Z,this.commonFunctionService=W,this.dropdownServices=z,this.helpDeskService=E,this.offcanvasService=K,this.isProject=!1,this.label="Quotation",this.breadCrumbItems=[{label:"Quotation"},{label:"Quotation List",active:!0}],this.payload={displayLength:10,displayStart:0,SearchCompanyId:null,SearchClientId:null,SearchProjectId:null,QuotStatusId:null,SearchQuotName:null,SearchTicketNo:null,SearchQuotNo:null,SearchTicketStatusId:null,SearchQuotStatusId:null,SearchIsQuotationBilled:null},this.invoiceProcessList=[{id:!0,name:"Complete"},{id:!1,name:"Pending"}],this.to=0,this.from=0,this.pageSize=10,this.totalRecordsFromApi=0,this.ticketList=[],this.page=1,this.collectionSize=0,this.imageUrl=L.N.apiUrl,this.arrayListDropDownCompany=[],this.arrayListDropDownClientList=[],this.arrayListDropDownProjectOrDeparmentList=[],this.arrayListDropDownTicketStatus=[],this.arrayListDropDownQuotationStatus=[],this.returnValueMenu={access:!0,add:!0,delete:!0,edit:!0,reportPrint:!0,reportView:!0},this.disabledWithAceessGroup=!1,this.projectDepartmentFieldDisiabled=!1,this.maintenanceWorkflowAuditList=[],this.currentStatus=0,this.returnValueMenu=this.menuService.getvalueObjectreturn(this.router.url),this.isProject=this.authService.getisProject()}ngOnInit(){this.getDropdownCompanyList(),this.breadCrumbItems=[{label:"WorkFlow"},{label:"Quotation list ",active:!0}],this.currentUserRole=JSON.parse(localStorage.getItem("currentUser")).role,"Client User"===this.currentUserRole&&(this.disabledWithAceessGroup=!0),localStorage.getItem("objectSerachForInvoiceGenerated")?this.getObjectAfterRefresh():this.loadData()}OnChangesPage(o){o&&(this.payload.displayStart=this.pageSize*(o-1),this.loadData())}loadData(){this.ticketService.getV2_MaintenanceGeneralQuotationListInvoiceDone(this.commonFunctionService.clean(this.payload)).subscribe(o=>{this.ticketList=o.list,this.setObjectBeforeRefesh(),this.ticketList.length>0?(this.totalRecordsFromApi=o.list[0].totalCount,this.from=o.list.reduce((i,n)=>n.rowNum<i?n.rowNum:i,o.list[0].rowNum),this.to=o.list.reduce((i,n)=>n.rowNum>i?n.rowNum:i,o.list[0].rowNum),this.pageSize=this.payload.displayLength):(this.totalRecordsFromApi=0,this.from=0,this.to=0,this.pageSize=this.payload.displayLength)})}setObjectBeforeRefesh(){let o={};this.selectedDropDownCompanyIdValue&&(o.SearchCompanyId=this.selectedDropDownCompanyIdValue),this.selectedDropDownClientIdValue&&(o.SearchClientId=this.selectedDropDownClientIdValue),this.selectedDropDownProjectOrDeparmentIdValue&&(o.SearchProjectId=this.selectedDropDownProjectOrDeparmentIdValue),this.selectedInvoiceProcessValue&&(o.SearchIsQuotationBilled=this.selectedInvoiceProcessValue),this.arrayListDropDownClientList&&(o.arrayListDropDownClientList=this.arrayListDropDownClientList),this.arrayListDropDownProjectOrDeparmentList&&(o.arrayListDropDownProjectOrDeparmentList=this.arrayListDropDownProjectOrDeparmentList),this.typeQuotationNameValue&&(o.SearchQuotName=this.typeQuotationNameValue),this.typeQuotationNumberValue&&(o.SearchQuotNo=this.typeQuotationNumberValue),this.typeTicketNameValue&&(o.SearchTicketNo=this.typeTicketNameValue),this.page&&(o.displayStart=this.pageSize*(this.page-1),o.page=this.page),localStorage.setItem("objectSerachForInvoiceGenerated",JSON.stringify(o))}getObjectAfterRefresh(){let o=JSON.parse(localStorage.getItem("objectSerachForInvoiceGenerated"));this.arrayListDropDownClientList=o.arrayListDropDownClientList?o.arrayListDropDownClientList:[],this.arrayListDropDownProjectOrDeparmentList=o.arrayListDropDownProjectOrDeparmentList?o.arrayListDropDownProjectOrDeparmentList:[],this.selectedDropDownCompanyIdValue=o.SearchCompanyId?o.SearchCompanyId:null,this.selectedDropDownClientIdValue=o.SearchClientId?o.SearchClientId:null,this.selectedDropDownProjectOrDeparmentIdValue=o.SearchProjectId?o.SearchProjectId:null,this.selectedInvoiceProcessValue=o.SearchIsQuotationBilled?o.SearchIsQuotationBilled:null,this.typeQuotationNameValue=o.SearchQuotName?o.SearchQuotName:null,this.typeQuotationNumberValue=o.SearchQuotNo?o.SearchQuotNo:null,this.typeTicketNameValue=o.SearchTicketNo?o.SearchTicketNo:null,this.payload.SearchCompanyId=this.selectedDropDownCompanyIdValue,this.payload.SearchClientId=this.selectedDropDownClientIdValue,this.payload.SearchProjectId=this.selectedDropDownProjectOrDeparmentIdValue,this.payload.SearchQuotName=this.typeQuotationNameValue,this.payload.SearchQuotNo=this.typeQuotationNumberValue,this.payload.SearchTicketNo=this.typeTicketNameValue,this.payload.SearchIsQuotationBilled="Complete"==this.selectedInvoiceProcessValue||"Pending"!=this.selectedInvoiceProcessValue&&null,o.displayStart&&(this.payload.displayStart=o.displayStart,this.page=o.page),this.loadData()}viewHandler(o){this.ticketService.sendTicketId=o.ticketId,this.ticketService.ticketPageAction="Basic Quotation Page",this.ticketService.lastStoreTicketRouterName="maintenace-management/corrective/quotation/list-quotation",localStorage.setItem("lastStoreTicketRouterName",this.ticketService.lastStoreTicketRouterName),this.router.navigate(["maintenace-management/corrective/ticket/ticket-view"])}resetSerachVariable(){this.arrayListDropDownClientList=[],this.arrayListDropDownProjectOrDeparmentList=[],this.selectedDropDownCompanyIdValue=null,this.selectedDropDownClientIdValue=null,this.selectedDropDownProjectOrDeparmentIdValue=null,this.selectedDropDownTicketStatusIdValue=null,this.typeQuotationNumberValue=null,this.typeQuotationNameValue=null,this.typeTicketNameValue=null,this.selectedInvoiceProcessValue=null,this.selectedQuotStatusIdValue=null,this.selectedTicketStatusIdValue=null,this.payload={displayLength:10,displayStart:0,SearchCompanyId:null,SearchClientId:null,SearchProjectId:null,SearchQuotName:null,SearchTicketNo:null,SearchQuotNo:null,SearchIsQuotationBilled:null,SearchTicketStatusId:null,SearchQuotStatusId:null},localStorage.removeItem("objectSerachForInvoiceGenerated"),"Client User"===this.currentUserRole?this.resetAfterClientUser():(this.page=1,this.loadData())}resetAfterClientUser(){this.selectedDropDownCompanyIdValue=this.arrayListDropDownCompany[0].companyId,this.onDropdownCompanyValueChange(""),0!=this.arrayListDropDownClientList.length&&(this.selectedDropDownClientIdValue=this.arrayListDropDownClientList[0].clientId,this.onDropdownClientValueChange("")),0!=this.arrayListDropDownProjectOrDeparmentList.length&&"Client User"===this.currentUserRole&&(this.arrayListDropDownProjectOrDeparmentList.list.length>=2?this.projectDepartmentFieldDisiabled=!1:(this.projectDepartmentFieldDisiabled=!0,this.selectedDropDownProjectOrDeparmentIdValue=this.arrayListDropDownProjectOrDeparmentList[0].departmentId,this.onDropdownDepartmentValueChange("")))}resetSerachVariableWithModal(){this.selectedQuotStatusIdValue=null,this.selectedTicketStatusIdValue=null,this.payload.SearchTicketStatusId=this.selectedTicketStatusIdValue,this.payload.SearchQuotStatusId=this.selectedQuotStatusIdValue,this.loadData()}getDropdownCompanyList(){this.dropdownServices.GetCompanyListDrobDown({}).subscribe(o=>{this.arrayListDropDownCompany=o.list,"Client User"===this.currentUserRole&&(this.selectedDropDownCompanyIdValue=this.arrayListDropDownCompany[0].companyId,this.onDropdownCompanyValueChange(""))})}getDropdownClientlist(){this.dropdownServices.GetClientListDrobDown({SearchCompanyId:this.selectedDropDownCompanyIdValue}).subscribe(i=>{this.arrayListDropDownClientList=i.list,"Client User"===this.currentUserRole&&(this.selectedDropDownClientIdValue=this.arrayListDropDownClientList[0].clientId,this.onDropdownClientValueChange("")),this.setObjectBeforeRefesh()})}getDropdownDepartmentList(){this.dropdownServices.GetDepartmentListDrobDown({SearchCompanyId:this.selectedDropDownCompanyIdValue,SearchClientId:this.selectedDropDownClientIdValue}).subscribe(i=>{this.arrayListDropDownProjectOrDeparmentList=i.list,0!=i.list.length&&"Client User"===this.currentUserRole&&(i.list.length>=2?this.projectDepartmentFieldDisiabled=!1:(this.projectDepartmentFieldDisiabled=!0,this.selectedDropDownProjectOrDeparmentIdValue=this.arrayListDropDownProjectOrDeparmentList[0].departmentId,this.onDropdownDepartmentValueChange(""))),this.setObjectBeforeRefesh()})}onDropdownCompanyValueChange(o){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchCompanyId=this.selectedDropDownCompanyIdValue,this.selectedDropDownClientIdValue=null,this.selectedDropDownProjectOrDeparmentIdValue=null,this.payload.SearchClientId=this.selectedDropDownClientIdValue,this.payload.SearchProjectId=this.selectedDropDownProjectOrDeparmentIdValue,this.arrayListDropDownProjectOrDeparmentList=[],this.getDropdownClientlist(),this.loadData()}onDropdownClientValueChange(o){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchClientId=this.selectedDropDownClientIdValue,this.selectedDropDownProjectOrDeparmentIdValue=null,this.payload.SearchProjectId=this.selectedDropDownProjectOrDeparmentIdValue,this.getDropdownDepartmentList(),this.setObjectBeforeRefesh(),this.loadData()}onDropdownDepartmentValueChange(o){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchProjectId=this.selectedDropDownProjectOrDeparmentIdValue,this.setObjectBeforeRefesh(),this.loadData()}onDropdownInvoiceProcessChange(o){console.log(this.selectedInvoiceProcessValue,"this.payload.SearchIsQuotationBilled"),this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchIsQuotationBilled="Complete"==this.selectedInvoiceProcessValue||"Pending"!=this.selectedInvoiceProcessValue&&null,this.setObjectBeforeRefesh(),this.loadData()}returnStatusBadgeClassesStatus(o){return this.commonFunctionService.returnStatusBadgeClasses(o)}returnWorkFlowStatusBadgeClasses(o){return this.commonFunctionService.returnWorkFlowStatusBadgeClasses(o)}ngAfterViewInit(){(0,b.R)(this.inputerTicketNumber.nativeElement,"input").pipe((0,S.h)(Boolean),(0,f.b)(1e3),(0,C.x)(),(0,m.b)(o=>{this.onTypeTicketNameChange()})).subscribe(),(0,b.R)(this.inputerQuotationUmber.nativeElement,"input").pipe((0,S.h)(Boolean),(0,f.b)(1e3),(0,C.x)(),(0,m.b)(o=>{this.onTypeQuotationNumberValueChange()})).subscribe(),(0,b.R)(this.inputerQuotationName.nativeElement,"input").pipe((0,S.h)(Boolean),(0,f.b)(1e3),(0,C.x)(),(0,m.b)(o=>{this.onTypeQuotationNameValueChange()})).subscribe()}onTypeQuotationNameValueChange(){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchQuotName=this.typeQuotationNameValue,this.loadData()}onTypeQuotationNumberValueChange(){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchQuotNo=this.typeQuotationNumberValue,this.loadData()}onTypeTicketNameChange(){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchTicketNo=this.typeTicketNameValue,this.loadData()}openFilter(o){this.modalService.open(o,{ariaLabelledBy:"modal-basic-title",centered:!0,backdrop:"static",keyboard:!1}).result.then(i=>{this.submitFilterData()},i=>{this.submitFilterData()})}submitFilterData(){this.payload.SearchTicketStatusId=this.selectedTicketStatusIdValue,this.payload.SearchQuotStatusId=this.selectedQuotStatusIdValue,this.loadData()}getDropdownTicketStatusList(o){this.ticketService.getMaintenanceStatus(o).subscribe(i=>{this.arrayListDropDownTicketStatus=i})}getDropdownQuotationStatusList(o){this.ticketService.getMaintenanceStatus(o).subscribe(i=>{this.arrayListDropDownQuotationStatus=i})}getReturnQuotationNoColor(o){return 32==o.ticketStatusId&&o.isQuotationBilled?"link-danger":"link-primary"}getV2_MaintenanceWorkflowAudit(o,i,n){let a={TicketId:o};this.currentStatus=n,this.ticketService.getV2_MaintenanceWorkflowAudit(a).subscribe(c=>{this.maintenanceWorkflowAuditList=c.data,0!=this.maintenanceWorkflowAuditList.length?this.openAduit(i):(this.currentStatus=0,this.warning("No Workflow Audit Transaction "))})}warning(o){k().fire({toast:!0,position:"top-end",icon:"warning",title:o,showConfirmButton:!1,timer:3e3})}openAduit(o){this.offcanvasService.open(o,{scroll:!0,position:"end",keyboard:!1,backdrop:"static",panelClass:"custom-offcanvas2"})}expandTitle(o){document.getElementById(o)}static{this.\u0275fac=function(i){return new(i||d)(t.Y36(u.F0),t.Y36(_.FF),t.Y36(q.w),t.Y36(O.u),t.Y36(F.l),t.Y36(w.qu),t.Y36(J.K),t.Y36(G.V),t.Y36(M.S),t.Y36(_._B))}}static{this.\u0275cmp=t.Xpm({type:d,selectors:[["app-invoice-generated"]],viewQuery:function(i,n){if(1&i&&(t.Gf(dt,7),t.Gf(pt,7),t.Gf(ut,7)),2&i){let a;t.iGM(a=t.CRH())&&(n.inputerQuotationName=a.first),t.iGM(a=t.CRH())&&(n.inputerQuotationUmber=a.first),t.iGM(a=t.CRH())&&(n.inputerTicketNumber=a.first)}},decls:48,vars:23,consts:[[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","border-0"],[1,"row","align-items-center","gy-3"],[1,"col-sm-3","col-xxl-3"],[1,"card-title","mb-0"],[1,"col-sm-auto","col-xxl-9","gap-2","topsera","justify-content-end"],[1,"search-box","w-50"],["type","search","name","searchTerm","placeholder","Search for quotation name",1,"form-control",3,"ngModel","ngModelChange"],["inputerQuotationName",""],[1,"ri-search-line","search-icon"],["type","search","name","searchTerm","placeholder","Search for quotation number",1,"form-control",3,"ngModel","ngModelChange"],["inputerQuotationUmber",""],["type","search","name","searchTerm","placeholder","Search for ticket number",1,"form-control",3,"ngModel","ngModelChange"],["inputerTicketNumber",""],[1,"card-body","border","border-dashed","border-end-0","border-start-0"],[1,"row","g-3"],[1,"col-lg"],["bindLabel","companyName","bindValue","companyId","id","companyName","placeholder","Select Company","for","companyName",1,"w-100","mr-2",3,"items","clearable","ngModel","readonly","change","ngModelChange"],["bindLabel","clientName","bindValue","clientId","id","clientName","placeholder","Select Client","for","clientName",1,"w-100","mr-2",3,"items","disabled","clearable","ngModel","readonly","change","ngModelChange"],["bindLabel","departmentName","bindValue","departmentId","id","departmentName","placeholder","Select Project","for","departmentName",1,"w-100","mr-2",3,"readonly","items","disabled","clearable","ngModel","change","ngModelChange"],["bindLabel","name","bindValue","name","id","invoiceProcess","placeholder","Select Invoice Process","for","invoiceProcess",1,"w-100","mr-2",3,"items","clearable","ngModel","change","ngModelChange"],[1,"col-lg-auto","text-end"],[1,"d-flex","justify-content-end"],["type","button","ngbTooltip","Remove All Search",1,"btn","btn-danger","ms-1",3,"click"],[1,"ri-refresh-fill","me-1","align-bottom"],[1,"card-body","pt-0"],["ngbNav","",1,"nav","nav-tabs","nav-tabs-custom","nav-success","mb-3",3,"activeId"],["nav","ngbNav"],[3,"ngbNavItem"],["ngbNavContent",""],[1,"tab-content","text-muted"],[3,"ngbNavOutlet"],["filtetcontent",""],["openAduitOffSet",""],[1,"table-responsive","table-card","mb-0"],[1,"table"],[1,"bg-light","text-muted","text-uppercase"],[4,"ngIf"],[1,"row","justify-content-md-between","align-items-md-center","gy-2"],[1,"col-sm-6"],["id","tickets-table_info","role","status","aria-live","polite",1,"dataTables_info","mb-2"],[1,"text-sm-right","float-end","listjs-pagination"],[3,"collectionSize","pageSize","page","maxSize","rotate","pageChange",4,"ngIf"],["colspan","10",1,"text-center"],[4,"ngFor","ngForOf"],["href","javascript:void(0)",1,"fw-medium",3,"click"],[1,"d-flex","mb-0"],[1,"ri-eye-fill","align-bottom","ms-2","text-success","fs-15",3,"click"],[1,"align-top"],[1,"title","align-top",3,"title","id","click"],[1,"status","align-top"],["ngbDropdown","",1,"dropdown"],["type","button","data-bs-toggle","dropdown","aria-expanded","false","ngbDropdownToggle","",1,"btn","btn-soft-secondary","btn-sm","dropdown","arrow-none"],[1,"ri-more-fill"],["ngbDropdownMenu","",1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item","cursor-pointer",3,"click"],[1,"ri-eye-fill","align-bottom","me-2","text-muted"],[3,"collectionSize","pageSize","page","maxSize","rotate","pageChange"],[1,"modal-header","p-3","bg-info-subtle"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","close-modal",1,"btn-close",3,"click"],[1,"modal-body"],[1,"col-lg-6","mb-3"],["for","selectedTicketTypeId",1,"form-label","fw-semibold"],["bindLabel","assetStatus","bindValue","assetStatusId","id","ticketStatus","placeholder","Select Ticket Status","for","ticketStatus",1,"w-100","mr-2",3,"items","clearable","ngModel","ngModelChange"],["bindLabel","assetStatus","bindValue","assetStatusId","id","QuotationStatus","placeholder","Select Quotation Status","for","QuotationStatus",1,"w-100","mr-2",3,"items","clearable","ngModel","ngModelChange"],[1,"modal-footer"],[1,"btn","btn-light",3,"click"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"offcanvas-header"],[1,"offcanvas-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],["class","text-danger m-auto",4,"ngIf"],[1,"offcanvas-body","pt-0"],[3,"Data"],[1,"text-end"],["type","button",1,"btn","btn-outline-danger",3,"click"],[1,"text-danger","m-auto"],[1,"fs-17","mb-0"]],template:function(i,n){if(1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h5",6),t._uU(7,"Invoice Generated List"),t.qZA()(),t.TgZ(8,"div",7)(9,"div",8)(10,"input",9,10),t.NdJ("ngModelChange",function(c){return n.typeQuotationNameValue=c}),t.qZA(),t._UZ(12,"i",11),t.qZA(),t.TgZ(13,"div",8)(14,"input",12,13),t.NdJ("ngModelChange",function(c){return n.typeQuotationNumberValue=c}),t.qZA(),t._UZ(16,"i",11),t.qZA(),t.TgZ(17,"div",8)(18,"input",14,15),t.NdJ("ngModelChange",function(c){return n.typeTicketNameValue=c}),t.qZA(),t._UZ(20,"i",11),t.qZA()()()(),t.TgZ(21,"div",16)(22,"div",17)(23,"div",18)(24,"ng-select",19),t.NdJ("change",function(c){return n.onDropdownCompanyValueChange(c)})("ngModelChange",function(c){return n.selectedDropDownCompanyIdValue=c}),t.qZA()(),t.TgZ(25,"div",18)(26,"ng-select",20),t.NdJ("change",function(c){return n.onDropdownClientValueChange(c)})("ngModelChange",function(c){return n.selectedDropDownClientIdValue=c}),t.qZA()(),t.TgZ(27,"div",18)(28,"ng-select",21),t.NdJ("change",function(c){return n.onDropdownDepartmentValueChange(c)})("ngModelChange",function(c){return n.selectedDropDownProjectOrDeparmentIdValue=c}),t.qZA()(),t.TgZ(29,"div",18)(30,"ng-select",22),t.NdJ("change",function(c){return n.onDropdownInvoiceProcessChange(c)})("ngModelChange",function(c){return n.selectedInvoiceProcessValue=c}),t.qZA()(),t.TgZ(31,"div",23)(32,"div",24)(33,"button",25),t.NdJ("click",function(){return n.resetSerachVariable()}),t._UZ(34,"i",26),t._uU(35," Clear "),t.qZA()()()()(),t.TgZ(36,"div",27)(37,"div")(38,"ul",28,29)(40,"li",30),t.YNc(41,T,34,7,"ng-template",31),t.qZA()(),t.TgZ(42,"div",32),t._UZ(43,"div",33),t.qZA()()()()()(),t.YNc(44,s,19,6,"ng-template",null,34,t.W1O)(46,r,10,2,"ng-template",null,35,t.W1O)),2&i){const a=t.MAs(39);t.xp6(10),t.Q6J("ngModel",n.typeQuotationNameValue),t.xp6(4),t.Q6J("ngModel",n.typeQuotationNumberValue),t.xp6(4),t.Q6J("ngModel",n.typeTicketNameValue),t.xp6(6),t.Q6J("items",n.arrayListDropDownCompany)("clearable",!0)("ngModel",n.selectedDropDownCompanyIdValue)("readonly",n.disabledWithAceessGroup),t.xp6(2),t.Q6J("items",n.arrayListDropDownClientList)("disabled",!n.selectedDropDownCompanyIdValue)("clearable",!0)("ngModel",n.selectedDropDownClientIdValue)("readonly",n.disabledWithAceessGroup),t.xp6(2),t.Q6J("readonly",n.projectDepartmentFieldDisiabled)("items",n.arrayListDropDownProjectOrDeparmentList)("disabled",!n.selectedDropDownCompanyIdValue||!n.selectedDropDownClientIdValue)("clearable",!0)("ngModel",n.selectedDropDownProjectOrDeparmentIdValue),t.xp6(2),t.Q6J("items",n.invoiceProcessList)("clearable",!0)("ngModel",n.selectedInvoiceProcessValue),t.xp6(8),t.Q6J("activeId",1),t.xp6(2),t.Q6J("ngbNavItem",1),t.xp6(3),t.Q6J("ngbNavOutlet",a)}},dependencies:[e.sg,e.O5,w.Fj,w.JJ,w.On,_.N9,_.jt,_.iD,_.Vi,B.F,_.uN,_.Pz,_.nv,_.Is,_.Dy,_._L,P.w9],styles:[".topsera[_ngcontent-%COMP%]{display:flex!important;flex-direction:rows}@media only screen and (max-width: 600px){.w-50[_ngcontent-%COMP%]{width:100%!important}.topsera[_ngcontent-%COMP%]{display:flex!important;flex-direction:column}}"]})}}return d})();const y=["inputerTicketNumber"],N=["inputerQuotationUmber"],V=["inputerQuotationName"];function x(d,v){1&d&&t._UZ(0,"app-waitingfor-invoice-process")}function Q(d,v){1&d&&t._UZ(0,"app-invoice-generated")}function U(d,v){1&d&&(t.ynx(0),t.TgZ(1,"tr")(2,"td",53),t._uU(3," No Quotation Data "),t.qZA()(),t.BQk())}function gt(d,v){if(1&d){const o=t.EpF();t.TgZ(0,"tr")(1,"td",55)(2,"a",56),t.NdJ("click",function(){const a=t.CHM(o).$implicit,c=t.oxw(4);return t.KtG(c.viewHandler(a))}),t._uU(3),t.qZA(),t.TgZ(4,"p",57)(5,"i",58),t.NdJ("click",function(){const a=t.CHM(o).$implicit,c=t.oxw(4),Z=t.MAs(24);return t.KtG(c.getV2_MaintenanceWorkflowAudit(a.ticketId,Z,a.ticketStatusId))}),t.qZA()()(),t.TgZ(6,"td",55),t._uU(7),t.qZA(),t.TgZ(8,"td",59),t.NdJ("click",function(){const a=t.CHM(o).$implicit,c=t.oxw(4);return t.KtG(c.expandTitle("quotTitle_"+a.quotNo))}),t._uU(9),t.qZA(),t.TgZ(10,"td",59),t.NdJ("click",function(){const a=t.CHM(o).$implicit,c=t.oxw(4);return t.KtG(c.expandTitle("companyName_"+a.quotNo))}),t._uU(11),t.qZA(),t.TgZ(12,"td",59),t.NdJ("click",function(){const a=t.CHM(o).$implicit,c=t.oxw(4);return t.KtG(c.expandTitle("clientName_"+a.quotNo))}),t._uU(13),t.qZA(),t.TgZ(14,"td",59),t.NdJ("click",function(){const a=t.CHM(o).$implicit,c=t.oxw(4);return t.KtG(c.expandTitle("projectName_"+a.quotNo))}),t._uU(15),t.qZA(),t.TgZ(16,"td",59),t.NdJ("click",function(){const a=t.CHM(o).$implicit,c=t.oxw(4);return t.KtG(c.expandTitle("createdDate_"+a.quotNo))}),t._uU(17),t.qZA(),t.TgZ(18,"td",60)(19,"span"),t._uU(20),t.qZA()(),t.TgZ(21,"td",60)(22,"span"),t._uU(23),t.qZA()(),t.TgZ(24,"td",55)(25,"span")(26,"div",61)(27,"button",62),t._UZ(28,"i",63),t.qZA(),t.TgZ(29,"ul",64)(30,"li")(31,"a",65),t.NdJ("click",function(){const a=t.CHM(o).$implicit,c=t.oxw(4);return t.KtG(c.viewHandler(a))}),t._UZ(32,"i",66),t._uU(33," View "),t.qZA()()()()()()()}if(2&d){const o=v.$implicit,i=t.oxw(4);t.xp6(2),t.Tol(i.getReturnQuotationNoColor(o)),t.xp6(1),t.Oqu(o.quotNo),t.xp6(4),t.hij(" ",o.ticketNo," "),t.xp6(1),t.Q6J("title",o.quotTitle)("id","quotTitle_"+o.quotNo),t.xp6(1),t.hij(" ",o.quotTitle," "),t.xp6(1),t.Q6J("title",o.companyName)("id","companyName_"+o.quotNo),t.xp6(1),t.hij(" ",o.companyName," "),t.xp6(1),t.Q6J("title",o.clientName)("id","clientName_"+o.quotNo),t.xp6(1),t.hij(" ",o.clientName," "),t.xp6(1),t.Q6J("title",o.projectName)("id","projectName_"+o.quotNo),t.xp6(1),t.hij(" ",o.projectName," "),t.xp6(1),t.Q6J("title",o.createdDate)("id","createdDate_"+o.quotNo),t.xp6(1),t.hij(" ",o.createdDate," "),t.xp6(2),t.Tol(i.returnStatusBadgeClassesStatus(o.ticketStatusId)),t.xp6(1),t.Oqu(o.ticketStatusName),t.xp6(2),t.Tol(i.returnStatusBadgeClassesStatus(o.quotStatusId)),t.xp6(1),t.Oqu(o.quotStatusName)}}function _t(d,v){if(1&d&&(t.ynx(0),t.YNc(1,gt,34,25,"tr",54),t.BQk()),2&d){const o=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",o.ticketList)}}function Ct(d,v){if(1&d){const o=t.EpF();t.TgZ(0,"ngb-pagination",67),t.NdJ("pageChange",function(n){t.CHM(o);const a=t.oxw(3);return t.KtG(a.page=n)})("pageChange",function(n){t.CHM(o);const a=t.oxw(3);return t.KtG(a.OnChangesPage(n))}),t.qZA()}if(2&d){const o=t.oxw(3);t.Q6J("collectionSize",o.totalRecordsFromApi)("pageSize",o.pageSize)("page",o.page)("maxSize",2)("rotate",!0)}}function Dt(d,v){if(1&d&&(t.TgZ(0,"div",44)(1,"table",45)(2,"thead")(3,"tr",46)(4,"th"),t._uU(5,"Quotation NO"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"TICKET NO"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Title"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Company"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Client"),t.qZA(),t.TgZ(14,"th"),t._uU(15),t.qZA(),t.TgZ(16,"th"),t._uU(17,"Create Date"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"Ticket Status"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Status"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Action"),t.qZA()()(),t.TgZ(24,"tbody"),t.YNc(25,U,4,0,"ng-container",47)(26,_t,2,1,"ng-container",47),t.qZA()()(),t.TgZ(27,"div",48)(28,"div",49)(29,"div",50),t._uU(30),t.qZA()(),t.TgZ(31,"div",49)(32,"div",51),t.YNc(33,Ct,1,5,"ngb-pagination",52),t.qZA()()()),2&d){const o=t.oxw(2);t.xp6(15),t.hij(" ",o.isProject?"Project":"Department"," "),t.xp6(10),t.Q6J("ngIf",0==o.ticketList.length),t.xp6(1),t.Q6J("ngIf",0!=o.ticketList.length),t.xp6(4),t.lnq(" Showing ",o.from," to ",o.to," of ",o.totalRecordsFromApi," entries "),t.xp6(3),t.Q6J("ngIf",o.totalRecordsFromApi>o.pageSize)}}function ft(d,v){if(1&d){const o=t.EpF();t.TgZ(0,"div",3)(1,"div",14)(2,"div",15)(3,"div",16)(4,"h5",17),t._uU(5,"Quotation List"),t.qZA()(),t.TgZ(6,"div",18)(7,"div",19)(8,"input",20,21),t.NdJ("ngModelChange",function(n){t.CHM(o);const a=t.oxw();return t.KtG(a.typeQuotationNameValue=n)}),t.qZA(),t._UZ(10,"i",22),t.qZA(),t.TgZ(11,"div",19)(12,"input",23,24),t.NdJ("ngModelChange",function(n){t.CHM(o);const a=t.oxw();return t.KtG(a.typeQuotationNumberValue=n)}),t.qZA(),t._UZ(14,"i",22),t.qZA(),t.TgZ(15,"div",19)(16,"input",25,26),t.NdJ("ngModelChange",function(n){t.CHM(o);const a=t.oxw();return t.KtG(a.typeTicketNameValue=n)}),t.qZA(),t._UZ(18,"i",22),t.qZA()()()(),t.TgZ(19,"div",27)(20,"div",28)(21,"div",29)(22,"ng-select",30),t.NdJ("change",function(n){t.CHM(o);const a=t.oxw();return t.KtG(a.onDropdownCompanyValueChange(n))})("ngModelChange",function(n){t.CHM(o);const a=t.oxw();return t.KtG(a.selectedDropDownCompanyIdValue=n)}),t.qZA()(),t.TgZ(23,"div",29)(24,"ng-select",31),t.NdJ("change",function(n){t.CHM(o);const a=t.oxw();return t.KtG(a.onDropdownClientValueChange(n))})("ngModelChange",function(n){t.CHM(o);const a=t.oxw();return t.KtG(a.selectedDropDownClientIdValue=n)}),t.qZA()(),t.TgZ(25,"div",29)(26,"ng-select",32),t.NdJ("change",function(n){t.CHM(o);const a=t.oxw();return t.KtG(a.onDropdownDepartmentValueChange(n))})("ngModelChange",function(n){t.CHM(o);const a=t.oxw();return t.KtG(a.selectedDropDownProjectOrDeparmentIdValue=n)}),t.qZA()(),t.TgZ(27,"div",29)(28,"ng-select",33),t.NdJ("change",function(n){t.CHM(o);const a=t.oxw();return t.KtG(a.onDropdownInvoiceProcessChange(n))})("ngModelChange",function(n){t.CHM(o);const a=t.oxw();return t.KtG(a.selectedInvoiceProcessValue=n)}),t.qZA()(),t.TgZ(29,"div",34)(30,"div",35)(31,"button",36),t.NdJ("click",function(){t.CHM(o);const n=t.oxw(),a=t.MAs(22);return t.KtG(n.openFilter(a))}),t._UZ(32,"i",37),t._uU(33," Filters "),t.qZA(),t.TgZ(34,"button",38),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.resetSerachVariable())}),t._UZ(35,"i",39),t._uU(36," Clear "),t.qZA()()()()(),t.TgZ(37,"div",40)(38,"div")(39,"ul",41,42)(41,"li",43),t.YNc(42,Dt,34,7,"ng-template",9),t.qZA()(),t.TgZ(43,"div",10),t._UZ(44,"div",11),t.qZA()()()()}if(2&d){const o=t.MAs(40),i=t.oxw();t.xp6(8),t.Q6J("ngModel",i.typeQuotationNameValue),t.xp6(4),t.Q6J("ngModel",i.typeQuotationNumberValue),t.xp6(4),t.Q6J("ngModel",i.typeTicketNameValue),t.xp6(6),t.Q6J("items",i.arrayListDropDownCompany)("clearable",!0)("ngModel",i.selectedDropDownCompanyIdValue)("readonly",i.disabledWithAceessGroup),t.xp6(2),t.Q6J("items",i.arrayListDropDownClientList)("disabled",!i.selectedDropDownCompanyIdValue)("clearable",!0)("ngModel",i.selectedDropDownClientIdValue)("readonly",i.disabledWithAceessGroup),t.xp6(2),t.Q6J("readonly",i.projectDepartmentFieldDisiabled)("items",i.arrayListDropDownProjectOrDeparmentList)("disabled",!i.selectedDropDownCompanyIdValue||!i.selectedDropDownClientIdValue)("clearable",!0)("ngModel",i.selectedDropDownProjectOrDeparmentIdValue),t.xp6(2),t.Q6J("items",i.invoiceProcessList)("clearable",!0)("ngModel",i.selectedInvoiceProcessValue),t.xp6(3),t.Tol(i.selectedQuotStatusIdValue||i.selectedTicketStatusIdValue?"btn-success":"btn-primary"),t.xp6(8),t.Q6J("activeId",1),t.xp6(2),t.Q6J("ngbNavItem",1),t.xp6(3),t.Q6J("ngbNavOutlet",o)}}function yt(d,v){if(1&d){const o=t.EpF();t.TgZ(0,"div",68)(1,"h5",69),t._uU(2,"Filters"),t.qZA(),t.TgZ(3,"button",70),t.NdJ("click",function(){const a=t.CHM(o).$implicit;return t.KtG(a.dismiss("Cross click"))}),t.qZA()(),t.TgZ(4,"div",71)(5,"div",1)(6,"div",72)(7,"label",73),t._uU(8,"Ticket Status "),t.qZA(),t.TgZ(9,"ng-select",74),t.NdJ("ngModelChange",function(n){t.CHM(o);const a=t.oxw();return t.KtG(a.selectedTicketStatusIdValue=n)}),t.qZA()(),t.TgZ(10,"div",72)(11,"label",73),t._uU(12,"Quotation Status "),t.qZA(),t.TgZ(13,"ng-select",75),t.NdJ("ngModelChange",function(n){t.CHM(o);const a=t.oxw();return t.KtG(a.selectedQuotStatusIdValue=n)}),t.qZA()()()(),t.TgZ(14,"div",76)(15,"button",77),t.NdJ("click",function(){t.CHM(o);const n=t.oxw();return t.KtG(n.resetSerachVariableWithModal())})("click",function(){const a=t.CHM(o).$implicit;return t.KtG(a.dismiss("Close click"))}),t._uU(16," Clear "),t.qZA(),t.TgZ(17,"button",78),t.NdJ("click",function(n){const c=t.CHM(o).$implicit;return t.KtG(c.close("Ok",n))}),t._uU(18," Search "),t.qZA()()}if(2&d){const o=t.oxw();t.xp6(9),t.Q6J("items",o.arrayListDropDownTicketStatus)("clearable",!1)("ngModel",o.selectedTicketStatusIdValue),t.xp6(4),t.Q6J("items",o.arrayListDropDownQuotationStatus)("clearable",!1)("ngModel",o.selectedQuotStatusIdValue)}}function bt(d,v){1&d&&(t.TgZ(0,"div",87)(1,"p",88)(2,"b"),t._uU(3,"Ticket has been canceled"),t.qZA()()())}function vt(d,v){if(1&d){const o=t.EpF();t.TgZ(0,"div",79)(1,"h4",80),t._uU(2,"WorkFlow Audit"),t.qZA(),t.TgZ(3,"button",81),t.NdJ("click",function(){const a=t.CHM(o).$implicit;return t.KtG(a.dismiss("Cross click"))}),t.qZA()(),t.YNc(4,bt,4,0,"div",82),t.TgZ(5,"div",83),t._UZ(6,"app-audit-chart",84),t.TgZ(7,"div",85)(8,"button",86),t.NdJ("click",function(){const a=t.CHM(o).$implicit;return t.KtG(a.close("Close click"))}),t._uU(9," Close "),t.qZA()()()}if(2&d){const o=t.oxw();t.xp6(4),t.Q6J("ngIf",19==o.currentStatus),t.xp6(2),t.Q6J("Data",o.maintenanceWorkflowAuditList)}}const It=[{path:"add-quotation",component:I.S},{path:"list-quotation",component:(()=>{class d{constructor(o,i,n,a,c,Z,W,z,E,K){this.router=o,this.modalService=i,this.ticketService=n,this.authService=a,this.menuService=c,this.formBuilder=Z,this.commonFunctionService=W,this.dropdownServices=z,this.helpDeskService=E,this.offcanvasService=K,this.isProject=!1,this.label="Quotation",this.breadCrumbItems=[{label:"Quotation"},{label:"Quotation List",active:!0}],this.activeId=1,this.payload={displayLength:10,displayStart:0,SearchCompanyId:null,SearchClientId:null,SearchProjectId:null,QuotStatusId:null,SearchQuotName:null,SearchTicketNo:null,SearchQuotNo:null,SearchTicketStatusId:null,SearchQuotStatusId:null,SearchIsQuotationBilled:null},this.invoiceProcessList=[{id:!0,name:"Complete"},{id:!1,name:"Pending"}],this.to=0,this.from=0,this.pageSize=10,this.totalRecordsFromApi=0,this.ticketList=[],this.page=1,this.collectionSize=0,this.imageUrl=L.N.apiUrl,this.arrayListDropDownCompany=[],this.arrayListDropDownClientList=[],this.arrayListDropDownProjectOrDeparmentList=[],this.arrayListDropDownTicketStatus=[],this.arrayListDropDownQuotationStatus=[],this.returnValueMenu={access:!0,add:!0,delete:!0,edit:!0,reportPrint:!0,reportView:!0},this.disabledWithAceessGroup=!1,this.projectDepartmentFieldDisiabled=!1,this.maintenanceWorkflowAuditList=[],this.currentStatus=0,this.returnValueMenu=this.menuService.getvalueObjectreturn(this.router.url),this.isProject=this.authService.getisProject()}ngOnInit(){this.getDropdownCompanyList(),this.getDropdownTicketStatusList("TicketQuotationStatus"),this.getDropdownQuotationStatusList("QuotationStatus"),this.breadCrumbItems=[{label:"WorkFlow"},{label:"Quotation list ",active:!0}],this.currentUserRole=JSON.parse(localStorage.getItem("currentUser")).role,"Client User"===this.currentUserRole&&(this.disabledWithAceessGroup=!0),localStorage.getItem("objectSerachForInvoiceMainQuotation")?this.getObjectAfterRefresh():this.loadData(),localStorage.getItem("mainTabValiuTabs")&&(this.activeId=Number(localStorage.getItem("mainTabValiuTabs")))}setActiveTab(o){localStorage.setItem("mainTabValiuTabs",o)}setObjectBeforeRefesh(){let o={};this.selectedDropDownCompanyIdValue&&(o.SearchCompanyId=this.selectedDropDownCompanyIdValue),this.selectedDropDownClientIdValue&&(o.SearchClientId=this.selectedDropDownClientIdValue),this.selectedDropDownProjectOrDeparmentIdValue&&(o.SearchProjectId=this.selectedDropDownProjectOrDeparmentIdValue),this.selectedInvoiceProcessValue&&(o.SearchIsQuotationBilled=this.selectedInvoiceProcessValue),this.arrayListDropDownClientList&&(o.arrayListDropDownClientList=this.arrayListDropDownClientList),this.arrayListDropDownProjectOrDeparmentList&&(o.arrayListDropDownProjectOrDeparmentList=this.arrayListDropDownProjectOrDeparmentList),this.typeQuotationNameValue&&(o.SearchQuotName=this.typeQuotationNameValue),this.typeQuotationNumberValue&&(o.SearchQuotNo=this.typeQuotationNumberValue),this.typeTicketNameValue&&(o.SearchTicketNo=this.typeTicketNameValue),this.arrayListDropDownQuotationStatus&&(o.arrayListDropDownQuotationStatus=this.arrayListDropDownQuotationStatus),this.arrayListDropDownTicketStatus&&(o.arrayListDropDownTicketStatus=this.arrayListDropDownTicketStatus),this.selectedTicketStatusIdValue&&(o.SearchTicketStatusId=this.selectedTicketStatusIdValue),this.selectedQuotStatusIdValue&&(o.SearchQuotStatusId=this.selectedQuotStatusIdValue),this.page&&(o.displayStart=this.pageSize*(this.page-1),o.page=this.page),localStorage.setItem("objectSerachForInvoiceMainQuotation",JSON.stringify(o))}getObjectAfterRefresh(){let o=JSON.parse(localStorage.getItem("objectSerachForInvoiceMainQuotation"));this.arrayListDropDownClientList=o.arrayListDropDownClientList?o.arrayListDropDownClientList:[],this.arrayListDropDownProjectOrDeparmentList=o.arrayListDropDownProjectOrDeparmentList?o.arrayListDropDownProjectOrDeparmentList:[],this.selectedDropDownCompanyIdValue=o.SearchCompanyId?o.SearchCompanyId:null,this.selectedDropDownClientIdValue=o.SearchClientId?o.SearchClientId:null,this.selectedDropDownProjectOrDeparmentIdValue=o.SearchProjectId?o.SearchProjectId:null,this.selectedInvoiceProcessValue=o.SearchIsQuotationBilled?o.SearchIsQuotationBilled:null,this.typeQuotationNameValue=o.SearchQuotName?o.SearchQuotName:null,this.typeQuotationNumberValue=o.SearchQuotNo?o.SearchQuotNo:null,this.typeTicketNameValue=o.SearchTicketNo?o.SearchTicketNo:null,this.arrayListDropDownQuotationStatus=o.arrayListDropDownQuotationStatus?o.arrayListDropDownQuotationStatus:[],this.arrayListDropDownTicketStatus=o.arrayListDropDownTicketStatus?o.arrayListDropDownTicketStatus:[],this.selectedTicketStatusIdValue=o.SearchTicketStatusId?o.SearchTicketStatusId:null,this.selectedQuotStatusIdValue=o.SearchQuotStatusId?o.SearchQuotStatusId:null,this.payload.SearchCompanyId=this.selectedDropDownCompanyIdValue,this.payload.SearchClientId=this.selectedDropDownClientIdValue,this.payload.SearchProjectId=this.selectedDropDownProjectOrDeparmentIdValue,this.payload.SearchQuotName=this.typeQuotationNameValue,this.payload.SearchQuotNo=this.typeQuotationNumberValue,this.payload.SearchTicketNo=this.typeTicketNameValue,this.payload.SearchTicketStatusId=this.selectedQuotStatusIdValue,this.payload.SearchTicketStatusId=this.selectedTicketStatusIdValue,this.payload.SearchIsQuotationBilled="Complete"==this.selectedInvoiceProcessValue||"Pending"!=this.selectedInvoiceProcessValue&&null,o.displayStart&&(this.payload.displayStart=o.displayStart,this.page=o.page),this.loadData()}OnChangesPage(o){o&&(this.payload.displayStart=this.pageSize*(o-1),this.loadData())}loadData(){this.ticketService.getV2_MaintenanceGeneralQuotationList(this.commonFunctionService.clean(this.payload)).subscribe(o=>{this.ticketList=o.list,this.setObjectBeforeRefesh(),this.ticketList.length>0?(this.totalRecordsFromApi=o.list[0].totalCount,this.from=o.list.reduce((i,n)=>n.rowNum<i?n.rowNum:i,o.list[0].rowNum),this.to=o.list.reduce((i,n)=>n.rowNum>i?n.rowNum:i,o.list[0].rowNum),this.pageSize=this.payload.displayLength):(this.totalRecordsFromApi=0,this.from=0,this.to=0,this.pageSize=this.payload.displayLength)})}viewHandler(o){this.ticketService.sendTicketId=o.ticketId,this.ticketService.ticketPageAction="Basic Quotation Page",this.ticketService.lastStoreTicketRouterName="maintenace-management/corrective/quotation/list-quotation",localStorage.setItem("lastStoreTicketRouterName",this.ticketService.lastStoreTicketRouterName),this.router.navigate(["maintenace-management/corrective/ticket/ticket-view"])}resetSerachVariable(){this.arrayListDropDownClientList=[],this.arrayListDropDownProjectOrDeparmentList=[],this.selectedDropDownCompanyIdValue=null,this.selectedDropDownClientIdValue=null,this.selectedDropDownProjectOrDeparmentIdValue=null,this.selectedDropDownTicketStatusIdValue=null,this.typeQuotationNumberValue=null,this.typeQuotationNameValue=null,this.typeTicketNameValue=null,this.selectedInvoiceProcessValue=null,this.selectedQuotStatusIdValue=null,this.selectedTicketStatusIdValue=null,this.payload={displayLength:10,displayStart:0,SearchCompanyId:null,SearchClientId:null,SearchProjectId:null,SearchQuotName:null,SearchTicketNo:null,SearchQuotNo:null,SearchIsQuotationBilled:null,SearchTicketStatusId:null,SearchQuotStatusId:null},localStorage.removeItem("objectSerachForInvoiceMainQuotation"),"Client User"===this.currentUserRole?this.resetAfterClientUser():(this.page=1,this.loadData())}resetAfterClientUser(){this.selectedDropDownCompanyIdValue=this.arrayListDropDownCompany[0].companyId,this.onDropdownCompanyValueChange(""),0!=this.arrayListDropDownClientList.length&&(this.selectedDropDownClientIdValue=this.arrayListDropDownClientList[0].clientId,this.onDropdownClientValueChange("")),0!=this.arrayListDropDownProjectOrDeparmentList.length&&"Client User"===this.currentUserRole&&(this.arrayListDropDownProjectOrDeparmentList.list.length>=2?this.projectDepartmentFieldDisiabled=!1:(this.projectDepartmentFieldDisiabled=!0,this.selectedDropDownProjectOrDeparmentIdValue=this.arrayListDropDownProjectOrDeparmentList[0].departmentId,this.onDropdownDepartmentValueChange("")))}resetSerachVariableWithModal(){this.selectedQuotStatusIdValue=null,this.selectedTicketStatusIdValue=null,this.payload.SearchTicketStatusId=this.selectedTicketStatusIdValue,this.payload.SearchQuotStatusId=this.selectedQuotStatusIdValue,this.loadData()}getDropdownCompanyList(){this.dropdownServices.GetCompanyListDrobDown({}).subscribe(o=>{this.arrayListDropDownCompany=o.list,"Client User"===this.currentUserRole&&(this.selectedDropDownCompanyIdValue=this.arrayListDropDownCompany[0].companyId,this.onDropdownCompanyValueChange(""))})}getDropdownClientlist(){this.dropdownServices.GetClientListDrobDown({SearchCompanyId:this.selectedDropDownCompanyIdValue}).subscribe(i=>{this.arrayListDropDownClientList=i.list,"Client User"===this.currentUserRole&&(this.selectedDropDownClientIdValue=this.arrayListDropDownClientList[0].clientId,this.onDropdownClientValueChange("")),this.setObjectBeforeRefesh()})}getDropdownDepartmentList(){this.dropdownServices.GetDepartmentListDrobDown({SearchCompanyId:this.selectedDropDownCompanyIdValue,SearchClientId:this.selectedDropDownClientIdValue}).subscribe(i=>{this.arrayListDropDownProjectOrDeparmentList=i.list,0!=i.list.length&&"Client User"===this.currentUserRole&&(i.list.length>=2?this.projectDepartmentFieldDisiabled=!1:(this.projectDepartmentFieldDisiabled=!0,this.selectedDropDownProjectOrDeparmentIdValue=this.arrayListDropDownProjectOrDeparmentList[0].departmentId,this.onDropdownDepartmentValueChange(""))),this.setObjectBeforeRefesh()})}onDropdownCompanyValueChange(o){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchCompanyId=this.selectedDropDownCompanyIdValue,this.selectedDropDownClientIdValue=null,this.selectedDropDownProjectOrDeparmentIdValue=null,this.payload.SearchClientId=this.selectedDropDownClientIdValue,this.payload.SearchProjectId=this.selectedDropDownProjectOrDeparmentIdValue,this.arrayListDropDownProjectOrDeparmentList=[],this.getDropdownClientlist(),this.loadData()}onDropdownClientValueChange(o){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchClientId=this.selectedDropDownClientIdValue,this.selectedDropDownProjectOrDeparmentIdValue=null,this.payload.SearchProjectId=this.selectedDropDownProjectOrDeparmentIdValue,this.getDropdownDepartmentList(),this.loadData()}onDropdownDepartmentValueChange(o){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchProjectId=this.selectedDropDownProjectOrDeparmentIdValue,this.setObjectBeforeRefesh(),this.loadData()}onDropdownInvoiceProcessChange(o){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchIsQuotationBilled=this.selectedInvoiceProcessValue,this.setObjectBeforeRefesh(),this.loadData()}returnStatusBadgeClassesStatus(o){return this.commonFunctionService.returnStatusBadgeClasses(o)}returnWorkFlowStatusBadgeClasses(o){return this.commonFunctionService.returnWorkFlowStatusBadgeClasses(o)}ngAfterViewInit(){setTimeout(()=>{(0,b.R)(this.inputerTicketNumber.nativeElement,"input").pipe((0,S.h)(Boolean),(0,f.b)(1e3),(0,C.x)(),(0,m.b)(o=>{this.onTypeTicketNameChange()})).subscribe(),(0,b.R)(this.inputerQuotationUmber.nativeElement,"input").pipe((0,S.h)(Boolean),(0,f.b)(1e3),(0,C.x)(),(0,m.b)(o=>{this.onTypeQuotationNumberValueChange()})).subscribe(),(0,b.R)(this.inputerQuotationName.nativeElement,"input").pipe((0,S.h)(Boolean),(0,f.b)(1e3),(0,C.x)(),(0,m.b)(o=>{this.onTypeQuotationNameValueChange()})).subscribe()},200)}onTypeQuotationNameValueChange(){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchQuotName=this.typeQuotationNameValue,this.loadData()}onTypeQuotationNumberValueChange(){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchQuotNo=this.typeQuotationNumberValue,this.loadData()}onTypeTicketNameChange(){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchTicketNo=this.typeTicketNameValue,this.loadData()}openFilter(o){this.modalService.open(o,{ariaLabelledBy:"modal-basic-title",centered:!0,backdrop:"static",keyboard:!1}).result.then(i=>{this.submitFilterData()},i=>{this.submitFilterData()})}submitFilterData(){this.payload.SearchTicketStatusId=this.selectedTicketStatusIdValue,this.payload.SearchQuotStatusId=this.selectedQuotStatusIdValue,this.loadData()}getDropdownTicketStatusList(o){this.ticketService.getMaintenanceStatus(o).subscribe(i=>{this.arrayListDropDownTicketStatus=i})}getDropdownQuotationStatusList(o){this.ticketService.getMaintenanceStatus(o).subscribe(i=>{this.arrayListDropDownQuotationStatus=i})}getReturnQuotationNoColor(o){return 32==o.ticketStatusId&&o.isQuotationBilled?"link-danger":"link-primary"}getV2_MaintenanceWorkflowAudit(o,i,n){let a={TicketId:o};this.currentStatus=n,this.ticketService.getV2_MaintenanceWorkflowAudit(a).subscribe(c=>{this.maintenanceWorkflowAuditList=c.data,0!=this.maintenanceWorkflowAuditList.length?this.openAduit(i):(this.currentStatus=0,this.warning("No Workflow Audit Transaction "))})}warning(o){k().fire({toast:!0,position:"top-end",icon:"warning",title:o,showConfirmButton:!1,timer:3e3})}openAduit(o){this.offcanvasService.open(o,{scroll:!0,position:"end",keyboard:!1,backdrop:"static",panelClass:"custom-offcanvas2"})}expandTitle(o){document.getElementById(o)}static{this.\u0275fac=function(i){return new(i||d)(t.Y36(u.F0),t.Y36(_.FF),t.Y36(q.w),t.Y36(O.u),t.Y36(F.l),t.Y36(w.qu),t.Y36(J.K),t.Y36(G.V),t.Y36(M.S),t.Y36(_._B))}}static{this.\u0275cmp=t.Xpm({type:d,selectors:[["app-list-quotation"]],viewQuery:function(i,n){if(1&i&&(t.Gf(y,5),t.Gf(N,5),t.Gf(V,5)),2&i){let a;t.iGM(a=t.CRH())&&(n.inputerTicketNumber=a.first),t.iGM(a=t.CRH())&&(n.inputerQuotationUmber=a.first),t.iGM(a=t.CRH())&&(n.inputerQuotationName=a.first)}},decls:25,vars:7,consts:[[3,"title","breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-body"],["ngbNav","",1,"nav","nav-tabs","nav-border-top","nav-border-top-primary","mb-3",3,"activeId","activeIdChange"],["Border","ngbNav"],[3,"ngbNavItem","click"],["ngbNavLink",""],["ngbNavContent",""],[1,"tab-content","text-muted"],[3,"ngbNavOutlet"],["filtetcontent",""],["openAduitOffSet",""],[1,"card-header","border-0"],[1,"row","align-items-center","gy-3"],[1,"col-sm-3","col-xxl-3"],[1,"card-title","mb-0"],[1,"col-sm-auto","col-xxl-9","gap-2","topsera","justify-content-end"],[1,"search-box","w-50"],["type","search","name","searchTerm","placeholder","Search for quotation name",1,"form-control",3,"ngModel","ngModelChange"],["inputerQuotationName",""],[1,"ri-search-line","search-icon"],["type","search","name","searchTerm","placeholder","Search for quotation number",1,"form-control",3,"ngModel","ngModelChange"],["inputerQuotationUmber",""],["type","search","name","searchTerm","placeholder","Search for ticket number",1,"form-control",3,"ngModel","ngModelChange"],["inputerTicketNumber",""],[1,"card-body","border","border-dashed","border-end-0","border-start-0"],[1,"row","g-3"],[1,"col-lg"],["bindLabel","companyName","bindValue","companyId","id","companyName","placeholder","Select Company","for","companyName",1,"w-100","mr-2",3,"items","clearable","ngModel","readonly","change","ngModelChange"],["bindLabel","clientName","bindValue","clientId","id","clientName","placeholder","Select Client","for","clientName",1,"w-100","mr-2",3,"items","disabled","clearable","ngModel","readonly","change","ngModelChange"],["bindLabel","departmentName","bindValue","departmentId","id","departmentName","placeholder","Select Project","for","departmentName",1,"w-100","mr-2",3,"readonly","items","disabled","clearable","ngModel","change","ngModelChange"],["bindLabel","name","bindValue","id","id","invoiceProcess","placeholder","Select Invoice Process","for","invoiceProcess",1,"w-100","mr-2",3,"items","clearable","ngModel","change","ngModelChange"],[1,"col-lg-auto","text-end"],[1,"d-flex","justify-content-end"],["type","button",1,"btn",3,"click"],[1,"ri-equalizer-fill","align-bottom","me-1"],["type","button","ngbTooltip","Remove All Search",1,"btn","btn-danger","ms-1",3,"click"],[1,"ri-refresh-fill","me-1","align-bottom"],[1,"card-body","pt-0"],["ngbNav","",1,"nav","nav-tabs","nav-tabs-custom","nav-success","mb-3",3,"activeId"],["nav","ngbNav"],[3,"ngbNavItem"],[1,"table-responsive","table-card","mb-0"],[1,"table"],[1,"bg-light","text-muted","text-uppercase"],[4,"ngIf"],[1,"row","justify-content-md-between","align-items-md-center","gy-2"],[1,"col-sm-6"],["id","tickets-table_info","role","status","aria-live","polite",1,"dataTables_info","mb-2"],[1,"text-sm-right","float-end","listjs-pagination"],[3,"collectionSize","pageSize","page","maxSize","rotate","pageChange",4,"ngIf"],["colspan","10",1,"text-center"],[4,"ngFor","ngForOf"],[1,"align-top"],["href","javascript:void(0)",1,"fw-medium",3,"click"],[1,"d-flex","mb-0"],[1,"ri-eye-fill","align-bottom","ms-2","text-success","fs-15",3,"click"],[1,"title","align-top",3,"title","id","click"],[1,"status","align-top"],["ngbDropdown","",1,"dropdown"],["type","button","data-bs-toggle","dropdown","aria-expanded","false","ngbDropdownToggle","",1,"btn","btn-soft-secondary","btn-sm","dropdown","arrow-none"],[1,"ri-more-fill"],["ngbDropdownMenu","",1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item","cursor-pointer",3,"click"],[1,"ri-eye-fill","align-bottom","me-2","text-muted"],[3,"collectionSize","pageSize","page","maxSize","rotate","pageChange"],[1,"modal-header","p-3","bg-info-subtle"],["id","exampleModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","close-modal",1,"btn-close",3,"click"],[1,"modal-body"],[1,"col-lg-6","mb-3"],["for","selectedTicketTypeId",1,"form-label","fw-semibold"],["bindLabel","assetStatus","bindValue","assetStatusId","id","ticketStatus","placeholder","Select Ticket Status","for","ticketStatus",1,"w-100","mr-2",3,"items","clearable","ngModel","ngModelChange"],["bindLabel","assetStatus","bindValue","assetStatusId","id","QuotationStatus","placeholder","Select Quotation Status","for","QuotationStatus",1,"w-100","mr-2",3,"items","clearable","ngModel","ngModelChange"],[1,"modal-footer"],[1,"btn","btn-light",3,"click"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"offcanvas-header"],[1,"offcanvas-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],["class","text-danger m-auto",4,"ngIf"],[1,"offcanvas-body","pt-0"],[3,"Data"],[1,"text-end"],["type","button",1,"btn","btn-outline-danger",3,"click"],[1,"text-danger","m-auto"],[1,"fs-17","mb-0"]],template:function(i,n){if(1&i&&(t._UZ(0,"app-breadcrumbs",0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"ul",5,6),t.NdJ("activeIdChange",function(c){return n.activeId=c}),t.TgZ(7,"li",7),t.NdJ("click",function(){return n.setActiveTab(1)}),t.TgZ(8,"a",8),t._uU(9," Waiting for Invoice Process "),t.qZA(),t.YNc(10,x,1,0,"ng-template",9),t.qZA(),t.TgZ(11,"li",7),t.NdJ("click",function(){return n.setActiveTab(2)}),t.TgZ(12,"a",8),t._uU(13," Invoice Generated "),t.qZA(),t.YNc(14,Q,1,0,"ng-template",9),t.qZA(),t.TgZ(15,"li",7),t.NdJ("click",function(){return n.setActiveTab(3)}),t.TgZ(16,"a",8),t._uU(17," General Quotation "),t.qZA(),t.YNc(18,ft,45,25,"ng-template",9),t.qZA()(),t.TgZ(19,"div",10),t._UZ(20,"div",11),t.qZA()()()()(),t.YNc(21,yt,19,6,"ng-template",null,12,t.W1O)(23,vt,10,2,"ng-template",null,13,t.W1O)),2&i){const a=t.MAs(6);t.Q6J("title",n.label)("breadcrumbItems",n.breadCrumbItems),t.xp6(5),t.Q6J("activeId",n.activeId),t.xp6(2),t.Q6J("ngbNavItem",1),t.xp6(4),t.Q6J("ngbNavItem",2),t.xp6(4),t.Q6J("ngbNavItem",3),t.xp6(5),t.Q6J("ngbNavOutlet",a)}},dependencies:[e.sg,e.O5,w.Fj,w.JJ,w.On,_.N9,_.jt,_.iD,_.Vi,$.n,B.F,_.uN,_.Pz,_.nv,_.Is,_.Vx,_.tO,_.Dy,_._L,P.w9,ct,h],styles:[".topsera[_ngcontent-%COMP%]{display:flex!important;flex-direction:rows}@media only screen and (max-width: 600px){.w-50[_ngcontent-%COMP%]{width:100%!important}.topsera[_ngcontent-%COMP%]{display:flex!important;flex-direction:column}}"]})}}return d})()},{path:"",pathMatch:"full",redirectTo:"list-quotation"}];let Tt=(()=>{class d{static{this.\u0275fac=function(i){return new(i||d)}}static{this.\u0275mod=t.oAB({type:d})}static{this.\u0275inj=t.cJS({imports:[u.Bz.forChild(It),u.Bz]})}}return d})();var wt=p(6592),Nt=p(6762),kt=p(9101),At=p(6802),Lt=p(662),Zt=p(5904),xt=p.n(Zt),Vt=p(6208);let Qt=(()=>{class d{constructor(){(0,Lt.N)(xt().loadAnimation)}static{this.\u0275fac=function(i){return new(i||d)}}static{this.\u0275mod=t.oAB({type:d})}static{this.\u0275inj=t.cJS({providers:[e.uU],imports:[e.ez,Tt,w.u5,w.UX,_.jF,_.ZS,_.XC,wt.m,Nt.JT.forRoot(),kt.p.pick(At.kEt),Vt.m,_.IJ,_.HK,P.A0]})}}return d})()}}]);