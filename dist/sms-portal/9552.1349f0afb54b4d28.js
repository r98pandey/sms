"use strict";(self.webpackChunksms_portal=self.webpackChunksms_portal||[]).push([[9552],{9552:(pt,y,l)=>{l.r(y),l.d(y,{AuditModule:()=>rt});var p=l(6814),c=l(6223),r=l(7291),f=l(4807),V=l(6903),m=l(2787),e=l(9212);let j=(()=>{class a{constructor(){}ngOnInit(){}static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275cmp=e.Xpm({type:a,selectors:[["app-audit"]],decls:1,vars:0,template:function(n,i){1&n&&e._UZ(0,"router-outlet")},dependencies:[m.lC]})}}return a})();var N=l(553),M=l(2438),J=l(3620),O=l(7398),Q=l(3997),F=l(9397),v=l(9455),A=l(4435),b=l(3828),L=l(7235),w=l(2857),Y=l(1343),T=l(8617);const P=["inputerTicketNumber"];function B(a,d){1&a&&(e.ynx(0),e.TgZ(1,"tr")(2,"td",42),e._uU(3,"No Audit Data"),e.qZA()(),e.BQk())}function R(a,d){if(1&a){const t=e.EpF();e.TgZ(0,"tr")(1,"td",44)(2,"a",45),e.NdJ("click",function(){const o=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.viewHandler(o.assetAuditId))}),e._uU(3),e.qZA()(),e.TgZ(4,"td",46),e.NdJ("click",function(){const o=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.expandTitle("companyName_"+o.assetAuditId))}),e._uU(5),e.qZA(),e.TgZ(6,"td",46),e.NdJ("click",function(){const o=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.expandTitle("clientName_"+o.assetAuditId))}),e._uU(7),e.qZA(),e.TgZ(8,"td",46),e.NdJ("click",function(){const o=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.expandTitle("departmentName_"+o.assetAuditId))}),e._uU(9),e.qZA(),e.TgZ(10,"td"),e._uU(11),e.qZA(),e.TgZ(12,"td",47),e._uU(13),e.qZA(),e.TgZ(14,"td",47)(15,"span"),e._uU(16),e.qZA()(),e.TgZ(17,"td")(18,"span")(19,"div",48)(20,"button",49),e._UZ(21,"i",50),e.qZA(),e.TgZ(22,"ul",51)(23,"li")(24,"a",52),e.NdJ("click",function(){const o=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s.viewHandler(o.assetAuditId))}),e._UZ(25,"i",53),e._uU(26," View "),e.qZA()()()()()()()}if(2&a){const t=d.$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("title",t.assetAuditName),e.xp6(2),e.Oqu(t.assetAuditName),e.xp6(1),e.Q6J("title",t.companyName)("id","companyName_"+t.assetAuditId),e.xp6(1),e.hij(" ",t.companyName," "),e.xp6(1),e.Q6J("title",t.clientName)("id","clientName_"+t.assetAuditId),e.xp6(1),e.hij(" ",t.clientName," "),e.xp6(1),e.Q6J("title",t.departmentName)("id","departmentName_"+t.assetAuditId),e.xp6(1),e.hij(" ",t.departmentName," "),e.xp6(2),e.hij(" ",t.createdDate," "),e.xp6(2),e.hij(" ",null==t?null:t.fullName," "),e.xp6(2),e.Tol(n.returnStatusBadgeClassesStatus(t.auditStatusId)),e.xp6(1),e.Oqu(t.assetStatus)}}function H(a,d){if(1&a&&(e.ynx(0),e.YNc(1,R,27,16,"tr",43),e.BQk()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.auditList)}}function G(a,d){if(1&a){const t=e.EpF();e.TgZ(0,"ngb-pagination",54),e.NdJ("pageChange",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.page=i)})("pageChange",function(i){e.CHM(t);const o=e.oxw(2);return e.KtG(o.OnChangesPage(i))}),e.qZA()}if(2&a){const t=e.oxw(2);e.Q6J("collectionSize",t.totalRecordsFromApi)("pageSize",t.pageSize)("page",t.page)("maxSize",2)("rotate",!0)}}function E(a,d){if(1&a&&(e.TgZ(0,"div",33)(1,"table",34)(2,"thead")(3,"tr",35)(4,"th"),e._uU(5,"Audit Name"),e.qZA(),e.TgZ(6,"th"),e._uU(7,"Company"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"Client"),e.qZA(),e.TgZ(10,"th"),e._uU(11),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Create Date"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Created by"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"Status"),e.qZA(),e.TgZ(18,"th"),e._uU(19,"Action"),e.qZA()()(),e.TgZ(20,"tbody"),e.YNc(21,B,4,0,"ng-container",36)(22,H,2,1,"ng-container",36),e.qZA()()(),e.TgZ(23,"div",37)(24,"div",38)(25,"div",39),e._uU(26),e.qZA()(),e.TgZ(27,"div",38)(28,"div",40),e.YNc(29,G,1,5,"ngb-pagination",41),e.qZA()()()),2&a){const t=e.oxw();e.xp6(11),e.Oqu(t.isProject?"Project":"Department"),e.xp6(10),e.Q6J("ngIf",0==t.auditList.length),e.xp6(1),e.Q6J("ngIf",0!=t.auditList.length),e.xp6(4),e.lnq(" Showing ",t.from," to ",t.to," of ",t.totalRecordsFromApi," entries "),e.xp6(3),e.Q6J("ngIf",t.totalRecordsFromApi>t.pageSize)}}let z=(()=>{class a{constructor(t,n,i,o,s,u,h,g,_,Z){this.dropdownService=t,this.router=n,this.modalService=i,this.auditService=o,this.authService=s,this.menuService=u,this.formBuilder=h,this.commonFunctionService=g,this.dropdownServices=_,this.assetService=Z,this.isProject=!1,this.label="Audit",this.breadCrumbItems=[{label:"Audit"},{label:"New Audit List",active:!0}],this.payload={SelfAudit:0,SearchYear:(new Date).getFullYear(),SearchCompanyId:null,SearchClientId:null,SearchProjectId:null,displayLength:10,displayStart:0,SearchAssetAuditName:null},this.to=0,this.from=0,this.pageSize=10,this.totalRecordsFromApi=0,this.auditList=[],this.page=1,this.collectionSize=0,this.imageUrl=N.N.apiUrl,this.arrayListDropDownCompany=[],this.arrayListDropDownClientList=[],this.arrayListDropDownProjectOrDeparmentList=[],this.arrayListDropDownTicketStatus=[],this.selectedDateValue=(new Date).getFullYear(),this.yearsList=[],this.disabledWithAceessGroup=!1,this.projectDepartmentFieldDisiabled=!1,this.isProject=this.authService.getisProject();for(let I=(new Date).getFullYear();I>=2e3;I--)this.yearsList.push(I)}ngOnInit(){this.getAssetStatusList("AssetAuditList"),this.getDropdownCompanyList(),this.currentUserRole=JSON.parse(localStorage.getItem("currentUser")).role,"Client User"===this.currentUserRole&&(this.disabledWithAceessGroup=!0),localStorage.getItem("objectSerachForListAudit")?this.getObjectAfterRefresh():this.loadData()}setObjectBeforeRefesh(){let t={};this.arrayListDropDownCompany&&(t.arrayListDropDownCompany=this.arrayListDropDownCompany),this.selectedDropDownCompanyIdValue&&(t.SearchCompanyId=this.selectedDropDownCompanyIdValue),this.arrayListDropDownClientList&&(t.arrayListDropDownClientList=this.arrayListDropDownClientList),this.arrayListDropDownProjectOrDeparmentList&&(t.arrayListDropDownProjectOrDeparmentList=this.arrayListDropDownProjectOrDeparmentList),this.selectedDropDownClientIdValue&&(t.SearchClientId=this.selectedDropDownClientIdValue),this.selectedDropDownProjectOrDeparmentIdValue&&(t.SearchProjectId=this.selectedDropDownProjectOrDeparmentIdValue),this.arrayListDropDownTicketStatus&&(t.arrayListDropDownTicketStatus=this.arrayListDropDownTicketStatus),this.selectedDropDownAuditStatusIdValue&&(t.SearchAuditStatusId=this.selectedDropDownAuditStatusIdValue),this.typeAuditNameValue&&(t.SearchAssetAuditName=this.typeAuditNameValue),this.page&&(t.displayStart=this.pageSize*(this.page-1),t.page=this.page),localStorage.setItem("objectSerachForListAudit",JSON.stringify(t))}getObjectAfterRefresh(){let t=JSON.parse(localStorage.getItem("objectSerachForListAudit"));this.selectedDropDownCompanyIdValue=t.selectedDropDownCompanyIdValue?t.selectedDropDownCompanyIdValue:[],this.selectedDropDownCompanyIdValue=t.SearchCompanyId?t.SearchCompanyId:null,this.arrayListDropDownCompany=t.arrayListDropDownCompany?t.arrayListDropDownCompany:[],this.arrayListDropDownClientList=t.arrayListDropDownClientList?t.arrayListDropDownClientList:[],this.arrayListDropDownProjectOrDeparmentList=t.arrayListDropDownProjectOrDeparmentList?t.arrayListDropDownProjectOrDeparmentList:[],this.typeAuditNameValue=t.typeAuditNameValue?t.typeAuditNameValue:[],this.selectedDropDownAuditStatusIdValue=t.selectedDropDownAuditStatusIdValue?t.selectedDropDownAuditStatusIdValue:[],this.selectedDropDownAuditStatusIdValue=t.SearchAuditStatusId?t.SearchAuditStatusId:null,this.typeAuditNameValue=t.SearchAssetAuditName?t.SearchAssetAuditName:null,this.selectedDropDownClientIdValue=t.SearchClientId?t.SearchClientId:null,this.selectedDropDownProjectOrDeparmentIdValue=t.SearchProjectId?t.SearchProjectId:null,this.payload.SearchCompanyId=this.selectedDropDownCompanyIdValue,this.payload.SearchClientId=this.selectedDropDownClientIdValue,this.payload.SearchProjectId=this.selectedDropDownProjectOrDeparmentIdValue,this.payload.SearchAuditStatusId=this.selectedDropDownAuditStatusIdValue,this.payload.SearchAssetAuditName=this.typeAuditNameValue,this.loadData()}getAssetStatusList(t){this.assetService.getAssetStatusList(t).subscribe(n=>{this.arrayListDropDownTicketStatus=n,this.setObjectBeforeRefesh()},n=>{})}OnChangesPage(t){t&&(this.payload.displayStart=this.pageSize*(t-1),this.loadData())}loadData(){this.auditService.getMasterAssetAudit_Paging(this.commonFunctionService.clean(this.payload)).subscribe(t=>{this.auditList=t.list,this.setObjectBeforeRefesh(),this.auditList.length>0?(this.totalRecordsFromApi=t.list[0].totalCount,this.from=t.list.reduce((n,i)=>i.rowNum<n?i.rowNum:n,t.list[0].rowNum),this.to=t.list.reduce((n,i)=>i.rowNum>n?i.rowNum:n,t.list[0].rowNum),this.pageSize=this.payload.displayLength):(this.totalRecordsFromApi=0,this.from=0,this.to=0,this.pageSize=this.payload.displayLength)})}viewHandler(t){this.auditService.auditId=t,this.router.navigate(["asset-management/audit-management/audit/viewaudit"])}resetSerachVariable(){this.arrayListDropDownClientList=[],this.arrayListDropDownProjectOrDeparmentList=[],this.selectedDropDownCompanyIdValue=null,this.selectedDropDownClientIdValue=null,this.selectedDropDownProjectOrDeparmentIdValue=null,this.selectedDateValue=(new Date).getFullYear(),this.typeAuditNameValue=null,this.selectedDropDownAuditStatusIdValue=null,this.payload={SelfAudit:0,SearchYear:(new Date).getFullYear(),SearchCompanyId:null,SearchClientId:null,SearchProjectId:null,SearchAssetAuditName:null,displayLength:10,displayStart:0,SearchAuditStatusId:null},"Client User"===this.currentUserRole?this.resetAfterClientUser():(this.page=1,this.loadData())}resetAfterClientUser(){this.selectedDropDownCompanyIdValue=this.arrayListDropDownCompany[0].companyId,this.onDropdownCompanyValueChange(""),0!=this.arrayListDropDownClientList.length&&(this.selectedDropDownClientIdValue=this.arrayListDropDownClientList[0].clientId,this.onDropdownClientValueChange("")),0!=this.arrayListDropDownProjectOrDeparmentList.length&&"Client User"===this.currentUserRole&&(this.arrayListDropDownProjectOrDeparmentList.list.length>=2?this.projectDepartmentFieldDisiabled=!1:(this.projectDepartmentFieldDisiabled=!0,this.selectedDropDownProjectOrDeparmentIdValue=this.arrayListDropDownProjectOrDeparmentList[0].departmentId,this.onDropdownDepartmentValueChange("")))}getDropdownCompanyList(){this.dropdownServices.GetCompanyListDrobDown({}).subscribe(t=>{this.arrayListDropDownCompany=t.list,"Client User"===this.currentUserRole&&(this.selectedDropDownCompanyIdValue=this.arrayListDropDownCompany[0].companyId,this.onDropdownCompanyValueChange("")),this.setObjectBeforeRefesh()})}getDropdownClientlist(){this.dropdownServices.GetClientListDrobDown({SearchCompanyId:this.selectedDropDownCompanyIdValue}).subscribe(n=>{this.arrayListDropDownClientList=n.list,"Client User"===this.currentUserRole&&(this.selectedDropDownClientIdValue=this.arrayListDropDownClientList[0].clientId,this.onDropdownClientValueChange("")),this.setObjectBeforeRefesh()})}getDropdownDepartmentList(){this.dropdownServices.GetDepartmentListDrobDown({SearchCompanyId:this.selectedDropDownCompanyIdValue,SearchClientId:this.selectedDropDownClientIdValue}).subscribe(n=>{this.arrayListDropDownProjectOrDeparmentList=n.list,0!=n.list.length&&"Client User"===this.currentUserRole&&(n.list.length>=2?this.projectDepartmentFieldDisiabled=!1:(this.projectDepartmentFieldDisiabled=!0,this.selectedDropDownProjectOrDeparmentIdValue=this.arrayListDropDownProjectOrDeparmentList[0].departmentId,this.onDropdownDepartmentValueChange(""))),this.setObjectBeforeRefesh()})}onDropdownCompanyValueChange(t){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchCompanyId=this.selectedDropDownCompanyIdValue,this.selectedDropDownClientIdValue=null,this.selectedDropDownProjectOrDeparmentIdValue=null,this.payload.SearchClientId=this.selectedDropDownClientIdValue,this.payload.SearchProjectId=this.selectedDropDownProjectOrDeparmentIdValue,this.arrayListDropDownProjectOrDeparmentList=[],this.getDropdownClientlist(),this.loadData()}onDropdownClientValueChange(t){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchClientId=this.selectedDropDownClientIdValue,this.selectedDropDownProjectOrDeparmentIdValue=null,this.payload.SearchProjectId=this.selectedDropDownProjectOrDeparmentIdValue,this.getDropdownDepartmentList(),this.loadData()}onDropdownDepartmentValueChange(t){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchProjectId=this.selectedDropDownProjectOrDeparmentIdValue,this.loadData()}returnStatusBadgeClassesStatus(t){return this.commonFunctionService.returnStatusBadgeClasses(t)}ngAfterViewInit(){(0,M.R)(this.inputerTicketNumber.nativeElement,"input").pipe((0,J.b)(1e3),(0,O.U)(t=>t.target.value),(0,Q.x)((t,n)=>t===n||!t&&!n),(0,F.b)(t=>{this.onTypeTicketNameChange()})).subscribe()}onTypeTicketNameChange(){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchAssetAuditName=this.typeAuditNameValue,this.loadData()}onDropdownYearValueChange(t){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchYear=this.selectedDateValue,this.loadData()}onDropdownTicketStatusValueChange(t){this.page=1,this.selectedDropDownAuditStatusIdValue=t?.assetStatusId?t?.assetStatusId:null,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchAuditStatusId=this.selectedDropDownAuditStatusIdValue,this.loadData()}navigateToAdd(){this.auditService.accessRight=!0,this.router.navigate(["asset-management/audit-management/audit/createaudit"])}ngOnDestroy(){}expandTitle(t){document.getElementById(t)}static{this.\u0275fac=function(n){return new(n||a)(e.Y36(v.V),e.Y36(m.F0),e.Y36(r.FF),e.Y36(A.C),e.Y36(b.u),e.Y36(L.l),e.Y36(c.qu),e.Y36(w.K),e.Y36(v.V),e.Y36(Y.d))}}static{this.\u0275cmp=e.Xpm({type:a,selectors:[["app-listaudit"]],viewQuery:function(n,i){if(1&n&&e.Gf(P,7),2&n){let o;e.iGM(o=e.CRH())&&(i.inputerTicketNumber=o.first)}},decls:44,vars:26,consts:[[3,"title","breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","border-0"],[1,"row","align-items-center","gy-3"],[1,"col-sm"],[1,"card-title","mb-0"],[1,"col-lg"],[1,"search-box"],["bindLabel","assetStatus","bindValue","assetStatusId","id","ticketStatus","placeholder","Select Status","for","ticketStatus",1,"w-100","mr-2",3,"items","clearable","ngModel","change","ngModelChange"],["type","search","name","searchTerm","placeholder","Search for audit name",1,"form-control",3,"ngModel","ngModelChange"],["inputerTicketNumber",""],[1,"ri-search-line","search-icon"],["id","yearStatus","placeholder","Select Year","for","yearStatus",1,"w-100","mr-2",3,"items","clearable","ngModel","change","ngModelChange"],[1,"card-body","border","border-dashed","border-end-0","border-start-0"],[1,"row","g-3"],["bindLabel","companyName","bindValue","companyId","id","companyName","placeholder","Select Company","for","companyName",1,"w-100","mr-2",3,"items","clearable","ngModel","readonly","change","ngModelChange"],["bindLabel","clientName","bindValue","clientId","id","clientName","placeholder","Select Client","for","clientName",1,"w-100","mr-2",3,"items","disabled","clearable","ngModel","readonly","change","ngModelChange"],["bindLabel","departmentName","bindValue","departmentId","id","departmentName","placeholder","Select Project","for","departmentName",1,"w-100","mr-2",3,"items","disabled","clearable","ngModel","readonly","change","ngModelChange"],[1,"col-lg-auto","text-end"],[1,"d-flex","justify-content-end"],["type","button","ngbTooltip","Remove All Search",1,"btn","btn-danger","me-1",3,"click"],[1,"ri-refresh-fill","me-1","align-bottom"],[1,"btn","btn-success",3,"click"],[1,"ri-add-fill","me-1","align-bottom"],[1,"card-body","pt-0"],["ngbNav","",1,"nav","nav-tabs","nav-tabs-custom","nav-success","mb-3",3,"activeId"],["nav","ngbNav"],[3,"ngbNavItem"],["ngbNavContent",""],[1,"tab-content","text-muted"],[3,"ngbNavOutlet"],[1,"table-responsive","table-card","mb-0"],[1,"table"],[1,"bg-light","text-muted","text-uppercase"],[4,"ngIf"],[1,"row","justify-content-md-between","align-items-md-center","gy-2"],[1,"col","col-sm-12","col","col-md-6"],["id","tickets-table_info","role","status","aria-live","polite",1,"dataTables_info","mb-2"],[1,"text-sm-right","float-end","listjs-pagination"],[3,"collectionSize","pageSize","page","maxSize","rotate","pageChange",4,"ngIf"],["colspan","9",1,"text-center"],[4,"ngFor","ngForOf"],[3,"title"],["href","javascript:void(0)",1,"fw-medium","link-primary",3,"click"],[1,"title",3,"title","id","click"],[1,"status"],["ngbDropdown","",1,"dropdown"],["type","button","data-bs-toggle","dropdown","aria-expanded","false","ngbDropdownToggle","",1,"btn","btn-soft-secondary","btn-sm","dropdown","arrow-none"],[1,"ri-more-fill"],["ngbDropdownMenu","",1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item","cursor-pointer",3,"click"],[1,"ri-eye-fill","align-bottom","me-2","text-muted"],[3,"collectionSize","pageSize","page","maxSize","rotate","pageChange"]],template:function(n,i){if(1&n&&(e._UZ(0,"app-breadcrumbs",0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h5",7),e._uU(8,"Audit List"),e.qZA()(),e.TgZ(9,"div",8)(10,"div",9)(11,"ng-select",10),e.NdJ("change",function(s){return i.onDropdownTicketStatusValueChange(s)})("ngModelChange",function(s){return i.selectedDropDownAuditStatusIdValue=s}),e.qZA()()(),e.TgZ(12,"div",8)(13,"div",9)(14,"input",11,12),e.NdJ("ngModelChange",function(s){return i.typeAuditNameValue=s}),e.qZA(),e._UZ(16,"i",13),e.qZA()(),e.TgZ(17,"div",8)(18,"div",9)(19,"ng-select",14),e.NdJ("change",function(s){return i.onDropdownYearValueChange(s)})("ngModelChange",function(s){return i.selectedDateValue=s}),e.qZA()()()()(),e.TgZ(20,"div",15)(21,"div",16)(22,"div",8)(23,"ng-select",17),e.NdJ("change",function(s){return i.onDropdownCompanyValueChange(s)})("ngModelChange",function(s){return i.selectedDropDownCompanyIdValue=s}),e.qZA()(),e.TgZ(24,"div",8)(25,"ng-select",18),e.NdJ("change",function(s){return i.onDropdownClientValueChange(s)})("ngModelChange",function(s){return i.selectedDropDownClientIdValue=s}),e.qZA()(),e.TgZ(26,"div",8)(27,"ng-select",19),e.NdJ("change",function(s){return i.onDropdownDepartmentValueChange(s)})("ngModelChange",function(s){return i.selectedDropDownProjectOrDeparmentIdValue=s}),e.qZA()(),e.TgZ(28,"div",20)(29,"div",21)(30,"button",22),e.NdJ("click",function(){return i.resetSerachVariable()}),e._UZ(31,"i",23),e._uU(32," Clear "),e.qZA(),e.TgZ(33,"button",24),e.NdJ("click",function(){return i.navigateToAdd()}),e._UZ(34,"i",25),e._uU(35," Add Audit "),e.qZA()()()()(),e.TgZ(36,"div",26)(37,"div")(38,"ul",27,28)(40,"li",29),e.YNc(41,E,30,7,"ng-template",30),e.qZA()(),e.TgZ(42,"div",31),e._UZ(43,"div",32),e.qZA()()()()()()),2&n){const o=e.MAs(39);e.Q6J("title",i.label)("breadcrumbItems",i.breadCrumbItems),e.xp6(11),e.Q6J("items",i.arrayListDropDownTicketStatus)("clearable",!0)("ngModel",i.selectedDropDownAuditStatusIdValue),e.xp6(3),e.Q6J("ngModel",i.typeAuditNameValue),e.xp6(5),e.Q6J("items",i.yearsList)("clearable",!0)("ngModel",i.selectedDateValue),e.xp6(4),e.Q6J("items",i.arrayListDropDownCompany)("clearable",!0)("ngModel",i.selectedDropDownCompanyIdValue)("readonly",i.disabledWithAceessGroup),e.xp6(2),e.Q6J("items",i.arrayListDropDownClientList)("disabled",!i.selectedDropDownCompanyIdValue)("clearable",!0)("ngModel",i.selectedDropDownClientIdValue)("readonly",i.disabledWithAceessGroup),e.xp6(2),e.Q6J("items",i.arrayListDropDownProjectOrDeparmentList)("disabled",!i.selectedDropDownCompanyIdValue)("clearable",!0)("ngModel",i.selectedDropDownProjectOrDeparmentIdValue)("readonly",i.projectDepartmentFieldDisiabled),e.xp6(11),e.Q6J("activeId",1),e.xp6(2),e.Q6J("ngbNavItem",1),e.xp6(3),e.Q6J("ngbNavOutlet",o)}},dependencies:[p.sg,p.O5,c.Fj,c.JJ,c.On,r.N9,r.uN,r.Pz,r.nv,r.Is,r.Dy,r.jt,r.iD,r.Vi,r._L,f.w9,T.n],styles:[".cardHeader[_ngcontent-%COMP%]{padding:9px 5px 3px}"]})}}return a})(),K=(()=>{class a{constructor(){}ngOnInit(){}static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275cmp=e.Xpm({type:a,selectors:[["app-editaudit"]],decls:2,vars:0,template:function(n,i){1&n&&(e.TgZ(0,"p"),e._uU(1,"editaudit works!"),e.qZA())}})}}return a})();var W=l(8568),$=l(3519),D=l.n($),X=l(7337),S=l(859),U=l(9750),C=l(9417);function ee(a,d){1&a&&(e.TgZ(0,"small",36),e._uU(1," Company is Required "),e.qZA())}function te(a,d){if(1&a&&(e.TgZ(0,"div",34),e.YNc(1,ee,2,0,"small",35),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.company.errors.required)}}function ie(a,d){1&a&&(e.TgZ(0,"small",36),e._uU(1," Client is Required "),e.qZA())}function ne(a,d){if(1&a&&(e.TgZ(0,"div",34),e.YNc(1,ie,2,0,"small",35),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.client.errors.required)}}function ae(a,d){if(1&a&&(e.TgZ(0,"small",36),e._uU(1),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.isProject?"Project":"Department"," is Required")}}function oe(a,d){if(1&a&&(e.TgZ(0,"div",34),e.YNc(1,ae,2,1,"small",35),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.project.errors.required)}}function se(a,d){1&a&&(e.TgZ(0,"small",36),e._uU(1," Title is Required "),e.qZA())}function de(a,d){if(1&a&&(e.TgZ(0,"div"),e.YNc(1,se,2,0,"small",35),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.title.errors.required)}}function le(a,d){if(1&a){const t=e.EpF();e.TgZ(0,"button",42),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.getAssetList())}),e._uU(1," Add Asset "),e.qZA()}}function re(a,d){if(1&a&&(e.TgZ(0,"tr")(1,"td")(2,"div",44)(3,"div",45)(4,"div",46),e._UZ(5,"img",47),e.qZA()(),e.TgZ(6,"div",48)(7,"h5",49)(8,"a",50),e._uU(9),e.qZA()(),e.TgZ(10,"p",51)(11,"a",52),e._uU(12),e.qZA()()()()(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td",53)(16,"span"),e._uU(17),e.qZA()()()),2&a){const t=d.$implicit,n=e.oxw(3);e.xp6(5),e.Q6J("src",t.assetImagePath?n.imageUrl+t.assetImagePath:"../../../../../assets/images/placeholderimage.png",e.LSH),e.xp6(4),e.Oqu(t.assetName),e.xp6(3),e.hij("",t.assetTagId," "),e.xp6(2),e.hij(" ",t.locationName," "),e.xp6(2),e.Tol(n.returnStatusBadgeClassesStatus(t.assetStatusId)),e.xp6(1),e.Oqu(t.assetStatus)}}function ce(a,d){if(1&a&&(e.TgZ(0,"tbody"),e.YNc(1,re,18,7,"tr",43),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.selectedAssetList)}}function ue(a,d){1&a&&(e.TgZ(0,"tbody")(1,"tr")(2,"td",54),e._uU(3," No Asset Selected "),e.qZA()()())}function pe(a,d){if(1&a&&(e.TgZ(0,"div",4)(1,"div",37),e.YNc(2,le,2,0,"button",38),e.qZA(),e.TgZ(3,"div",7)(4,"div",39)(5,"table",40)(6,"thead")(7,"tr",41)(8,"th"),e._uU(9,"Asset"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Location"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Status"),e.qZA()()(),e.YNc(14,ce,2,1,"tbody",18)(15,ue,4,0,"tbody",18),e.qZA()()()()),2&a){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.company.value&&t.client.value&&t.project.value),e.xp6(1),e.Tol(0!=(null==t.selectedAssetList?null:t.selectedAssetList.length)?"maxHeightCard":""),e.xp6(11),e.Q6J("ngIf",0!=(null==t.selectedAssetList?null:t.selectedAssetList.length)),e.xp6(1),e.Q6J("ngIf",0==(null==t.selectedAssetList?null:t.selectedAssetList.length))}}function me(a,d){1&a&&(e.ynx(0),e.TgZ(1,"tr")(2,"td",65),e._uU(3," No Member Assign "),e.qZA()(),e.BQk())}function he(a,d){if(1&a){const t=e.EpF();e.TgZ(0,"tr")(1,"th",66)(2,"div",44),e._UZ(3,"img",67),e.TgZ(4,"div",68)(5,"a",69),e._uU(6),e.qZA()()()(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td")(12,"a",70),e.NdJ("click",function(){const o=e.CHM(t).$implicit,s=e.oxw(4);return e.KtG(s.openModalDeleteConf(o))}),e._UZ(13,"i",71),e.qZA()()()}if(2&a){const t=d.$implicit,n=e.oxw(4);e.xp6(3),e.Q6J("src",t.profileImageUrl?n.imageUrl+t.profileImageUrl:"../../../../../../assets/images/placeholderimage.png",e.LSH),e.xp6(3),e.hij("",t.fullName," "),e.xp6(2),e.Oqu(t.designation),e.xp6(2),e.Oqu(t.phoneNumber)}}function ge(a,d){if(1&a&&(e.ynx(0),e.YNc(1,he,14,4,"tr",43),e.BQk()),2&a){const t=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t.selectedTech)}}function _e(a,d){if(1&a){const t=e.EpF();e.TgZ(0,"div",57),e._UZ(1,"div"),e.TgZ(2,"div",58)(3,"button",59),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2),o=e.MAs(59);return e.KtG(i.openModalTechnician(o))}),e._UZ(4,"i",60),e._uU(5," Add Member "),e.qZA()()(),e.TgZ(6,"div",61)(7,"table",62)(8,"thead",63)(9,"tr")(10,"th",64),e._uU(11,"Name"),e.qZA(),e.TgZ(12,"th",64),e._uU(13,"Designation"),e.qZA(),e.TgZ(14,"th",64),e._uU(15,"Phone Number"),e.qZA(),e.TgZ(16,"th",64),e._uU(17,"Action"),e.qZA()()(),e.TgZ(18,"tbody"),e.YNc(19,me,4,0,"ng-container",18)(20,ge,2,1,"ng-container",18),e.qZA()()()}if(2&a){const t=e.oxw(2);e.xp6(19),e.Q6J("ngIf",0==t.selectedTech.length),e.xp6(1),e.Q6J("ngIf",0!=t.selectedTech.length)}}function fe(a,d){1&a&&(e.ynx(0),e.TgZ(1,"li",55)(2,"a",56),e._uU(3," Assigned To "),e.qZA(),e.YNc(4,_e,21,2,"ng-template",26),e.qZA(),e.BQk()),2&a&&(e.xp6(1),e.Q6J("ngbNavItem",3))}function ve(a,d){if(1&a){const t=e.EpF();e.TgZ(0,"div")(1,"div",84),e.NdJ("click",function(){const i=e.CHM(t),o=i.index,s=i.$implicit,u=e.oxw(2);return e.KtG(u.selectTechnician(u.filteredTechnicianList,o,s))}),e.TgZ(2,"div",45)(3,"div",85)(4,"div",86)(5,"label",87)(6,"input",88),e.NdJ("ngModelChange",function(i){const s=e.CHM(t).index,u=e.oxw(2);return e.KtG(u.filteredTechnicianList[s].checked=i)}),e.qZA(),e._UZ(7,"i",89),e.qZA()()()(),e.TgZ(8,"div",90),e._UZ(9,"img",91),e.qZA(),e.TgZ(10,"div",48)(11,"h5",49)(12,"a",92),e._uU(13),e.qZA(),e.TgZ(14,"p",93),e._uU(15),e.qZA()()(),e.TgZ(16,"div",94)(17,"p",95)(18,"span"),e._UZ(19,"i",96),e._uU(20),e.qZA()()()()()}if(2&a){const t=d.$implicit,n=d.index,i=e.oxw(2);e.xp6(6),e.s9C("value",t),e.Q6J("ngModel",i.filteredTechnicianList[n].checked)("disabled",i.filteredTechnicianList[n].disabled),e.xp6(3),e.s9C("src",t.profileImageUrl?i.imageUrl+t.profileImageUrl:"../../../../../assets/images/placeholderimage.png",e.LSH),e.xp6(4),e.hij(" ",t.fullName," "),e.xp6(2),e.hij("Role:",t.roleName,""),e.xp6(5),e.Oqu(t.phoneNumber)}}function Ae(a,d){1&a&&(e.TgZ(0,"div",97)(1,"p"),e._uU(2,"No Member Found"),e.qZA()())}function be(a,d){if(1&a){const t=e.EpF();e.TgZ(0,"div",72)(1,"h5",73),e._uU(2,"Add Technicians"),e.qZA(),e.TgZ(3,"button",74),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.dismiss("Cross click"))}),e.qZA()(),e.TgZ(4,"div",75)(5,"div",76)(6,"input",77),e.NdJ("keyup",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.filterTechnician(i))})("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.technicianSearchText=i)}),e.qZA(),e._UZ(7,"i",78),e.qZA(),e.TgZ(8,"ngx-simplebar",79)(9,"div",80),e.YNc(10,ve,21,7,"div",43)(11,Ae,3,0,"div",81),e.qZA()()(),e.TgZ(12,"div",82)(13,"button",83),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.close("Close click"))}),e._uU(14," Close "),e.qZA()()}if(2&a){const t=e.oxw();e.xp6(6),e.Q6J("ngModel",t.technicianSearchText),e.xp6(4),e.Q6J("ngForOf",t.filteredTechnicianList),e.xp6(1),e.Q6J("ngIf",t.technicianList&&t.filteredTechnicianList&&t.technicianSearchText.length>0?!t.filteredTechnicianList.length:!t.technicianList.length)}}const x=(a,d)=>({"is-invalid":a,"is-valid":d});let we=(()=>{class a{constructor(t,n,i,o,s,u,h,g,_,Z){this.router=t,this.modalService=n,this.auditService=i,this.authService=o,this.menuService=s,this.formBuilder=u,this.commonFunctionService=h,this.dropdownServices=g,this.offcanvasService=_,this.maintenanceService=Z,this.isProject=!1,this.label="Audit Management",this.defaultNavActiveId=1,this.breadCrumbItems=[{label:"Audit"},{label:"Audit List",active:!0}],this.imageUrl=X.N.apiUrl,this.arrayListDropDownCompany=[],this.arrayListDropDownClientList=[],this.arrayListDropDownProjectOrDeparmentList=[],this.selectedAssetList=[],this.technicianList=[],this.selectedTech=[],this.filteredTechnicianList=[],this.technicianSearchText="",1==this.auditService.accessRight?(this.isProject=this.authService.getisProject(),this.getDropdownCompanyList()):this.goback()}ngOnInit(){this.getFromBinding()}getFromBinding(){this.addAuditFrom=this.formBuilder.group({company:[null,[c.kI.required]],client:[null,[c.kI.required]],project:[null,[c.kI.required]],title:["",[c.kI.required]]})}get project(){return this.addAuditFrom.get("project")}get title(){return this.addAuditFrom.get("title")}get client(){return this.addAuditFrom.get("client")}get company(){return this.addAuditFrom.get("company")}getDropdownCompanyList(){this.dropdownServices.GetCompanyListDrobDown({}).subscribe(t=>{this.arrayListDropDownCompany=t.list,0!=t.list.length&&"Client User"===JSON.parse(localStorage.getItem("currentUser"))?.role&&(this.selectedDropDownCompanyIdValue=this.arrayListDropDownCompany[0].companyId,this.getDropdownClientlist())})}getDropdownClientlist(){this.dropdownServices.GetClientListDrobDown({SearchCompanyId:this.selectedDropDownCompanyIdValue}).subscribe(n=>{this.arrayListDropDownClientList=n.list})}getDropdownDepartmentList(){this.dropdownServices.GetDepartmentListDrobDown({SearchCompanyId:this.selectedDropDownCompanyIdValue,SearchClientId:this.selectedDropDownClientIdValue}).subscribe(n=>{this.arrayListDropDownProjectOrDeparmentList=n.list})}onDropdownCompanyValueChange(t){this.selectedDropDownClientIdValue=null,this.selectedDropDownProjectOrDeparmentIdValue=null,this.arrayListDropDownProjectOrDeparmentList=[],this.selectedAssetList=[],this.getDropdownClientlist()}onDropdownClientValueChange(t){this.selectedDropDownProjectOrDeparmentIdValue=null,this.getDropdownDepartmentList(),this.selectedAssetList=[]}onDropdownDepartmentValueChange(t){this.selectedAssetList=[]}onSubmit(){let t=[];0!=this.selectedAssetList.length&&this.selectedAssetList.forEach(s=>{t.push({AssetId:s.id,Email:s.email,EmployeeId:s.employeeId,EmployeeName:s.employeeName,AssetTagId:s.assetTagId})});let n=[];0!==this.selectedTech.length&&this.selectedTech.forEach(s=>{n.push({TechId:s?.userId,TechName:s?.fullName})});const o=this.commonFunctionService.clean({AssetAuditName:this.title.value,CompanyId:this.company.value,ClientId:this.client.value,DepartmentId:this.project.value,transactionAssetAudits:t,mX_WOTechAssignment:n||[]});this.saveTicket(o)}goback(){this.router.navigate(["asset-management/audit-management/audit/listaudit"])}saveTicket(t){this.auditService.postInsertAudit(t).subscribe(n=>{this.success(n),this.goback()})}refreshRouter(){this.router.navigate([this.router.url],{queryParamsHandling:"preserve",preserveFragment:!0})}success(t){D().fire({toast:!0,position:"top-end",icon:"success",title:t.message,showConfirmButton:!1,timer:3e3})}waring(t){D().fire({toast:!0,position:"top-end",icon:"warning",title:t,showConfirmButton:!1,timer:3e3})}findNameById(t,n,i,o){const s=n.find(u=>u[o]===t);return s?s[i]:void 0}getAssetList(){const t=this.offcanvasService.open(W._,{scroll:!0,position:"end",keyboard:!1,backdrop:"static",panelClass:"custom-offcanvas "});t.componentInstance.selectedDropDownCompanyIdValue=this.company.value,t.componentInstance.selectedDropDownClientIdValue=this.client.value,t.componentInstance.selectedDropDownProjectOrDeparmentIdValue=this.project.value,t.componentInstance.selectedAsset=0!=this.selectedAssetList.length?this.selectedAssetList:[],t.result.then(n=>{this.selectedAssetList=n}).catch(n=>{this.selectedAssetList=n})}returnStatusBadgeClassesStatus(t){return this.commonFunctionService.returnStatusBadgeClasses(t)}openModalTechnician(t){this.modalService.open(t,{size:"lg",centered:!0}),this.loadTechnician()}loadTechnician(){this.maintenanceService.getTechnician(this.project.value).subscribe(t=>{t&&(this.technicianList=t?.data,this.technicianList.forEach(n=>{n.checked=!1,n.disabled=!1}),this.selectedTech.length>0&&this.technicianList.forEach(n=>{this.selectedTech.forEach(i=>{i.userId===n.userId&&(n.checked=!0,n.disabled=!0)})}),this.filteredTechnicianList=this.technicianList)},t=>{})}getTechnicianIndex(t){return this.technicianList.findIndex(n=>n.userId===t)}getSelectedTechnicianIndex(t){return this.selectedTech.findIndex(n=>n.userId===t)}selectTechnician(t,n,i){if(this.filteredTechnicianList[n].disabled)return;const o=this.getTechnicianIndex(i.userId);this.technicianList[o].checked=!this.technicianList[o].checked,this.getTodoListChecked(t[n].checked,i)}getTodoListChecked(t,n){1==t?this.selectedTech.push(n):this.selectedTech.forEach((i,o)=>{i.userId==n.userId&&this.selectedTech.splice(o,1)})}unCheckItem(t){const n=this.getTechnicianIndex(t.userId);this.technicianList[n].checked=!1;const i=this.getSelectedTechnicianIndex(t.userId);this.selectedTech.splice(i,1)}filterTechnician(t){this.filteredTechnicianList=this.technicianList.filter(n=>n.fullName.toLowerCase().includes(t.target.value.toLowerCase()||""))}clearTeach(t){this.technicianSearchText="",this.filteredTechnicianList=this.technicianList.filter(n=>n.fullName.toLowerCase().includes(t.target.value.toLowerCase()||""))}openModalDeleteConf(t){const n=this.modalService.open(S.z,{ariaLabelledBy:"modal-basic-title",size:"md",centered:!0,backdrop:"static",keyboard:!1});n.componentInstance.title="You are about to delete a Member ?",n.componentInstance.subTitle="Deleting your Member will remove for this Member List  ",n.result.then(i=>{i&&"delete"==i&&this.unCheckItem(t)})}static{this.\u0275fac=function(n){return new(n||a)(e.Y36(m.F0),e.Y36(r.FF),e.Y36(A.C),e.Y36(b.u),e.Y36(L.l),e.Y36(c.qu),e.Y36(w.K),e.Y36(v.V),e.Y36(r._B),e.Y36(U.N))}}static{this.\u0275cmp=e.Xpm({type:a,selectors:[["app-new-add-audit"]],decls:60,vars:39,consts:[[3,"title","breadcrumbItems"],[3,"formGroup"],[1,"row"],[1,"col-lg-4","ps-0","pe-0","mt-n2","stretch-card"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body"],[1,"mb-3"],["for","companyId",1,"form-label"],[1,"starRequried"],["bindLabel","companyName","bindValue","companyId","placeholder","Select Company","formControlName","company",1,"custom",3,"items","clearable","ngModel","ngClass","ngModelChange","change"],["class","mt-2",4,"ngIf"],[1,"form-group"],["bindLabel","clientName","bindValue","clientId","placeholder","Select Client","formControlName","client",1,"custom",3,"items","clearable","ngModel","ngClass","ngModelChange","change"],[1,"form-label"],["bindLabel","departmentName","bindValue","departmentId","formControlName","project",1,"custom",3,"items","ngModel","placeholder","clearable","ngClass","ngModelChange","change"],["type","text","placeholder","Enter Title","formControlName","title",1,"form-control"],[4,"ngIf"],[1,"col-lg-8","pe-0","mt-n2","stretch-card"],["ngbNav","",1,"nav-tabs","nav-tabs-custom",3,"activeId","activeIdChange"],["defaultNav","ngbNav"],[3,"ngbNavItem"],["ngbNavLink",""],[1,"d-flex","flex-row","flex-lg-column","flex-xl-row","align-items-center"],[1,"d-none","d-sm-block","mb-0"],["ngbNavContent",""],[1,"tab-content","text-muted"],[3,"ngbNavOutlet"],[1,"text-end","mb-3"],["type","button",1,"btn","btn-soft-primary","waves-effect","mx-3",3,"click"],["type","button",1,"btn","btn-success","w-sm",3,"disabled","click"],["role","document"],["TechnicianListModal",""],[1,"mt-2"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"card-header","text-end","p-2"],["class","btn btn-primary",3,"click",4,"ngIf"],[1,"table-responsive","table-card","mb-0"],[1,"table"],[1,"bg-light","text-muted","text-uppercase"],[1,"btn","btn-primary",3,"click"],[4,"ngFor","ngForOf"],[1,"d-flex","align-items-center"],[1,"flex-shrink-0","me-3"],[1,"avatar-sm","bg-light","rounded","p-1"],["alt","",1,"img-fluid-with-HW","d-block",3,"src"],[1,"flex-grow-1"],[1,"fs-14","mb-0"],["href","javascript:void(0)",1,"text-body"],[1,"text-muted","mb-0"],["href","javascript:void(0)",1,"fw-sm","link-primary"],[1,"status"],["colspan","3",1,"text-center"],[1,"nav-item",3,"ngbNavItem"],["ngbNavLink","","data-bs-toggle","tab","role","tab",1,"nav-link"],[1,"d-flex","align-items-center","justify-content-between","mb-3","mt-2"],[1,"mb-2"],["type","button","data-bs-toggle","modal","data-bs-target","#inviteMembersModal",1,"btn","btn-soft-primary","btn-sm",3,"click"],[1,"ri-add-fill","align-bottom","me-1"],[1,"table-responsive","table-card"],[1,"table","align-middle","mb-0"],[1,"table-light","text-muted"],["scope","col"],["colspan","4",1,"text-center"],["scope","row"],["alt","",1,"rounded-circle","avatar-xxs",2,"width","40px","height","40px",3,"src"],[1,"flex-grow-1","ms-2"],["href","javascript:void(0);",1,"fw-medium"],["href","javascript:void(0)",1,"dropdown-item","cursor-pointer",3,"click"],[1,"ri-delete-bin-fill","align-bottom","me-2","text-danger"],[1,"modal-header","p-3","bg-primary-subtle"],["id","inviteMembersModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body","p-4"],[1,"search-box","mb-3"],["type","text","placeholder","Search Member here...",1,"form-control","bg-light","border-light",3,"ngModel","keyup","ngModelChange"],[1,"ri-search-line","search-icon"],[1,"mx-n4","px-4",2,"height","400px"],[1,"vstack","gap-3"],["class","text-center mt-3 text-muted",4,"ngIf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"],[1,"d-flex","align-items-center",3,"click"],[1,"d-flex","align-items-center","gap-1"],[1,"form-check","form-check-flat","form-check-primary"],[1,"form-check-label"],["type","checkbox",1,"form-check-input",3,"value","ngModel","disabled","ngModelChange"],[1,"input-frame"],[1,"avatar-xs","flex-shrink-0","me-3"],["alt","",1,"img-fluid","rounded-circle",2,"width","40px","height","40px",3,"src"],["href","javascript:void(0);",1,"text-body","d-block"],[1,"mt-0","mb-0"],[1,"flex-shrink-0","me-3","mb-0"],[1,"mb-0"],[1,"ri-phone-fill","me-1"],[1,"text-center","mt-3","text-muted"]],template:function(n,i){if(1&n&&(e._UZ(0,"app-breadcrumbs",0),e.TgZ(1,"form",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h5",6),e._uU(7,"Basic Information"),e.qZA()(),e.TgZ(8,"div",7)(9,"div",8)(10,"label",9),e._uU(11,"Company"),e.TgZ(12,"span",10),e._uU(13,"*"),e.qZA()(),e.TgZ(14,"ng-select",11),e.NdJ("ngModelChange",function(s){return i.selectedDropDownCompanyIdValue=s})("change",function(s){return i.onDropdownCompanyValueChange(s)}),e.qZA(),e.YNc(15,te,2,1,"div",12),e.qZA(),e.TgZ(16,"div",8)(17,"div",13)(18,"label",9),e._uU(19,"Client"),e.TgZ(20,"span",10),e._uU(21,"*"),e.qZA()(),e.TgZ(22,"ng-select",14),e.NdJ("ngModelChange",function(s){return i.selectedDropDownClientIdValue=s})("change",function(s){return i.onDropdownClientValueChange(s)}),e.qZA(),e.YNc(23,ne,2,1,"div",12),e.qZA()(),e.TgZ(24,"div",8)(25,"div",13)(26,"label",15),e._uU(27),e.TgZ(28,"span",10),e._uU(29,"*"),e.qZA()(),e.TgZ(30,"ng-select",16),e.NdJ("ngModelChange",function(s){return i.selectedDropDownProjectOrDeparmentIdValue=s})("change",function(s){return i.onDropdownDepartmentValueChange(s)}),e.qZA(),e.YNc(31,oe,2,1,"div",12),e.qZA()(),e.TgZ(32,"div",8)(33,"label",15),e._uU(34,"Title"),e.TgZ(35,"span",10),e._uU(36,"*"),e.qZA()(),e._UZ(37,"input",17),e.YNc(38,de,2,1,"div",18),e.qZA()()()(),e.TgZ(39,"div",19)(40,"div",4)(41,"div",7)(42,"ul",20,21),e.NdJ("activeIdChange",function(s){return i.defaultNavActiveId=s}),e.TgZ(44,"li",22)(45,"a",23)(46,"div",24)(47,"p",25),e._uU(48,"Asset"),e.qZA()()(),e.YNc(49,pe,16,5,"ng-template",26),e.qZA(),e.YNc(50,fe,5,1,"ng-container",18),e.qZA(),e.TgZ(51,"div",27),e._UZ(52,"div",28),e.qZA()()()()()(),e.TgZ(53,"div",29)(54,"button",30),e.NdJ("click",function(){return i.goback()}),e._uU(55," Back "),e.qZA(),e.TgZ(56,"button",31),e.NdJ("click",function(){return i.onSubmit()}),e._uU(57," Submit "),e.qZA()(),e.YNc(58,be,15,3,"ng-template",32,33,e.W1O)),2&n){const o=e.MAs(43);e.Q6J("title",i.label)("breadcrumbItems",i.breadCrumbItems),e.xp6(1),e.Q6J("formGroup",i.addAuditFrom),e.xp6(13),e.Q6J("items",i.arrayListDropDownCompany)("clearable",!1)("ngModel",i.selectedDropDownCompanyIdValue)("ngClass",e.WLB(30,x,i.company.invalid&&i.company.touched,i.company.valid&&i.company.touched)),e.xp6(1),e.Q6J("ngIf",i.company.invalid&&i.company.touched),e.xp6(7),e.Q6J("items",i.arrayListDropDownClientList)("clearable",!1)("ngModel",i.selectedDropDownClientIdValue)("ngClass",e.WLB(33,x,i.client.invalid&&i.client.touched,i.client.valid&&i.client.touched)),e.xp6(1),e.Q6J("ngIf",i.client.invalid&&i.client.touched),e.xp6(4),e.Oqu(i.isProject?"Project":"Department"),e.xp6(3),e.Q6J("items",i.arrayListDropDownProjectOrDeparmentList)("ngModel",i.selectedDropDownProjectOrDeparmentIdValue)("placeholder",i.isProject?"Select Project":"Select Department")("clearable",!1)("ngClass",e.WLB(36,x,i.project.invalid&&i.project.touched,i.project.valid&&i.project.touched)),e.xp6(1),e.Q6J("ngIf",(null==i.project?null:i.project.invalid)&&(null==i.project?null:i.project.touched)),e.xp6(6),e.ekj("is-invalid",i.title.invalid&&i.title.touched)("is-valid",i.title.valid&&i.title.touched),e.xp6(1),e.Q6J("ngIf",i.title.invalid&&i.title.touched),e.xp6(4),e.Q6J("activeId",i.defaultNavActiveId),e.xp6(2),e.Q6J("ngbNavItem",1),e.xp6(6),e.Q6J("ngIf",i.company.value&&i.client.value&&i.project.value),e.xp6(2),e.Q6J("ngbNavOutlet",o),e.xp6(4),e.Q6J("disabled",i.addAuditFrom.invalid||0==(null==i.selectedAssetList?null:i.selectedAssetList.length))}},dependencies:[p.mk,p.sg,p.O5,c._Y,c.Fj,c.Wl,c.JJ,c.JL,c.On,c.sg,c.u,C.M,r.uN,r.Pz,r.nv,r.Is,r.Vx,r.tO,r.Dy,f.w9,T.n],styles:[".img-fluid-with-HW[_ngcontent-%COMP%]{height:45px;width:45px}.maxHeightCard[_ngcontent-%COMP%]{height:500px;overflow-y:auto}"]})}}return a})();var Te=l(8868),k=l(7625),De=l(2293),Ce=l(6372),q=l(6592);const xe=["customNav"],Ze=["defaultNav"];function Ie(a,d){if(1&a&&e._UZ(0,"span",62),2&a){const t=e.oxw(2);e.Q6J("countUp",t.auditData.audited)("options",t.option)}}function ye(a,d){1&a&&(e.TgZ(0,"span"),e._uU(1,"0"),e.qZA())}function Ne(a,d){if(1&a&&e._UZ(0,"span",62),2&a){const t=e.oxw(2);e.Q6J("countUp",t.auditData.pending)("options",t.option)}}function Le(a,d){1&a&&(e.TgZ(0,"span"),e._uU(1,"0"),e.qZA())}function Se(a,d){if(1&a&&e._UZ(0,"span",62),2&a){const t=e.oxw(2);e.Q6J("countUp",t.auditData.notMatch)("options",t.option)}}function Ue(a,d){1&a&&(e.TgZ(0,"span"),e._uU(1,"0"),e.qZA())}function ke(a,d){if(1&a&&e._UZ(0,"span",62),2&a){const t=e.oxw(2);e.Q6J("countUp",t.auditData.notFound)("options",t.option)}}function qe(a,d){1&a&&(e.TgZ(0,"span"),e._uU(1,"0"),e.qZA())}function Ve(a,d){if(1&a&&(e.TgZ(0,"div",63)(1,"div",64)(2,"div",65)(3,"h6",36),e._uU(4,"Started By"),e.qZA()(),e.TgZ(5,"div",66)(6,"p",67)(7,"b"),e._UZ(8,"i",68),e._uU(9),e.qZA()(),e.TgZ(10,"p",69)(11,"b"),e._uU(12),e.qZA()(),e.TgZ(13,"p",70),e._uU(14),e.qZA()()()()),2&a){const t=e.oxw(2);e.xp6(9),e.hij(" ",t.auditData.startedBy," "),e.xp6(3),e.hij(" ",t.auditData.startedByDesig," "),e.xp6(2),e.hij(" ",t.auditData.startedDateTime," ")}}function je(a,d){if(1&a&&(e.TgZ(0,"div",63)(1,"div",64)(2,"div",65)(3,"h6",36),e._uU(4,"End By"),e.qZA()(),e.TgZ(5,"div",66)(6,"p",67)(7,"b"),e._UZ(8,"i",68),e._uU(9),e.qZA()(),e.TgZ(10,"p",69)(11,"b"),e._uU(12),e.qZA()(),e.TgZ(13,"p",70),e._uU(14),e.qZA()()()()),2&a){const t=e.oxw(2);e.xp6(9),e.hij(" ",t.auditData.endBy," "),e.xp6(3),e.hij(" ",t.auditData.endByDesig," "),e.xp6(2),e.hij(" ",t.auditData.endDateTime," ")}}function Me(a,d){1&a&&(e.TgZ(0,"h5",71),e._uU(1," Not Available "),e.qZA())}function Je(a,d){if(1&a){const t=e.EpF();e.TgZ(0,"img",81),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.open(i.imageUrl+i.auditData.acknowledSignImageURL))}),e.qZA()}if(2&a){const t=e.oxw(3);e.hYB("src","",t.imageUrl,"",t.auditData.acknowledSignImageURL,"",e.LSH)}}function Oe(a,d){if(1&a){const t=e.EpF();e.TgZ(0,"img",82),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.open("../../../../../assets/images/placeholderimage.png"))}),e.qZA()}}function Qe(a,d){if(1&a){const t=e.EpF();e.TgZ(0,"img",81),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.open(i.imageUrl+i.auditData.verifiedSignImageURL))}),e.qZA()}if(2&a){const t=e.oxw(3);e.hYB("src","",t.imageUrl,"",t.auditData.verifiedSignImageURL,"",e.LSH)}}function Fe(a,d){if(1&a){const t=e.EpF();e.TgZ(0,"img",82),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.open("../../../../../assets/images/placeholderimage.png"))}),e.qZA()}}function Ye(a,d){if(1&a&&(e.TgZ(0,"div",28)(1,"div",63)(2,"div",64)(3,"div",72)(4,"h5",73),e._uU(5),e.qZA(),e.TgZ(6,"div",74)(7,"div",75)(8,"div",76)(9,"div",77),e.YNc(10,Je,1,2,"img",78)(11,Oe,1,0,"img",79),e.qZA()()()(),e.TgZ(12,"p",70),e._uU(13),e.qZA(),e.TgZ(14,"p",67)(15,"b"),e._uU(16),e.qZA()(),e.TgZ(17,"p",69)(18,"b"),e._uU(19),e.qZA()(),e.TgZ(20,"p",80),e._uU(21),e.qZA()()()(),e.TgZ(22,"div",63)(23,"div",64)(24,"div",72)(25,"h5",73),e._uU(26),e.qZA(),e.TgZ(27,"div",74)(28,"div",75)(29,"div",76)(30,"div",77),e.YNc(31,Qe,1,2,"img",78)(32,Fe,1,0,"img",79),e.qZA()()()(),e.TgZ(33,"p",70),e._uU(34),e.qZA(),e.TgZ(35,"p",67)(36,"b"),e._uU(37),e.qZA()(),e.TgZ(38,"p",69)(39,"b"),e._uU(40),e.qZA()(),e.TgZ(41,"p",80),e._uU(42),e.qZA()()()()()),2&a){const t=e.oxw(2);e.xp6(5),e.hij(" ",t.auditData.companyName," "),e.xp6(5),e.Q6J("ngIf",t.auditData.acknowledSignImageURL),e.xp6(1),e.Q6J("ngIf",!t.auditData.acknowledSignImageURL),e.xp6(2),e.hij(" ",t.auditData.acknowledgeDateTime," "),e.xp6(3),e.hij(" ",t.auditData.acknowledgeBy," "),e.xp6(3),e.hij(" ",t.auditData.acknowledDesig," "),e.xp6(2),e.hij(" ",t.auditData.acknowledgeRemark," "),e.xp6(5),e.hij(" ",t.auditData.clientName," "),e.xp6(5),e.Q6J("ngIf",t.auditData.verifiedSignImageURL),e.xp6(1),e.Q6J("ngIf",!t.auditData.verifiedSignImageURL),e.xp6(2),e.hij(" ",t.auditData.verifiedDateTime," "),e.xp6(3),e.hij(" ",t.auditData.verifiedBy," "),e.xp6(3),e.hij(" ",t.auditData.verifiedDesig," "),e.xp6(2),e.hij(" ",t.auditData.verifiedRemark," ")}}function Pe(a,d){if(1&a){const t=e.EpF();e.TgZ(0,"div",28)(1,"div",33)(2,"div",34)(3,"div",35)(4,"h6",36),e._uU(5,"Audit Overview"),e.qZA()(),e.TgZ(6,"div",37)(7,"div",28)(8,"div",38)(9,"div",34)(10,"div",37)(11,"div",39)(12,"div",40)(13,"span",41),e._UZ(14,"i",42),e.qZA()(),e.TgZ(15,"div",43)(16,"p",44),e._uU(17," Audited "),e.qZA(),e.TgZ(18,"h4",45),e.YNc(19,Ie,1,2,"span",46)(20,ye,2,0,"span",47),e.qZA()(),e._UZ(21,"div",48),e.qZA()()()(),e.TgZ(22,"div",38)(23,"div",34)(24,"div",37)(25,"div",39)(26,"div",40)(27,"span",41),e._UZ(28,"i",49),e.qZA()(),e.TgZ(29,"div",43)(30,"p",50),e._uU(31," Pending "),e.qZA(),e.TgZ(32,"h4",45),e.YNc(33,Ne,1,2,"span",46)(34,Le,2,0,"span",47),e.qZA()(),e._UZ(35,"div",48),e.qZA()()()(),e.TgZ(36,"div",51)(37,"div",34)(38,"div",37)(39,"div",39)(40,"div",40)(41,"span",41),e._UZ(42,"i",52),e.qZA()(),e.TgZ(43,"div",43)(44,"p",53),e._uU(45," Not Match "),e.qZA(),e.TgZ(46,"h4",45),e.YNc(47,Se,1,2,"span",46)(48,Ue,2,0,"span",47),e.qZA()(),e._UZ(49,"div",48),e.qZA()()()(),e.TgZ(50,"div",51)(51,"div",34)(52,"div",37)(53,"div",39)(54,"div",40)(55,"span",41),e._UZ(56,"i",54),e.qZA()(),e.TgZ(57,"div",43)(58,"p",55),e._uU(59," Not Found "),e.qZA(),e.TgZ(60,"h4",45),e.YNc(61,ke,1,2,"span",46)(62,qe,2,0,"span",47),e.qZA()(),e._UZ(63,"div",48),e.qZA()()()(),e.YNc(64,Ve,15,3,"div",56)(65,je,15,3,"div",56),e.qZA()()()(),e.TgZ(66,"div",57)(67,"div",34)(68,"div",35)(69,"h6",36),e._uU(70,"Acknowledgement"),e.qZA()(),e.TgZ(71,"div",37),e.YNc(72,Me,2,0,"h5",58)(73,Ye,43,14,"div",59),e.qZA()()()(),e.TgZ(74,"div",60)(75,"button",61),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.goBack())}),e._uU(76," Back "),e.qZA()()}if(2&a){const t=e.oxw();e.xp6(19),e.Q6J("ngIf",0!=t.auditData.audited),e.xp6(1),e.Q6J("ngIf",0==t.auditData.audited),e.xp6(13),e.Q6J("ngIf",0!=t.auditData.pending),e.xp6(1),e.Q6J("ngIf",0==t.auditData.pending),e.xp6(13),e.Q6J("ngIf",0!=t.auditData.notMatch),e.xp6(1),e.Q6J("ngIf",0==t.auditData.notMatch),e.xp6(13),e.Q6J("ngIf",0!=t.auditData.notFound),e.xp6(1),e.Q6J("ngIf",0==t.auditData.notFound),e.xp6(2),e.Q6J("ngIf",t.auditData.startedBy),e.xp6(1),e.Q6J("ngIf",t.auditData.endBy),e.xp6(7),e.Q6J("ngIf",!t.auditData.acknowledSignImageURL),e.xp6(1),e.Q6J("ngIf",t.auditData.acknowledSignImageURL)}}function Be(a,d){if(1&a){const t=e.EpF();e.TgZ(0,"div",28)(1,"div",2)(2,"div",34)(3,"div",37),e._UZ(4,"app-asset-audit-view",83),e.qZA()()()(),e.TgZ(5,"div",60)(6,"button",61),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.goBack())}),e._uU(7," Back "),e.qZA()()}if(2&a){const t=e.oxw(2);e.xp6(4),e.Q6J("auditId",t.assetAuditId)}}function Re(a,d){1&a&&(e.TgZ(0,"li",22)(1,"a",23),e._uU(2," Assets "),e.qZA(),e.YNc(3,Be,8,1,"ng-template",24),e.qZA()),2&a&&e.Q6J("ngbNavItem",2)}function He(a,d){if(1&a){const t=e.EpF();e.TgZ(0,"button",92),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2),o=e.MAs(61);return e.KtG(i.openModalTechnician(o))}),e._UZ(1,"i",93),e._uU(2," Add Member "),e.qZA()}}function Ge(a,d){1&a&&(e.TgZ(0,"th",90),e._uU(1," Action "),e.qZA())}function Ee(a,d){1&a&&(e.ynx(0),e.TgZ(1,"tr")(2,"td",94),e._uU(3," No Member Assign "),e.qZA()(),e.BQk())}function ze(a,d){if(1&a){const t=e.EpF();e.TgZ(0,"a",101),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2).$implicit,o=e.oxw(3);return e.KtG(o.openModalDeleteConf(i))}),e._UZ(1,"i",102),e.qZA()}}function Ke(a,d){if(1&a&&(e.TgZ(0,"td"),e.YNc(1,ze,2,0,"a",100),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",!t.isTechAvailable)}}function We(a,d){if(1&a&&(e.TgZ(0,"tr")(1,"th",96)(2,"div",39),e._UZ(3,"img",97),e.TgZ(4,"div",98)(5,"a",99),e._uU(6),e.qZA()()()(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.YNc(11,Ke,2,1,"td",47),e.qZA()),2&a){const t=d.$implicit,n=e.oxw(3);e.xp6(3),e.Q6J("src",t.profileImageUrl?n.imageUrl+t.profileImageUrl:"../../../../../../assets/images/placeholderimage.png",e.LSH),e.xp6(3),e.hij("",t.techName?t.techName:t.fullName," "),e.xp6(2),e.Oqu(t.designationName),e.xp6(2),e.Oqu(t.phoneNumber),e.xp6(1),e.Q6J("ngIf",n.deleteButtonAddButtonShown)}}function $e(a,d){if(1&a&&(e.ynx(0),e.YNc(1,We,12,5,"tr",95),e.BQk()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.mX_WOTechAssignment)}}function Xe(a,d){if(1&a&&(e.TgZ(0,"div",34)(1,"div",37)(2,"div",28)(3,"div",2)(4,"div",84),e._UZ(5,"div"),e.TgZ(6,"div",85),e.YNc(7,He,3,0,"button",86),e.qZA()(),e.TgZ(8,"div",87)(9,"table",88)(10,"thead",89)(11,"tr")(12,"th",90),e._uU(13,"Name"),e.qZA(),e.TgZ(14,"th",90),e._uU(15,"Designation"),e.qZA(),e.TgZ(16,"th",90),e._uU(17,"Phone Number"),e.qZA(),e.YNc(18,Ge,2,0,"th",91),e.qZA()(),e.TgZ(19,"tbody"),e.YNc(20,Ee,4,0,"ng-container",47)(21,$e,2,1,"ng-container",47),e.qZA()()()()()()()),2&a){const t=e.oxw();e.xp6(7),e.Q6J("ngIf",t.deleteButtonAddButtonShown),e.xp6(11),e.Q6J("ngIf",t.deleteButtonAddButtonShown),e.xp6(2),e.Q6J("ngIf",0==t.mX_WOTechAssignment.length),e.xp6(1),e.Q6J("ngIf",0!=t.mX_WOTechAssignment.length)}}function et(a,d){if(1&a&&(e.TgZ(0,"div",34)(1,"div",37),e._UZ(2,"app-task-end-audit",103),e.qZA()()),2&a){const t=e.oxw();e.xp6(2),e.Q6J("ticketWOStartEndTask",t.mx_WOStartEndTask)}}function tt(a,d){if(1&a){const t=e.EpF();e.TgZ(0,"div")(1,"div",117),e.NdJ("click",function(){const i=e.CHM(t),o=i.index,s=i.$implicit,u=e.oxw(2);return e.KtG(u.selectTechnician(u.filteredTechnicianList,o,s))}),e.TgZ(2,"div",118)(3,"div",119)(4,"div",120)(5,"label",121)(6,"input",122),e.NdJ("ngModelChange",function(i){const s=e.CHM(t).index,u=e.oxw(2);return e.KtG(u.filteredTechnicianList[s].checked=i)}),e.qZA(),e._UZ(7,"i",123),e.qZA()()()(),e.TgZ(8,"div",124),e._UZ(9,"img",125),e.qZA(),e.TgZ(10,"div",126)(11,"h5",127)(12,"a",128),e._uU(13),e.qZA(),e.TgZ(14,"p",129),e._uU(15),e.qZA()()(),e.TgZ(16,"div",130)(17,"p",45)(18,"span"),e._UZ(19,"i",131),e._uU(20),e.qZA()()()()()}if(2&a){const t=d.$implicit,n=d.index,i=e.oxw(2);e.xp6(6),e.s9C("value",t),e.Q6J("disabled",i.filteredTechnicianList[n].disabled)("ngModel",i.filteredTechnicianList[n].checked),e.xp6(3),e.s9C("src",t.profileImageUrl?i.imageUrl+t.profileImageUrl:"../../../../../assets/images/placeholderimage.png",e.LSH),e.xp6(4),e.hij(" ",t.fullName," "),e.xp6(2),e.hij("Role:",t.roleName,""),e.xp6(5),e.Oqu(t.phoneNumber)}}function it(a,d){1&a&&(e.TgZ(0,"div",132)(1,"p"),e._uU(2,"No Member Found"),e.qZA()())}function nt(a,d){if(1&a){const t=e.EpF();e.TgZ(0,"div",104)(1,"h5",105),e._uU(2,"Add Member"),e.qZA(),e.TgZ(3,"button",106),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.dismiss("Cross click"))}),e.qZA()(),e.TgZ(4,"div",107)(5,"div",108)(6,"input",109),e.NdJ("keyup",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.filterTechnician(i))})("ngModelChange",function(i){e.CHM(t);const o=e.oxw();return e.KtG(o.technicianSearchText=i)}),e.qZA(),e._UZ(7,"i",110),e.qZA(),e.TgZ(8,"ngx-simplebar",111)(9,"div",112),e.YNc(10,tt,21,7,"div",95)(11,it,3,0,"div",113),e.qZA()()(),e.TgZ(12,"div",114)(13,"button",115),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.close("Close click"))}),e._uU(14," Close "),e.qZA(),e.TgZ(15,"button",116),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.sweetAlertUpdateTechinionDetails())}),e._uU(16," Submit "),e.qZA()()}if(2&a){const t=e.oxw();e.xp6(6),e.Q6J("ngModel",t.technicianSearchText),e.xp6(4),e.Q6J("ngForOf",t.filteredTechnicianList),e.xp6(1),e.Q6J("ngIf",t.technicianList&&t.filteredTechnicianList&&t.technicianSearchText.length>0?!t.filteredTechnicianList.length:!t.technicianList.length),e.xp6(4),e.Q6J("disabled",0==t.selectedTech.length)}}const at=[{path:"",component:j,children:[{path:"",pathMatch:"full",redirectTo:"listaudit"},{path:"listaudit",component:z},{path:"createaudit",component:we},{path:"editaudit",component:K},{path:"viewaudit",component:(()=>{class a{constructor(t,n,i,o,s,u,h,g){this.router=t,this.auditService=n,this.authService=i,this.commonFunctionService=o,this.lightbox=s,this.modalService=u,this.maintenanceService=h,this.location=g,this.auditData=[],this.assetTicketItem=[],this.breadCrumbItems=[{label:"Ticket"},{label:"Ticket View",active:!0}],this.num=0,this.option={startVal:this.num,useEasing:!0,duration:2,decimalPlaces:0},this.activeId=1,this.imageUrl=N.N.apiUrl,this.mx_WOStartEndTask=[],this.mX_WOTechAssignment=[],this.deleteButtonAddButtonShown=!0,this.technicianList=[],this.selectedTech=[],this.filteredTechnicianList=[],this.technicianSearchText="",this.breadCrumbItems=[{label:"Audit Management"},{label:"Audit View",active:!0}],this.isProject=this.authService.getisProject(),this.assetAuditId=this.auditService.auditId,0!==this.assetAuditId?this.getViewDetails(this.assetAuditId):this.location.back()}ngOnInit(){this.activeId=1}refreshThePage(){this.activeId=1,this.getViewDetails(this.assetAuditId)}getViewDetails(t){this.auditService.getMasterAssetAuditDetail({assetAuditId:t}).subscribe(i=>{this.auditData=i.objAssetAuditDetail?i.objAssetAuditDetail:[],this.mx_WOStartEndTask=i.objTaskTech.mx_WOStartEndTask?i.objTaskTech.mx_WOStartEndTask:[],this.mX_WOTechAssignment=i.objTaskTech.mX_WOTechAssignment?i.objTaskTech.mX_WOTechAssignment:[],this.deleteButtonAddButtonShown=32!=this.auditData.auditStatusId&&61!=this.auditData.auditStatusId&&62!=this.auditData.auditStatusId})}returnStatusBadgeClassesStatus(t){return this.commonFunctionService.returnStatusBadgeClasses(t)}goBack(){this.location.back()}open(t){let i=[];i.push({src:t,caption:"",thumb:"thumb"}),this.lightbox.open(i)}loadTechnician(){this.maintenanceService.getTechnician(this.auditData.departmentId).subscribe(t=>{t&&(this.technicianList=t?.data,this.technicianList.forEach(n=>{n.checked=!1,n.disabled=!1}),this.mX_WOTechAssignment.length>0&&this.technicianList.forEach(n=>{this.mX_WOTechAssignment.forEach(i=>{i.techId===n.userId&&(n.checked=!0,n.disabled=!0)})}),this.filteredTechnicianList=this.technicianList)},t=>{})}openModalTechnician(t){this.modalService.open(t,{size:"lg",centered:!0}),this.loadTechnician()}getTechnicianIndex(t){return this.technicianList.findIndex(n=>n.userId===t)}getSelectedTechnicianIndex(t){return this.selectedTech.findIndex(n=>n.userId===t)}selectTechnician(t,n,i){if(this.filteredTechnicianList[n].disabled)return;const o=this.getTechnicianIndex(i.userId);this.technicianList[o].checked=!this.technicianList[o].checked,this.getTodoListChecked(t[n].checked,i)}getTodoListChecked(t,n){1==t?this.selectedTech.push(n):this.selectedTech.forEach((i,o)=>{i.userId==n.userId&&this.selectedTech.splice(o,1)})}unCheckItem(t){const n=this.getTechnicianIndex(t.userId);this.technicianList[n].checked=!1;const i=this.getSelectedTechnicianIndex(t.userId);this.selectedTech.splice(i,1)}filterTechnician(t){this.filteredTechnicianList=this.technicianList.filter(n=>n.fullName.toLowerCase().includes(t.target.value.toLowerCase()||""))}clearTeach(t){this.technicianSearchText="",this.filteredTechnicianList=this.technicianList.filter(n=>n.fullName.toLowerCase().includes(t.target.value.toLowerCase()||""))}openModalDeleteConf(t){const n=this.modalService.open(S.z,{ariaLabelledBy:"modal-basic-title",size:"md",centered:!0,backdrop:"static",keyboard:!1});n.componentInstance.title="You are about to delete a Member ?",n.componentInstance.subTitle="Deleting your Member will remove for this Schedule list",n.result.then(i=>{i&&"delete"==i&&this.DeleteTechnitionforScheudle(t)})}DeleteTechnitionforScheudle(t){this.auditService.DeleteTechnitionforAudit({TicketTechId:t.ticketTechId,techId:t.techId}).subscribe(i=>{this.getViewDetails(this.assetAuditId)},i=>{i&&this.openModaWaringConf(i)})}openModaWaringConf(t){const n=this.modalService.open(Te.e,{ariaLabelledBy:"modal-basic-title",size:"md",centered:!0,backdrop:"static",keyboard:!1});n.componentInstance.title=t,n.componentInstance.subTitle="",n.result.then(i=>{})}sweetAlertUpdateTechinionDetails(){D().fire({title:"Do you want to add an additional member for this  Schedule list?",text:"You won't be able to revert this!",icon:"info",showCancelButton:!0,cancelButtonColor:"#FF3366",confirmButtonText:"<span class='swal2-confirm '> Yes, Update it!</span>"}).then(t=>{t.isConfirmed&&this.submitTechinionDetails()})}submitTechinionDetails(){let t=[];this.selectedTech.forEach(n=>{t.push({techId:n.userId,techName:n.fullName,ticketId:this.assetAuditId})}),this.auditService.InsertTechnitionforAudit(t).subscribe(n=>{this.modalService.dismissAll(),this.selectedTech=[],this.getViewDetails(this.assetAuditId)})}static{this.\u0275fac=function(n){return new(n||a)(e.Y36(m.F0),e.Y36(A.C),e.Y36(b.u),e.Y36(w.K),e.Y36(k.ey),e.Y36(r.FF),e.Y36(U.N),e.Y36(p.Ye))}}static{this.\u0275cmp=e.Xpm({type:a,selectors:[["app-new-view-audit"]],viewQuery:function(n,i){if(1&n&&(e.Gf(xe,5),e.Gf(Ze,5)),2&n){let o;e.iGM(o=e.CRH())&&(i.customNav=o.first),e.iGM(o=e.CRH())&&(i.defaultNav=o.first)}},decls:62,vars:16,consts:[["title","Audit View",3,"breadcrumbItems"],[1,"row","mt-1"],[1,"col-lg-12"],[1,"card","mt-n4","mx-n4"],[1,"bg-warning-subtle"],[1,"card-body","pb-0","px-4"],[1,"row","mb-4"],[1,"col-md"],[1,"row","align-items-center"],[1,"d-flex","justify-content-between"],[1,"fw-bold"],["href","javascript:void(0);",1,"text-primary","text-decoration-underline","fw-medium","text-end",3,"click"],[1,"ri-refresh-line","text-primary","fs-18"],[1,"hstack","gap-3","flex-wrap"],[1,"ri-building-line","align-bottom","me-1"],[1,"vr"],[1,"ri-building-2-line","align-bottom","me-1"],[1,"ri-community-line","align-bottom","me-1"],[1,"ri-calendar-line","align-bottom","me-1"],[1,"fs-12"],["ngbNav","","role","tablist",1,"nav","nav-tabs-custom","border-bottom-0",3,"activeId"],["customNav","ngbNav"],[1,"nav-item",3,"ngbNavItem"],["ngbNavLink","","data-bs-toggle","tab","role","tab",1,"nav-link"],["ngbNavContent",""],["class","nav-item",3,"ngbNavItem",4,"ngIf"],[3,"ngbNavItem"],["ngbNavLink",""],[1,"row"],[1,"tab-content","text-muted"],[3,"ngbNavOutlet"],["role","document"],["TechnicianListModal",""],[1,"col-lg-5","mb-3","stretch-card"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body"],[1,"col-lg-6","mb-2"],[1,"d-flex","align-items-center"],[1,"avatar-sm","flex-shrink-0"],[1,"avatar-title","bg-light","text-primary","rounded-circle","fs-3"],[1,"ri-thumb-up-line","align-middle"],[1,"flex-grow-1","ms-3"],[1,"text-uppercase","fw-semibold","fs-12","text-success","mb-1"],[1,"mb-0"],["class","counter-value",3,"countUp","options",4,"ngIf"],[4,"ngIf"],[1,"flex-shrink-0","align-self-end"],[1,"ri-pantone-line","align-middle"],[1,"text-uppercase","fw-semibold","fs-12","text-warning","mb-1"],[1,"col-lg-6"],[1,"ri-thumb-down-line","align-middle"],[1,"text-uppercase","fw-semibold","fs-12","text-danger","mb-1"],[1,"ri-discuss-fill","align-middle"],[1,"text-uppercase","fw-semibold","fs-12","mb-1","text-info"],["class","col-md-6",4,"ngIf"],[1,"col-lg-7","mb-3","stretch-card"],["class","text-danger text-center",4,"ngIf"],["class","row",4,"ngIf"],[1,"d-flex","justify-content-end","mb-3"],[1,"btn","btn-soft-primary","waves-effect","back-button",3,"click"],[1,"counter-value",3,"countUp","options"],[1,"col-md-6"],[1,"card","border","shadow-none","mb-lg-0","right"],[1,"card-header","p-2"],[1,"card-body","text-muted","p-2"],[1,"text-center","text-dark","mb-0"],[1,"ri-user-fill","align-bottom","text-muted"],[1,"text-center","text-dark","mb-0","fs-12"],[1,"text-center","text-muted","mb-0"],[1,"text-danger","text-center"],[1,"card-body","text-muted"],[1,"fs-14","mb-2"],[1,"text-center","mb-1"],[1,"position-relative","d-inline-block"],[1,"avatar-lg"],[1,"avatar-title","bg-light","rounded"],["class","avatar-md img-size-fixed",3,"src","click",4,"ngIf"],["src","../../../../../assets/images/placeholderimage.png","class","avatar-md img-size-fixed",3,"click",4,"ngIf"],[1,"fs-10","text-muted"],[1,"avatar-md","img-size-fixed",3,"src","click"],["src","../../../../../assets/images/placeholderimage.png",1,"avatar-md","img-size-fixed",3,"click"],[3,"auditId"],[1,"d-flex","align-items-center","justify-content-between","mb-3","mt-2"],[1,"mb-2"],["class","btn btn-success btn-sm","type","button","class","btn btn-soft-primary btn-sm","data-bs-toggle","modal","data-bs-target","#inviteMembersModal",3,"click",4,"ngIf"],[1,"table-responsive","table-card"],[1,"table","align-middle","mb-0"],[1,"table-light","text-muted"],["scope","col"],["scope","col",4,"ngIf"],["type","button","data-bs-toggle","modal","data-bs-target","#inviteMembersModal",1,"btn","btn-soft-primary","btn-sm",3,"click"],[1,"ri-add-fill","align-bottom","me-1"],["colspan","4",1,"text-center"],[4,"ngFor","ngForOf"],["scope","row"],["alt","",1,"rounded-circle","avatar-xxs",2,"width","40px","height","40px",3,"src"],[1,"flex-grow-1","ms-2"],["href","javascript:void(0);",1,"fw-medium"],["href","javascript:void(0)","class","dropdown-item cursor-pointer",3,"click",4,"ngIf"],["href","javascript:void(0)",1,"dropdown-item","cursor-pointer",3,"click"],[1,"ri-delete-bin-fill","align-bottom","me-2","text-danger"],[3,"ticketWOStartEndTask"],[1,"modal-header","p-3","bg-primary-subtle"],["id","inviteMembersModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body","p-4"],[1,"search-box","mb-3"],["type","text","placeholder","Search member here...",1,"form-control","bg-light","border-light",3,"ngModel","keyup","ngModelChange"],[1,"ri-search-line","search-icon"],[1,"mx-n4","px-4",2,"height","400px"],[1,"vstack","gap-3"],["class","text-center mt-3 text-muted",4,"ngIf"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"],["type","submit",1,"btn","btn-success","w-xs","me-3",3,"disabled","click"],[1,"d-flex","align-items-center",3,"click"],[1,"flex-shrink-0","me-3"],[1,"d-flex","align-items-center","gap-1"],[1,"form-check","form-check-flat","form-check-primary"],[1,"form-check-label"],["type","checkbox",1,"form-check-input",3,"value","disabled","ngModel","ngModelChange"],[1,"input-frame"],[1,"avatar-xs","flex-shrink-0","me-3"],["alt","",1,"img-fluid","rounded-circle",2,"width","40px","height","40px",3,"src"],[1,"flex-grow-1"],[1,"fs-14","mb-0"],["href","javascript:void(0);",1,"text-body","d-block"],[1,"mt-0","mb-0"],[1,"flex-shrink-0","me-3","mb-0"],[1,"ri-phone-fill","me-1"],[1,"text-center","mt-3","text-muted"]],template:function(n,i){if(1&n&&(e._UZ(0,"app-breadcrumbs",0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",7)(10,"div")(11,"div",9)(12,"h4",10),e._uU(13),e.qZA(),e.TgZ(14,"a",11),e.NdJ("click",function(){return i.refreshThePage()}),e._UZ(15,"i",12),e.qZA()(),e.TgZ(16,"div",13)(17,"div"),e._UZ(18,"i",14),e._uU(19),e.qZA(),e._UZ(20,"div",15),e.TgZ(21,"div"),e._UZ(22,"i",16),e._uU(23),e.qZA(),e._UZ(24,"div",15),e.TgZ(25,"div"),e._UZ(26,"i",17),e._uU(27),e.qZA(),e._UZ(28,"div",15),e.TgZ(29,"div"),e._UZ(30,"i",17),e._uU(31),e.qZA(),e._UZ(32,"div",15),e.TgZ(33,"div"),e._UZ(34,"i",18),e._uU(35),e.qZA(),e._UZ(36,"div",15),e.TgZ(37,"div")(38,"span",19),e._uU(39),e.qZA()()()()()()()(),e.TgZ(40,"ul",20,21)(42,"li",22)(43,"a",23),e._uU(44," Details "),e.qZA(),e.YNc(45,Pe,77,12,"ng-template",24),e.qZA(),e.YNc(46,Re,4,1,"li",25),e.TgZ(47,"li",26)(48,"a",27),e._uU(49," Member List "),e.qZA(),e.YNc(50,Xe,22,4,"ng-template",24),e.qZA(),e.TgZ(51,"li",26)(52,"a",27),e._uU(53," Task List "),e.qZA(),e.YNc(54,et,3,1,"ng-template",24),e.qZA()()()()()()(),e.TgZ(55,"div",28)(56,"div",2)(57,"div",29),e._UZ(58,"div",30),e.qZA()(),e._UZ(59,"div",2),e.qZA(),e.YNc(60,nt,17,4,"ng-template",31,32,e.W1O)),2&n){const o=e.MAs(41);e.Q6J("breadcrumbItems",i.breadCrumbItems),e.xp6(13),e.hij(" ",(null==i.auditData?null:i.auditData.assetAuditName)||"NA"," "),e.xp6(6),e.hij(" ",(null==i.auditData?null:i.auditData.companyName)||"NA"," "),e.xp6(4),e.hij("",(null==i.auditData?null:i.auditData.clientName)||"NA"," "),e.xp6(4),e.hij("",(null==i.auditData?null:i.auditData.departmentName)||"NA"," "),e.xp6(4),e.hij("",(null==i.auditData?null:i.auditData.departmentName)||"NA"," "),e.xp6(4),e.hij("",(null==i.auditData?null:i.auditData.createdDate)||"NA"," "),e.xp6(3),e.Tol(i.returnStatusBadgeClassesStatus(i.auditData.auditStatusId)),e.xp6(1),e.Oqu(i.auditData.assetStatus),e.xp6(1),e.Q6J("activeId",i.activeId),e.xp6(2),e.Q6J("ngbNavItem",1),e.xp6(4),e.Q6J("ngIf",i.assetAuditId),e.xp6(1),e.Q6J("ngbNavItem",3),e.xp6(4),e.Q6J("ngbNavItem",4),e.xp6(7),e.Q6J("ngbNavOutlet",o)}},dependencies:[p.sg,p.O5,c.Fj,c.Wl,c.JJ,c.On,C.M,r.uN,r.Pz,r.nv,r.Is,r.Vx,r.tO,r.Dy,T.n,De.r,Ce.P,q.P]})}}return a})()}]}];let ot=(()=>{class a{static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275mod=e.oAB({type:a})}static{this.\u0275inj=e.cJS({imports:[m.Bz.forChild(at),m.Bz]})}}return a})();var st=l(6762),dt=l(6208),lt=l(6480);let rt=(()=>{class a{static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275mod=e.oAB({type:a})}static{this.\u0275inj=e.cJS({providers:[p.uU],imports:[p.ez,ot,c.u5,c.UX,V.X,r.jF,r.ZS,C.t,r.aE,r.Oz,r.IJ,f.A0,r.Gs,r.HK,r.XC,r.M,dt.m,q.m,st.JT.forRoot(),k.QM,lt.DashboardModule]})}}return a})()}}]);