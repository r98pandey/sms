"use strict";(self.webpackChunksms_portal=self.webpackChunksms_portal||[]).push([[7724,9455],{618:(I,A,p)=>{p.d(A,{n:()=>_});var r=p(9862),u=p(553),c=p(9212),m=p(2787),T=p(5035);let _=(()=>{class b{static{this.editDepartmentId=0}constructor(e,d,v){this._http=e,this._route=d,this.authService=v,this.accessRight=!1}getDepartmentTableList_LocalPagination(e){return this._http.post(u.N.apiUrl+"api/V2_Master/GetDepartmentTableList_LocalPagination",e,{headers:(new r.WM).set("Content-Type","application/json")})}getClientForApplicationSettingDrobDown(e){return this._http.post(u.N.apiUrl+"api/V2_Master/GetClientForApplicationSettingDrobDown",e,{headers:(new r.WM).set("Content-Type","application/json")})}postDepartment(e){return this._http.post(u.N.apiUrl+"api/V2_Master/CreateDepartment",e,{headers:(new r.WM).set("Content-Type","application/json")})}postUpdateDepartmentLogo(e){return this._http.post(u.N.apiUrl+"api/Master/UpdateDepartmentLogo",e,{headers:(new r.WM).set("Content-Type","application/json")})}getDepartmentByCompanyId(e){return this._http.get(u.N.apiUrl+"api/Master/GetDepartmentList/"+e,{headers:(new r.WM).set("Content-Type","application/json")})}getDepartmentByClientId(e,d){return this._http.get(u.N.apiUrl+"api/Master/GetDepartmentListByClient/"+e+"/"+d,{headers:(new r.WM).set("Content-Type","application/json")})}getCompanyListWithDept(e){return this._http.get(u.N.apiUrl+"api/Master/GetCompanyListWithDept/"+e,{headers:(new r.WM).set("Content-Type","application/json")})}getDepartmentListByDeptId(e){return this._http.get(u.N.apiUrl+"api/Master/GetDepartmentListByDeptId/"+e,{headers:(new r.WM).set("Content-Type","application/json")})}getDepartmentDetail(e){return this._http.post(u.N.apiUrl+"api/V2_Master/GetDepartmentDetail",{DepartmentId:e},{headers:(new r.WM).set("Content-Type","application/json")})}postUpdateDepartment(e){return this._http.post(u.N.apiUrl+"api/V2_Master/UpdateDepartment",e,{headers:(new r.WM).set("Content-Type","application/json")})}postDeleteDepartment(e){return this._http.post(u.N.apiUrl+"api/Master/DeleteDepartment",e,{headers:(new r.WM).set("Content-Type","application/json")})}getClient(e){return this._http.post(u.N.apiUrl+"api/V2_Master/GetClientListDrobDown",{SearchCompanyId:e},{headers:(new r.WM).set("Content-Type","application/json")})}getDepartmentListDropdown(e,d){return this._http.post(u.N.apiUrl+"api/V2_Master/GetDepartmentListDrobDown",{SearchCompanyId:e,SearchClientId:d},{headers:(new r.WM).set("Content-Type","application/json")})}static{this.\u0275fac=function(d){return new(d||b)(c.LFG(r.eN),c.LFG(m.F0),c.LFG(T.$))}}static{this.\u0275prov=c.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"})}}return b})()},7724:(I,A,p)=>{p.r(A),p.d(A,{NewUserModule:()=>ct});var r=p(6814),u=p(2787),c=p(6223),m=p(3934),T=p(3519),_=p.n(T),b=p(8868),y=p(1517),e=p(9212),d=p(9455),v=p(618),g=p(7291),w=p(2857),N=p(4807),D=p(8617);const S=["noDepartmentModalPopUp"];function q(a,l){1&a&&(e.TgZ(0,"small",12),e._uU(1," Full Name is Required"),e.qZA())}function E(a,l){if(1&a&&(e.TgZ(0,"div"),e.YNc(1,q,2,0,"small",52),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.form.FullName.errors.required)}}function F(a,l){1&a&&(e.TgZ(0,"small",12),e._uU(1," Email is Required"),e.qZA())}function P(a,l){if(1&a&&(e.TgZ(0,"div"),e.YNc(1,F,2,0,"small",52),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.form.Email.errors.required)}}function j(a,l){1&a&&(e.TgZ(0,"small",12),e._uU(1," Phone Number is Required"),e.qZA())}function R(a,l){if(1&a&&(e.TgZ(0,"div"),e.YNc(1,j,2,0,"small",52),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.form.PhoneNumber.errors.required)}}function V(a,l){1&a&&(e.TgZ(0,"div")(1,"small",12),e._uU(2," Role is Required "),e.qZA()())}function G(a,l){1&a&&(e.TgZ(0,"div")(1,"small",12),e._uU(2," Access Group is Required "),e.qZA()())}function O(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"label",53)(1,"div",54)(2,"div",55)(3,"i",56),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.crossFirstImage(i.profile_img))}),e.qZA()()()()}}function J(a,l){1&a&&(e.TgZ(0,"label",57)(1,"div",54)(2,"div",55),e._UZ(3,"i",58),e.qZA()()())}function Q(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"div",65)(1,"div",27)(2,"input",66),e.NdJ("change",function(i){const s=e.CHM(t).$implicit,h=e.oxw().index,f=e.oxw();return e.KtG(f.checkDeparmentAccess(i,s.departmentId,h))}),e.qZA(),e.TgZ(3,"label",62),e._uU(4),e.qZA()()()}if(2&a){const t=l.$implicit,o=e.oxw(),i=o.index,n=o.$implicit,s=e.oxw();e.xp6(2),e.Q6J("checked",s.returnValue(t.departmentId,i))("id",t.departmentName+n.companyName),e.xp6(1),e.Q6J("for",t.departmentName+n.companyName),e.xp6(1),e.hij(" ",t.departmentName," ")}}function B(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"div",59)(1,"h5"),e._uU(2),e.TgZ(3,"span",60),e._uU(4,"(Access Level)"),e.qZA()(),e.TgZ(5,"div",25)(6,"div",46)(7,"div",27)(8,"input",61),e.NdJ("change",function(i){const s=e.CHM(t).index,h=e.oxw();return e.KtG(h.checkSelectedAll(i,s))}),e.qZA(),e.TgZ(9,"label",62),e._uU(10," Select All "),e.qZA()()(),e._UZ(11,"div",63),e.YNc(12,Q,5,4,"div",64),e.qZA()()}if(2&a){const t=l.$implicit,o=l.index,i=e.oxw();e.xp6(2),e.hij(" ",t.company.companyName," "),e.xp6(6),e.Q6J("id","selectAll"+t.company.companyName)("checked",i.returnaSelectAll(o)),e.xp6(1),e.Q6J("for","selectAll"+t.company.companyName),e.xp6(3),e.Q6J("ngForOf",t.projectList)}}function Y(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"div",67)(1,"div",68)(2,"button",69),e.NdJ("click",function(){const n=e.CHM(t).$implicit;return e.KtG(n.dismiss("Cross click"))}),e.qZA()(),e.TgZ(3,"div",70)(4,"div",71),e._UZ(5,"lord-icon",72),e.qZA(),e.TgZ(6,"div",73)(7,"h4"),e._uU(8,"Information!"),e.qZA(),e.TgZ(9,"p",74),e._uU(10," To create a project for a specific company or organization, you may need to request the administrator to create the project. "),e.qZA()(),e.TgZ(11,"p",75),e._uU(12,"You can follow these steps:"),e.qZA(),e.TgZ(13,"ol",76)(14,"li"),e._uU(15,"Access the application settings."),e.qZA(),e.TgZ(16,"li"),e._uU(17,'Navigate to "My Project" within the application.'),e.qZA(),e.TgZ(18,"li"),e._uU(19,'Look for an option button "Add Project".'),e.qZA()(),e.TgZ(20,"div",77)(21,"button",78),e.NdJ("click",function(){const n=e.CHM(t).$implicit;return e.KtG(n.close("Close click"))}),e._uU(22," Ok "),e.qZA()()()()}}const L=a=>({"is-invalid":a});let z=(()=>{class a{constructor(t,o,i,n,s,h,f){this.formBuilder=t,this.userService=o,this.dropDownService=i,this.departmentService=n,this.router=s,this.modalService=h,this.CommonFunctionService=f,this.selectedCompanyAccessLevelArray=[],this.loading={role:!1,accessGroup:!1},this.label="Add User",this.breadCrumbItems=[{label:"User"},{label:"Add User",active:!0}],this.rolesList=[],this.accessGroupList=[],this.companyList=[],this.profileStatus=[],this.user_Lago_Img=null,this.selectedProfileStatus="",this.selectedCompanies=[],this.localStoreDepartmentId=[],this.userService.accessRight?(this.buildForm(),this.getRoles(),this.getCompanyDropDownList()):this.goBack()}buildForm(){this.profile_img=this.default_profile_img="../../../../../../assets/images/userClientPlaceholder.png",this.userForm=this.formBuilder.group({Email:["",[c.kI.required,c.kI.email]],FullName:["",c.kI.required],PhoneNumber:["",c.kI.required],roleId:[null,c.kI.required],AccessGroupId:[null,c.kI.required],MobileEnable:[!1],PortalEnable:[!1],UserImageBase64string:[""]})}get AccessGroupId(){return this.userForm.get("AccessGroupId")}get roleId(){return this.userForm.get("roleId")}get FullName(){return this.userForm.get("FullName")}get Email(){return this.userForm.get("Email")}get MobileEnable(){return this.userForm.get("MobileEnable")}get PortalEnable(){return this.userForm.get("PortalEnable")}get PhoneNumber(){return this.userForm.get("PhoneNumber")}get UserImageBase64string(){return this.userForm.get("UserImageBase64string")}get form(){return this.userForm.controls}getRoleName(t){return this.rolesList.find(o=>t==o.id)}onTypeRole(t){this.AccessGroupId.reset(),this.getAccessGroup(t.id)}getRoles(){this.userService.GetRoleList().subscribe({next:t=>{this.rolesList=t.data}})}getAccessGroup(t){this.loading.accessGroup=!0,this.userService.GetAccessGroupListByAccessGroupId(t).subscribe({next:o=>{this.loading.accessGroup=!1,this.accessGroupList=o.data}})}getCompanyDropDownList(){this.userService.getCompanyExistWithDepartmentList({}).subscribe({next:t=>{this.companyList=t.list}})}getProjectByCompany(t){this.selectedCompanyAccessLevelArray=[],t.forEach(o=>{this.departmentService.getDepartmentTableList_LocalPagination({SearchCompanyId:o.companyId}).subscribe({next:i=>{0==i.list.length?(this.selectedCompanies.forEach((n,s)=>{n.companyId==o.companyId&&(this.companyModel.splice(s,1),this.companyModel=[...this.companyModel],this.selectedCompanies.splice(s,1))}),this.noDepartmentModalPopUpOpen()):this.selectedCompanyAccessLevelArray.push({company:o,projectList:i.list,selectedList:[]}),this.localStoreDepartmentId.length&&this.localStoreDepartmentId.forEach(n=>{this.selectedCompanyAccessLevelArray.forEach((s,h)=>{s.company.companyId===n.company.companyId&&(s.selectedList=n.selectedList)})})}})})}checkDeparmentAccess(t,o,i){t.target.checked?this.selectedCompanyAccessLevelArray[i].selectedList.push(o):this.selectedCompanyAccessLevelArray[i].selectedList.splice(this.selectedCompanyAccessLevelArray[i].selectedList.indexOf(o),1),this.localStoreDepartmentId=this.selectedCompanyAccessLevelArray.slice()}returnValue(t,o){return this.selectedCompanyAccessLevelArray[o].selectedList.includes(t)}returnaSelectAll(t){return this.selectedCompanyAccessLevelArray[t].selectedList.length===this.selectedCompanyAccessLevelArray[t].projectList.length}checkSelectedAll(t,o){this.selectedCompanyAccessLevelArray[o].selectedList=[],t.target.checked?this.selectedCompanyAccessLevelArray[o].projectList.map(i=>{this.selectedCompanyAccessLevelArray[o].selectedList.push(i.departmentId)}):this.selectedCompanyAccessLevelArray[o].selectedList=[],this.localStoreDepartmentId=this.selectedCompanyAccessLevelArray.slice()}onTypeAccessGroup(t){}onTypeCompany(t){this.selectedCompanies=t,this.getProjectByCompany(t)}openModaWaringConf(t){const o=this.modalService.open(b.e,{ariaLabelledBy:"modal-basic-title",size:"md",centered:!0,backdrop:"static",keyboard:!1});o.componentInstance.title=t,o.componentInstance.subTitle="",o.result.then(i=>{i&&"Close click"==i&&this.router.navigate(["/application-settings/user-management/user/list"])})}onSelectFile(t){if(t.target.files&&t.target.files[0]){var o=new FileReader;o.onload=s=>{this.profile_img=s.target.result,this.isFirstImageVisible=!0},o.onerror=()=>{this.profile_img=this.default_profile_img,this.UserImageBase64string.setValue("")},/^(image)\/(jpe?g|png|gif|bmp)$/i.test(t.target.files[0].type)?o.readAsDataURL(t.target.files[0]):(this.profile_img=this.default_profile_img,this.UserImageBase64string.setValue(""))}else this.profile_img=this.default_profile_img,this.UserImageBase64string.setValue("")}crossFirstImage(t){t&&(this.profile_img="../../../../../../assets/images/userClientPlaceholder.png",this.isFirstImageVisible=!1,this.resetFileInput())}resetFileInput(){const t=document.getElementById("asset_id0");t&&(t.value="")}submit(){const t={Role:this.getRoleName(this.roleId.value).name,AccessGroupId:this.AccessGroupId.value?this.AccessGroupId.value:null,UserName:this.Email.value?this.Email.value:null,Email:this.Email.value?this.Email.value:null,FullName:this.FullName.value?this.FullName.value:null,PhoneNumber:this.PhoneNumber.value?this.PhoneNumber.value+"":null,MobileEnable:this.MobileEnable.value,PortalEnable:this.PortalEnable.value,UserImageBase64string:"../../../../../../assets/images/userClientPlaceholder.png"!==this.profile_img?this.profile_img.replace(/^data:image\/[a-z]+;base64,/,""):null,list:[]};this.selectedCompanyAccessLevelArray.forEach(o=>{const i={DepartmentId:o.selectedList.join(","),CompanyId:o.company.companyId,AccessLevel:"D"};t.list.push(i)}),this.userService.postUser(this.CommonFunctionService.clean(t)).subscribe(o=>{this.router.navigate(["/application-settings/user-management/user/list"])},o=>{this.openModaWaringConf(o)})}checkdisableFunction(){this.selectedCompanyAccessLevelArray.forEach(t=>{})}checkUncheckAll(t,o){}goBack(){this.router.navigate(["/application-settings/user-management/user/list"])}success(t){_().fire({toast:!0,position:"top-end",icon:"success",title:t.message,showConfirmButton:!1,timer:3e3})}noDepartmentModalPopUpOpen(){this.modalService.open(this.noDepartmentModalPopUp,{backdrop:"static",keyboard:!1,centered:!0}).result.then(t=>{},t=>{})}checkThatObjectSelectedAccess(){return!this.selectedCompanyAccessLevelArray.length||this.selectedCompanyAccessLevelArray.some(o=>0===o.selectedList.length)}openModalView(t){if(t.id){const o=this.modalService.open(y.l,{ariaLabelledBy:"modal-basic-title",size:"md",centered:!0,backdrop:"static",keyboard:!1});o.componentInstance.title="Profile Create successfully and credential email to respective email.",o.componentInstance.subTitle="Do you want to setup Email Notification & Real time Push Notification & My Task",o.componentInstance.subTitle1="If yes then navigate to View page to admin for setup.",o.componentInstance.buttonName="Go It",o.result.then(i=>{i&&("success"==i?this.gotoView(t.id):this.goBack())})}else this.goBack()}gotoView(t){m.i.selectedUserId=t,this.router.navigate(["/application-settings/user-management/client-user/view"])}static{this.\u0275fac=function(o){return new(o||a)(e.Y36(c.qu),e.Y36(m.i),e.Y36(d.V),e.Y36(v.n),e.Y36(u.F0),e.Y36(g.FF),e.Y36(w.K))}}static{this.\u0275cmp=e.Xpm({type:a,selectors:[["app-add-new-user"]],viewQuery:function(o,i){if(1&o&&e.Gf(S,7),2&o){let n;e.iGM(n=e.CRH())&&(i.noDepartmentModalPopUp=n.first)}},decls:93,vars:38,consts:[[3,"title","breadcrumbItems"],[1,""],[1,"mt-2","card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body"],[3,"formGroup"],[1,"row"],[1,"col-sm-10"],[1,"row","p-0"],[1,"col-md-4"],["for","Project-Name",1,"form-label"],[1,"text-danger"],["type","text","formControlName","FullName","id","fullName","name","fullName",1,"form-control","my-1",3,"placeholder","ngClass"],[4,"ngIf"],["for","HOD",1,"form-label"],["type","email","placeholder","Email","formControlName","Email","id","email","name","email",1,"form-control","my-1",3,"ngClass"],["for","phoneNumber",1,"form-label"],["type","number","placeholder","Phone Number","formControlName","PhoneNumber","id","phoneNumber","name","PhoneNumber",1,"form-control","my-1",3,"ngClass"],[1,"col-md-4","mt-3"],["for","roleId",1,"form-label"],["bindLabel","name","bindValue","id","id","roleId","formControlName","roleId","placeholder","Select Role",1,"w-100","mr-2","my-1",3,"items","loading","clearable","change"],["for","AccessGroupId",1,"form-label"],["bindLabel","name","bindValue","accessGroupMasterId","id","AccessGroupId","formControlName","AccessGroupId","placeholder","Select Access Group",1,"w-100","mr-2","my-1",3,"items","loading","clearable","readonly","change"],["for","Client",1,"form-label"],[1,"row","mt-3"],[1,"col-6"],[1,"form-check"],["type","checkbox","value","Portal","formControlName","PortalEnable","id","Portal",1,"form-check-input"],["for","Portal",1,"form-check-label"],["type","checkbox","value","Mobile","formControlName","MobileEnable","id","Mobile",1,"form-check-input"],["for","Mobile",1,"form-check-label"],[1,"col-sm-2","textcenter"],[1,"form-label"],[1,"textcenter"],[1,"position-relative","d-inline-block"],[1,"position-absolute","top-100","start-100","translate-middle"],["class","mb-0","placement","left","ngbTooltip","Remove Image",4,"ngIf"],["for","asset_id0","class","mb-0","placement","left","ngbTooltip","Select Image",4,"ngIf"],["formControlName","UserImageBase64string","value","","id","asset_id0","type","file","accept","image/png, image/gif, image/jpeg",1,"form-control","d-none",3,"change"],[1,"avatar-lg"],[1,"avatar-title","bg-light","rounded"],["id","product-img",1,"avatar-md","img-size-fixed",3,"src"],[1,"card"],[1,"col-sm-6"],["bindLabel","companyName","bindValue","companyId","id","companyName","placeholder","Select Companies",1,"w-100","mr-2","my-1",3,"items","loading","clearable","multiple","ngModel","change","ngModelChange"],[1,"col-12"],["class","col-12 mt-3 pt-3 border-top",4,"ngFor","ngForOf"],[1,"card-footer","d-flex","justify-content-end"],[1,"btn","btn-soft-primary","waves-effect","back-button","me-2",3,"click"],[1,"btn","btn-success",3,"disabled","click"],["noDepartmentModalPopUp",""],["class","text-danger",4,"ngIf"],["placement","left","ngbTooltip","Remove Image",1,"mb-0"],[1,"avatar-xs"],[1,"avatar-title","bg-light","border","rounded-circle","text-muted","cursor-pointer"],[1,"ri-close-circle-fill",3,"click"],["for","asset_id0","placement","left","ngbTooltip","Select Image",1,"mb-0"],[1,"ri-image-fill"],[1,"col-12","mt-3","pt-3","border-top"],[1,"text-small"],["type","checkbox","value","",1,"form-check-input",3,"id","checked","change"],[1,"form-check-label",3,"for"],[1,"mt-2"],["class","col-sm-4 mt-2",4,"ngFor","ngForOf"],[1,"col-sm-4","mt-2"],["type","checkbox",1,"form-check-input",3,"checked","id","change"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"text-center"],["src","https://cdn.lordicon.com/tdrtiskw.json","trigger","loop","colors","primary:#f06548,secondary:#f7b84b",2,"width","120px","height","120px"],[1,"mt-2","fs-15","text-center"],[1,"text-muted","mx-4","mb-0"],[1,"mx-3","mb-0"],[1,"pt-0","fs-15"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","button","aria-label","",1,"swal2-cancel","btn","btn-primary","w-xs","mb-1",2,"display","inline-block",3,"click"]],template:function(o,i){1&o&&(e._UZ(0,"app-breadcrumbs",0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),e._uU(5,"Basic Detail \xa0"),e.qZA()(),e.TgZ(6,"div",5)(7,"form",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"label",11),e._uU(13,"Full Name "),e.TgZ(14,"span",12),e._uU(15,"*"),e.qZA()(),e._UZ(16,"input",13),e.YNc(17,E,2,1,"div",14),e.qZA(),e.TgZ(18,"div",10)(19,"label",15),e._uU(20,"Email "),e.TgZ(21,"span",12),e._uU(22,"*"),e.qZA()(),e._UZ(23,"input",16),e.YNc(24,P,2,1,"div",14),e.qZA(),e.TgZ(25,"div",10)(26,"label",17),e._uU(27,"Phone Number "),e.TgZ(28,"span",12),e._uU(29,"*"),e.qZA()(),e._UZ(30,"input",18),e.YNc(31,R,2,1,"div",14),e.qZA(),e.TgZ(32,"div",19)(33,"label",20),e._uU(34,"Role "),e.TgZ(35,"span",12),e._uU(36,"*"),e.qZA()(),e.TgZ(37,"ng-select",21),e.NdJ("change",function(s){return i.onTypeRole(s)}),e.qZA(),e.YNc(38,V,3,0,"div",14),e.qZA(),e.TgZ(39,"div",19)(40,"label",22),e._uU(41,"Access Group "),e.TgZ(42,"span",12),e._uU(43,"*"),e.qZA()(),e.TgZ(44,"ng-select",23),e.NdJ("change",function(s){return i.onTypeAccessGroup(s)}),e.qZA(),e.YNc(45,G,3,0,"div",14),e.qZA(),e.TgZ(46,"div",19)(47,"label",24),e._uU(48,"Device Access"),e.qZA(),e.TgZ(49,"div",25)(50,"div",26)(51,"div",27),e._UZ(52,"input",28),e.TgZ(53,"label",29),e._uU(54," Portal "),e.qZA()()(),e.TgZ(55,"div",26)(56,"div",27),e._UZ(57,"input",30),e.TgZ(58,"label",31),e._uU(59," Mobile "),e.qZA()()()()()()(),e.TgZ(60,"div",32)(61,"label",33),e._uU(62,"Profile Image"),e.qZA(),e.TgZ(63,"div",34)(64,"div",35)(65,"div",36),e.YNc(66,O,4,0,"label",37)(67,J,4,0,"label",38),e.TgZ(68,"input",39),e.NdJ("change",function(s){return i.onSelectFile(s)}),e.qZA()(),e.TgZ(69,"div",40)(70,"div",41),e._UZ(71,"img",42),e.qZA()()()()()()()()(),e.TgZ(72,"div",43)(73,"div",3)(74,"h4",4),e._uU(75,"Data Access Level \xa0"),e.qZA()(),e.TgZ(76,"div",5)(77,"div",7)(78,"div",44)(79,"label",24),e._uU(80,"Company "),e.TgZ(81,"span",12),e._uU(82,"*"),e.qZA()(),e.TgZ(83,"ng-select",45),e.NdJ("change",function(s){return i.onTypeCompany(s)})("ngModelChange",function(s){return i.companyModel=s}),e.qZA()(),e._UZ(84,"div",46),e.YNc(85,B,13,5,"div",47),e.qZA()(),e.TgZ(86,"div",48)(87,"button",49),e.NdJ("click",function(){return i.goBack()}),e._uU(88," Back "),e.qZA(),e.TgZ(89,"button",50),e.NdJ("click",function(){return i.submit()}),e._uU(90," Submit "),e.qZA()()()(),e.YNc(91,Y,23,0,"ng-template",null,51,e.W1O)),2&o&&(e.Q6J("title",i.label)("breadcrumbItems",i.breadCrumbItems),e.xp6(7),e.Q6J("formGroup",i.userForm),e.xp6(9),e.Q6J("placeholder","Full Name")("ngClass",e.VKq(32,L,i.form.FullName.invalid&&i.form.FullName.touched)),e.xp6(1),e.Q6J("ngIf",i.form.FullName.invalid&&i.form.FullName.touched),e.xp6(6),e.Q6J("ngClass",e.VKq(34,L,i.form.Email.invalid&&i.form.Email.touched)),e.xp6(1),e.Q6J("ngIf",i.form.Email.invalid&&i.form.Email.touched),e.xp6(6),e.Q6J("ngClass",e.VKq(36,L,i.form.PhoneNumber.invalid&&i.form.PhoneNumber.touched)),e.xp6(1),e.Q6J("ngIf",i.form.PhoneNumber.invalid&&i.form.PhoneNumber.touched),e.xp6(6),e.Q6J("items",i.rolesList)("loading",i.loading.role)("clearable",!1)("clearable",!1),e.xp6(1),e.Q6J("ngIf",i.form.roleId.invalid&&i.form.roleId.touched),e.xp6(6),e.Q6J("items",i.accessGroupList)("loading",i.loading.accessGroup)("clearable",!1)("readonly",!i.form.roleId.value)("clearable",!1),e.xp6(1),e.Q6J("ngIf",i.form.AccessGroupId.invalid&&i.form.AccessGroupId.touched),e.xp6(21),e.Q6J("ngIf",i.isFirstImageVisible),e.xp6(1),e.Q6J("ngIf",!i.isFirstImageVisible),e.xp6(4),e.s9C("src",i.profile_img,e.LSH),e.xp6(12),e.Q6J("items",i.companyList)("loading",i.loading.accessGroup)("clearable",!1)("multiple",!0)("ngModel",i.companyModel)("clearable",!1),e.xp6(2),e.Q6J("ngForOf",i.selectedCompanyAccessLevelArray),e.xp6(4),e.Q6J("disabled",i.userForm.invalid||i.checkThatObjectSelectedAccess()))},dependencies:[r.mk,r.sg,r.O5,c._Y,c.Fj,c.wV,c.Wl,c.JJ,c.JL,c.On,c.sg,c.u,N.w9,D.n,g._L],styles:[".text-small[_ngcontent-%COMP%]{font-size:.7rem;font-weight:400}.textcenter[_ngcontent-%COMP%]{text-align:center}@media only screen and (max-width: 600px){.textcenter[_ngcontent-%COMP%]{text-align:left!important}}"]})}}return a})();var K=p(2438),W=p(2181),U=p(553),H=p(3620),$=p(3997),X=p(9397),ee=p(7235),Z=p(7625);const te=["inputer"];function ie(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"div")(1,"button",34),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.navigateToForm())}),e._UZ(2,"i",35),e._uU(3," Add User "),e.qZA()()}}function oe(a,l){if(1&a&&(e.TgZ(0,"div",61),e._UZ(1,"img",62),e._uU(2),e.qZA()),2&a){const t=e.oxw().$implicit,o=e.oxw(2);e.xp6(1),e.hYB("src","",o.apiUrl,"",t.profileImageUrl,"",e.LSH),e.xp6(1),e.hij(" ",t.fullName," ")}}function ae(a,l){if(1&a&&(e.TgZ(0,"div",61)(1,"div",63)(2,"div",64),e._uU(3),e.qZA()(),e._uU(4),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(3),e.hij(" ",t.fullName.charAt(0)," "),e.xp6(1),e.hij(" ",t.fullName," ")}}function ne(a,l){if(1&a&&(e.ynx(0),e.TgZ(1,"div"),e._UZ(2,"i",65),e.TgZ(3,"span"),e._uU(4),e.qZA()(),e.BQk()),2&a){const t=e.oxw().$implicit,o=e.oxw(2);e.xp6(2),e.Tol(o.ccurentStatusActive(t.notificationHubTokenDateTime)?"text-success":"text-muted"),e.xp6(2),e.hij(" ",t.notificationHubTokenDateTime," ")}}function se(a,l){1&a&&e._UZ(0,"i",67)}function re(a,l){1&a&&(e.TgZ(0,"span"),e._uU(1," Never Login"),e.qZA())}function le(a,l){if(1&a&&(e.ynx(0),e.YNc(1,se,1,0,"i",66)(2,re,2,0,"span",14),e.BQk()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",0==t.portalEnable),e.xp6(1),e.Q6J("ngIf",1==t.portalEnable)}}function ce(a,l){if(1&a&&(e.ynx(0),e.TgZ(1,"div"),e._UZ(2,"i",65),e.TgZ(3,"span"),e._uU(4),e.qZA()(),e.BQk()),2&a){const t=e.oxw().$implicit,o=e.oxw(2);e.xp6(2),e.Tol(o.ccurentStatusActive(t.firebaseTokenCreatedDate)?"text-success":"text-muted"),e.xp6(2),e.hij(" ",t.firebaseTokenCreatedDate," ")}}function de(a,l){1&a&&e._UZ(0,"i",69)}function pe(a,l){1&a&&(e.TgZ(0,"span"),e._uU(1," No FireBase Token"),e.qZA())}function me(a,l){if(1&a&&(e.ynx(0),e.YNc(1,de,1,0,"i",68)(2,pe,2,0,"span",14),e.BQk()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",0==t.mobileEnable),e.xp6(1),e.Q6J("ngIf",1==t.mobileEnable)}}function ue(a,l){if(1&a&&(e.TgZ(0,"span",70),e._uU(1),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.profileStatus)}}function he(a,l){if(1&a&&(e.TgZ(0,"span",71),e._uU(1),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.profileStatus)}}function ge(a,l){if(1&a&&(e.TgZ(0,"span",71),e._uU(1),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.profileStatus)}}function fe(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"li")(1,"a",58),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,n=e.oxw(2);return e.KtG(n.navigateToEdit(i.id))}),e._UZ(2,"i",72),e._uU(3," Edit "),e.qZA()()}}function _e(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"li")(1,"a",58),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,n=e.oxw(2);return e.KtG(n.openModalActiveDeactive(i.id,"Active"))}),e._UZ(2,"i",73),e._uU(3," Active "),e.qZA()()}}function be(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"li")(1,"a",58),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,n=e.oxw(2);return e.KtG(n.openModalActiveDeactive(i.id,"Deactivate"))}),e._UZ(2,"i",74),e._uU(3," Deactivate "),e.qZA()()}}function ye(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"tr")(1,"td",46),e.NdJ("click",function(){const n=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.navigateToView(n.id))}),e.YNc(2,oe,3,3,"div",47)(3,ae,5,2,"div",47),e.qZA(),e.TgZ(4,"td",48),e._uU(5),e.qZA(),e.TgZ(6,"td",48),e._uU(7),e.qZA(),e.TgZ(8,"td",48),e._uU(9),e.qZA(),e.TgZ(10,"td",48)(11,"h5",49)(12,"span",50),e._uU(13),e.qZA()()(),e.TgZ(14,"td",48)(15,"h5",49)(16,"span",50),e._uU(17),e.qZA()()(),e.TgZ(18,"td",48),e.YNc(19,ne,5,3,"ng-container",14)(20,le,3,2,"ng-container",14),e.qZA(),e.TgZ(21,"td",48),e.YNc(22,ce,5,3,"ng-container",14)(23,me,3,2,"ng-container",14),e.qZA(),e.TgZ(24,"td",48),e.YNc(25,ue,2,1,"span",51)(26,he,2,1,"span",52)(27,ge,2,1,"span",52),e.qZA(),e.TgZ(28,"td",53)(29,"span")(30,"div",54)(31,"button",55),e._UZ(32,"i",56),e.qZA(),e.TgZ(33,"ul",57)(34,"li")(35,"a",58),e.NdJ("click",function(){const n=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.navigateToView(n.id))}),e._UZ(36,"i",59),e._uU(37," View "),e.qZA()(),e.YNc(38,fe,4,0,"li",14),e.TgZ(39,"li")(40,"a",58),e.NdJ("click",function(){const n=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.openModalCreateConf(n.email,n.fullName))}),e._UZ(41,"i",60),e._uU(42," Reset Password "),e.qZA()(),e.YNc(43,_e,4,0,"li",14)(44,be,4,0,"li",14),e.qZA()()()()()}if(2&a){const t=l.$implicit,o=e.oxw(2);e.xp6(2),e.Q6J("ngIf",t.profileImageUrl),e.xp6(1),e.Q6J("ngIf",!t.profileImageUrl),e.xp6(2),e.hij(" ",t.roleName," "),e.xp6(2),e.Oqu(t.phoneNumber),e.xp6(2),e.hij(" ",t.email," "),e.xp6(3),e.Q6J("ngClass",t.mobileEnable?"bg-primary":"bg-danger"),e.xp6(1),e.Oqu(t.mobileEnable?"Yes":"No"),e.xp6(3),e.Q6J("ngClass",t.portalEnable?"bg-primary":"bg-danger"),e.xp6(1),e.Oqu(t.portalEnable?"Yes":"No"),e.xp6(2),e.Q6J("ngIf",t.notificationHubTokenDateTime),e.xp6(1),e.Q6J("ngIf",!t.notificationHubTokenDateTime),e.xp6(2),e.Q6J("ngIf",t.firebaseTokenCreatedDate),e.xp6(1),e.Q6J("ngIf",!t.firebaseTokenCreatedDate),e.xp6(2),e.Q6J("ngIf","Active"==t.profileStatus),e.xp6(1),e.Q6J("ngIf","Deactive"==t.profileStatus),e.xp6(1),e.Q6J("ngIf","Deactive"!=t.profileStatus&&"Active"!=t.profileStatus),e.xp6(11),e.Q6J("ngIf",o.returnValueMenu.edit),e.xp6(5),e.Q6J("ngIf","Deactivate"==t.profileStatus),e.xp6(1),e.Q6J("ngIf","Active"==t.profileStatus)}}function ve(a,l){1&a&&(e.TgZ(0,"div",75),e._uU(1," No User Found "),e.qZA())}function Ae(a,l){1&a&&(e._UZ(0,"i",79),e._uU(1," Prev "))}function Ce(a,l){1&a&&(e._uU(0," Next "),e._UZ(1,"i",80))}function Te(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"ngb-pagination",76),e.NdJ("pageChange",function(i){e.CHM(t);const n=e.oxw(2);return e.KtG(n.page=i)})("pageChange",function(i){e.CHM(t);const n=e.oxw(2);return e.KtG(n.pageChange(i))}),e.YNc(1,Ae,2,0,"ng-template",77)(2,Ce,2,0,"ng-template",78),e.qZA()}if(2&a){const t=e.oxw(2);e.Q6J("collectionSize",t.totalRecords)("page",t.page)("pageSize",t.pageSize)("maxSize",2)("rotate",!0)}}function we(a,l){if(1&a&&(e.TgZ(0,"div",36)(1,"table",37)(2,"thead")(3,"tr",38)(4,"th"),e._uU(5,"Name"),e.qZA(),e.TgZ(6,"th"),e._uU(7,"Role"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"Mobile No"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Email"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"App"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Portal"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"SMS Portal Last Login"),e.qZA(),e.TgZ(18,"th"),e._uU(19,"SMS App Last Login"),e.qZA(),e.TgZ(20,"th"),e._uU(21,"Status"),e.qZA(),e.TgZ(22,"th"),e._uU(23,"Action"),e.qZA()()(),e.TgZ(24,"tbody"),e.YNc(25,ye,45,19,"tr",39),e.qZA()(),e.YNc(26,ve,2,0,"div",40),e.qZA(),e.TgZ(27,"div",41)(28,"div",42)(29,"div",43),e._uU(30),e.qZA()(),e.TgZ(31,"div",42)(32,"div",44),e.YNc(33,Te,3,5,"ngb-pagination",45),e.qZA()()()),2&a){const t=e.oxw();e.xp6(25),e.Q6J("ngForOf",t.userList),e.xp6(1),e.Q6J("ngIf",0===t.userList.length),e.xp6(4),e.lnq(" Showing ",t.from," to ",t.to," of ",t.totalRecords," entries "),e.xp6(3),e.Q6J("ngIf",t.totalRecords>t.pageSize)}}function Ne(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"div",81)(1,"div",82)(2,"button",83),e.NdJ("click",function(){const n=e.CHM(t).$implicit;return e.KtG(n.dismiss("Cross click"))}),e.qZA()(),e.TgZ(3,"div",84)(4,"div",85),e._UZ(5,"lord-icon",86),e.TgZ(6,"div",87)(7,"h4"),e._uU(8,"You are about to delete a User ?"),e.qZA(),e.TgZ(9,"p",88),e._uU(10," Deleting your user will remove all of your information from our database. "),e.qZA()()(),e.TgZ(11,"div",89)(12,"button",90),e.NdJ("click",function(){const n=e.CHM(t).$implicit;return e.KtG(n.close("Close click"))}),e._UZ(13,"i",91),e._uU(14," Close "),e.qZA(),e.TgZ(15,"button",92),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.deleteData(i.deleteId))})("click",function(){const n=e.CHM(t).$implicit;return e.KtG(n.close("Close click"))}),e._uU(16," Yes, Delete It! "),e.qZA()()()()}}let Ue=(()=>{class a{constructor(t,o,i,n,s,h,f,C,dt){this.userService=t,this.dropdownServices=o,this.modalService=i,this.router=n,this.modal=s,this.commonService=h,this.menuService=f,this.lightbox=C,this.datePipe=dt,this.page=1,this.from=0,this.to=0,this.pageSize=10,this.collectionSize=0,this.totalRecords=0,this.userList=[],this.label="User",this.breadCrumbItems=[{label:"Application Setup"},{label:"User",active:!0}],this.isProjectVisible=!1,this.displayLength=10,this.payload={displayLength:10,displayStart:0,SearchCompanyId:null,SearchDepartmentIdAsString:null,SearchFullName:null,SearchRoleName:null,SearchAccessGroupName:null,SearchPortalEnable:null,SearchMobileEnable:null},this.arrayListDropDownCompany=[],this.arrayListDropDownClientList=[],this.arrayListDropDownProjectOrDeparmentList=[],this.returnValueMenu={access:!0,add:!0,delete:!0,edit:!0,reportPrint:!0,reportView:!0},this.deleteId=null,this.rolesList=[],this.accessGroupList=[],this.loading={role:!1,accessGroup:!1},this.selectedRoleIdValue=null,this.selectedAccessGroupValue=null,this.selectedPortalEnable=null,this.selectedMobileEnable=null,this.mobileYesNoArray=[{id:!0,name:"Mobile Enable"},{id:!1,name:"Mobile Disable"}],this.portalYesNoArray=[{id:!0,name:"Portal Enable"},{id:!1,name:"Portal Disable"}],this.returnValueMenu=this.menuService.getvalueObjectreturn(this.router.url),this.apiUrl=U.N.apiUrl}ngOnInit(){this.getDropdownCompanyList()}getDropdownCompanyList(){this.dropdownServices.GetCompanyListDrobDown({}).subscribe(t=>{if(this.arrayListDropDownCompany=t.list,this.getRoles(),JSON.parse(localStorage.getItem("objectSerachForUMUserList"))){let o=JSON.parse(localStorage.getItem("objectSerachForUMUserList"));this.selectedDropDownCompanyIdValue=o.SearchCompanyId?o.SearchCompanyId:null,this.payload.SearchCompanyId=this.selectedDropDownCompanyIdValue,this.getObjectAfterRefreshUM()}else this.selectedDropDownCompanyIdValue=this.arrayListDropDownCompany[0].companyId,this.payload.SearchCompanyId=this.selectedDropDownCompanyIdValue,this.getDropdownDepartmentList(),this.loadData();this.setObjectBeforeRefeshUM()})}getDropdownDepartmentList(){this.dropdownServices.GetDepartmentListDrobDown({SearchCompanyId:this.selectedDropDownCompanyIdValue}).subscribe(o=>{this.arrayListDropDownProjectOrDeparmentList=o.list,this.setObjectBeforeRefeshUM()})}onDropdownCompanyValueChange(t){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchCompanyId=this.selectedDropDownCompanyIdValue,this.selectedDropDownProjectOrDeparmentIdValue=null,this.payload.SearchDepartmentIdAsString=this.selectedDropDownProjectOrDeparmentIdValue?this.selectedDropDownProjectOrDeparmentIdValue+"":null,this.arrayListDropDownProjectOrDeparmentList=[],this.getDropdownDepartmentList(),this.loadData()}onDropdownDepartmentValueChange(t){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchDepartmentIdAsString=this.selectedDropDownProjectOrDeparmentIdValue?this.selectedDropDownProjectOrDeparmentIdValue+"":null,this.loadData()}loadData(){this.userService.getV2_UserList(this.commonService.clean(this.payload)).subscribe(t=>{this.userList=t.data,this.setObjectBeforeRefeshUM(),this.userList.length>0?(this.totalRecords=t.data[0].totalCount,this.from=t.data.reduce((o,i)=>i.rowNum<o?i.rowNum:o,t.data[0].rowNum),this.to=t.data.reduce((o,i)=>i.rowNum>o?i.rowNum:o,t.data[0].rowNum),this.pageSize=this.displayLength):(this.totalRecords=0,this.from=0,this.to=0,this.pageSize=this.displayLength)},t=>{})}pageChange(t){t&&(this.payload.displayStart=this.pageSize*(t-1),this.loadData())}setObjectBeforeRefeshUM(){let t={};this.selectedDropDownCompanyIdValue&&(t.SearchCompanyId=this.selectedDropDownCompanyIdValue),this.selectedDropDownProjectOrDeparmentIdValue&&(t.SearchProjectId=this.selectedDropDownProjectOrDeparmentIdValue),this.arrayListDropDownProjectOrDeparmentList&&(t.arrayListDropDownProjectOrDeparmentList=this.arrayListDropDownProjectOrDeparmentList),this.rolesList&&(t.rolesList=this.rolesList),this.accessGroupList&&(t.accessGroupList=this.accessGroupList),this.selectedRoleIdValue&&(t.SearchRoleName=this.selectedRoleIdValue),this.selectedAccessGroupValue&&(t.SearchAccessGroupName=this.selectedAccessGroupValue),this.selectedPortalEnable&&(t.SearchPortalEnable=this.selectedPortalEnable),this.selectedMobileEnable&&(t.SearchMobileEnable=this.selectedMobileEnable),this.searchName&&(t.SearchFullName=this.searchName),this.page&&(t.displayStart=this.pageSize*(this.page-1),t.page=this.page),localStorage.setItem("objectSerachForUMUserList",JSON.stringify(t))}getObjectAfterRefreshUM(){let t=JSON.parse(localStorage.getItem("objectSerachForUMUserList"));this.arrayListDropDownProjectOrDeparmentList=t.arrayListDropDownProjectOrDeparmentList?t.arrayListDropDownProjectOrDeparmentList:[],this.rolesList=t.rolesList?t.rolesList:[],this.accessGroupList=t.accessGroupList?t.accessGroupList:[],this.selectedDropDownCompanyIdValue=t.SearchCompanyId?t.SearchCompanyId:null,this.selectedDropDownProjectOrDeparmentIdValue=t.SearchProjectId?t.SearchProjectId:null,this.selectedRoleIdValue=t.SearchRoleName?t.SearchRoleName:null,this.selectedAccessGroupValue=t.SearchAccessGroupName?t.SearchAccessGroupName:null,this.selectedPortalEnable=t.SearchPortalEnable?t.SearchPortalEnable:null,this.selectedMobileEnable=t.SearchMobileEnable?t.SearchMobileEnable:null,this.searchName=t.SearchFullName?t.SearchFullName:null,this.payload.SearchCompanyId=this.selectedDropDownCompanyIdValue,this.payload.SearchProjectId=this.selectedDropDownProjectOrDeparmentIdValue,this.payload.SearchRoleName=this.selectedRoleIdValue,this.payload.SearchAccessGroupName=this.selectedAccessGroupValue,this.payload.SearchPortalEnable="Portal Enable"==this.selectedPortalEnable||"Portal Disable"!=this.selectedPortalEnable&&null,this.payload.SearchMobileEnable="Mobile Enable"==this.selectedMobileEnable||"Mobile Disable"!=this.selectedMobileEnable&&null,this.payload.SearchFullName=this.searchName,t.displayStart&&(this.payload.displayStart=t.displayStart,this.page=t.page),this.loadData()}openModalActiveDeactive(t,o){const i=this.modalService.open(y.l,{ariaLabelledBy:"modal-basic-title",size:"md",centered:!0,backdrop:"static",keyboard:!1});i.componentInstance.title="Do you want to "+o+" this  profile ",i.componentInstance.subTitle="You won't be able to revert this!",i.componentInstance.buttonName=o+" It",i.result.then(n=>{n&&"success"==n&&this.updateUserActiveInActive(t,o)})}updateUserActiveInActive(t,o){this.userService.updateUserActiveInActive({Id:t,ProfileStatus:o}).subscribe(n=>{this.loadData(),this.success(n)})}onEmployeeNameChangeHandler(t){this.payload.SearchFullName=this.searchName,this.page=1,this.payload.displayStart=this.displayLength*(this.page-1),this.loadData()}goToEdit(t){this.router.navigate(["/application-settings/asset-handler/asset-handler-edit"])}deleteHandler(){parseInt(this.deleteEmpId)}confirmDelete(t,o){this.deleteEmpId=o,this.modalService.open(t,{centered:!0})}resetSerachVariable(){this.searchName=null,this.selectedDropDownCompanyIdValue=this.arrayListDropDownCompany[0].companyId,this.selectedDropDownProjectOrDeparmentIdValue=null,this.selectedRoleIdValue=null,this.selectedAccessGroupValue=null,this.selectedPortalEnable=null,this.selectedMobileEnable=null,this.accessGroupList=[],this.page=1,this.payload={displayLength:10,displayStart:0,SearchCompanyId:this.selectedDropDownCompanyIdValue,SearchDepartmentIdAsString:null,SearchFullName:null,SearchRoleName:null,SearchAccessGroupName:null,SearchPortalEnable:null,SearchMobileEnable:null},this.loadData()}success(t){_().fire({toast:!0,position:"top-end",icon:"success",title:t.message,showConfirmButton:!1,timer:3e3})}ngAfterViewInit(){(0,K.R)(this.input.nativeElement,"input").pipe((0,W.h)(Boolean),(0,H.b)(1e3),(0,$.x)(),(0,X.b)(t=>{this.onEmployeeNameChangeHandler(!0)})).subscribe()}navigateToForm(){this.userService.accessRight=!0,this.router.navigate(["/application-settings/user-management/user/add"])}navigateToView(t){m.i.selectedUserId=t,this.router.navigate(["/application-settings/user-management/user/view"])}deleteUser(t,o){this.deleteId=o,this.modalService.open(t,{centered:!0})}deleteData(t){this.userService.postDeleteUser({Id:t}).subscribe(o=>{this.page=1,this.payload.displayStart=this.displayLength*(this.page-1),this.loadData()},o=>{})}navigateToEdit(t){m.i.selectedUserId=t,this.router.navigate(["/application-settings/user-management/user/edit"])}openModalCreateConf(t,o){const i=this.modalService.open(y.l,{ariaLabelledBy:"modal-basic-title",size:"md",centered:!0,backdrop:"static",keyboard:!1});i.componentInstance.title="Do you want to reset "+o+" password?",i.componentInstance.subTitle="You won't be able to revert this!",i.componentInstance.buttonName="Reset It",i.result.then(n=>{n&&"success"==n&&this.resetPassword(t)})}resetPassword(t){this.userService.resetPassword(t).subscribe(o=>{this.success(o)})}open(t){let i=[];i.push({src:t,caption:"",thumb:"thumb"}),this.lightbox.open(i)}getRoles(){this.userService.GetRoleList().subscribe({next:t=>{this.rolesList=t.data,this.setObjectBeforeRefeshUM()}})}getAccessGroup(t){this.loading.accessGroup=!0,this.userService.GetAccessGroupListByAccessGroupId(t).subscribe({next:o=>{this.loading.accessGroup=!1,this.accessGroupList=o.data,this.setObjectBeforeRefeshUM()}})}onTypeRole(t){this.selectedAccessGroupValue=null,this.accessGroupList=[],this.payload.SearchRoleName=this.selectedRoleIdValue,this.payload.SearchAccessGroupName=this.selectedAccessGroupValue,this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.loadData(),t&&this.getAccessGroup(t.id)}onTypeAccessGroup(t){this.selectedAccessGroupValue=t?t.name:null,this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchAccessGroupName=this.selectedAccessGroupValue,this.loadData()}onSelectedPortalEnable(t){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchPortalEnable="Portal Enable"==this.selectedPortalEnable||"Portal Disable"!=this.selectedPortalEnable&&null,this.loadData()}onSelectedMobileEnable(t){this.page=1,this.payload.displayStart=this.pageSize*(this.page-1),this.payload.SearchMobileEnable="Mobile Enable"==this.selectedMobileEnable||"Mobile Disable"!=this.selectedMobileEnable&&null,this.loadData()}ccurentStatusActive(t){const o=new Date(t),i=new Date(o.toLocaleString("en-US")),n=(new Date).toLocaleString("en-US",{timeZone:"Asia/Kuala_Lumpur"}),h=(new Date(n)-i)/6e4;return Math.abs(h)<=10}static{this.\u0275fac=function(o){return new(o||a)(e.Y36(m.i),e.Y36(d.V),e.Y36(g.FF),e.Y36(u.F0),e.Y36(g.FF),e.Y36(w.K),e.Y36(ee.l),e.Y36(Z.ey),e.Y36(r.uU))}}static{this.\u0275cmp=e.Xpm({type:a,selectors:[["app-list-new-user"]],viewQuery:function(o,i){if(1&o&&e.Gf(te,7),2&o){let n;e.iGM(n=e.CRH())&&(i.input=n.first)}},decls:45,vars:29,consts:[[3,"title","breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","border-0"],[1,"row","align-items-center","gy-3"],[1,"col-lg-auto"],[1,"card-title","mb-0"],[1,"col-lg"],["bindLabel","name","bindValue","name","id","roleName","placeholder","Select Role",1,"w-100","mr-2","my-1",3,"items","loading","clearable","ngModel","change","ngModelChange"],["bindLabel","name","bindValue","name","id","accessName","placeholder","Select Access Group/Designation",1,"w-100","mr-2","my-1",3,"items","loading","clearable","disabled","ngModel","change","ngModelChange"],["bindLabel","name","bindValue","name","id","portal","placeholder","Select Portal Accessibility",1,"w-100","mr-2","my-1",3,"items","clearable","ngModel","change","ngModelChange"],["bindLabel","name","bindValue","name","id","portal","placeholder","Select Mobile Accessibility ",1,"w-100","mr-2","my-1",3,"items","clearable","ngModel","change","ngModelChange"],[1,"col-lg-auto","d-flex","justify-content-end"],[4,"ngIf"],[1,"card-body","border","border-dashed","border-end-0","border-start-0"],[1,"row","g-3"],["bindLabel","companyName","bindValue","companyId","id","companyName","placeholder","Select Company","for","companyName",1,"w-100","mr-2",3,"items","clearable","ngModel","change","ngModelChange"],["bindLabel","departmentName","bindValue","departmentId","id","departmentName","placeholder","Select Project","for","departmentName",1,"w-100","mr-2",3,"items","disabled","clearable","ngModel","change","ngModelChange"],[1,"search-box"],["type","search","name","searchTerm","placeholder","Search for user name",1,"form-control",3,"ngModel","ngModelChange"],["inputer",""],[1,"ri-search-line","search-icon"],[1,"d-flex","justify-content-end"],["type","button","ngbTooltip","Remove All Search",1,"btn","btn-danger","ms-1",3,"click"],[1,"ri-refresh-fill","me-1","align-bottom"],[1,"card-body","pt-0"],["ngbNav","",1,"nav","nav-tabs","nav-tabs-custom","nav-success","mb-3",3,"activeId"],["nav","ngbNav"],[3,"ngbNavItem"],["ngbNavContent",""],[1,"tab-content","text-muted"],[3,"ngbNavOutlet"],["deleteModel",""],["type","button","id","create-btn",1,"btn","btn-success","add-btn",3,"click"],[1,"ri-add-line","align-bottom","me-1"],[1,"table-responsive","table-card","mb-0"],[1,"table"],[1,"bg-light","text-muted","text-uppercase"],[4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],[1,"row","justify-content-md-between","align-items-md-center","gy-2"],[1,"col-sm-6"],["id","tickets-table_info","role","status","aria-live","polite",1,"dataTables_info","mb-2"],[1,"text-sm-right","float-end","listjs-pagination"],[3,"collectionSize","page","pageSize","maxSize","rotate","pageChange",4,"ngIf"],[1,"customer_name","text-primary","cursor",3,"click"],["class","d-flex align-items-center",4,"ngIf"],[1,"align-middle"],[1,"mb-1"],[1,"badge","text-uppercase",3,"ngClass"],["class","badge text-uppercase bg-success-subtle text-success",4,"ngIf"],["class","badge text-uppercase bg-danger-subtle text-danger",4,"ngIf"],[1,"ps-2","align-middle"],["ngbDropdown","",1,"dropdown","ms-2"],["type","button","data-bs-toggle","dropdown","aria-expanded","false","ngbDropdownToggle","",1,"btn","btn-soft-secondary","btn-sm","dropdown","arrow-none"],[1,"ri-more-fill"],["ngbDropdownMenu","",1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item","cursor-pointer",3,"click"],[1,"ri-eye-fill","align-bottom","me-2","text-muted"],[1,"ri-lock-unlock-fill","align-bottom","me-2","text-muted"],[1,"d-flex","align-items-center"],["alt","",1,"avatar-xs","rounded-circle","me-2",3,"src"],[1,"flex-shrink-0","avatar-xs","me-2"],[1,"avatar-title","bg-success-subtle","text-success","rounded-circle","fs-13"],[1,"ri-record-circle-fill","align-middle"],["class","text-danger ri-close-circle-line fs-18","ngbTooltip","No Access Right for Portal",4,"ngIf"],["ngbTooltip","No Access Right for Portal",1,"text-danger","ri-close-circle-line","fs-18"],["class","text-danger ri-close-circle-line fs-18","ngbTooltip","No Access Right for App",4,"ngIf"],["ngbTooltip","No Access Right for App",1,"text-danger","ri-close-circle-line","fs-18"],[1,"badge","text-uppercase","bg-success-subtle","text-success"],[1,"badge","text-uppercase","bg-danger-subtle","text-danger"],[1,"ri-pencil-fill","align-bottom","me-2","text-muted"],[1,"ri-checkbox-circle-line","align-bottom","me-2","text-muted"],[1,"ri-close-circle-line","align-bottom","me-2","text-muted"],[1,"text-center"],[3,"collectionSize","page","pageSize","maxSize","rotate","pageChange"],["ngbPaginationPrevious",""],["ngbPaginationNext",""],[1,"ci-arrow-left","me-2"],[1,"ci-arrow-right","ms-2"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gsqxdxog.json","trigger","loop","colors","primary:#405189,secondary:#f06548",2,"width","90px","height","90px"],[1,"mt-4","pt-2","fs-15","mx-4","mx-sm-5"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["data-bs-dismiss","modal","id","deleteRecord-close",1,"btn","btn-danger",3,"click"],[1,"ri-close-line","me-1","align-middle"],["type","button","id","delete-product",1,"btn","btn-primary",3,"click"]],template:function(o,i){if(1&o&&(e._UZ(0,"app-breadcrumbs",0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h5",7),e._uU(8,"User List"),e.qZA()(),e.TgZ(9,"div",8)(10,"ng-select",9),e.NdJ("change",function(s){return i.onTypeRole(s)})("ngModelChange",function(s){return i.selectedRoleIdValue=s}),e.qZA()(),e.TgZ(11,"div",8)(12,"ng-select",10),e.NdJ("change",function(s){return i.onTypeAccessGroup(s)})("ngModelChange",function(s){return i.selectedAccessGroupValue=s}),e.qZA()(),e.TgZ(13,"div",8)(14,"ng-select",11),e.NdJ("change",function(s){return i.onSelectedPortalEnable(s)})("ngModelChange",function(s){return i.selectedPortalEnable=s}),e.qZA()(),e.TgZ(15,"div",8)(16,"ng-select",12),e.NdJ("change",function(s){return i.onSelectedMobileEnable(s)})("ngModelChange",function(s){return i.selectedMobileEnable=s}),e.qZA()(),e.TgZ(17,"div",13),e.YNc(18,ie,4,0,"div",14),e.qZA()()(),e.TgZ(19,"div",15)(20,"div",16)(21,"div",8)(22,"ng-select",17),e.NdJ("change",function(s){return i.onDropdownCompanyValueChange(s)})("ngModelChange",function(s){return i.selectedDropDownCompanyIdValue=s}),e.qZA()(),e.TgZ(23,"div",8)(24,"ng-select",18),e.NdJ("change",function(s){return i.onDropdownDepartmentValueChange(s)})("ngModelChange",function(s){return i.selectedDropDownProjectOrDeparmentIdValue=s}),e.qZA()(),e.TgZ(25,"div",8)(26,"div",19)(27,"input",20,21),e.NdJ("ngModelChange",function(s){return i.searchName=s}),e.qZA(),e._UZ(29,"i",22),e.qZA()(),e.TgZ(30,"div",6)(31,"div",23)(32,"button",24),e.NdJ("click",function(){return i.resetSerachVariable()}),e._UZ(33,"i",25),e._uU(34," Clear "),e.qZA()()()()(),e.TgZ(35,"div",26)(36,"div")(37,"ul",27,28)(39,"li",29),e.YNc(40,we,34,6,"ng-template",30),e.qZA()(),e.TgZ(41,"div",31),e._UZ(42,"div",32),e.qZA()()()()()(),e.YNc(43,Ne,17,0,"ng-template",null,33,e.W1O)),2&o){const n=e.MAs(38);e.Q6J("title",i.label)("breadcrumbItems",i.breadCrumbItems),e.xp6(10),e.Q6J("items",i.rolesList)("loading",i.loading.role)("clearable",!0)("ngModel",i.selectedRoleIdValue),e.xp6(2),e.Q6J("items",i.accessGroupList)("loading",i.loading.accessGroup)("clearable",!0)("disabled",!i.selectedRoleIdValue)("ngModel",i.selectedAccessGroupValue),e.xp6(2),e.Q6J("items",i.portalYesNoArray)("clearable",!0)("ngModel",i.selectedPortalEnable),e.xp6(2),e.Q6J("items",i.mobileYesNoArray)("clearable",!0)("ngModel",i.selectedMobileEnable),e.xp6(2),e.Q6J("ngIf",i.returnValueMenu.add),e.xp6(4),e.Q6J("items",i.arrayListDropDownCompany)("clearable",!1)("ngModel",i.selectedDropDownCompanyIdValue),e.xp6(2),e.Q6J("items",i.arrayListDropDownProjectOrDeparmentList)("disabled",!i.selectedDropDownCompanyIdValue)("clearable",!0)("ngModel",i.selectedDropDownProjectOrDeparmentIdValue),e.xp6(3),e.Q6J("ngModel",i.searchName),e.xp6(10),e.Q6J("activeId",1),e.xp6(2),e.Q6J("ngbNavItem",1),e.xp6(3),e.Q6J("ngbNavOutlet",n)}},dependencies:[r.mk,r.sg,r.O5,c.Fj,c.JJ,c.On,N.w9,g.jt,g.iD,g.Vi,g.N9,g.GZ,g.ju,D.n,g._L,g.uN,g.Pz,g.nv,g.Is,g.Dy]})}}return a})();var k=p(859);const Ie=["noDepartmentModalPopUp"];function Ze(a,l){1&a&&(e.TgZ(0,"small",12),e._uU(1," Full Name is Required"),e.qZA())}function ke(a,l){if(1&a&&(e.TgZ(0,"div"),e.YNc(1,Ze,2,0,"small",52),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.form.FullName.errors.required)}}function De(a,l){1&a&&(e.TgZ(0,"small",12),e._uU(1," Email is Required"),e.qZA())}function Le(a,l){if(1&a&&(e.TgZ(0,"div"),e.YNc(1,De,2,0,"small",52),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.form.Email.errors.required)}}function Me(a,l){1&a&&(e.TgZ(0,"small",12),e._uU(1," Phone Number is Required"),e.qZA())}function xe(a,l){if(1&a&&(e.TgZ(0,"div"),e.YNc(1,Me,2,0,"small",52),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.form.PhoneNumber.errors.required)}}function Se(a,l){1&a&&(e.TgZ(0,"div")(1,"small",12),e._uU(2," Role is Required "),e.qZA()())}function qe(a,l){1&a&&(e.TgZ(0,"div")(1,"small",12),e._uU(2," Access Group is Required "),e.qZA()())}function Ee(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"label",53)(1,"div",54)(2,"div",55)(3,"i",56),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openModalDeleteConf(i.profile_img))}),e.qZA()()()()}}function Fe(a,l){1&a&&(e.TgZ(0,"label",57)(1,"div",54)(2,"div",55),e._UZ(3,"i",58),e.qZA()()())}function Pe(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"div",65)(1,"div",27)(2,"input",66),e.NdJ("change",function(i){const s=e.CHM(t).$implicit,h=e.oxw().index,f=e.oxw();return e.KtG(f.checkDeparmentAccess(i,s.departmentId,h))}),e.qZA(),e.TgZ(3,"label",62),e._uU(4),e.qZA()()()}if(2&a){const t=l.$implicit,o=e.oxw(),i=o.index,n=o.$implicit,s=e.oxw();e.xp6(2),e.Q6J("checked",s.returnValue(t.departmentId,i))("id",t.departmentName+n.companyName),e.xp6(1),e.Q6J("for",t.departmentName+n.companyName),e.xp6(1),e.hij(" ",t.departmentName," ")}}function je(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"div",59)(1,"h5"),e._uU(2),e.TgZ(3,"span",60),e._uU(4,"(Access Level)"),e.qZA()(),e.TgZ(5,"div",25)(6,"div",48)(7,"div",27)(8,"input",61),e.NdJ("change",function(i){const s=e.CHM(t).index,h=e.oxw();return e.KtG(h.checkSelectedAll(i,s))}),e.qZA(),e.TgZ(9,"label",62),e._uU(10," Select All "),e.qZA()()(),e._UZ(11,"div",63),e.YNc(12,Pe,5,4,"div",64),e.qZA()()}if(2&a){const t=l.$implicit,o=l.index,i=e.oxw();e.xp6(2),e.hij(" ",null==t||null==t.company?null:t.company.companyName," "),e.xp6(6),e.Q6J("id","selectAll"+t.company.companyName)("checked",i.returnaSelectAll(o)),e.xp6(1),e.Q6J("for","selectAll"+t.company.companyName),e.xp6(3),e.Q6J("ngForOf",t.projectList)}}function Re(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"div",67)(1,"div",68)(2,"button",69),e.NdJ("click",function(){const n=e.CHM(t).$implicit;return e.KtG(n.dismiss("Cross click"))}),e.qZA()(),e.TgZ(3,"div",70)(4,"div",71),e._UZ(5,"lord-icon",72),e.qZA(),e.TgZ(6,"div",73)(7,"h4"),e._uU(8,"Information!"),e.qZA(),e.TgZ(9,"p",74),e._uU(10," To create a project for a specific company or organization, you may need to request the administrator to create the project. "),e.qZA()(),e.TgZ(11,"p",75),e._uU(12,"You can follow these steps:"),e.qZA(),e.TgZ(13,"ol",76)(14,"li"),e._uU(15,"Access the application settings."),e.qZA(),e.TgZ(16,"li"),e._uU(17,'Navigate to "My Project" within the application.'),e.qZA(),e.TgZ(18,"li"),e._uU(19,'Look for an option button "Add Project".'),e.qZA()(),e.TgZ(20,"div",77)(21,"button",78),e.NdJ("click",function(){const n=e.CHM(t).$implicit;return e.KtG(n.close("Close click"))}),e._uU(22," Ok "),e.qZA()()()()}}const M=a=>({"is-invalid":a});let Ve=(()=>{class a{constructor(t,o,i,n,s,h,f){this.formBuilder=t,this.userService=o,this.dropDownService=i,this.departmentService=n,this.router=s,this.modalService=h,this.commonFunctionService=f,this.selectedCompanyAccessLevelArray=[],this.loading={role:!1,accessGroup:!1},this.label="Edit User",this.breadCrumbItems=[{label:"User"},{label:"Edit User",active:!0}],this.rolesList=[],this.accessGroupList=[],this.companyList=[],this.profileStatus=[],this.user_Lago_Img=null,this.selectedProfileStatus="",this.selectedCompanies=[],this.imagEUrl=U.N.apiUrl,this.localStoreDepartmentId=[],0==m.i.selectedUserId||null==m.i.selectedUserId||null==!m.i.selectedUserId?this.router.navigate(["/application-settings/user-management/user/list"]):(this.buildForm(),this.getRoles(),this.getCompanyDropDownList())}ngOnInit(){this.buildForm()}buildForm(){this.companyModel=[],this.userForm=this.formBuilder.group({Email:["",c.kI.required],FullName:["",c.kI.required],PhoneNumber:["",c.kI.required],roleId:[null,c.kI.required],AccessGroupId:[null,c.kI.required],MobileEnable:[!1],PortalEnable:[!1],UserImageBase64string:[""]})}get AccessGroupId(){return this.userForm.get("AccessGroupId")}get roleId(){return this.userForm.get("roleId")}get FullName(){return this.userForm.get("FullName")}get Email(){return this.userForm.get("Email")}get MobileEnable(){return this.userForm.get("MobileEnable")}get PortalEnable(){return this.userForm.get("PortalEnable")}get PhoneNumber(){return this.userForm.get("PhoneNumber")}get UserImageBase64string(){return this.userForm.get("UserImageBase64string")}getUserDetail(t){this.userService.getUserListByUserId(t).subscribe({next:o=>{this.userData=o.data,this.getAccessGroup(this.userData.roleId),this.userForm.patchValue({FullName:this.userData.fullName,Email:this.userData.email,roleId:this.userData.roleId,PhoneNumber:this.userData.phoneNumber,AccessGroupId:this.userData.accessGroupId,MobileEnable:this.userData.mobileEnable,PortalEnable:this.userData.portalEnable}),this.profile_img=this.userData.profileImageUrl?this.imagEUrl+this.userData.profileImageUrl:"../../../../../../assets/images/userClientPlaceholder.png",this.isFirstImageVisible=!!this.userData.profileImageUrl,this.userData.list.forEach(i=>{this.companyList.forEach(n=>{i.companyId==n.companyId&&(this.companyModel.push(Number(i.companyId)),this.companyModel=[...this.companyModel],this.selectedCompanies.push(n))})}),this.getProjectByCompany2(this.selectedCompanies,this.userData.list)}})}getRoleName(t){return this.rolesList.find(o=>t==o.id)}onTypeRole(t){this.AccessGroupId.reset(),this.getAccessGroup(t.id)}getRoles(){this.userService.GetRoleList().subscribe({next:t=>{this.rolesList=t.data}})}getAccessGroup(t){this.loading.accessGroup=!0,this.userService.GetAccessGroupListByAccessGroupId(t).subscribe({next:o=>{this.loading.accessGroup=!1,this.accessGroupList=o.data}})}getCompanyDropDownList(){this.userService.getCompanyExistWithDepartmentList({}).subscribe({next:t=>{this.companyList=t.list,this.getUserDetail(m.i.selectedUserId)}})}getProjectByCompany2(t,o=[]){this.selectedCompanyAccessLevelArray=[],t.forEach((i,n)=>{this.departmentService.getDepartmentTableList_LocalPagination({SearchCompanyId:i.companyId}).subscribe({next:s=>{0==s.list.length?(this.selectedCompanies.forEach((h,f)=>{h.companyId==i.companyId&&(this.companyModel.splice(f,1),this.companyModel=[...this.companyModel],this.selectedCompanies.splice(f,1))}),this.noDepartmentModalPopUpOpen()):this.selectedCompanyAccessLevelArray.push({company:i,projectList:s.list,selectedList:o[n]?o[n]?.departmentId.split(",").map(Number):[]}),0!=this.userData.list.length&&(this.userData.list.forEach(h=>{this.selectedCompanyAccessLevelArray.forEach((f,C)=>{f.company.companyId===h.companyId&&(f.selectedList=h.departmentId?h.departmentId.split(",").map(Number):[])})}),this.localStoreDepartmentId=this.selectedCompanyAccessLevelArray.slice())}})})}getProjectByCompany(t,o=[]){this.selectedCompanyAccessLevelArray=[],t.forEach((i,n)=>{this.departmentService.getDepartmentTableList_LocalPagination({SearchCompanyId:i.companyId}).subscribe({next:s=>{0==s.list.length?(this.selectedCompanies.forEach((h,f)=>{h.companyId==i.companyId&&(this.companyModel.splice(f,1),this.companyModel=[...this.companyModel],this.selectedCompanies.splice(f,1))}),this.noDepartmentModalPopUpOpen()):(this.selectedCompanyAccessLevelArray.push({company:i,projectList:s.list,selectedList:o[n]?o[n]?.departmentId.split(",").map(Number):[]}),this.localStoreDepartmentId.length&&this.localStoreDepartmentId.forEach(h=>{this.selectedCompanyAccessLevelArray.forEach((f,C)=>{f.company.companyId===h.company.companyId&&(f.selectedList=h.selectedList)})}))}})})}get form(){return this.userForm.controls}checkDeparmentAccess(t,o,i){t.target.checked?this.selectedCompanyAccessLevelArray[i].selectedList.push(o):this.selectedCompanyAccessLevelArray[i].selectedList.splice(this.selectedCompanyAccessLevelArray[i].selectedList.indexOf(o),1),this.localStoreDepartmentId=this.selectedCompanyAccessLevelArray.slice()}returnValue(t,o){return this.selectedCompanyAccessLevelArray[o].selectedList.includes(t)}returnaSelectAll(t){return this.selectedCompanyAccessLevelArray[t].selectedList.length===this.selectedCompanyAccessLevelArray[t].projectList.length}checkSelectedAll(t,o){this.selectedCompanyAccessLevelArray[o].selectedList=[],t.target.checked?this.selectedCompanyAccessLevelArray[o].projectList.map(i=>{this.selectedCompanyAccessLevelArray[o].selectedList.push(i.departmentId)}):this.selectedCompanyAccessLevelArray[o].selectedList=[],this.localStoreDepartmentId=this.selectedCompanyAccessLevelArray.slice()}onTypeAccessGroup(t){}onTypeCompany(t){this.selectedCompanies=t,this.companyModel=[...this.companyModel],this.getProjectByCompany(t)}updatePerspon(){const t={Id:this.userData.id,Role:this.getRoleName(this.roleId.value).name,AccessGroupId:this.AccessGroupId.value?this.AccessGroupId.value:null,UserName:this.Email.value?this.Email.value:null,Email:this.Email.value?this.Email.value:null,FullName:this.FullName.value?this.FullName.value:null,PhoneNumber:this.PhoneNumber.value?this.PhoneNumber.value+"":null,MobileEnable:this.MobileEnable.value,PortalEnable:this.PortalEnable.value,RoleId:this.roleId.value};this.userService.postUpdateUserBasicDetail(t).subscribe({next:o=>{this.success(o),this.router.navigate(["/application-settings/user-management/user/list"])}})}updateUserDataAccessLevel(){const t={Id:this.userData.id,list:[]};this.selectedCompanyAccessLevelArray.forEach(o=>{const i={DepartmentId:o.selectedList.join(","),CompanyId:o.company.companyId,AccessLevel:"D"};t.list.push(i)}),this.userService.postUpdateCompanyDepartmentAccessLevel(t).subscribe({next:o=>{this.success(o),this.router.navigate(["/application-settings/user-management/user/list"])}})}goBack(){this.router.navigate(["/application-settings/user-management/user/list"])}success(t){_().fire({toast:!0,position:"top-end",icon:"success",title:t.message,showConfirmButton:!1,timer:3e3})}noDepartmentModalPopUpOpen(){this.modalService.open(this.noDepartmentModalPopUp,{backdrop:"static",keyboard:!1,centered:!0}).result.then(t=>{},t=>{})}openModalDeleteConf(t){const o=this.modalService.open(k.z,{ariaLabelledBy:"modal-basic-title",size:"md",centered:!0,backdrop:"static",keyboard:!1});o.componentInstance.title="You are about to delete a Profile Image?",o.componentInstance.subTitle="Deleting your Profile Image will remove for the database",o.result.then(i=>{i&&"delete"==i&&this.crossFirstImage(t)})}crossFirstImage(t){t&&(this.profile_img="../../../../../../assets/images/userClientPlaceholder.png",this.isFirstImageVisible=!1,this.resetFileInput(),this.saveImage())}resetFileInput(){const t=document.getElementById("asset_id0");t&&(t.value="")}onSelectFile(t){if(t.target.files&&t.target.files[0]){var o=new FileReader;o.readAsDataURL(t.target.files[0]),o.onload=i=>{this.profile_img=i.target.result,this.UserImageBase64string.setValue(""),this.profile_img&&(this.isFirstImageVisible=!0),this.saveImage()}}}saveImage(){let t={Id:this.userData.id,UserLogoBase64string:"../../../../../../assets/images/userClientPlaceholder.png"!==this.profile_img?this.profile_img.replace(/^data:image\/[a-z]+;base64,/,""):null};this.userService.postUpdateProfileLogo(this.commonFunctionService.clean(t)).subscribe(o=>{this.successForImageInsert(o)})}successForImageInsert(t){_().fire({toast:!0,position:"top-end",icon:"success",title:t.message,showConfirmButton:!1,timer:3e3})}checkThatObjectSelectedAccess(){return!this.selectedCompanyAccessLevelArray.length||this.selectedCompanyAccessLevelArray.some(o=>0===o.selectedList.length)}static{this.\u0275fac=function(o){return new(o||a)(e.Y36(c.qu),e.Y36(m.i),e.Y36(d.V),e.Y36(v.n),e.Y36(u.F0),e.Y36(g.FF),e.Y36(w.K))}}static{this.\u0275cmp=e.Xpm({type:a,selectors:[["app-edit-new-user"]],viewQuery:function(o,i){if(1&o&&e.Gf(Ie,7),2&o){let n;e.iGM(n=e.CRH())&&(i.noDepartmentModalPopUp=n.first)}},decls:96,vars:39,consts:[[3,"title","breadcrumbItems"],[1,""],[1,"mt-2","card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body"],[3,"formGroup"],[1,"row"],[1,"col-sm-10"],[1,"row","p-0"],[1,"col-md-4"],["for","Project-Name",1,"form-label"],[1,"text-danger"],["type","text","formControlName","FullName","id","fullName","name","fullName",1,"form-control","my-1",3,"placeholder","ngClass"],[4,"ngIf"],["for","HOD",1,"form-label"],["type","email","placeholder","Email","readonly","","formControlName","Email","id","email","name","email",1,"form-control","my-1",3,"ngClass"],["for","phoneNumber",1,"form-label"],["type","number","placeholder","Phone Number","formControlName","PhoneNumber","id","phoneNumber","name","PhoneNumber",1,"form-control","my-1",3,"ngClass"],[1,"col-md-4","mt-3"],["for","roleId",1,"form-label"],["bindLabel","name","bindValue","id","id","roleId","formControlName","roleId","placeholder","Select Role",1,"w-100","mr-2","my-1",3,"items","loading","clearable","change"],["for","AccessGroupId",1,"form-label"],["bindLabel","name","bindValue","accessGroupMasterId","id","AccessGroupId","formControlName","AccessGroupId","placeholder","Select Access Group",1,"w-100","mr-2","my-1",3,"items","loading","clearable","readonly","change"],["for","Client",1,"form-label"],[1,"row","mt-3"],[1,"col-6"],[1,"form-check"],["type","checkbox","value","Portal","formControlName","PortalEnable","id","Portal",1,"form-check-input"],["for","Portal",1,"form-check-label"],["type","checkbox","value","Mobile","formControlName","MobileEnable","id","Mobile",1,"form-check-input"],["for","Mobile",1,"form-check-label"],[1,"col-sm-2","textcenter"],[1,"form-label"],[1,"textcenter","mt-2"],[1,"position-relative","d-inline-block"],[1,"position-absolute","top-100","start-100","translate-middle"],["class","mb-0","placement","left","ngbTooltip","Remove Image",4,"ngIf"],["for","asset_id0","class","mb-0","placement","left","ngbTooltip","Select Image",4,"ngIf"],["formControlName","UserImageBase64string","value","","id","asset_id0","type","file","accept","image/png, image/gif, image/jpeg",1,"form-control","d-none",3,"change"],[1,"avatar-lg"],[1,"avatar-title","bg-light","rounded"],["id","product-img",1,"avatar-md","img-size-fixed",3,"src"],[1,"card-footer","d-flex","justify-content-end"],[1,"btn","btn-success",3,"disabled","click"],[1,"card"],[1,"col-sm-6"],["bindLabel","companyName","bindValue","companyId","id","companyName","placeholder","Select Companies",1,"w-100","mr-2","my-1",3,"items","loading","clearable","multiple","ngModel","change","ngModelChange"],[1,"col-12"],["class","col-12 mt-3 pt-3 border-top",4,"ngFor","ngForOf"],[1,"btn","btn-soft-primary","waves-effect","back-button","me-2",3,"click"],["noDepartmentModalPopUp",""],["class","text-danger",4,"ngIf"],["placement","left","ngbTooltip","Remove Image",1,"mb-0"],[1,"avatar-xs"],[1,"avatar-title","bg-light","border","rounded-circle","text-muted","cursor-pointer"],[1,"ri-close-circle-fill",3,"click"],["for","asset_id0","placement","left","ngbTooltip","Select Image",1,"mb-0"],[1,"ri-image-fill"],[1,"col-12","mt-3","pt-3","border-top"],[1,"text-small"],["type","checkbox","value","",1,"form-check-input",3,"id","checked","change"],[1,"form-check-label",3,"for"],[1,"mt-2"],["class","col-sm-4 mt-2",4,"ngFor","ngForOf"],[1,"col-sm-4","mt-2"],["type","checkbox",1,"form-check-input",3,"checked","id","change"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"text-center"],["src","https://cdn.lordicon.com/tdrtiskw.json","trigger","loop","colors","primary:#f06548,secondary:#f7b84b",2,"width","120px","height","120px"],[1,"mt-2","fs-15","text-center"],[1,"text-muted","mx-4","mb-0"],[1,"mx-3","mb-0"],[1,"pt-0","fs-15"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","button","aria-label","",1,"swal2-cancel","btn","btn-primary","w-xs","mb-1",2,"display","inline-block",3,"click"]],template:function(o,i){1&o&&(e._UZ(0,"app-breadcrumbs",0),e.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),e._uU(5,"Basic Detail \xa0"),e.qZA()(),e.TgZ(6,"div",5)(7,"form",6)(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"label",11),e._uU(13,"Full Name "),e.TgZ(14,"span",12),e._uU(15,"*"),e.qZA()(),e._UZ(16,"input",13),e.YNc(17,ke,2,1,"div",14),e.qZA(),e.TgZ(18,"div",10)(19,"label",15),e._uU(20,"Email "),e.TgZ(21,"span",12),e._uU(22,"*"),e.qZA()(),e._UZ(23,"input",16),e.YNc(24,Le,2,1,"div",14),e.qZA(),e.TgZ(25,"div",10)(26,"label",17),e._uU(27,"Phone Number "),e.TgZ(28,"span",12),e._uU(29,"*"),e.qZA()(),e._UZ(30,"input",18),e.YNc(31,xe,2,1,"div",14),e.qZA(),e.TgZ(32,"div",19)(33,"label",20),e._uU(34,"Role "),e.TgZ(35,"span",12),e._uU(36,"*"),e.qZA()(),e.TgZ(37,"ng-select",21),e.NdJ("change",function(s){return i.onTypeRole(s)}),e.qZA(),e.YNc(38,Se,3,0,"div",14),e.qZA(),e.TgZ(39,"div",19)(40,"label",22),e._uU(41,"Access Group "),e.TgZ(42,"span",12),e._uU(43,"*"),e.qZA()(),e.TgZ(44,"ng-select",23),e.NdJ("change",function(s){return i.onTypeAccessGroup(s)}),e.qZA(),e.YNc(45,qe,3,0,"div",14),e.qZA(),e.TgZ(46,"div",19)(47,"label",24),e._uU(48,"Device Access"),e.qZA(),e.TgZ(49,"div",25)(50,"div",26)(51,"div",27),e._UZ(52,"input",28),e.TgZ(53,"label",29),e._uU(54," Portal "),e.qZA()()(),e.TgZ(55,"div",26)(56,"div",27),e._UZ(57,"input",30),e.TgZ(58,"label",31),e._uU(59," Mobile "),e.qZA()()()()()()(),e.TgZ(60,"div",32)(61,"label",33),e._uU(62,"Profile Image"),e.qZA(),e.TgZ(63,"div",34)(64,"div",35)(65,"div",36),e.YNc(66,Ee,4,0,"label",37)(67,Fe,4,0,"label",38),e.TgZ(68,"input",39),e.NdJ("change",function(s){return i.onSelectFile(s)}),e.qZA()(),e.TgZ(69,"div",40)(70,"div",41),e._UZ(71,"img",42),e.qZA()()()()()()()(),e.TgZ(72,"div",43)(73,"button",44),e.NdJ("click",function(){return i.updatePerspon()}),e._uU(74," Update "),e.qZA()()(),e.TgZ(75,"div",45)(76,"div",3)(77,"h4",4),e._uU(78,"Data Access Level \xa0"),e.qZA()(),e.TgZ(79,"div",5)(80,"div",7)(81,"div",46)(82,"label",24),e._uU(83,"Company "),e.TgZ(84,"span",12),e._uU(85,"*"),e.qZA()(),e.TgZ(86,"ng-select",47),e.NdJ("change",function(s){return i.onTypeCompany(s)})("ngModelChange",function(s){return i.companyModel=s}),e.qZA()(),e._UZ(87,"div",48),e.YNc(88,je,13,5,"div",49),e.qZA()(),e.TgZ(89,"div",43)(90,"button",50),e.NdJ("click",function(){return i.goBack()}),e._uU(91," Back "),e.qZA(),e.TgZ(92,"button",44),e.NdJ("click",function(){return i.updateUserDataAccessLevel()}),e._uU(93," Update "),e.qZA()()()(),e.YNc(94,Re,23,0,"ng-template",null,51,e.W1O)),2&o&&(e.Q6J("title",i.label)("breadcrumbItems",i.breadCrumbItems),e.xp6(7),e.Q6J("formGroup",i.userForm),e.xp6(9),e.Q6J("placeholder","Full Name")("ngClass",e.VKq(33,M,i.form.FullName.invalid&&i.form.FullName.touched)),e.xp6(1),e.Q6J("ngIf",i.form.FullName.invalid&&i.form.FullName.touched),e.xp6(6),e.Q6J("ngClass",e.VKq(35,M,i.form.Email.invalid&&i.form.Email.touched)),e.xp6(1),e.Q6J("ngIf",i.form.Email.invalid&&i.form.Email.touched),e.xp6(6),e.Q6J("ngClass",e.VKq(37,M,i.form.PhoneNumber.invalid&&i.form.PhoneNumber.touched)),e.xp6(1),e.Q6J("ngIf",i.form.PhoneNumber.invalid&&i.form.PhoneNumber.touched),e.xp6(6),e.Q6J("items",i.rolesList)("loading",i.loading.role)("clearable",!1)("clearable",!1),e.xp6(1),e.Q6J("ngIf",i.form.roleId.invalid&&i.form.roleId.touched),e.xp6(6),e.Q6J("items",i.accessGroupList)("loading",i.loading.accessGroup)("clearable",!1)("readonly",!i.form.roleId.value)("clearable",!1),e.xp6(1),e.Q6J("ngIf",i.form.AccessGroupId.invalid&&i.form.AccessGroupId.touched),e.xp6(21),e.Q6J("ngIf",i.isFirstImageVisible),e.xp6(1),e.Q6J("ngIf",!i.isFirstImageVisible),e.xp6(4),e.s9C("src",i.profile_img,e.LSH),e.xp6(2),e.Q6J("disabled",i.userForm.invalid),e.xp6(13),e.Q6J("items",i.companyList)("loading",i.loading.accessGroup)("clearable",!1)("multiple",!0)("ngModel",i.companyModel)("clearable",!1),e.xp6(2),e.Q6J("ngForOf",i.selectedCompanyAccessLevelArray),e.xp6(4),e.Q6J("disabled",i.checkThatObjectSelectedAccess()))},dependencies:[r.mk,r.sg,r.O5,c._Y,c.Fj,c.wV,c.Wl,c.JJ,c.JL,c.On,c.sg,c.u,N.w9,D.n,g._L],styles:[".text-small[_ngcontent-%COMP%]{font-size:.7rem;font-weight:400}.textcenter[_ngcontent-%COMP%]{text-align:center}@media only screen and (max-width: 600px){.textcenter[_ngcontent-%COMP%]{text-align:left!important}}"]})}}return a})();var x=p(3828);function Ge(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"p",36),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openModalConNofication(i.userData))}),e._uU(1," Send Activation Code "),e.qZA()}}function Oe(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"tr")(1,"th",26)(2,"div",37)(3,"input",38),e.NdJ("ngModelChange",function(i){const s=e.CHM(t).$implicit;return e.KtG(s.checked=i)})("change",function(i){const s=e.CHM(t).index,h=e.oxw();return e.KtG(h.checkTheEmailNotificationValue(i,s))}),e.qZA(),e.TgZ(4,"label",39),e._uU(5),e.qZA()()(),e.TgZ(6,"td",22),e._uU(7," : "),e.TgZ(8,"span",27),e._uU(9),e.qZA()()()}if(2&a){const t=l.$implicit;e.xp6(3),e.s9C("value",t.name),e.s9C("id",t.name),e.Q6J("ngModel",t.checked),e.xp6(1),e.s9C("for",t.name),e.xp6(1),e.hij(" ",t.name," "),e.xp6(3),e.Q6J("ngClass",t.checked?"bg-primary":"bg-danger"),e.xp6(1),e.Oqu(t.checked?"Yes":"No")}}function Je(a,l){if(1&a&&(e.TgZ(0,"a",44),e._uU(1),e.qZA()),2&a){const t=l.$implicit,o=e.oxw(2);e.xp6(1),e.Oqu(o.projectList[t])}}function Qe(a,l){if(1&a&&(e.TgZ(0,"div",40)(1,"h4"),e._uU(2),e.qZA(),e.TgZ(3,"p")(4,"b"),e._uU(5),e.qZA()(),e.TgZ(6,"div",41)(7,"div",42),e.YNc(8,Je,2,1,"a",43),e.qZA()()()),2&a){const t=l.$implicit,o=e.oxw();e.xp6(2),e.Oqu(o.companyList[t.companyId]),e.xp6(3),e.hij("",o.isProject?"Project":"Department"," "),e.xp6(3),e.Q6J("ngForOf",t.departmentId.split(","))}}function Be(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"div",45)(1,"div",46)(2,"input",47),e.NdJ("change",function(i){const s=e.CHM(t).index,h=e.oxw();return e.KtG(h.changesMyTaskRulesActive(i,s))})("ngModelChange",function(i){const s=e.CHM(t).$implicit;return e.KtG(s.checked=i)}),e.qZA(),e.TgZ(3,"label",39),e._uU(4),e.qZA()()()}if(2&a){const t=l.$implicit;e.xp6(2),e.s9C("value",t.type),e.s9C("id",t.type),e.Q6J("ngModel",t.checked),e.xp6(1),e.s9C("for",t.type),e.xp6(1),e.hij(" ",t.name," ")}}function ze(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"label",44)(1,"div",45)(2,"div",46)(3,"i",47),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openModalDeleteConfimage(i.profile_img))}),e.qZA()()()()}}function Ke(a,l){1&a&&(e.TgZ(0,"label",48)(1,"div",45)(2,"div",46),e._UZ(3,"i",49),e.qZA()()())}function We(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"p",50),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.openModalConNofication(i.userData))}),e._uU(1," Send Activation Code "),e.qZA()}}function He(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"tr")(1,"th",34)(2,"div",51)(3,"input",52),e.NdJ("ngModelChange",function(i){const s=e.CHM(t).$implicit;return e.KtG(s.checked=i)}),e.qZA(),e.TgZ(4,"label",53),e._uU(5),e.qZA()()(),e.TgZ(6,"td",30),e._uU(7," : "),e.TgZ(8,"span",35),e._uU(9),e.qZA()()()}if(2&a){const t=l.$implicit;e.xp6(3),e.s9C("value",t.name),e.s9C("id",t.name),e.Q6J("disabled",!0)("ngModel",t.checked),e.xp6(1),e.s9C("for",t.name),e.xp6(1),e.hij(" ",t.name," "),e.xp6(3),e.Q6J("ngClass",t.checked?"bg-primary":"bg-danger"),e.xp6(1),e.Oqu(t.checked?"Yes":"No")}}function $e(a,l){if(1&a&&(e.TgZ(0,"a",58),e._uU(1),e.qZA()),2&a){const t=l.$implicit,o=e.oxw(2);e.xp6(1),e.Oqu(o.projectList[t])}}function Xe(a,l){if(1&a&&(e.TgZ(0,"div",54)(1,"h4"),e._uU(2),e.qZA(),e.TgZ(3,"p")(4,"b"),e._uU(5),e.qZA()(),e.TgZ(6,"div",55)(7,"div",56),e.YNc(8,$e,2,1,"a",57),e.qZA()()()),2&a){const t=l.$implicit,o=e.oxw();e.xp6(2),e.Oqu(o.companyList[t.companyId]),e.xp6(3),e.hij("",o.isProject?"Project":"Department"," "),e.xp6(3),e.Q6J("ngForOf",t.departmentId.split(","))}}function et(a,l){if(1&a){const t=e.EpF();e.TgZ(0,"div",59)(1,"div",60)(2,"input",61),e.NdJ("ngModelChange",function(i){const s=e.CHM(t).$implicit;return e.KtG(s.checked=i)}),e.qZA(),e.TgZ(3,"label",53),e._uU(4),e.qZA()()()}if(2&a){const t=l.$implicit;e.xp6(2),e.s9C("value",t.type),e.s9C("id",t.type),e.Q6J("disabled",!0)("ngModel",t.checked),e.xp6(1),e.s9C("for",t.type),e.xp6(1),e.hij(" ",t.name," ")}}const tt=[{path:"",pathMatch:"full",redirectTo:"list"},{path:"list",component:Ue},{path:"add",component:z},{path:"edit",component:Ve},{path:"view",component:(()=>{class a{constructor(t,o,i,n,s,h,f,C){this.userService=t,this.dropDownService=o,this.departmentService=i,this.commonFunctionService=n,this.authAssetService=s,this.router=h,this.modalService=f,this.lightbox=C,this.productionUrl=U.N.apiUrl,this.userData={},this.companyList=[],this.rolesList={},this.accessGroupList={},this.projectList={},this.titleAndContentArrayCreated={},this.titleAndContentArrayDelete={},this.portalArrayList=[{name:"First Level Support",checked:!1},{name:"Notification of Service Order Initiation",checked:!1},{name:"Notification of Request New Quotation",checked:!1},{name:"Notification of Incident Report Signature Authorization",checked:!1},{name:"Notification of Quotation Rejected",checked:!1},{name:"Notification of Quotation Approved",checked:!1},{name:"Notification of Ticket Acknowledgement",checked:!1},{name:"Notification of Ticket Verification Request",checked:!1},{name:"Notification for Schedule Maintenance Completion By Admin",checked:!1},{name:"Notification for Audit Completion Acknowledgement  Admin",checked:!1},{name:"Notification of Close Ticket Request Internal",checked:!1}],this.myTaskRulesActiveCount=[],0==m.i.selectedUserId||null==m.i.selectedUserId||null==!m.i.selectedUserId?this.router.navigate(["/application-settings/user-management/user/list"]):(this.isProject=this.authAssetService.getisProject(),this.getUserDetail(m.i.selectedUserId),this.getCompanyDropDownList(),this.getV2_V2_EmailNotificationList(m.i.selectedUserId),this.getV2_MyTaskRulesActiveCountByUserId(m.i.selectedUserId))}ngOnInit(){this.maketheJsonArrayOfShowingTitle(),this.myTaskRulesActiveCount=[{name:"New Ticket Queue",type:"newTicket",checked:!1},{name:"Create Quotation",type:"awaitQuotation",checked:!1},{name:"Service Order Generation",type:"generateNewSO",checked:!1},{name:"Assign Member & Site Visit Date Time",type:"expectedStartTaskDateTime",checked:!1},{name:"Tech Signature Required",type:"techSignatureRequired",checked:!1},{name:"Client Signature Required",type:"clientSignatureRequired",checked:!1},{name:"Closing Ticket Status (Internal)",type:"pendingForCloseTicketProcessInternal",checked:!1},{name:"Quotation To Proceed Finance",type:"quotationToProceedFinance",checked:!1},{name:"Quotation Rejected",type:"quotationRejected",checked:!1},{name:"Ticket Acknowledgement",type:"ticketAcknowledgmentRequest",checked:!1},{name:"Ticket Verification",type:"ticketVerificationForAcknowledgeProcess",checked:!1},{name:"Schedule Completion Acknowlegement Admin",type:"pmScheduleCompletionAcknowlegementAdmin",checked:!1},{name:"Audit Completion Acknowledgement  Admin",type:"auditCompletionAcknowlegementAdmin",checked:!1}]}clickSend(t){this.userService.getRequestActivationCode({FullName:t.fullName,EmailId:t.email}).subscribe(i=>{this.success(i),this.getUserDetail(m.i.selectedUserId),this.getCompanyDropDownList(),this.getV2_V2_EmailNotificationList(m.i.selectedUserId),this.getV2_MyTaskRulesActiveCountByUserId(m.i.selectedUserId)})}getAccessGroup(t){this.userService.GetAccessGroupListByAccessGroupId(t).subscribe({next:o=>{const i={};o.data.forEach(n=>{i[n.accessGroupMasterId]=n.name}),this.accessGroupList=i}})}getUserDetail(t){this.userService.getUserListByUserId(t).subscribe({next:o=>{const i=o.data;this.userData=i,this.getAccessGroup(i.roleId),i.list.forEach(n=>{this.getProjectByCompany(n.companyId)})}})}getCompanyDropDownList(){this.dropDownService.GetCompanyListDrobDown({}).subscribe({next:t=>{const o={};t.list.forEach(i=>{o[i.companyId]=i.companyName}),this.companyList=o}})}getProjectByCompany(t){this.departmentService.getDepartmentTableList_LocalPagination({SearchCompanyId:t}).subscribe({next:o=>{const i={};o.list.forEach(n=>{i[n.departmentId]=n.departmentName}),this.projectList={...this.projectList,...i}}})}goBack(){this.router.navigate(["/application-settings/user-management/user/list"])}getV2_V2_EmailNotificationList(t){this.userService.getV2_V2_EmailNotificationList({userId:t}).subscribe(i=>{this.emailNotificationList=i.data,this.portalArrayList.forEach(n=>{this.emailNotificationList.forEach(s=>{s.action==n.name&&(n.checked=!0)})})})}checkTheEmailNotificationValue(t,o){if(t.target.checked){const i=t.target.value.replace(/ /g,"");this.openModalCreateConf(this.titleAndContentArrayCreated[i],t.target.value,o)}else{const i=t.target.value.replace(/ /g,"");this.openModalDeleteConf(this.titleAndContentArrayDelete[i],t.target.value,o)}}maketheJsonArrayOfShowingTitle(){this.titleAndContentArrayCreated.FirstLevelSupport={title:"Are you sure you want to add this users email for portal notifications in the First Level Support activity? ",subTitle:"This means that for any ticket created,this user will receive both email and portal notifications."},this.titleAndContentArrayDelete.FirstLevelSupport={title:"Are you certain you wish to remove this users email from portal notifications in the First Level Support activity?",subTitle:"This means that for any newly created ticket,this user will no longer receive email and portal notifications."},this.titleAndContentArrayCreated.NotificationofServiceOrderInitiation={title:"Are you sure you want to add this users email for portal notifications in the Notification of Service Order Initiation?",subTitle:"This means that for any ticket created and when it proceeds for service order generation,this user will receive both email and portal notifications."},this.titleAndContentArrayDelete.NotificationofServiceOrderInitiation={title:"Are you sure you want to remove this users email for portal notifications in the Notification of Service Order Initiation? ",subTitle:"This means that for any ticket created and when it proceeds for service order generation,this user will not receive both email and portal notifications."},this.titleAndContentArrayCreated.NotificationofRequestNewQuotation={title:"Are you sure you want to add this users email for portal notifications in the Notification of Request New Quotation? ",subTitle:"This means that for any billable ticket requiring the creation of a quotation,this user will receive both email and portal notifications."},this.titleAndContentArrayDelete.NotificationofRequestNewQuotation={title:"Are you sure you want to remove this users email for portal notifications in the Notification of Request New Quotation? ",subTitle:"This means that for any billable ticket requiring the creation of a quotation, this user will not receive both email and portal notifications."},this.titleAndContentArrayCreated.NotificationofIncidentReportSignatureAuthorization={title:"Are you sure you want to add this users email for portal notifications in the Notification of Incident Report Signature Authorization? ",subTitle:"This means that when a Billable Service Order or Incident Report task is completed and requires technical authorization for document signing before proceeding to the client for job completion,this user will receive both email and portal notifications."},this.titleAndContentArrayDelete.NotificationofIncidentReportSignatureAuthorization={title:"Are you sure you want to remove this users email for portal notifications in the Notification of Incident Report Signature Authorization? ",subTitle:"This means that when a Billable Service Order or Incident Report task is completed and requires technical authorization for document signing before proceeding to the client for job completion,this user will not receive both email and portal notifications."},this.titleAndContentArrayCreated.NotificationofQuotationRejected={title:"Are you sure you want to add this users email for portal notifications in the Notification of Quotation Rejected? ",subTitle:"This means that when a Quotation Approval task is rejected by a reviewer or approver, the Project Manager or Finance Manager will receive a notification."},this.titleAndContentArrayDelete.NotificationofQuotationRejected={title:"Are you sure you want to remove this users email for portal notifications in the Notification of Quotation Rejected? ",subTitle:"This means that when a Quotation Approval task is rejected by a reviewer or approver, the Project Manager or Finance Manager will receive a notification."},this.titleAndContentArrayCreated.NotificationofQuotationApproved={title:"Are you sure you want to add this users email for portal notifications in the Notification of Quotation Approved? ",subTitle:"This means that when a Quotation Approval task is rejected by a reviewer or approver, the Project Manager or Finance Manager will receive a notification."},this.titleAndContentArrayDelete.NotificationofQuotationApproved={title:"Are you sure you want to remove this users email for portal notifications in the Notification of Quotation Approved? ",subTitle:"This means that when a Quotation Approval task is rejected by a reviewer or approver, the Project Manager or Finance Manager will receive a notification."},this.titleAndContentArrayCreated.NotificationofTicketAcknowledgement={title:"Are you sure you want to add this users email for portal notifications in the Notification of Ticket Acknowledgement? ",subTitle:"This means that when a Quotation Approval task is rejected by a reviewer or approver, the Project Manager or Finance Manager will receive a notification."},this.titleAndContentArrayDelete.NotificationofTicketAcknowledgement={title:"Are you sure you want to remove this users email for portal notifications in the Notification of Ticket Acknowledgement? ",subTitle:"This means that when a Quotation Approval task is rejected by a reviewer or approver, the Project Manager or Finance Manager will receive a notification."},this.titleAndContentArrayCreated.NotificationofTicketVerificationRequest={title:"Are you sure you want to add this users email for portal notifications in the   Notification of Ticket Verification Request? ",subTitle:"This means that when a Quotation Approval task is rejected by a reviewer or approver, the Project Manager or Finance Manager will receive a notification."},this.titleAndContentArrayDelete.NotificationofTicketVerificationRequest={title:"Are you sure you want to remove this users email for portal notifications in the   Notification of Ticket Verification Request? ",subTitle:"This means that when a Quotation Approval task is rejected by a reviewer or approver, the Project Manager or Finance Manager will receive a notification."},this.titleAndContentArrayCreated.NotificationforScheduleMaintenanceCompletionByAdmin={title:"Are you sure you want to add this users email for portal notifications in the Notification for Schedule Maintenance Completion By Admin? ",subTitle:"Scheduled maintenance completion by the administrator means that upon successful execution of the maintenance tasks, the designated administrators or relevant personnel will be notified, ensuring effective communication and awareness of the completed maintenance activities."},this.titleAndContentArrayDelete.NotificationforScheduleMaintenanceCompletionByAdmin={title:"Are you sure you want to remove this users email for portal notifications in the Notification for Schedule Maintenance Completion By Admin? ",subTitle:"When a deletion task is successfully executed by the administrator, the designated administrators or relevant personnel will be notified. This notification ensures effective communication and awareness of the completed deletion activities"},this.titleAndContentArrayCreated.NotificationforAuditCompletionAcknowlegementAdmin={title:"Are you sure you want to add this users email for portal notifications in the Notification for Audit Completion Acknowledgement  Admin? ",subTitle:"Scheduled maintenance completion by the administrator means that upon successful execution of the maintenance tasks, the designated administrators or relevant personnel will be notified, ensuring effective communication and awareness of the completed maintenance activities."},this.titleAndContentArrayDelete.NotificationforAuditCompletionAcknowlegementAdmin={title:"Are you sure you want to remove this users email for portal notifications in the Notification for Audit Completion Acknowledgement  Admin? ",subTitle:"When a deletion task is successfully executed by the administrator, the designated administrators or relevant personnel will be notified. This notification ensures effective communication and awareness of the completed deletion activities"},this.titleAndContentArrayCreated.NotificationofCloseTicketRequestInternal={title:"Are you sure you want to add this users email for portal notifications in the Notification of  Close Ticket Request Internal? ",subTitle:"This means that when a Billable Service Order or Incident Report task is completed and requires technical authorization for document signing before proceeding to the client for job completion,this user will receive both email and portal notifications."},this.titleAndContentArrayDelete.NotificationofCloseTicketRequestInternal={title:"Are you sure you want to remove this users email for portal notifications in the  Notification of Close Ticket Request Internal? ",subTitle:"This means that when a Billable Service Order or Incident Report task is completed and requires technical authorization for document signing before proceeding to the client for job completion,this user will not receive both email and portal notifications."}}openModalDeleteConf(t,o,i){const n=this.modalService.open(k.z,{ariaLabelledBy:"modal-basic-title",size:"md",centered:!0,backdrop:"static",keyboard:!1});n.componentInstance.title=t.title,n.componentInstance.subTitle=t.subTitle,n.result.then(s=>{s&&("delete"==s?this.deleteV2_EmailNotification(o):this.portalArrayList[i].checked=!0)})}openModalConNofication(t){const i=this.modalService.open(y.l,{ariaLabelledBy:"modal-basic-title",size:"md",centered:!0,backdrop:"static",keyboard:!1});i.componentInstance.title="Please confirm that you want to email this user a notification link ",i.componentInstance.subTitle="",i.result.then(n=>{n&&"success"==n&&this.clickSend(t)})}openModalCreateConf(t,o,i){const n=this.modalService.open(y.l,{ariaLabelledBy:"modal-basic-title",size:"md",centered:!0,backdrop:"static",keyboard:!1});n.componentInstance.title=t.title,n.componentInstance.subTitle=t.subTitle,n.result.then(s=>{s&&("success"==s?this.createV2_EmailNotification(o):this.portalArrayList[i].checked=!1)})}deleteV2_EmailNotification(t){this.userService.deleteV2_EmailNotification({UserId:m.i.selectedUserId,Action:t}).subscribe(i=>{this.getV2_V2_EmailNotificationList(m.i.selectedUserId),this.success(i)})}createV2_EmailNotification(t){this.userService.createV2_EmailNotification({UserId:m.i.selectedUserId,Action:t}).subscribe(i=>{this.getV2_V2_EmailNotificationList(m.i.selectedUserId),this.success(i)})}success(t){_().fire({toast:!0,position:"top-end",icon:"success",title:t.message,showConfirmButton:!1,timer:3e3})}getV2_MyTaskRulesActiveCountByUserId(t){this.userService.getV2_MyTaskRulesActiveCountByUserId({userId:t}).subscribe(i=>{this.myTaskRulesActiveCount.forEach(n=>{Object.keys(i.data).forEach(s=>{s==n.type&&(n.checked=i.data[s])})})})}changesMyTaskRulesActive(t,o){this.myTaskRulesActiveCount[o].checked=t.target.checked,this.openModalCreateMyTask(o,t.target.checked)}openModalCreateMyTask(t,o){const i=this.modalService.open(y.l,{ariaLabelledBy:"modal-basic-title",size:"md",centered:!0,backdrop:"static",keyboard:!1});i.componentInstance.title="Are you Sure to Update My Task ",i.componentInstance.subTitle="",i.result.then(n=>{n&&("success"==n?this.updateTaskRuleActive():this.myTaskRulesActiveCount[t].checked=!o)})}updateTaskRuleActive(){let t={userId:m.i.selectedUserId};this.myTaskRulesActiveCount.forEach(o=>{t[o.type]=o.checked}),this.userService.updateV2_MX_MyTaskRights(t).subscribe(o=>{this.getV2_MyTaskRulesActiveCountByUserId(m.i.selectedUserId),this.success(o)})}open(t){let i=[];i.push({src:t,caption:"",thumb:"thumb"}),this.lightbox.open(i)}static{this.\u0275fac=function(o){return new(o||a)(e.Y36(m.i),e.Y36(d.V),e.Y36(v.n),e.Y36(w.K),e.Y36(x.u),e.Y36(u.F0),e.Y36(g.FF),e.Y36(Z.ey))}}static{this.\u0275cmp=e.Xpm({type:a,selectors:[["app-view-new-user"]],decls:92,vars:15,consts:[[1,"user-detail","profile-foreground","position-relative","mx-n4","mt-n4"],[1,"profile-wid-bg"],["src","assets/images/profile-bg.jpg","alt","",1,"profile-wid-img"],[1,"pt-4","mb-4","mb-lg-3","px-4","pb-lg-4","profile-wrapper"],[1,"row","g-4"],[1,"col-auto"],["alt","user-img",1,"rounded","avatar-lg",3,"src","click"],[1,"col","d-flex","align-items-center"],[1,"p-2"],[1,"text-white","mb-0","fs-35"],[1,"text-white","mb-0","fs-20"],[1,"hstack","text-white-50","gap-1","fs-15"],[1,"ri-shield-fill","me-1","text-white","fs-16","align-middle"],[1,"row","mt-4"],[1,"col-sm-5"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-borderless","mb-0"],["scope","row",1,"w-25"],[1,"text-muted"],[1,"card","mt-4"],[1,"card-header","d-flex","justify-content-between"],["class","text-primary mb-0 cursor text-decoration-underline",3,"click",4,"ngIf"],["scope","row",1,"ps-0","w-10"],[1,"badge","text-uppercase",3,"ngClass"],[4,"ngFor","ngForOf"],[1,"col-sm-7"],[1,"row"],["class","col-12 mb-4",4,"ngFor","ngForOf"],[1,"card","mt-2"],["class","col-sm-4 mb-4",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-end","px-4","mb-3"],[1,"btn","btn-soft-primary","waves-effect","back-button",3,"click"],[1,"text-primary","mb-0","cursor","text-decoration-underline",3,"click"],[1,"form-check","form-check-outline","form-check-primary"],["type","checkbox",1,"form-check-input","me-2",3,"ngModel","value","id","ngModelChange","change"],[1,"form-check-label","labelforCheckbox",3,"for"],[1,"col-12","mb-4"],[1,"mt-2"],[1,"d-flex","flex-wrap","gap-2","fs-15"],["href","javascript:void(0);","class","badge bg-primary-subtle text-primary",4,"ngFor","ngForOf"],["href","javascript:void(0);",1,"badge","bg-primary-subtle","text-primary"],[1,"col-sm-4","mb-4"],[1,"form-check","topDisplay"],["type","checkbox",1,"form-check-input","me-2","p-2",3,"ngModel","value","id","change","ngModelChange"]],template:function(o,i){1&o&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"img",2),e.qZA(),e.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"img",6),e.NdJ("click",function(){return i.open(i.userData.profileImageUrl?i.productionUrl+i.userData.profileImageUrl:"../../../../../../../assets/images/userClientPlaceholder.png")}),e.qZA()(),e.TgZ(7,"div",7)(8,"div",8)(9,"h3",9),e._uU(10),e.qZA(),e.TgZ(11,"p",10),e._uU(12),e.qZA(),e.TgZ(13,"div",11),e._UZ(14,"i",12),e._uU(15),e.qZA()()()(),e.TgZ(16,"div",13)(17,"div",14)(18,"div",15)(19,"div",16)(20,"h4",17),e._uU(21,"Contact Information \xa0"),e.qZA()(),e.TgZ(22,"div",18)(23,"div",19)(24,"table",20)(25,"tbody")(26,"tr")(27,"th",21),e._uU(28,"Mobile Number"),e.qZA(),e.TgZ(29,"td",22),e._uU(30),e.qZA()(),e.TgZ(31,"tr")(32,"th",21),e._uU(33,"Email"),e.qZA(),e.TgZ(34,"td",22),e._uU(35),e.qZA()(),e.TgZ(36,"tr")(37,"th",21),e._uU(38,"Username"),e.qZA(),e.TgZ(39,"td",22),e._uU(40),e.qZA()()()()()()(),e.TgZ(41,"div",23)(42,"div",24)(43,"h4",17),e._uU(44,"Mobile Access \xa0"),e.qZA(),e.TgZ(45,"div"),e.YNc(46,Ge,2,0,"p",25),e.qZA()(),e.TgZ(47,"div",18)(48,"div",19)(49,"table",20)(50,"tbody")(51,"tr")(52,"th",26),e._uU(53,"Mobile"),e.qZA(),e.TgZ(54,"td",22),e._uU(55," : "),e.TgZ(56,"span",27),e._uU(57),e.qZA()()()()()()()(),e.TgZ(58,"div",23)(59,"div",16)(60,"h4",17),e._uU(61,"Email And Notification Setup"),e.qZA()(),e.TgZ(62,"div",18)(63,"div",19)(64,"table",20)(65,"tbody")(66,"tr")(67,"th",26),e._uU(68,"Portal Access"),e.qZA(),e.TgZ(69,"td",22),e._uU(70," : "),e.TgZ(71,"span",27),e._uU(72),e.qZA()()(),e.YNc(73,Oe,10,7,"tr",28),e.qZA()()()()()(),e.TgZ(74,"div",29)(75,"div",15)(76,"div",16)(77,"h4",17),e._uU(78,"Access Right \xa0"),e.qZA()(),e.TgZ(79,"div",18)(80,"div",30),e.YNc(81,Qe,9,3,"div",31),e.qZA()()(),e.TgZ(82,"div",32)(83,"div",16)(84,"h4",17),e._uU(85,"My Task"),e.qZA()(),e.TgZ(86,"div",18)(87,"div",30),e.YNc(88,Be,5,5,"div",33),e.qZA()()()()()()(),e.TgZ(89,"div",34)(90,"button",35),e.NdJ("click",function(){return i.goBack()}),e._uU(91," Back "),e.qZA()()),2&o&&(e.xp6(6),e.Q6J("src",i.userData.profileImageUrl?i.productionUrl+i.userData.profileImageUrl:"../../../../../../../assets/images/userClientPlaceholder.png",e.LSH),e.xp6(4),e.Oqu(i.userData.fullName),e.xp6(2),e.hij(" ",i.rolesList[i.userData.roleId]," "),e.xp6(3),e.hij(" ",i.accessGroupList[i.userData.accessGroupId]," "),e.xp6(15),e.hij(": ",i.userData.phoneNumber,""),e.xp6(5),e.hij(": ",i.userData.email,""),e.xp6(5),e.hij(": ",i.userData.userName,""),e.xp6(6),e.Q6J("ngIf",i.userData.mobileEnable),e.xp6(10),e.Q6J("ngClass",i.userData.mobileEnable?"bg-primary":"bg-danger"),e.xp6(1),e.hij(" ",i.userData.mobileEnable?"Yes":"No",""),e.xp6(14),e.Q6J("ngClass",i.userData.portalEnable?"bg-primary":"bg-danger"),e.xp6(1),e.Oqu(i.userData.portalEnable?"Yes":"No"),e.xp6(1),e.Q6J("ngForOf",i.portalArrayList),e.xp6(8),e.Q6J("ngForOf",i.userData.list),e.xp6(7),e.Q6J("ngForOf",i.myTaskRulesActiveCount))},dependencies:[r.mk,r.sg,r.O5,c.Wl,c.JJ,c.On],styles:[".w-10[_ngcontent-%COMP%]{width:10%}.labelforCheckbox[_ngcontent-%COMP%]{font-weight:600;font-size:.875rem}.topDisplay[_ngcontent-%COMP%]{display:flex;align-items:self-start}"]})}}return a})()},{path:"dashboard-user-view",component:(()=>{class a{constructor(t,o,i,n,s,h,f,C){this.userService=t,this.dropDownService=o,this.departmentService=i,this.commonFunctionService=n,this.authAssetService=s,this.router=h,this.modalService=f,this.lightbox=C,this.productionUrl=U.N.apiUrl,this.userData={},this.companyList=[],this.rolesList={},this.accessGroupList={},this.projectList={},this.titleAndContentArrayCreated={},this.titleAndContentArrayDelete={},this.portalArrayList=[{name:"First Level Support",checked:!1},{name:"Notification of Service Order Initiation",checked:!1},{name:"Notification of Request New Quotation",checked:!1},{name:"Notification of Incident Report Signature Authorization",checked:!1},{name:"Notification of Quotation Rejected",checked:!1},{name:"Notification of Quotation Approved",checked:!1},{name:"Notification of Ticket Acknowledgement",checked:!1},{name:"Notification of Ticket Verification Request",checked:!1},{name:"Notification for Schedule Maintenance Completion By Admin",checked:!1},{name:"Notification for Audit Completion Acknowledgement  Admin",checked:!1},{name:"Notification of Close Ticket Request Internal",checked:!1}],this.myTaskRulesActiveCount=[],this.imgUrl=U.N.apiUrl}ngOnInit(){this.isProject=this.authAssetService.getisProject(),this.getUserDetail(this.authAssetService.getUserInfoID()),this.getCompanyDropDownList(),this.getV2_V2_EmailNotificationList(this.authAssetService.getUserInfoID()),this.getV2_MyTaskRulesActiveCountByUserId(this.authAssetService.getUserInfoID()),this.maketheJsonArrayOfShowingTitle(),this.myTaskRulesActiveCount=[{name:"New Ticket Queue",type:"newTicket",checked:!1},{name:"Create Quotation",type:"awaitQuotation",checked:!1},{name:"Service Order Generation",type:"generateNewSO",checked:!1},{name:"Assign Member & Site Visit Date Time",type:"expectedStartTaskDateTime",checked:!1},{name:"Tech Signature Required",type:"techSignatureRequired",checked:!1},{name:"Client Signature Required",type:"clientSignatureRequired",checked:!1},{name:"Closing Ticket Status (Internal)",type:"pendingForCloseTicketProcessInternal",checked:!1},{name:"Quotation To Proceed Finance",type:"quotationToProceedFinance",checked:!1},{name:"Quotation Rejected",type:"quotationRejected",checked:!1},{name:"Ticket Acknowledgement",type:"ticketAcknowledgmentRequest",checked:!1},{name:"Ticket Verification",type:"ticketVerificationForAcknowledgeProcess",checked:!1},{name:"Schedule Completion Acknowlegement Admin",type:"pmScheduleCompletionAcknowlegementAdmin",checked:!1},{name:"Audit Completion Acknowledgement  Admin",type:"auditCompletionAcknowlegementAdmin",checked:!1}]}clickSend(t){this.userService.getRequestActivationCode({FullName:t.fullName,EmailId:t.email}).subscribe(i=>{this.success(i),this.getUserDetail(m.i.selectedUserId),this.getCompanyDropDownList(),this.getV2_V2_EmailNotificationList(m.i.selectedUserId),this.getV2_MyTaskRulesActiveCountByUserId(m.i.selectedUserId)})}getAccessGroup(t){this.userService.GetAccessGroupListByAccessGroupId(t).subscribe({next:o=>{const i={};o.data.forEach(n=>{i[n.accessGroupMasterId]=n.name}),this.accessGroupList=i}})}getUserDetail(t){this.userService.getUserListByUserId(t).subscribe({next:o=>{const i=o.data;this.userData=i,this.profile_img=this.userData.profileImageUrl?this.imgUrl+this.userData.profileImageUrl:"../../../../../../assets/images/userClientPlaceholder.png",this.isFirstImageVisible=!!this.userData.profileImageUrl,this.getAccessGroup(i.roleId),i.list.forEach(n=>{this.getProjectByCompany(n.companyId)})}})}getCompanyDropDownList(){this.dropDownService.GetCompanyListDrobDown({}).subscribe({next:t=>{const o={};t.list.forEach(i=>{o[i.companyId]=i.companyName}),this.companyList=o}})}getProjectByCompany(t){this.departmentService.getDepartmentTableList_LocalPagination({SearchCompanyId:t}).subscribe({next:o=>{const i={};o.list.forEach(n=>{i[n.departmentId]=n.departmentName}),this.projectList={...this.projectList,...i}}})}goBack(){"Super Admin"!=JSON.parse(localStorage.getItem("currentUser")).role&&("Client User"===JSON.parse(localStorage.getItem("currentUser")).role?this.router.navigate(["/maintenace-management/dashboard/client-dashboard"]):this.router.navigate(["maintenace-management/dashboard/help-desk-dashboard"]))}getV2_V2_EmailNotificationList(t){this.userService.getV2_V2_EmailNotificationList({userId:t}).subscribe(i=>{this.emailNotificationList=i.data,this.portalArrayList.forEach(n=>{this.emailNotificationList.forEach(s=>{s.action==n.name&&(n.checked=!0)})})})}checkTheEmailNotificationValue(t,o){if(t.target.checked){const i=t.target.value.replace(/ /g,"");this.openModalCreateConf(this.titleAndContentArrayCreated[i],t.target.value,o)}else{const i=t.target.value.replace(/ /g,"");this.openModalDeleteConf(this.titleAndContentArrayDelete[i],t.target.value,o)}}maketheJsonArrayOfShowingTitle(){this.titleAndContentArrayCreated.FirstLevelSupport={title:"Are you sure you want to add this users email for portal notifications in the First Level Support activity? ",subTitle:"This means that for any ticket created,this user will receive both email and portal notifications."},this.titleAndContentArrayDelete.FirstLevelSupport={title:"Are you certain you wish to remove this users email from portal notifications in the First Level Support activity?",subTitle:"This means that for any newly created ticket,this user will no longer receive email and portal notifications."},this.titleAndContentArrayCreated.NotificationofServiceOrderInitiation={title:"Are you sure you want to add this users email for portal notifications in the Notification of Service Order Initiation?",subTitle:"This means that for any ticket created and when it proceeds for service order generation,this user will receive both email and portal notifications."},this.titleAndContentArrayDelete.NotificationofServiceOrderInitiation={title:"Are you sure you want to remove this users email for portal notifications in the Notification of Service Order Initiation? ",subTitle:"This means that for any ticket created and when it proceeds for service order generation,this user will not receive both email and portal notifications."},this.titleAndContentArrayCreated.NotificationofRequestNewQuotation={title:"Are you sure you want to add this users email for portal notifications in the Notification of Request New Quotation? ",subTitle:"This means that for any billable ticket requiring the creation of a quotation,this user will receive both email and portal notifications."},this.titleAndContentArrayDelete.NotificationofRequestNewQuotation={title:"Are you sure you want to remove this users email for portal notifications in the Notification of Request New Quotation? ",subTitle:"This means that for any billable ticket requiring the creation of a quotation, this user will not receive both email and portal notifications."},this.titleAndContentArrayCreated.NotificationofIncidentReportSignatureAuthorization={title:"Are you sure you want to add this users email for portal notifications in the Notification of Incident Report Signature Authorization? ",subTitle:"This means that when a Billable Service Order or Incident Report task is completed and requires technical authorization for document signing before proceeding to the client for job completion,this user will receive both email and portal notifications."},this.titleAndContentArrayDelete.NotificationofIncidentReportSignatureAuthorization={title:"Are you sure you want to remove this users email for portal notifications in the Notification of Incident Report Signature Authorization? ",subTitle:"This means that when a Billable Service Order or Incident Report task is completed and requires technical authorization for document signing before proceeding to the client for job completion,this user will not receive both email and portal notifications."},this.titleAndContentArrayCreated.NotificationofQuotationRejected={title:"Are you sure you want to add this users email for portal notifications in the Notification of Quotation Rejected? ",subTitle:"This means that when a Quotation Approval task is rejected by a reviewer or approver, the Project Manager or Finance Manager will receive a notification."},this.titleAndContentArrayDelete.NotificationofQuotationRejected={title:"Are you sure you want to remove this users email for portal notifications in the Notification of Quotation Rejected? ",subTitle:"This means that when a Quotation Approval task is rejected by a reviewer or approver, the Project Manager or Finance Manager will receive a notification."},this.titleAndContentArrayCreated.NotificationofQuotationApproved={title:"Are you sure you want to add this users email for portal notifications in the Notification of Quotation Approved? ",subTitle:"This means that when a Quotation Approval task is rejected by a reviewer or approver, the Project Manager or Finance Manager will receive a notification."},this.titleAndContentArrayDelete.NotificationofQuotationApproved={title:"Are you sure you want to remove this users email for portal notifications in the Notification of Quotation Approved? ",subTitle:"This means that when a Quotation Approval task is rejected by a reviewer or approver, the Project Manager or Finance Manager will receive a notification."},this.titleAndContentArrayCreated.NotificationofTicketAcknowledgement={title:"Are you sure you want to add this users email for portal notifications in the Notification of Ticket Acknowledgement? ",subTitle:"This means that when a Quotation Approval task is rejected by a reviewer or approver, the Project Manager or Finance Manager will receive a notification."},this.titleAndContentArrayDelete.NotificationofTicketAcknowledgement={title:"Are you sure you want to remove this users email for portal notifications in the Notification of Ticket Acknowledgement? ",subTitle:"This means that when a Quotation Approval task is rejected by a reviewer or approver, the Project Manager or Finance Manager will receive a notification."},this.titleAndContentArrayCreated.NotificationofTicketVerificationRequest={title:"Are you sure you want to add this users email for portal notifications in the   Notification of Ticket Verification Request? ",subTitle:"This means that when a Quotation Approval task is rejected by a reviewer or approver, the Project Manager or Finance Manager will receive a notification."},this.titleAndContentArrayDelete.NotificationofTicketVerificationRequest={title:"Are you sure you want to remove this users email for portal notifications in the   Notification of Ticket Verification Request? ",subTitle:"This means that when a Quotation Approval task is rejected by a reviewer or approver, the Project Manager or Finance Manager will receive a notification."},this.titleAndContentArrayCreated.NotificationforScheduleMaintenanceCompletionByAdmin={title:"Are you sure you want to add this users email for portal notifications in the Notification for Schedule Maintenance Completion By Admin? ",subTitle:"Scheduled maintenance completion by the administrator means that upon successful execution of the maintenance tasks, the designated administrators or relevant personnel will be notified, ensuring effective communication and awareness of the completed maintenance activities."},this.titleAndContentArrayDelete.NotificationforScheduleMaintenanceCompletionByAdmin={title:"Are you sure you want to remove this users email for portal notifications in the Notification for Schedule Maintenance Completion By Admin? ",subTitle:"When a deletion task is successfully executed by the administrator, the designated administrators or relevant personnel will be notified. This notification ensures effective communication and awareness of the completed deletion activities"},this.titleAndContentArrayCreated.NotificationforAuditCompletionAcknowlegementAdmin={title:"Are you sure you want to add this users email for portal notifications in the Notification for Audit Completion Acknowledgement  Admin? ",subTitle:"Scheduled maintenance completion by the administrator means that upon successful execution of the maintenance tasks, the designated administrators or relevant personnel will be notified, ensuring effective communication and awareness of the completed maintenance activities."},this.titleAndContentArrayDelete.NotificationforAuditCompletionAcknowlegementAdmin={title:"Are you sure you want to remove this users email for portal notifications in the Notification for Audit Completion Acknowledgement  Admin? ",subTitle:"When a deletion task is successfully executed by the administrator, the designated administrators or relevant personnel will be notified. This notification ensures effective communication and awareness of the completed deletion activities"},this.titleAndContentArrayCreated.NotificationofCloseTicketRequestInternal={title:"Are you sure you want to add this users email for portal notifications in the Notification of  Close Ticket Request Internal? ",subTitle:"This means that when a Billable Service Order or Incident Report task is completed and requires technical authorization for document signing before proceeding to the client for job completion,this user will receive both email and portal notifications."},this.titleAndContentArrayDelete.NotificationofCloseTicketRequestInternal={title:"Are you sure you want to remove this users email for portal notifications in the  Notification of Close Ticket Request Internal? ",subTitle:"This means that when a Billable Service Order or Incident Report task is completed and requires technical authorization for document signing before proceeding to the client for job completion,this user will not receive both email and portal notifications."}}openModalDeleteConf(t,o,i){const n=this.modalService.open(k.z,{ariaLabelledBy:"modal-basic-title",size:"md",centered:!0,backdrop:"static",keyboard:!1});n.componentInstance.title=t.title,n.componentInstance.subTitle=t.subTitle,n.result.then(s=>{s&&("delete"==s?this.deleteV2_EmailNotification(o):this.portalArrayList[i].checked=!0)})}openModalConNofication(t){const i=this.modalService.open(y.l,{ariaLabelledBy:"modal-basic-title",size:"md",centered:!0,backdrop:"static",keyboard:!1});i.componentInstance.title="Please confirm that you want to email this user a notification link ",i.componentInstance.subTitle="",i.result.then(n=>{n&&"success"==n&&this.clickSend(t)})}openModalCreateConf(t,o,i){const n=this.modalService.open(y.l,{ariaLabelledBy:"modal-basic-title",size:"md",centered:!0,backdrop:"static",keyboard:!1});n.componentInstance.title=t.title,n.componentInstance.subTitle=t.subTitle,n.result.then(s=>{s&&("success"==s?this.createV2_EmailNotification(o):this.portalArrayList[i].checked=!1)})}deleteV2_EmailNotification(t){this.userService.deleteV2_EmailNotification({UserId:m.i.selectedUserId,Action:t}).subscribe(i=>{this.getV2_V2_EmailNotificationList(m.i.selectedUserId),this.success(i)})}createV2_EmailNotification(t){this.userService.createV2_EmailNotification({UserId:m.i.selectedUserId,Action:t}).subscribe(i=>{this.getV2_V2_EmailNotificationList(m.i.selectedUserId),this.success(i)})}success(t){_().fire({toast:!0,position:"top-end",icon:"success",title:t.message,showConfirmButton:!1,timer:3e3})}getV2_MyTaskRulesActiveCountByUserId(t){this.userService.getV2_MyTaskRulesActiveCountByUserId({userId:t}).subscribe(i=>{this.myTaskRulesActiveCount.forEach(n=>{Object.keys(i.data).forEach(s=>{s==n.type&&(n.checked=i.data[s])})})})}changesMyTaskRulesActive(t,o){this.myTaskRulesActiveCount[o].checked=t.target.checked,this.openModalCreateMyTask(o,t.target.checked)}openModalCreateMyTask(t,o){const i=this.modalService.open(y.l,{ariaLabelledBy:"modal-basic-title",size:"md",centered:!0,backdrop:"static",keyboard:!1});i.componentInstance.title="Are you Sure to Update My Task ",i.componentInstance.subTitle="",i.result.then(n=>{n&&("success"==n?this.updateTaskRuleActive():this.myTaskRulesActiveCount[t].checked=!o)})}updateTaskRuleActive(){let t={userId:m.i.selectedUserId};this.myTaskRulesActiveCount.forEach(o=>{t[o.type]=o.checked}),this.userService.updateV2_MX_MyTaskRights(t).subscribe(o=>{this.getV2_MyTaskRulesActiveCountByUserId(m.i.selectedUserId),this.success(o)})}open(t){let i=[];i.push({src:t,caption:"",thumb:"thumb"}),this.lightbox.open(i)}crossFirstImage(t){t&&(this.profile_img="../../../../../../assets/images/userClientPlaceholder.png",this.isFirstImageVisible=!1,this.resetFileInput(),this.saveImage())}resetFileInput(){const t=document.getElementById("asset_id0");t&&(t.value="")}onSelectFile(t){if(t.target.files&&t.target.files[0]){var o=new FileReader;o.readAsDataURL(t.target.files[0]),o.onload=i=>{this.profile_img=i.target.result,this.openModalUpdateConfimage()}}}saveImage(){let t={Id:this.userData.id,UserLogoBase64string:"../../../../../../assets/images/userClientPlaceholder.png"!==this.profile_img?this.profile_img.replace(/^data:image\/[a-z]+;base64,/,""):null};this.userService.postUpdateProfileLogo(this.commonFunctionService.clean(t)).subscribe(o=>{this.successForImageInsert(o)})}successForImageInsert(t){_().fire({toast:!0,position:"top-end",icon:"success",title:t.message,showConfirmButton:!1,timer:3e3})}openModalDeleteConfimage(t){const o=this.modalService.open(k.z,{ariaLabelledBy:"modal-basic-title",size:"md",centered:!0,backdrop:"static",keyboard:!1});o.componentInstance.title="You are about to delete a Profile Image?",o.componentInstance.subTitle="Deleting your Profile Image will remove for the database",o.result.then(i=>{i&&"delete"==i&&this.crossFirstImage(t)})}openModalUpdateConfimage(){const t=this.modalService.open(y.l,{ariaLabelledBy:"modal-basic-title",size:"md",centered:!0,backdrop:"static",keyboard:!1});t.componentInstance.title="You are about to upadate a Profile Image?",t.componentInstance.subTitle="Modifying your profile image will result in the updated image replacing the existing one in the database",t.result.then(o=>{o&&("success"==o?(this.profile_img&&(this.isFirstImageVisible=!0),this.saveImage()):(this.profile_img="../../../../../../assets/images/userClientPlaceholder.png",this.isFirstImageVisible=!1,this.resetFileInput()))})}static{this.\u0275fac=function(o){return new(o||a)(e.Y36(m.i),e.Y36(d.V),e.Y36(v.n),e.Y36(w.K),e.Y36(x.u),e.Y36(u.F0),e.Y36(g.FF),e.Y36(Z.ey))}}static{this.\u0275cmp=e.Xpm({type:a,selectors:[["app-view-client-user-nav"]],decls:100,vars:17,consts:[[1,"user-detail","profile-foreground","position-relative","mx-n4","mt-n4"],[1,"profile-wid-bg"],["src","assets/images/profile-bg.jpg","alt","",1,"profile-wid-img"],[1,"pt-4","mb-4","mb-lg-3","px-4","pb-lg-4","profile-wrapper"],[1,"row","g-4"],[1,"col-auto"],[1,"textcenter","mt-2"],[1,"position-relative","d-inline-block"],[1,"position-absolute","top-100","start-100","translate-middle"],["class","mb-0","placement","left","ngbTooltip","Remove Image",4,"ngIf"],["for","asset_id0","class","mb-0","placement","left","ngbTooltip","Select Image",4,"ngIf"],["formControlName","UserImageBase64string","value","","id","asset_id0","type","file","accept","image/png, image/gif, image/jpeg",1,"form-control","d-none",3,"change"],[1,"avatar-lg"],[1,"avatar-title","bg-light","rounded"],["id","product-img",1,"avatar-md","img-size-fixed",3,"src"],[1,"col","d-flex","align-items-center"],[1,"p-2"],[1,"text-white","mb-0","fs-35"],[1,"text-white","mb-0","fs-20"],[1,"hstack","text-white-50","gap-1","fs-15"],[1,"ri-shield-fill","me-1","text-white","fs-16","align-middle"],[1,"row","mt-4"],[1,"col-sm-5"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body"],[1,"table-responsive"],[1,"table","table-borderless","mb-0"],["scope","row",1,"w-25"],[1,"text-muted"],[1,"card","mt-4"],[1,"card-header","d-flex","justify-content-between"],["class","text-primary mb-0 cursor text-decoration-underline",3,"click",4,"ngIf"],["scope","row",1,"ps-0","w-10"],[1,"badge","text-uppercase",3,"ngClass"],[4,"ngFor","ngForOf"],[1,"col-sm-7"],[1,"row"],["class","col-12 mb-4",4,"ngFor","ngForOf"],[1,"card","mt-2"],["class","col-sm-4 mb-4",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-end","px-4","mb-3"],[1,"btn","btn-soft-primary","waves-effect","back-button",3,"click"],["placement","left","ngbTooltip","Remove Image",1,"mb-0"],[1,"avatar-xs"],[1,"avatar-title","bg-light","border","rounded-circle","text-muted","cursor-pointer"],[1,"ri-close-circle-fill",3,"click"],["for","asset_id0","placement","left","ngbTooltip","Select Image",1,"mb-0"],[1,"ri-image-fill"],[1,"text-primary","mb-0","cursor","text-decoration-underline",3,"click"],[1,"form-check","form-check-outline","form-check-primary"],["type","checkbox",1,"form-check-input","me-2",3,"disabled","ngModel","value","id","ngModelChange"],[1,"form-check-label","labelforCheckbox",2,"opacity","1",3,"for"],[1,"col-12","mb-4"],[1,"mt-2"],[1,"d-flex","flex-wrap","gap-2","fs-15"],["href","javascript:void(0);","class","badge bg-primary-subtle text-primary",4,"ngFor","ngForOf"],["href","javascript:void(0);",1,"badge","bg-primary-subtle","text-primary"],[1,"col-sm-4","mb-4"],[1,"form-check","topDisplay"],["type","checkbox",1,"form-check-input","me-2","p-2",3,"disabled","ngModel","value","id","ngModelChange"]],template:function(o,i){1&o&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"img",2),e.qZA(),e.TgZ(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),e.YNc(9,ze,4,0,"label",9)(10,Ke,4,0,"label",10),e.TgZ(11,"input",11),e.NdJ("change",function(s){return i.onSelectFile(s)}),e.qZA()(),e.TgZ(12,"div",12)(13,"div",13),e._UZ(14,"img",14),e.qZA()()()()(),e.TgZ(15,"div",15)(16,"div",16)(17,"h3",17),e._uU(18),e.qZA(),e.TgZ(19,"p",18),e._uU(20),e.qZA(),e.TgZ(21,"div",19),e._UZ(22,"i",20),e._uU(23),e.qZA()()()(),e.TgZ(24,"div",21)(25,"div",22)(26,"div",23)(27,"div",24)(28,"h4",25),e._uU(29,"Contact Information \xa0"),e.qZA()(),e.TgZ(30,"div",26)(31,"div",27)(32,"table",28)(33,"tbody")(34,"tr")(35,"th",29),e._uU(36,"Mobile Number"),e.qZA(),e.TgZ(37,"td",30),e._uU(38),e.qZA()(),e.TgZ(39,"tr")(40,"th",29),e._uU(41,"Email"),e.qZA(),e.TgZ(42,"td",30),e._uU(43),e.qZA()(),e.TgZ(44,"tr")(45,"th",29),e._uU(46,"Username"),e.qZA(),e.TgZ(47,"td",30),e._uU(48),e.qZA()()()()()()(),e.TgZ(49,"div",31)(50,"div",32)(51,"h4",25),e._uU(52,"Mobile Access \xa0"),e.qZA(),e.TgZ(53,"div"),e.YNc(54,We,2,0,"p",33),e.qZA()(),e.TgZ(55,"div",26)(56,"div",27)(57,"table",28)(58,"tbody")(59,"tr")(60,"th",34),e._uU(61,"Mobile"),e.qZA(),e.TgZ(62,"td",30),e._uU(63," : "),e.TgZ(64,"span",35),e._uU(65),e.qZA()()()()()()()(),e.TgZ(66,"div",31)(67,"div",24)(68,"h4",25),e._uU(69,"Email And Notification Setup"),e.qZA()(),e.TgZ(70,"div",26)(71,"div",27)(72,"table",28)(73,"tbody")(74,"tr")(75,"th",34),e._uU(76,"Portal Access"),e.qZA(),e.TgZ(77,"td",30),e._uU(78," : "),e.TgZ(79,"span",35),e._uU(80),e.qZA()()(),e.YNc(81,He,10,8,"tr",36),e.qZA()()()()()(),e.TgZ(82,"div",37)(83,"div",23)(84,"div",24)(85,"h4",25),e._uU(86,"Access Right \xa0"),e.qZA()(),e.TgZ(87,"div",26)(88,"div",38),e.YNc(89,Xe,9,3,"div",39),e.qZA()()(),e.TgZ(90,"div",40)(91,"div",24)(92,"h4",25),e._uU(93,"My Task"),e.qZA()(),e.TgZ(94,"div",26)(95,"div",38),e.YNc(96,et,5,6,"div",41),e.qZA()()()()()()(),e.TgZ(97,"div",42)(98,"button",43),e.NdJ("click",function(){return i.goBack()}),e._uU(99," Back "),e.qZA()()),2&o&&(e.xp6(9),e.Q6J("ngIf",i.isFirstImageVisible),e.xp6(1),e.Q6J("ngIf",!i.isFirstImageVisible),e.xp6(4),e.s9C("src",i.profile_img,e.LSH),e.xp6(4),e.Oqu(i.userData.fullName),e.xp6(2),e.hij(" ",i.rolesList[i.userData.roleId]," "),e.xp6(3),e.hij(" ",i.accessGroupList[i.userData.accessGroupId]," "),e.xp6(15),e.hij(": ",i.userData.phoneNumber,""),e.xp6(5),e.hij(": ",i.userData.email,""),e.xp6(5),e.hij(": ",i.userData.userName,""),e.xp6(6),e.Q6J("ngIf",i.userData.mobileEnable),e.xp6(10),e.Q6J("ngClass",i.userData.mobileEnable?"bg-primary":"bg-danger"),e.xp6(1),e.hij(" ",i.userData.mobileEnable?"Yes":"No",""),e.xp6(14),e.Q6J("ngClass",i.userData.portalEnable?"bg-primary":"bg-danger"),e.xp6(1),e.Oqu(i.userData.portalEnable?"Yes":"No"),e.xp6(1),e.Q6J("ngForOf",i.portalArrayList),e.xp6(8),e.Q6J("ngForOf",i.userData.list),e.xp6(7),e.Q6J("ngForOf",i.myTaskRulesActiveCount))},dependencies:[r.mk,r.sg,r.O5,c.Fj,c.Wl,c.JJ,c.On,c.u,g._L],styles:[".w-10[_ngcontent-%COMP%]{width:10%}.labelforCheckbox[_ngcontent-%COMP%]{font-weight:600;font-size:.875rem}.topDisplay[_ngcontent-%COMP%]{display:flex;align-items:self-start}.text-small[_ngcontent-%COMP%]{font-size:.7rem;font-weight:400}.textcenter[_ngcontent-%COMP%]{text-align:center}@media only screen and (max-width: 600px){.textcenter[_ngcontent-%COMP%]{text-align:left!important}}"]})}}return a})()}];let it=(()=>{class a{static{this.\u0275fac=function(o){return new(o||a)}}static{this.\u0275mod=e.oAB({type:a})}static{this.\u0275inj=e.cJS({imports:[u.Bz.forChild(tt),u.Bz]})}}return a})();var ot=p(6903),at=p(6762),nt=p(6208),st=p(9417),rt=p(9101),lt=p(6802);let ct=(()=>{class a{static{this.\u0275fac=function(o){return new(o||a)}}static{this.\u0275mod=e.oAB({type:a})}static{this.\u0275inj=e.cJS({providers:[r.uU],imports:[r.ez,it,c.u5,c.UX,N.A0,g.XC,g.M,ot.X,g.jF,g.ZS,at.JT,nt.m,st.t,rt.p.pick(lt.kEt),g.aE,N.A0,g.HK,g.Gs,g.Oz,Z.QM]})}}return a})()},9455:(I,A,p)=>{p.d(A,{V:()=>_});var r=p(9862),u=p(553),c=p(9212),m=p(2787),T=p(5035);let _=(()=>{class b{constructor(e,d,v){this._http=e,this._route=d,this.authService=v}GetCompanyListDrobDown(e){return this._http.post(u.N.apiUrl+"api/V2_Master/GetCompanyListDrobDown",e,{headers:(new r.WM).set("Content-Type","application/json").set("Authorization","Bearer "+this.token)})}GetClientListDrobDown(e){return this._http.post(u.N.apiUrl+"api/V2_Master/GetClientListDrobDown",e,{headers:(new r.WM).set("Content-Type","application/json").set("Authorization","Bearer "+this.token)})}GetDepartmentListDrobDown(e){return this._http.post(u.N.apiUrl+"api/V2_Master/GetDepartmentListDrobDown",e,{headers:(new r.WM).set("Content-Type","application/json").set("Authorization","Bearer "+this.token)})}GetCategoryListDrobDown(e){return this._http.post(u.N.apiUrl+"api/V2_Master/GetCategoryListDrobDown",e,{headers:(new r.WM).set("Content-Type","application/json").set("Authorization","Bearer "+this.token)})}GetSubCategoryListDrobDown(e){return this._http.post(u.N.apiUrl+"api/V2_Master/GetSubCategoryListDrobDown",e,{headers:(new r.WM).set("Content-Type","application/json").set("Authorization","Bearer "+this.token)})}GetVendorListDrobDown(e){return this._http.post(u.N.apiUrl+"api/V2_Master/GetVendorListDrobDown",e,{headers:(new r.WM).set("Content-Type","application/json").set("Authorization","Bearer "+this.token)})}GetLocationListDrobDown(e){return this._http.post(u.N.apiUrl+"api/V2_Master/GetLocationListDrobDown",e,{headers:(new r.WM).set("Content-Type","application/json").set("Authorization","Bearer "+this.token)})}getCountryList(){return this._http.get(u.N.apiUrl+"api/Master/GetCountryList",{headers:(new r.WM).set("Content-Type","application/json")})}getCountryListDrobDown(){return this._http.get(u.N.apiUrl+"api/V2_Master/GetCountryListDrobDown",{headers:(new r.WM).set("Content-Type","application/json")})}getClientForApplicationSettingDrobDown(e){return this._http.post(u.N.apiUrl+"api/V2_Master/GetClientForApplicationSettingDrobDown",e,{headers:(new r.WM).set("Content-Type","application/json").set("Authorization","Bearer "+this.token)})}getV2_UserListDD(e){return this._http.post(u.N.apiUrl+"api/Maintenance/GetV2_UserListDD",e,{headers:(new r.WM).set("Content-Type","application/json").set("Authorization","Bearer "+this.token)})}static{this.\u0275fac=function(d){return new(d||b)(c.LFG(r.eN),c.LFG(m.F0),c.LFG(T.$))}}static{this.\u0275prov=c.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"})}}return b})()},859:(I,A,p)=>{p.d(A,{z:()=>c});var r=p(9212),u=p(7291);let c=(()=>{class m{constructor(_){this.modal=_}ngOnInit(){}ngOnChanges(_){}close(_){this.modal.close(_)}deleteData(){}static{this.\u0275fac=function(b){return new(b||m)(r.Y36(u.Kz))}}static{this.\u0275cmp=r.Xpm({type:m,selectors:[["app-delete-modal"]],inputs:{title:"title",subTitle:"subTitle"},features:[r.TTD],decls:17,vars:2,consts:[[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gsqxdxog.json","trigger","loop","colors","primary:#405189,secondary:#f06548",2,"width","90px","height","90px"],[1,"mt-4","fs-15","mx-2","mx-sm-2"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["data-bs-dismiss","modal","id","deleteRecord-close",1,"btn","w-sm","btn-danger","fw-medium","text-decoration-none",3,"click"],[1,"ri-close-line","me-1","align-middle"],["type","button","id","delete-product",1,"btn","w-sm","btn-primary",3,"click"]],template:function(b,y){1&b&&(r.TgZ(0,"div",0)(1,"div",1)(2,"button",2),r.NdJ("click",function(){return y.close("Close click")}),r.qZA()(),r.TgZ(3,"div",3)(4,"div",4),r._UZ(5,"lord-icon",5),r.TgZ(6,"div",6)(7,"h5"),r._uU(8),r.qZA(),r.TgZ(9,"p",7),r._uU(10),r.qZA()()(),r.TgZ(11,"div",8)(12,"button",9),r.NdJ("click",function(){return y.close("Close click")}),r._UZ(13,"i",10),r._uU(14," Close "),r.qZA(),r.TgZ(15,"button",11),r.NdJ("click",function(){return y.close("delete")}),r._uU(16," Yes, Delete It! "),r.qZA()()()()),2&b&&(r.xp6(8),r.Oqu(y.title),r.xp6(2),r.hij("",y.subTitle," "))}})}}return m})()},8868:(I,A,p)=>{p.d(A,{e:()=>c});var r=p(9212),u=p(7291);let c=(()=>{class m{constructor(_){this.modal=_}ngOnInit(){}ngOnChanges(_){}close(_){this.modal.close(_)}static{this.\u0275fac=function(b){return new(b||m)(r.Y36(u.Kz))}}static{this.\u0275cmp=r.Xpm({type:m,selectors:[["app-message-modal"]],inputs:{title:"title",subTitle:"subTitle"},features:[r.TTD],decls:15,vars:2,consts:[[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/tdrtiskw.json","trigger","loop","colors","primary:#405189,secondary:#f06548",2,"width","120px","height","120px"],[1,"mt-2","pt-2","fs-15","mx-4","mx-sm-5"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["data-bs-dismiss","modal","id","deleteRecord-close",1,"btn","w-sm","btn-danger","fw-medium","text-decoration-none",3,"click"],[1,"ri-close-line","me-1","align-middle"]],template:function(b,y){1&b&&(r.TgZ(0,"div",0)(1,"div",1)(2,"button",2),r.NdJ("click",function(){return y.close("Close click")}),r.qZA()(),r.TgZ(3,"div",3)(4,"div",4),r._UZ(5,"lord-icon",5),r.TgZ(6,"div",6)(7,"h4"),r._uU(8),r.qZA(),r.TgZ(9,"p",7),r._uU(10),r.qZA()()(),r.TgZ(11,"div",8)(12,"button",9),r.NdJ("click",function(){return y.close("Close click")}),r._UZ(13,"i",10),r._uU(14," Close "),r.qZA()()()()),2&b&&(r.xp6(8),r.Oqu(y.title),r.xp6(2),r.hij("",y.subTitle," "))}})}}return m})()}}]);