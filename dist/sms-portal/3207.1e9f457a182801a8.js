"use strict";(self.webpackChunksms_portal=self.webpackChunksms_portal||[]).push([[3207,9455],{3207:(T,f,s)=>{s.r(f),s.d(f,{WorkflowModule:()=>it});var c=s(6814),m=s(2787),t=s(9212);let b=(()=>{class r{constructor(){}ngOnInit(){}static{this.\u0275fac=function(o){return new(o||r)}}static{this.\u0275cmp=t.Xpm({type:r,selectors:[["app-workflow"]],decls:1,vars:0,template:function(o,i){1&o&&t._UZ(0,"router-outlet")},dependencies:[m.lC]})}}return r})();var v=s(3519),g=s.n(v),_=s(2438),Z=s(2181),a=s(3620),l=s(3997),y=s(9397),d=s(7291),I=s(2857),U=s(9455),S=s(3828),k=s(3109),h=s(6223),C=s(4807),x=s(8617);const A=["inputer"];function L(r,p){if(1&r){const e=t.EpF();t.TgZ(0,"tr",39)(1,"td",40),t.NdJ("click",function(){const n=t.CHM(e).$implicit,u=t.oxw(2);return t.KtG(u.settingHandler(n))}),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",41)(6,"span",42),t._uU(7),t.qZA()(),t.TgZ(8,"td",41)(9,"span",43),t._uU(10),t.qZA()(),t.TgZ(11,"td",41)(12,"span",44),t._uU(13),t.qZA()(),t.TgZ(14,"td")(15,"span")(16,"div",45)(17,"button",46),t._UZ(18,"i",47),t.qZA(),t.TgZ(19,"ul",48)(20,"li")(21,"a",49),t.NdJ("click",function(){const n=t.CHM(e).$implicit,u=t.oxw(2);return t.KtG(u.settingHandler(n))}),t._UZ(22,"i",50),t._uU(23," Setting "),t.qZA()()()()()()()}if(2&r){const e=p.$implicit;t.xp6(2),t.hij(" ",e.departmentCode," "),t.xp6(2),t.hij(" ",e.departmentName," "),t.xp6(3),t.Oqu(e.wfActive),t.xp6(3),t.Oqu(e.wfInactive),t.xp6(3),t.Oqu(e.wfPending)}}function D(r,p){1&r&&(t.TgZ(0,"div",51)(1,"p",39),t._uU(2,"No Workflow found"),t.qZA()())}function F(r,p){1&r&&(t._UZ(0,"i",55),t._uU(1," Prev "))}function W(r,p){1&r&&(t._uU(0," Next "),t._UZ(1,"i",56))}function G(r,p){if(1&r){const e=t.EpF();t.TgZ(0,"ngb-pagination",52),t.NdJ("pageChange",function(i){t.CHM(e);const n=t.oxw(2);return t.KtG(n.page=i)})("pageChange",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.getWorkFlowPagination())}),t.YNc(1,F,2,0,"ng-template",53)(2,W,2,0,"ng-template",54),t.qZA()}if(2&r){const e=t.oxw(2);t.Q6J("collectionSize",e.totalRecords)("page",e.page)("pageSize",e.pageSize)("maxSize",2)("rotate",!0)}}function M(r,p){if(1&r&&(t.TgZ(0,"div",27)(1,"table",28)(2,"thead")(3,"tr",29)(4,"th",30),t._uU(5,"Code"),t.qZA(),t.TgZ(6,"th",30),t._uU(7),t.qZA(),t.TgZ(8,"th",31),t._uU(9,"WF Active"),t.qZA(),t.TgZ(10,"th",31),t._uU(11,"WF Inactive"),t.qZA(),t.TgZ(12,"th",31),t._uU(13,"WF Pending"),t.qZA(),t.TgZ(14,"th",30),t._uU(15,"Action"),t.qZA()()(),t.TgZ(16,"tbody"),t.YNc(17,L,24,5,"tr",32),t.qZA()(),t.YNc(18,D,3,0,"div",33),t.qZA(),t.TgZ(19,"div",34)(20,"div",35)(21,"div",36),t._uU(22),t.qZA()(),t.TgZ(23,"div",35)(24,"div",37),t.YNc(25,G,3,5,"ngb-pagination",38),t.qZA()()()),2&r){const e=t.oxw();t.xp6(7),t.hij(" ",e.isProject?"Project":"Department"," Name "),t.xp6(10),t.Q6J("ngForOf",e.filteredList),t.xp6(1),t.Q6J("ngIf",0===e.filteredList.length),t.xp6(4),t.lnq(" Showing ",e.from," to ",e.to," of ",e.totalRecords," entries "),t.xp6(3),t.Q6J("ngIf",e.totalRecords>e.pageSize)}}let N=(()=>{class r{constructor(e,o,i,n,u,w){this.router=e,this.modalService=o,this.commonFunctionService=i,this.dropdownServices=n,this.authAssetService=u,this.workflowService=w,this.page=1,this.from=0,this.to=0,this.pageSize=10,this.collectionSize=0,this.totalRecords=0,this.workFlowList=[],this.isProject=!0,this.filteredList=[],this.payload={companyId:"",SearchWorkFlowName:null},this.companyListArray=[],this.label="Workflow",this.breadCrumbItems=[{label:"Workflow"},{label:"Workflow List",active:!0}],this.searchTerm="",this.isProject=this.authAssetService.getisProject()}ngOnInit(){this.getCompanyList()}setObjectBeforeRefesh(){let e={};this.selectedCompanyId&&(e.selectedCompanyId=this.selectedCompanyId),this.searchTerm&&(e.searchTerm=this.searchTerm),this.page&&(e.displayStart=this.pageSize*(this.page-1),e.page=this.page),localStorage.setItem("objectSerachForWorkflow",JSON.stringify(e))}getObjectAfterRefresh(){let e=JSON.parse(localStorage.getItem("objectSerachForWorkflow"));e.searchTerm&&(this.searchTerm=e.searchTerm?e.searchTerm:""),this.payload.selectedCompanyId=this.selectedCompanyId,e.displayStart&&(this.payload.displayStart=e.displayStart,this.page=e.page),this.getWorkFlowList()}getWorkFlowList(){this.workflowService.getWorkflowDepartmentList(this.selectedCompanyId).subscribe(e=>{0!=e?.data.length?(e?.data.forEach(i=>{i.companyId=this.selectedCompanyId}),this.workFlowList=e?.data,this.totalRecords=e?.data.length,this.filteredList=this.workFlowList,this.collectionSize=this.filteredList.length,this.getWorkFlowPagination(),JSON.parse(localStorage.getItem("objectSerachForWorkflow")).searchTerm&&this.searchFilter()):(this.workFlowList=[],this.totalRecords=0,this.filteredList=[],this.collectionSize=0,this.getWorkFlowPagination()),this.setObjectBeforeRefesh()})}getWorkFlowPagination(){this.filteredList=this.workFlowList.slice((this.page-1)*this.pageSize,(this.page-1)*this.pageSize+this.pageSize),this.to=this.page*this.pageSize>this.workFlowList.length?this.workFlowList.length:this.page*this.pageSize;let e=this.page*this.pageSize-(this.pageSize-1);this.from=e<1?1:e,this.from=0==this.workFlowList.length?0:this.from}getCompanyList(){this.dropdownServices.GetCompanyListDrobDown({}).subscribe(e=>{this.companyListArray=e.list;let o=JSON.parse(localStorage.getItem("objectSerachForWorkflow"));o?(this.selectedCompanyId=o.selectedCompanyId?o.selectedCompanyId:this.companyListArray[0].companyId,this.getObjectAfterRefresh()):(this.selectedCompanyId=this.companyListArray[0].companyId,this.getWorkFlowList()),this.setObjectBeforeRefesh()})}onCompanyValueChange(e){this.page=1,this.searchTerm="",this.getWorkFlowList()}settingHandler(e){this.workflowService.wfItem={...e},this.router.navigate(["/application-settings/workflow-setup/configurationworkflow"])}clearAllPayload(){this.selectedDepartmentName=null,this.searchTerm="",this.page=1,this.companyListArray.length>0&&(this.selectedCompanyId=this.companyListArray[0].companyId,this.getWorkFlowList())}success(e){g().fire({toast:!0,position:"top-end",icon:"success",title:e.message,showConfirmButton:!1,timer:3e3})}error(e){g().fire({toast:!0,position:"top-end",icon:"warning",title:e.error.message||e.message,showConfirmButton:!1,timer:2e3})}ngAfterViewInit(){(0,_.R)(this.input.nativeElement,"input").pipe((0,Z.h)(Boolean),(0,a.b)(1e3),(0,l.x)(),(0,y.b)(e=>{this.searchFilter()})).subscribe()}searchFilter(){if(this.page=1,this.searchTerm){const e=this.searchTerm;this.filteredList=this.workFlowList.filter(i=>i.departmentName?.toLowerCase().includes(e?.toLowerCase()||"")),this.collectionSize=this.filteredList.length,this.totalRecords=this.filteredList.length,this.to=this.page*this.pageSize>this.filteredList.length?this.filteredList.length:this.page*this.pageSize;let o=this.page*this.pageSize-(this.pageSize-1);this.from=o<1?1:o,this.from=0==this.filteredList.length?0:this.from,this.setObjectBeforeRefesh()}else this.payload.SearchClientName=this.searchTerm,this.getWorkFlowList()}static{this.\u0275fac=function(o){return new(o||r)(t.Y36(m.F0),t.Y36(d.FF),t.Y36(I.K),t.Y36(U.V),t.Y36(S.u),t.Y36(k.z))}}static{this.\u0275cmp=t.Xpm({type:r,selectors:[["app-listworkflow"]],viewQuery:function(o,i){if(1&o&&t.Gf(A,7),2&o){let n;t.iGM(n=t.CRH())&&(i.input=n.first)}},decls:32,vars:9,consts:[[3,"title","breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header","border-0"],[1,"row","align-items-center","gy-3"],[1,"col-sm-3","col-xxl-3"],[1,"card-title","mb-0"],[1,"card-body","border","border-dashed","border-end-0","border-start-0"],[1,"row","g-3"],[1,"col-lg"],["bindLabel","companyName","bindValue","companyId","id","companyName","placeholder","Select Company",1,"mr-2","w-100","text-start",3,"items","clearable","ngModel","change","ngModelChange"],[1,"search-box"],["type","search","name","searchTerm","placeholder","Search for WorkFlow name",1,"form-control",3,"ngModel","ngModelChange","input"],["inputer",""],[1,"ri-search-line","search-icon"],[1,"col-lg-auto"],[1,"d-flex","justify-content-end"],["type","button","ngbTooltip","Remove All Search",1,"btn","btn-danger","ms-1",3,"click"],[1,"ri-refresh-fill","me-1","align-bottom"],[1,"card-body","pt-0"],["ngbNav","",1,"nav","nav-tabs","nav-tabs-custom","nav-success","mb-3",3,"activeId"],["nav","ngbNav"],[3,"ngbNavItem"],["ngbNavContent",""],[1,"tab-content","text-muted"],[3,"ngbNavOutlet"],[1,"table-responsive","table-card","mb-0"],[1,"table"],[1,"bg-light","text-muted","text-uppercase"],[1,"p-2"],[1,"p-2","table-align"],["class","text-muted",4,"ngFor","ngForOf"],["class","text-center",4,"ngIf"],[1,"row","justify-content-md-between","align-items-md-center","gy-2"],[1,"col","col-sm-12","col","col-md-6"],["id","tickets-table_info","role","status","aria-live","polite",1,"dataTables_info","mb-2"],[1,"text-sm-right","float-end","listjs-pagination"],[3,"collectionSize","page","pageSize","maxSize","rotate","pageChange",4,"ngIf"],[1,"text-muted"],[1,"text-primary","cursor",3,"click"],[1,"table-align"],[1,"badge","bg-success-subtle","text-success","badge-border"],[1,"badge","bg-danger-subtle","text-danger","badge-border"],[1,"badge","bg-warning-subtle","text-warning","badge-border"],["ngbDropdown","",1,"dropdown"],["type","button","data-bs-toggle","dropdown","aria-expanded","false","ngbDropdownToggle","",1,"btn","btn-soft-secondary","btn-sm","dropdown","arrow-none"],[1,"ri-more-fill"],["ngbDropdownMenu","",1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item","cursor-pointer",3,"click"],[1,"ri-settings-4-fill","align-bottom","me-2","text-muted"],[1,"text-center"],[3,"collectionSize","page","pageSize","maxSize","rotate","pageChange"],["ngbPaginationPrevious",""],["ngbPaginationNext",""],[1,"ci-arrow-left","me-2"],[1,"ci-arrow-right","ms-2"]],template:function(o,i){if(1&o&&(t._UZ(0,"app-breadcrumbs",0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h5",7),t._uU(8,"WorkFlow List"),t.qZA()()()(),t.TgZ(9,"div",8)(10,"div",9),t._UZ(11,"div",10),t.TgZ(12,"div",10)(13,"ng-select",11),t.NdJ("change",function(u){return i.onCompanyValueChange(u)})("ngModelChange",function(u){return i.selectedCompanyId=u}),t.qZA()(),t.TgZ(14,"div",10)(15,"div",12)(16,"input",13,14),t.NdJ("ngModelChange",function(u){return i.searchTerm=u})("input",function(){return i.searchFilter()}),t.qZA(),t._UZ(18,"i",15),t.qZA()(),t.TgZ(19,"div",16)(20,"div",17)(21,"button",18),t.NdJ("click",function(){return i.clearAllPayload()}),t._UZ(22,"i",19),t._uU(23," Clear "),t.qZA()()()()(),t.TgZ(24,"div",20)(25,"div")(26,"ul",21,22)(28,"li",23),t.YNc(29,M,26,7,"ng-template",24),t.qZA()(),t.TgZ(30,"div",25),t._UZ(31,"div",26),t.qZA()()()()()()),2&o){const n=t.MAs(27);t.Q6J("title",i.label)("breadcrumbItems",i.breadCrumbItems),t.xp6(13),t.Q6J("items",i.companyListArray)("clearable",!1)("ngModel",i.selectedCompanyId),t.xp6(3),t.Q6J("ngModel",i.searchTerm),t.xp6(10),t.Q6J("activeId",1),t.xp6(2),t.Q6J("ngbNavItem",1),t.xp6(3),t.Q6J("ngbNavOutlet",n)}},dependencies:[c.sg,c.O5,h.Fj,h.JJ,h.On,d.jt,d.iD,d.Vi,d.uN,d.Pz,d.nv,d.Is,d.Dy,d.N9,d.GZ,d.ju,d._L,C.w9,x.n],styles:[".table-align[_ngcontent-%COMP%]{text-align:center!important}"]})}}return r})();var B=s(7337),q=s(3934);function j(r,p){if(1&r){const e=t.EpF();t.TgZ(0,"div",22)(1,"a",23),t.NdJ("click",function(){const n=t.CHM(e).$implicit,u=t.oxw();return t.KtG(u.sendConfigDetails(n))}),t._UZ(2,"span",24),t._uU(3),t.qZA()()}if(2&r){const e=p.$implicit,o=t.oxw();t.xp6(2),t.Q6J("ngClass",o.returnClassWithStatus(e.status)),t.xp6(1),t.hij(" ",e.workflowName," ")}}function J(r,p){if(1&r&&(t.TgZ(0,"div",25)(1,"div",26)(2,"div",27)(3,"h4",28),t._uU(4),t.qZA(),t.TgZ(5,"p",29),t._uU(6," Asset management workflows include asset confirmation, transfer acceptance, existing asset transfer, asset loans, disposals, repair and maintenance requests, billing eligibility checks, and client verification of generated quotations. "),t.qZA()()(),t.TgZ(7,"div",30)(8,"div",31),t._UZ(9,"img",32),t.qZA()()()),2&r){const e=t.oxw();t.xp6(4),t.hij(" Workflow of ",e._globalDepartmentName," ")}}function O(r,p){if(1&r&&(t.TgZ(0,"p"),t._UZ(1,"i",52),t._uU(2),t.qZA()),2&r){const e=t.oxw().$implicit;t.xp6(2),t.hij(" Please select ",e.approverType," ")}}function z(r,p){if(1&r&&(t.TgZ(0,"p"),t._UZ(1,"i",53),t._uU(2),t.qZA()),2&r){const e=t.oxw().$implicit;t.xp6(2),t.hij(" ",e.fullName," ")}}function E(r,p){if(1&r){const e=t.EpF();t.TgZ(0,"div",54)(1,"button",55),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().index,n=t.oxw(2),u=t.MAs(32);return t.KtG(n.confirmUpdate(u,i))})("click",function(){t.CHM(e);const i=t.oxw(),n=i.$implicit,u=i.index,w=t.oxw(2);return t.KtG(w.addApproveUser(n.seq,u))}),t._UZ(2,"i",56),t.qZA(),t.TgZ(3,"button",57),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(),n=i.$implicit,u=i.index,w=t.oxw(2);return t.KtG(w.removeApproveUser(n.seq,u,n.userId))}),t._UZ(4,"i",58),t.qZA()()}if(2&r){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("hidden",null!=e.fullName),t.xp6(2),t.Q6J("hidden",null==e.fullName)}}function K(r,p){if(1&r&&(t.TgZ(0,"div",49)(1,"div",5)(2,"div")(3,"h5",50),t._uU(4),t.qZA(),t.YNc(5,O,3,1,"p",17)(6,z,3,1,"p",17),t.qZA()(),t.YNc(7,E,5,2,"div",51),t.qZA()),2&r){const e=p.$implicit,o=p.index,i=t.oxw(2);t.uIk("data-index",o),t.xp6(4),t.Oqu(e.approverType),t.xp6(1),t.Q6J("ngIf",null==e.fullName),t.xp6(1),t.Q6J("ngIf",null!=e.fullName),t.xp6(1),t.Q6J("ngIf","Active"!==i._workFlowStatus)}}function H(r,p){if(1&r){const e=t.EpF();t.TgZ(0,"div")(1,"div",33)(2,"div",34)(3,"h5",35),t._uU(4,"Workflow Setup"),t.qZA()(),t.TgZ(5,"div",36)(6,"h6",7),t._uU(7),t.qZA()(),t.TgZ(8,"div",37)(9,"span",38),t._uU(10),t.qZA()()(),t._UZ(11,"hr",39),t.TgZ(12,"div",40)(13,"div",41)(14,"label",42),t._uU(15," Workflow Type"),t.qZA(),t.TgZ(16,"ng-select",43),t.NdJ("ngModelChange",function(i){t.CHM(e);const n=t.oxw();return t.KtG(n.aproverGroupType=i)})("change",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.getShowWorkFlowSetup(i.aproverGroupType))}),t.qZA()(),t.TgZ(17,"div",44)(18,"span")(19,"button",45),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(),n=t.MAs(34);return t.KtG(i.sweetAlertDeleteConfirmation(n))}),t._UZ(20,"i",46),t._uU(21,"Delete "),t.qZA()(),t.TgZ(22,"button",47),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.submitInsertWorkflowUser())}),t._uU(23," Submit "),t.qZA()()(),t._UZ(24,"br"),t.YNc(25,K,8,5,"div",48),t.qZA()}if(2&r){const e=t.oxw();t.xp6(7),t.hij(" (",e._workFlowName,") "),t.xp6(2),t.Q6J("ngClass",e.returnClassBabgeWithStatus(e._workFlowStatus)),t.xp6(1),t.hij(" ",e._workFlowStatus,""),t.xp6(6),t.Q6J("items",e.masterApproverGroupTypeList)("searchable",!1)("ngModel",e.aproverGroupType)("clearable",!1)("disabled","Active"==e._workFlowStatus),t.xp6(3),t.Q6J("hidden","Pending"==e._workFlowStatus||"Inactive"==e._workFlowStatus),t.xp6(3),t.Q6J("hidden",!e.updateButtonShowing),t.xp6(3),t.Q6J("ngForOf",e.approverTypeByGroupTypeIdList)}}function Q(r,p){if(1&r){const e=t.EpF();t.TgZ(0,"div",74)(1,"div",75),t._UZ(2,"img",76),t.qZA(),t.TgZ(3,"div",77)(4,"h5",78),t._uU(5),t.qZA(),t.TgZ(6,"small",79),t._uU(7),t.qZA()(),t.TgZ(8,"button",80),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,n=t.oxw(2);return t.KtG(n.toAssignUser(i))})("click",function(){t.CHM(e);const i=t.oxw(2).$implicit;return t.KtG(i.dismiss("Cross click"))}),t._UZ(9,"i",81),t.qZA()()}if(2&r){const e=t.oxw().$implicit,o=t.oxw(2);t.xp6(2),t.hYB("src","",o.imagUrl,"",e.profileImageUrl,"",t.LSH),t.xp6(3),t.Oqu(e.fullName),t.xp6(2),t.Oqu(e.roleName),t.xp6(1),t.Q6J("disabled",e.isSelected)}}function P(r,p){if(1&r){const e=t.EpF();t.TgZ(0,"div",74)(1,"div",75),t._UZ(2,"img",76),t.qZA(),t.TgZ(3,"div",77)(4,"h5",78),t._uU(5),t.qZA(),t.TgZ(6,"small",79),t._uU(7),t.qZA()(),t.TgZ(8,"button",80),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,n=t.oxw(2);return t.KtG(n.toAssignUser(i))})("click",function(){t.CHM(e);const i=t.oxw(2).$implicit;return t.KtG(i.dismiss("Cross click"))}),t._UZ(9,"i",81),t.qZA()()}if(2&r){const e=t.oxw().$implicit,o=t.oxw(2);t.xp6(2),t.hYB("src","",o.imagUrl,"",e.profileImageUrl,"",t.LSH),t.xp6(3),t.Oqu(e.fullName),t.xp6(2),t.Oqu(e.roleName),t.xp6(1),t.Q6J("disabled",e.isSelected)}}function Y(r,p){if(1&r&&(t.ynx(0),t.YNc(1,Q,10,5,"div",73)(2,P,10,5,"div",73),t.BQk()),2&r){const e=p.index;t.xp6(1),t.Q6J("ngIf",e%2==0),t.xp6(1),t.Q6J("ngIf",e%2!=0)}}function R(r,p){if(1&r){const e=t.EpF();t.TgZ(0,"div",59)(1,"div",60)(2,"div",61)(3,"h4",62),t._uU(4,"Select User"),t.qZA(),t.TgZ(5,"button",63),t.NdJ("click",function(){const n=t.CHM(e).$implicit;return t.KtG(n.dismiss("Cross click"))})("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.addNoSelectionApproveUser(i._index))}),t.TgZ(6,"span",64),t._uU(7,"\xd7"),t.qZA()()(),t.TgZ(8,"div",65)(9,"input",66),t.NdJ("ngModelChange",function(i){t.CHM(e);const n=t.oxw();return t.KtG(n.filterBy=i)})("input",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.filter())}),t.qZA()(),t.TgZ(10,"div",67),t._UZ(11,"hr",68),t.qZA()()(),t.TgZ(12,"div",69)(13,"div",1),t.YNc(14,Y,3,2,"ng-container",70),t.qZA()(),t.TgZ(15,"div",71)(16,"button",72),t.NdJ("click",function(){const n=t.CHM(e).$implicit;return t.KtG(n.dismiss("cancel"))})("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.addNoSelectionApproveUser(i._index))}),t._uU(17," Cancel "),t.qZA()()}if(2&r){const e=t.oxw();t.xp6(9),t.Q6J("ngModel",e.filterBy),t.xp6(5),t.Q6J("ngForOf",e.filteredUsers)}}function $(r,p){if(1&r){const e=t.EpF();t.TgZ(0,"div",82)(1,"div",59)(2,"button",83),t.NdJ("click",function(){const n=t.CHM(e).$implicit;return t.KtG(n.dismiss("Cross click"))}),t.qZA()(),t.TgZ(3,"div",84)(4,"div",85),t._UZ(5,"lord-icon",86),t.TgZ(6,"div",87)(7,"h4"),t._uU(8,"Delete Workflow, Approver, and Reviewer?"),t.qZA(),t.TgZ(9,"p",88),t._uU(10," Are you sure you want to delete the workflow, approver, and reviewer? Once removed, the workflow will be without any associated process. "),t.qZA()()(),t.TgZ(11,"div",89)(12,"button",90),t.NdJ("click",function(){const n=t.CHM(e).$implicit;return t.KtG(n.close("Close click"))}),t._UZ(13,"i",91),t._uU(14," Close "),t.qZA(),t.TgZ(15,"button",92),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.deleteHandler())})("click",function(){const n=t.CHM(e).$implicit;return t.KtG(n.close("Close click"))}),t._uU(16," Yes, Delete It! "),t.qZA()()()()}}const V=[{path:"",component:b,children:[{path:"",pathMatch:"full",redirectTo:"listworkflow"},{path:"listworkflow",component:N},{path:"configurationworkflow",component:(()=>{class r{constructor(e,o,i,n){this.workflowService=e,this.router=o,this.modalService=i,this.userService=n,this.breadCrumbItems=[{label:"Workflow"},{label:"Workflow Settings",active:!0}],this.label="Workflow",this.workflowDetailsObject={},this.configurationWorkflowDetailsList=[],this.imagUrl=B.N.apiUrl,this.count=0,this.approverTypeByGroupTypeIdLength=0,this.approverTypeByGroupTypeIdList=[],this.updateButtonShowing=!1,this.showWorkflowSetup=!1,this.filteredUsers=[],this.aproverGroupUserType=[],this.masterApproverGroupTypeList=[],this.workflowDetailsObject={...this.workflowService.wfItem},this._globalDepartmentId=this.workflowDetailsObject.departmentId,this._globalCompanyId=this.workflowDetailsObject.companyId,this._globalDepartmentName=this.workflowDetailsObject.departmentName,0==this.workflowDetailsObject.departmentId||null==this.workflowDetailsObject.departmentId?this.router.navigate(["application-settings/workflow-setup/listworkflow"]):(this.getWorkflowDetails(this._globalDepartmentId),this.getMasterApproverGroupTypeList())}ngOnInit(){}getWorkflowDetails(e){this.workflowService.getWorkflowMasterByDepartment(e).subscribe(o=>{this.configurationWorkflowDetailsList=o.data})}returnClassWithStatus(e){return"Pending"===e?"ri-checkbox-blank-circle-line me-2 text-warning":"Active"===e?"ri-checkbox-blank-circle-line me-2 text-success":"Inactive"===e?"ri-checkbox-blank-circle-line me-2 text-danger":""}returnClassBabgeWithStatus(e){return"Pending"===e?"badge bg-warning-subtle text-warning badge-border":"Active"===e?"badge bg-success-subtle text-success badge-border":"Inactive"===e?"badge bg-danger-subtle text-danger badge-border":""}toCheckUpdateButtonShowing(){0!=this.approverTypeByGroupTypeIdLength&&(this.updateButtonShowing=this.approverTypeByGroupTypeIdList.length==this.count)}getApproverTypeByGroupTypeId(e){this.count=0,this.toCheckUpdateButtonShowing(),this.typeId=e,this.filteredUsers.forEach(o=>{o.isSelected=!1}),this.aproverGroupUserType=[],this.workflowService.getApproverTypeByGroupTypeId(e,this._globalDepartmentId,this.masterWorkFlowId).subscribe(o=>{this.approverTypeByGroupTypeIdList=o.data,this.approverTypeByGroupTypeIdLength=this.approverTypeByGroupTypeIdList.length,this.approverTypeByGroupTypeIdList.forEach(i=>{i.isSelected=!1})})}sendConfigDetails(e){this.getUserListByCompany(this._globalCompanyId,this._globalDepartmentId),this._masterWorkFlowSetupId=e.masterWorkflowSetupId,this._workFlowStatus=e.status,this._workFlowName=e.workflowName,this.aproverGroupType=e.aproverGroupTypeId,this.showWorkflowSetup=!0,this.count=0,this.masterWorkFlowId=e.masterWorkflowId,this.toCheckUpdateButtonShowing(),this.getApproverTypeByGroupTypeId(this.aproverGroupType)}getMasterApproverGroupTypeList(){this.workflowService.getMasterApproverGroupTypeList().subscribe(e=>{this.masterApproverGroupTypeList=e.data},e=>{})}getShowWorkFlowSetup(e){this.aproverGroupType=e,this.showWorkflowSetup=!0,this.getApproverTypeByGroupTypeId(this.aproverGroupType)}submitInsertWorkflowUser(){this.requestData=[],this.approverTypeByGroupTypeIdList.forEach(o=>{this.requestData.push({DepartmentId:this._globalDepartmentId,UserId:o.userId,AproverGroupTypeId:o.aproverGroupTypeId,AproverTypeId:o.aproverTypeId,MasterWorkflowSetupId:o.masterWorkflowSetupId})}),this.workflowService.postInsertWorkflowUser(this.requestData).subscribe(o=>{this.success(o),this._workFlowStatus="Active",this.getWorkflowDetails(this._globalDepartmentId),this.getApproverTypeByGroupTypeId(this.typeId)})}success(e){g().fire({toast:!0,position:"top-end",icon:"success",title:e.message,showConfirmButton:!1,timer:3e3})}error(e){g().fire({toast:!0,position:"top-end",icon:"warning",title:e.error.message||e.message,showConfirmButton:!1,timer:3e3})}confirmUpdate(e,o){this._index=o,this.modalService.open(e,{ariaLabelledBy:"modal-basic-title",centered:!0,size:"xl",backdrop:"static",keyboard:!1})}addApproveUser(e,o){this.approverTypeByGroupTypeIdList[o].isSelected=!0,this.approverSeq=e}removeApproveUser(e,o,i){this.filteredUsers.forEach(n=>{n.id==i&&(n.isSelected=!1)}),this.aproverGroupUserType=[],this.approverTypeByGroupTypeIdList[o].isSelected=!1,this.approverTypeByGroupTypeIdList.forEach(n=>{n.seq==e&&(n.fullName=null,n.isSelected=!1,n.userId=null,n.masterWorkFlowId=0,n.masterWorkflowSetupId=0)}),this.count=this.count-1,this.toCheckUpdateButtonShowing(),this.approverTypeByGroupTypeIdLength=this.approverTypeByGroupTypeIdList.length}sweetAlertDeleteConfirmation(e){this.modalService.open(e,{centered:!0})}sweetAlertUpdateUserConfirmation(){g().fire({title:"Are you sure   ?",text:"Assign User data to be updated",icon:"info",showCancelButton:!0,cancelButtonColor:"#FF3366",confirmButtonText:"<span class='swal2-confirm '> Yes, Update it!</span>"}).then(e=>{e.isConfirmed&&(setTimeout(()=>{this.updateUserHandler()},1e3),g().fire("Update!","Your assign user updated.","success"))})}updateUserHandler(){this.requestData=[],this.approverTypeByGroupTypeIdList.forEach(o=>{this.requestData.push({UserId:o.userId,AproverGroupTypeId:o.aproverGroupTypeId,MasterWorkflowUserId:o.masterWorkflowUserId,MasterWorkflowSetupId:o.masterWorkflowSetupId})}),this.workflowService.postUpdateWorkflowUser(this.requestData).subscribe(o=>{this.success(o),this.getWorkflowDetails(this._globalDepartmentId),this.getApproverTypeByGroupTypeId(this.typeId)},o=>{this.error(o)})}goback(){this.router.navigate(["/workflowsetup/workflow/listworkflow"])}deleteHandler(){this.workflowService.postRemoveWorkflowSetup({MasterWorkflowSetupId:this._masterWorkFlowSetupId}).subscribe(o=>{this.success(o),this._workFlowStatus="Inactive",this.getWorkflowDetails(this._globalDepartmentId),this.getApproverTypeByGroupTypeId(this.typeId)},o=>{this.error(o)})}addNoSelectionApproveUser(e){this.approverTypeByGroupTypeIdList[e].isSelected=!1}toAssignUser(e){this.filteredUsers.forEach(o=>{o.id==e.id&&(o.isSelected=!0)}),this.approverTypeByGroupTypeIdList.forEach(o=>{o.seq==this.approverSeq&&(o.fullName=e.fullName,o.userId=e.id,o.masterWorkFlowId=this.masterWorkFlowId,o.masterWorkflowSetupId=this._masterWorkFlowSetupId,o.isSelected=!0)}),this.count=this.count+1,this.toCheckUpdateButtonShowing(),this.approverTypeByGroupTypeIdLength=this.approverTypeByGroupTypeIdList.length}filter(){this.filteredUsers=[...this.userList.filter(e=>e.fullName.toLowerCase().includes(this.filterBy.trim().toLowerCase()))]}getUserDetails(e){this.userService.getUserListByCompanyId(e).subscribe(o=>{this.userList=o.data,this.filteredUsers=[...this.userList],this.filteredUsers.forEach(i=>{i.isSelected=!1})})}goBack(){this.router.navigate(["/application-settings/workflow-setup/listworkflow"])}getUserListByCompany(e,o){this.workflowService.getUserListByCompany(e,o).subscribe(i=>{this.userList=i.data,this.filteredUsers=[...this.userList],this.filteredUsers.forEach(n=>{n.isSelected=!1})})}static{this.\u0275fac=function(o){return new(o||r)(t.Y36(k.z),t.Y36(m.F0),t.Y36(d.FF),t.Y36(q.i))}}static{this.\u0275cmp=t.Xpm({type:r,selectors:[["app-configuration"]],features:[t._Bn([d.NM,d.FF])],decls:35,vars:6,consts:[[3,"title","breadcrumbItems"],[1,"row"],[1,"col-xl-4","pe-0","stretch-card"],[1,"card","config"],[1,"card-body"],[1,"col-md"],[1,"fs-18","mb-1"],[1,"fs-13","text-uppercase","text-muted"],[1,"mail-list","mt-1","d-inline-flex","mb-0"],["href","javascript:void(0)",1,"me-3"],[1,"ri-checkbox-blank-circle-line","me-2","text-success"],[1,"ri-checkbox-blank-circle-line","me-2","text-danger"],[1,"ri-checkbox-blank-circle-line","me-2","text-warning"],[1,"mt-0","mb-0"],["class","mail-list mt-1",4,"ngFor","ngForOf"],[1,"col-xl-8","ps-0","stretch-card"],["class","text-center",4,"ngIf"],[4,"ngIf"],[1,"d-flex","justify-content-end","px-2","mb-3"],[1,"btn","btn-soft-primary","waves-effect","back-button","me-2",3,"click"],["modalConfirm2",""],["deleteModel",""],[1,"mail-list","mt-1"],["href","javascript:void(0)",3,"click"],[3,"ngClass"],[1,"text-center"],[1,"row","justify-content-center"],[1,"col-lg-9"],[1,"mt-4","fw-semibold"],[1,"text-muted","mt-3"],[1,"row","justify-content-center","mt-5","mb-2"],[1,"col-sm-7","col-8"],["src","assets/images/verification-img.png","alt","",1,"img-fluid"],[1,"row","align-items-baseline"],[1,"col-lg-auto","pe-0"],[1,"fs-19","mb-1"],[1,"col-lg-auto","ps-1"],[1,"col-lg","text-end"],[1,"fs-13",3,"ngClass"],[1,"mb-3","mt-2"],[1,"row","align-items-center","justify-content-between","mt-2"],[1,"col-lg","mb-2"],[1,"mr-2"],["bindLabel","approverGroupTypeName","bindValue","aproverGroupTypeId",3,"items","searchable","ngModel","clearable","disabled","ngModelChange","change"],[1,"col-lg","text-end","mb-2"],["type","button",1,"btn","btn-danger","btn-label","waves-effect","waves-light","me-2",3,"hidden","click"],[1,"ri-close-circle-line","label-icon","align-middle","fs-16","me-2"],["type","button",1,"btn","btn-primary",3,"hidden","click"],["class","row align-items-center",4,"ngFor","ngForOf"],[1,"row","align-items-center"],[1,"fs-15","mb-0"],["class","col-md text-end",4,"ngIf"],[1,"ri-user-add-line"],[1,"ri-user-follow-fill"],[1,"col-md","text-end"],["type","button",1,"btn","btn-outline-primary","btn-icon",3,"hidden","click"],[1,"fs-12","ri-user-settings-line"],["type","button",1,"btn","btn-outline-danger","btn-icon",3,"hidden","click"],[1,"fs-12","ri-user-unfollow-fill"],[1,"modal-header"],[1,"row","w-100"],[1,"col-md-12","d-flex","justify-content-between","mb-1"],["id","modal-title",1,"modal-title","mb-2"],["type","button","aria-label","Close button","aria-describedby","modal-title",1,"close",3,"click"],["aria-hidden","true"],[1,"col-md-12","mb-2"],["type","search","placeholder","Search User...",1,"form-control",3,"ngModel","ngModelChange","input"],[1,"col-md-12"],[1,"mb-0","mt-1"],[1,"modal-body","modal-scrollbar"],[4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-danger",3,"click"],["class","col-md-6 d-flex align-items-center",4,"ngIf"],[1,"col-md-6","d-flex","align-items-center"],[1,"flex-shrink-0","me-2","avatar-xxs"],["alt","",1,"img-fluid","rounded-circle",3,"src"],[1,"flex-grow-1","chat-user-box","overflow-hidden"],[1,"fs-14","text-truncate","mb-0"],[1,"text-muted","text-truncate","mb-0"],[1,"btn","btn-icon","btn-sm","btn-soft-info","rounded-pill",3,"disabled","click"],[1,"bx","bx-plus","fs-14"],[1,"modal-content"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gsqxdxog.json","trigger","loop","colors","primary:#405189,secondary:#f06548",2,"width","90px","height","90px"],[1,"mt-4","pt-2","fs-15","mx-4","mx-sm-5"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"],[1,"ri-close-line","me-1","align-middle"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(o,i){1&o&&(t._UZ(0,"app-breadcrumbs",0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",1)(6,"div",5)(7,"h5",6),t._uU(8,"Workflow List"),t.qZA(),t.TgZ(9,"h6",7),t._uU(10),t.qZA(),t.TgZ(11,"div",8)(12,"a",9),t._UZ(13,"span",10),t._uU(14," Active "),t.qZA(),t.TgZ(15,"a",9),t._UZ(16,"span",11),t._uU(17," Inactive "),t.qZA(),t.TgZ(18,"a",9),t._UZ(19,"span",12),t._uU(20," Pending "),t.qZA()(),t._UZ(21,"hr",13),t.YNc(22,j,4,2,"div",14),t.qZA()()()()(),t.TgZ(23,"div",15)(24,"div",3)(25,"div",4),t.YNc(26,J,10,1,"div",16)(27,H,26,11,"div",17),t.qZA(),t.TgZ(28,"div",18)(29,"button",19),t.NdJ("click",function(){return i.goBack()}),t._uU(30,"Back"),t.qZA()()()()(),t.YNc(31,R,18,2,"ng-template",null,20,t.W1O)(33,$,17,0,"ng-template",null,21,t.W1O)),2&o&&(t.Q6J("title",i.label)("breadcrumbItems",i.breadCrumbItems),t.xp6(10),t.hij(" ",i._globalDepartmentName," "),t.xp6(12),t.Q6J("ngForOf",i.configurationWorkflowDetailsList),t.xp6(4),t.Q6J("ngIf",!i.showWorkflowSetup),t.xp6(1),t.Q6J("ngIf",i.showWorkflowSetup))},dependencies:[c.mk,c.sg,c.O5,h.Fj,h.JJ,h.On,C.w9,x.n],styles:[".config[_ngcontent-%COMP%]{border-radius:0!important}"]})}}return r})()}]}];let X=(()=>{class r{static{this.\u0275fac=function(o){return new(o||r)}}static{this.\u0275mod=t.oAB({type:r})}static{this.\u0275inj=t.cJS({imports:[m.Bz.forChild(V),m.Bz]})}}return r})();var tt=s(9364),et=s(6903),ot=s(6208);let it=(()=>{class r{static{this.\u0275fac=function(o){return new(o||r)}}static{this.\u0275mod=t.oAB({type:r})}static{this.\u0275inj=t.cJS({imports:[c.ez,X,tt.xD,h.u5,h.UX,d.IJ,C.A0,d.XC,d.M,et.X,ot.m,d.Oz]})}}return r})()},9455:(T,f,s)=>{s.d(f,{V:()=>g});var c=s(9862),m=s(553),t=s(9212),b=s(2787),v=s(5035);let g=(()=>{class _{constructor(a,l,y){this._http=a,this._route=l,this.authService=y}GetCompanyListDrobDown(a){return this._http.post(m.N.apiUrl+"api/V2_Master/GetCompanyListDrobDown",a,{headers:(new c.WM).set("Content-Type","application/json").set("Authorization","Bearer "+this.token)})}GetClientListDrobDown(a){return this._http.post(m.N.apiUrl+"api/V2_Master/GetClientListDrobDown",a,{headers:(new c.WM).set("Content-Type","application/json").set("Authorization","Bearer "+this.token)})}GetDepartmentListDrobDown(a){return this._http.post(m.N.apiUrl+"api/V2_Master/GetDepartmentListDrobDown",a,{headers:(new c.WM).set("Content-Type","application/json").set("Authorization","Bearer "+this.token)})}GetCategoryListDrobDown(a){return this._http.post(m.N.apiUrl+"api/V2_Master/GetCategoryListDrobDown",a,{headers:(new c.WM).set("Content-Type","application/json").set("Authorization","Bearer "+this.token)})}GetSubCategoryListDrobDown(a){return this._http.post(m.N.apiUrl+"api/V2_Master/GetSubCategoryListDrobDown",a,{headers:(new c.WM).set("Content-Type","application/json").set("Authorization","Bearer "+this.token)})}GetVendorListDrobDown(a){return this._http.post(m.N.apiUrl+"api/V2_Master/GetVendorListDrobDown",a,{headers:(new c.WM).set("Content-Type","application/json").set("Authorization","Bearer "+this.token)})}GetLocationListDrobDown(a){return this._http.post(m.N.apiUrl+"api/V2_Master/GetLocationListDrobDown",a,{headers:(new c.WM).set("Content-Type","application/json").set("Authorization","Bearer "+this.token)})}getCountryList(){return this._http.get(m.N.apiUrl+"api/Master/GetCountryList",{headers:(new c.WM).set("Content-Type","application/json")})}getCountryListDrobDown(){return this._http.get(m.N.apiUrl+"api/V2_Master/GetCountryListDrobDown",{headers:(new c.WM).set("Content-Type","application/json")})}getClientForApplicationSettingDrobDown(a){return this._http.post(m.N.apiUrl+"api/V2_Master/GetClientForApplicationSettingDrobDown",a,{headers:(new c.WM).set("Content-Type","application/json").set("Authorization","Bearer "+this.token)})}getV2_UserListDD(a){return this._http.post(m.N.apiUrl+"api/Maintenance/GetV2_UserListDD",a,{headers:(new c.WM).set("Content-Type","application/json").set("Authorization","Bearer "+this.token)})}static{this.\u0275fac=function(l){return new(l||_)(t.LFG(c.eN),t.LFG(b.F0),t.LFG(v.$))}}static{this.\u0275prov=t.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"})}}return _})()},7337:(T,f,s)=>{s.d(f,{N:()=>c});const c={production:!0,defaultauth:"fackbackend",firebase:{apiKey:"AIzaSyBI2NBh9HXM8VXKKKnrgKB3KZwcfzrf1E8",authDomain:"facilitymanagement-82978.firebaseapp.com",projectId:"facilitymanagement-82978",storageBucket:"facilitymanagement-82978.appspot.com",messagingSenderId:"577841958574",appId:"1:577841958574:web:f6913e27e5915051fde73f",vapidKey:"BElFlpEl4njyX3vyHl-OR0gMU3rHhX_1Gp7YQxh6XEISq6jsl3NqiZon9tjOrDw8JtDJ7G2CGDE21F-keO3gzcQ"},apiUrl:"https://smstesting.api.vwatch.ai/",ApiKey:"gh8955bae-1c40-485a-b@c0-aI6622e56f73",ApiKeySOA:"k89m5bae-5c40-985a-bb30-h74602e56f731"}}}]);